function boxAudioOnEnd(t) {
	window.channels[0].complete()
}
function mallViewPay() {
	window.removeEventListener("click", mallViewPay, !1), window.open(window.location.protocol + "//" + window.location.host + "/home/pay?platForm=h5")
}
function BClick(t) {
	"WEB" == OrgWeb.getInstance().getOrgPlat() && "" != ADUI.getInstance().adurl && window.open(ADUI.getInstance().adurl)
}
function OnKeyDown(t) {
	if (Main.LOADCOMPLETE) {
		var e = !1;
		GloableData.getInstance().gameInfo.isPc ? 90 != t.keyCode && 17 != t.keyCode || (e = !0) : 90 == t.keyCode && (e = !0), !e || UIManager.getInstance().hasViewShow() && UIManager.getInstance().isSCUIShow || UIManager.getInstance().startQuickRun()
	}
}
function OnKeyUp(t) {
	if (Laya.stage.on(OEvent.KEY_DOWN, this, OnKeyDown), Main.LOADCOMPLETE) {
		if (67 == t.keyCode && GloableData.getInstance().gameMainData.System.ShowSystemMenu && !UIManager.getInstance().hasVeiw(view.TitleUIMediator.NAME)) {
			if (!UIManager.getInstance().hasViewShow()) return void UIManager.getInstance().gameSystemUILayer.openSysMenu(null, null);
			if (UIManager.getInstance().hasVeiw(view.SysMenuUIMediator.NAME) || view.SCustomUI.getInstance().visible && 10001 == view.SCustomUI.F_Index) return void UIManager.getInstance().closeAllView(!0)
		}
		UIManager.getInstance().mouseUp()
	}
}
function WebUserLoginOut() {
	try {
		var t = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
		t && (t.getUserBuyAllItem(), setTimeout(t.getGameFlower.bind(t), 2e3));
		var e = OrgWeb.getInstance().getUid();
		GloableData.getInstance().savekey = "save" + GloableData.getInstance().gameMainData.Headr.guid + e, GloableData.getInstance().dGameSystem.varsEx.initData(), GloableData.getInstance().dGameSystem.varsEx.loadExData(!1), view.SCustomUI.getInstance().needShowSendFlower = !1
	} catch (i) {
		console.log(i)
	}
}
function WebUserLoginIn() {
	WebUserLoginOut()
}
function WebUserChangeData(t) {
	try {
		SetFocus(), OrgWeb.getInstance().sendReWidFlower();
		var e = OrgWeb.getInstance().getUid();
		if (GloableData.getInstance().savekey = "save" + GloableData.getInstance().gameMainData.Headr.guid + e, GloableData.getInstance().changeFileData(), null != t) return void ORGMenuUI.getInstance().refreshBtn();
		view.PaySendUI.showUI && (OrgWeb.getInstance().initSendFlower(null, function() {}), view.PaySendUI.getInstance().refreshFlowerNum()), UIManager.getInstance().orgWebFreeLayer && UIManager.getInstance().orgWebFreeLayer.checkFreeStatus(), ORGMenuUI.getInstance().drawControlNum(), OrgWeb.getInstance().webInit(null, null);
		var i = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
		i && (i.getUserBuyAllItem(), setTimeout(i.getGameFlower.bind(i), 2e3)), view.SCustomUI.getInstance().visible && -1 !== view.SCustomUI.F_Index && view.SCustomUI.getInstance().showUI(), SFloatButtonUI.getInstance().updateControls(), "" == GloableData.getInstance().initUserName && (GloableData.getInstance().initUserName = OrgWeb.getInstance().getUserInitName()), GloableData.getInstance().initUserId || (GloableData.getInstance().initUserId = OrgWeb.getInstance().getUid())
	} catch (a) {
		console.log(a)
	}
}
function changeAjaxData() {
	HPLockProxy.getInstance().init(function(t) {
		console.log("成功还是失败====", t), org_event.HPLockEvent.LOCKEVENT && org_event.HPLockEvent.LOCKEVENT.refreshEvent()
	})
}
function WebAudioControl() {
	try {
		OrgWeb.getInstance().getVoiceState() ? mgr.AudioMgr.instance.mute() : mgr.AudioMgr.instance.unmute()
	} catch (t) {
		console.log(t)
	}
}
function WebFontSpeedControl(t) {
	"low" == t ? GloableData.getInstance().talkSpeedType = GloableStaticData.DRAW_SPEED_TYPE_LOW : "center" == t ? GloableData.getInstance().talkSpeedType = GloableStaticData.DRAW_SPEED_TYPE_CENTER : "fast" == t && (GloableData.getInstance().talkSpeedType = GloableStaticData.DRAW_SPEED_TYPE_FAST)
}
function SetFocus() {
	try {
		window.dispatchEvent(new Event("focus"))
	} catch (t) {}
}
function ShareCGSuccess() {
	try {
		EventCenter.dispatchEvent(new GameEvent(GameEventConstant.CLOSE_CGUI_VIEW))
	} catch (t) {}
}
function iOSCallJSBack() {
	console.log(window.iOSinfo), OrgWeb.getInstance().setiOSinfo(), WebUserChangeData(null)
}
function intervalRun() {}
var UIResouecrLoad = function() {
		function t() {}
		return t.loadBGMUI = function() {
			var e = [],
				i = t.getSourceURL(GloableData.getInstance().gameMainData.System.BGM);
			i.push("Graphics/UI/" + GloableData.getInstance().gameMainData.System.Title.logoImage);
			for (var a in i) {
				var n = GloableData.getInstance().getFileListItemURL(i[a]);
				"" === n || ORG.loader.getRes(n) || e.push(n)
			}
			e.length > 0 ? ORG.loader.load(e, OHandler.create(t, t.loadComplete, [t.BGMUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.BGMUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.BGMUI_TYPE, -1)
		}, t.loadStoryUI = function(e) {
			var i = [],
				a = t.getSourceURL(e);
			for (var n in a) {
				var s = GloableData.getInstance().getFileListItemURL(a[n]);
				"" === s || ORG.loader.getRes(s) || i.push(s)
			}
			i.length > 0 ? ORG.loader.load(i, OHandler.create(t, t.loadComplete, [t.BGMUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.BGMUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.BGMUI_TYPE, -1)
		}, t.loadCGUI = function() {
			function e(t) {
				if (t.length <= 0) return "";
				var e = t.lastIndexOf("."),
					i = t.substring(0, e),
					a = t.substring(e);
				return i + "_S" + a
			}
			var i = GloableData.getInstance().gameMainData.System.CG,
				a = [],
				n = t.getSourceURL(GloableData.getInstance().gameMainData.System.CG);
			n.push("Graphics/UI/" + GloableData.getInstance().gameMainData.System.Title.logoImage);
			for (var s = i.cglist.length, o = 0; s > o; ++o) {
				var r = void 0,
					h = void 0;
				GloableData.getInstance().dGameSystem.other.cg_index.indexOf(o) >= 0 ? (h = e(i.cglist[o].cgpath + "").toLowerCase().replace(/\\/g, "/"), -1 != h.lastIndexOf("/") && (h = h.substring(h.lastIndexOf("/") + 1, h.length)), r = "Graphics/System/" + h) : i.nopic.name.length > 0 ? (h = "" + i.nopic.name.toLowerCase().replace(/\\/g, "/"), -1 != h.lastIndexOf("/") && (h = h.substring(h.lastIndexOf("/") + 1, h.length)), r = "Graphics/System/" + h) : r = "", "" !== r && n.push(r)
			}
			for (var o in n) {
				var l = GloableData.getInstance().getFileListItemURL(n[o]);
				"" === l || ORG.loader.getRes(l) || a.push(l)
			}
			a.length > 0 ? ORG.loader.load(a, OHandler.create(t, t.loadComplete, [t.CGUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.CGUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.CGUI_TYPE, -1)
		}, t.loadMallUI = function() {
			var e = [],
				i = t.getSourceURL(GloableData.getInstance().gameMallBin);
			for (var a in GloableData.getInstance().gameMallBin.items) {
				var n = GloableData.getInstance().gameMallBin.items[a],
					s = t.getSourceURL(n);
				Array.prototype.push.apply(i, s)
			}
			for (var o in i) {
				var r = GloableData.getInstance().getFileListItemURL(i[o]);
				"" === r || ORG.loader.getRes(r) || e.push(r)
			}
			e.length > 0 ? ORG.loader.load(e, OHandler.create(t, t.loadComplete, [t.MALLUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.MALLUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.MALLUI_TYPE, -1)
		}, t.loadPaySendUI = function() {}, t.loadReplayUI = function() {
			var e = [],
				i = t.getSourceURL(GloableData.getInstance().gameMainData.System.Replay);
			for (var a in i) {
				var n = GloableData.getInstance().getFileListItemURL(i[a]);
				"" === n || ORG.loader.getRes(n) || e.push(n)
			}
			e.length > 0 ? ORG.loader.load(e, OHandler.create(t, t.loadComplete, [t.REPLAYUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.REPLAYUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.REPLAYUI_TYPE, -1)
		}, t.loadSaveFileUI = function() {
			var e = [],
				i = t.getSourceURL(GloableData.getInstance().gameMainData.System.SaveData);
			for (var a in i) {
				var n = GloableData.getInstance().getFileListItemURL(i[a]);
				"" === n || ORG.loader.getRes(n) || e.push(n)
			}
			e.length > 0 ? ORG.loader.load(e, OHandler.create(t, t.loadComplete, [t.SAVEFILEUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.SAVEFILEUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.SAVEFILEUI_TYPE, -1)
		}, t.loadCustomUI = function(e) {
			var i = [],
				a = [],
				n = GloableData.getInstance().gameMainData.System.Cuis[e];
			if (n) for (var s = 0, o = n.controls; s < o.length; s++) {
				var r = o[s];
				switch (r.type) {
				case 0:
					var h = r.isUserIndex ? GloableData.getInstance().dGameSystem.vars.getVar(r.index) - 1 : r.index,
						l = GloableData.getInstance().gameMainData.System.Buttons[h];
					l && "" != l.image1.name && a.push(PreLoader.btnShifter + l.image1.name), l && "" != l.image2.name && a.push(PreLoader.btnShifter + l.image2.name);
					for (var c = 0, g = r.event; c < g.length; c++) {
						var u = g[c];
						215 == u.Code && "" != u.Argv[1] && a.push(PreLoader.otherShifter + u.Argv[1])
					}
					break;
				case 2:
					"" != r.image1 && a.push(PreLoader.otherShifter + r.image1), "" != r.image2 && a.push(PreLoader.otherShifter + r.image1);
					break;
				case 3:
					"" != r.image1 && a.push(PreLoader.otherShifter + r.image1), "" != r.image2 && a.push(PreLoader.otherShifter + r.image1);
					break;
				case 4:
					r.image1 = r.image1.replace("/", ""), r.image2 = r.image2.replace("/", ""), a.push(PreLoader.otherShifter + r.image1), a.push(PreLoader.otherShifter + r.image1)
				}
			}
			for (var p in a) {
				var d = GloableData.getInstance().getFileListItemURL(a[p]);
				"" === d || ORG.loader.getRes(d) || i.push(d)
			}
			i.length > 0 ? ORG.loader.load(i, OHandler.create(t, t.loadComplete, [t.COUSTOMUI_TYPE, e]), OHandler.create(t, t.setLoadProcess, [t.COUSTOMUI_TYPE, e], !1), OLoader.IMAGE) : t.loadComplete(t.COUSTOMUI_TYPE, e)
		}, t.loadSettingUI = function() {
			var e = [],
				i = t.getSourceURL(GloableData.getInstance().gameMainData.System.Setting);
			for (var a in i) {
				var n = GloableData.getInstance().getFileListItemURL(i[a]);
				"" === n || ORG.loader.getRes(n) || e.push(n)
			}
			e.length > 0 ? ORG.loader.load(e, OHandler.create(t, t.loadComplete, [t.SETUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.SETUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.SETUI_TYPE, -1)
		}, t.loadSysMenuUI = function() {
			var e = [],
				i = t.getSourceURL(GloableData.getInstance().gameMainData.System.GameMenu);
			for (var a in i) {
				var n = GloableData.getInstance().getFileListItemURL(i[a]);
				"" === n || ORG.loader.getRes(n) || e.push(n)
			}
			e.length > 0 ? ORG.loader.load(e, OHandler.create(t, t.loadComplete, [t.SYSMENUUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.SYSMENUUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.SYSMENUUI_TYPE, -1)
		}, t.loadTitleUI = function() {
			var e = [],
				i = t.getSourceURL(GloableData.getInstance().gameMainData.System.Title);
			for (var a in i) {
				var n = GloableData.getInstance().getFileListItemURL(i[a]);
				"" === n || ORG.loader.getRes(n) || e.push(n)
			}
			e.length > 0 ? ORG.loader.load(e, OHandler.create(t, t.loadComplete, [t.TITLEUI_TYPE, -1]), OHandler.create(t, t.setLoadProcess, [t.TITLEUI_TYPE, -1], !1), OLoader.IMAGE) : t.loadComplete(t.TITLEUI_TYPE, -1)
		}, t.loadArrRes = function(e, i, a, n, s) {
			void 0 === n && (n = null), void 0 === s && (s = !0), e.length > 0 ? (s && GloableData.getInstance().pauseCurrentLine(), ORG.loader.load(e, OHandler.create(t, t.loadOtherComplete, [i, a, n, s]), OHandler.create(t, t.setOtherProcess, null, !1), OLoader.IMAGE)) : a && a.call(i)
		}, t.setOtherProcess = function(t) {
			UIManager.getInstance().maskSprite.update("加载中..." + Math.floor(100 * t) + "%"), t >= 1 && UIManager.getInstance().maskSprite.hide()
		}, t.loadOtherComplete = function(t, e, i, a) {
			UIManager.getInstance().maskSprite.visible && UIManager.getInstance().maskSprite.update("加载中...100%"), a && GloableData.getInstance().resumeCurrentLine(), UIManager.getInstance().maskSprite.hide(), e && e.call(t, i)
		}, t.loadComplete = function(t, e) {
			void 0 === e && (e = -1), UIManager.getInstance().maskSprite.visible && UIManager.getInstance().maskSprite.update("加载中...100%"), UIManager.getInstance().maskSprite.hide(), -1 !== e ? EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, {
				type: t,
				index: e
			})) : EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, t))
		}, t.setLoadProcess = function(t, e, i) {
			void 0 === e && (e = -1), UIManager.getInstance().maskSprite.update("加载中..." + Math.floor(100 * i) + "%"), i >= 1 && UIManager.getInstance().maskSprite.hide()
		}, t.getSourceURL = function(t) {
			var e = [];
			for (var i in t) if (t[i] instanceof data.DFileName) e.push(PreLoader.uiShifter + t[i].name);
			else if (t[i] instanceof data.DButtonIndex) {
				var a = GloableData.getInstance().gameMainData.System.Buttons[t[i].index];
				e.push(PreLoader.btnShifter + a.image1.name), e.push(PreLoader.btnShifter + a.image2.name)
			}
			return e
		}, t.BGMUI_TYPE = "BGMUI_TYPE", t.CGUI_TYPE = "CGUI_TYPE", t.MALLUI_TYPE = "MALLUI_TYPE", t.PAYUI_TYPE = "PAYUI_TYPE", t.REPLAYUI_TYPE = "REPLAYUI_TYPE", t.SAVEFILEUI_TYPE = "SAVEFILEUI_TYPE", t.COUSTOMUI_TYPE = "COUSTOMUI_TYPE", t.SETUI_TYPE = "SETUI_TYPE", t.SYSMENUUI_TYPE = "SYSMENUUI_TYPE", t.TITLEUI_TYPE = "TITLEUI_TYPE", t
	}(),
	EventManager = function() {
		function t() {}
		return t.addEventListener = function(t, e, i, a, n) {
			void 0 === n && (n = null), t.on(e, a, i, n)
		}, t.removeEventListener = function(t, e, i, a, n) {
			void 0 === n && (n = null), t.off(e, a, i, n)
		}, t.dispatchEvent = function(t, e, i) {
			t.event(e, i)
		}, t
	}(),
	OrgEventBase = function() {
		function t(t, e) {
			this.data = [], this.finished = !1, this.data = t, this.mainLine = e
		}
		return t.prototype.finish = function() {
			this.finished = !0, this.data && 100 == this.data.Code && GloableData.getInstance().wmodPlayUrl && mgr.AudioMgr.instance.stop(audio.ChannelEnum.vo), this.mainLine && (this.mainLine.eventRunFinish = !0)
		}, t
	}(),
	utils;
!
function(t) {
	function e(t) {
		for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
		for (var a, n = !0, s = 0, o = e.length; o > s; s++) if (a = e[s], void 0 === t[a]) {
			n = !1;
			break
		}
		return n
	}
	function i(t, e, i, a) {
		a || (a = i);
		var n, s, o, r = Math.min(i.length, a.length);
		for (n = 0; r > n; n++) if (e.hasOwnProperty(a[n])) {
			if (s = e[a[n]], null !== s) switch (typeof s) {
			case "string":
			case "number":
			case "boolean":
				t[i[n]] = s;
				break;
			case "object":
				if (s.slice) t[i[n]] = s.slice();
				else {
					var h = {},
						l = void 0;
					for (l in s) h[l] = s[l];
					t[i[n]] = h
				}
			}
		} else switch (o = t[i[n]], typeof o) {
		case "string":
			t[i[n]] = "";
			break;
		case "number":
			t[i[n]] = 0;
		case "boolean":
			t[i[n]] = 0;
			break;
		case "object":
			t[i[n]] = null
		}
	}
	function a(t, e, a) {
		var s;
		return s = a.map(function(t) {
			return n(t)
		}), i(t, e, a, s)
	}
	function n(t) {
		if (!t || 0 === t.length) return "";
		var e = t.charCodeAt(0);
		return e >= 97 && 122 >= e ? (e -= 32, String.fromCharCode(e) + t.substring(1)) : t
	}
	function s(t, e) {
		if (e.x == t.x) return e.y > t.y ? .5 * Math.PI : 1.5 * Math.PI;
		if (e.y == t.y) return e.x > t.x ? 0 : Math.PI;
		var i = Math.atan((t.y - e.y) / (t.x - e.x));
		return e.x < t.x && e.x > t.x ? i + Math.PI : e.x < t.x && e.x < t.x ? i + Math.PI : e.x > t.x && e.x < t.x ? i + 2 * Math.PI : i
	}
	function o(t, e) {
		var i;
		return i = t.x == e.x ? t.y != e.y ? Math.abs(t.y - e.y) : 0 : t.y == e.y ? t.x != e.x ? Math.abs(t.x - e.x) : 0 : Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2))
	}
	function r(t, e) {
		var i = e - t + 1,
			a = Math.random() * i;
		return Math.floor(a) + t
	}
	function h(t) {
		return 180 / 3.1415926 * t
	}
	function l(t) {
		return 3.1415926 / 180 * t
	}
	function c(t, e) {
		return t.x >= e.x && t.y >= e.y && t.x <= e.x + e.width && t.y <= e.y + e.height
	}
	function g(t) {
		var e = new RegExp("(^|&)" + t + "=([^&]*)(&|$)", "i"),
			i = window.location.search.substr(1).match(e);
		return null != i ? i[2] : null
	}
	function u(t) {
		return ""
	}
	function p(t) {
		var e = [t[0] / 255, 0, 0, 0, t[0], 0, t[1] / 255, 0, 0, t[1], 0, 0, t[2] / 255, 0, t[2], 0, 0, 0, 1, 0];
		return e
	}
	function d(t) {
		t = t.substring(1), t = t.toLowerCase();
		for (var e = new Array, i = 0; 3 > i; i++) e[0] = t.substr(2 * i, 2), e[3] = "0123456789abcdef", e[1] = e[0].substr(0, 1), e[2] = e[0].substr(1, 1), e[20 + i] = 16 * e[3].indexOf(e[1]) + e[3].indexOf(e[2]);
		var a = parseInt(e[20]),
			n = parseInt(e[21]),
			s = parseInt(e[22]),
			o = [1, 0, 0, 0, a, 0, 1, 0, 0, n, 0, 0, 1, 0, s, 0, 0, 0, 1, 0];
		return o
	}
	function m() {
		var t = GloableData.getInstance().gameMainData.System,
			e = new OText;
		return e.font = t.FontName, e.fontSize = t.FontSize, e.color = t.FontUiColor.getColorToUint(), e
	}
	function v() {
		var t = GloableData.getInstance().gameMainData.System,
			e = new OText;
		return e.font = t.FontName, e.fontSize = t.FontSize, e.color = t.FontTalkColor.getColorToUint(), e
	}
	function f(t, e) {
		void 0 === e && (e = 1);
		var i, a = Math.floor(t / 1e3),
			n = Math.floor(a % 60),
			s = Math.floor(a / 60);
		s = s >= 60 ? Math.floor(s % 60) : s;
		var o = Math.floor(a / 3600),
			r = 0;
		if (4 == e || 5 == e || 6 == e) {
			Math.floor(o / 24);
			o = Math.floor(o % 24)
		}
		switch (e) {
		case 1:
			i = I(s) + ":" + I(n);
			break;
		case 2:
			i = I(o) + ":" + I(s) + ":" + I(n);
			break;
		case 3:
			i = a.toString();
			break;
		case 4:
			i = 1 > r ? I(o) + ":" + I(s) + ":" + I(n) : r + "天" + I(o) + ":" + I(s) + ":" + I(n);
			break;
		case 5:
			i = 1 > r ? 1 > o ? s + "分" : o + "小时" + s + "分钟" : r + "天";
			break;
		case 6:
			i = I(o) + ":" + I(s)
		}
		return i
	}
	function I(t, e, i, a) {
		void 0 === e && (e = "0"), void 0 === i && (i = 2), void 0 === a && (a = !0);
		for (var n = "", s = i - t.toString().length, o = 0; s > o; o++) n += e;
		return a ? n + t : t + n
	}
	function y(t, e) {
		if (void 0 === e && (e = 1), t.toString().length <= 10 && (t = Math.ceil(1e3 * t)), 0 >= t) return "";
		var i = new Date(t),
			a = i.getFullYear(),
			n = i.getMonth() + 1,
			s = i.getDate(),
			o = i.getHours(),
			r = i.getMinutes();
		return 1 == e ? a + "/" + I(n) + "/" + I(s) + " " + I(o) + ":" + I(r) : void 0
	}
	function _() {
		var t = window.document.location.href.toString(),
			e = t.split("?"),
			i = {
				PC: 0,
				basePath: ""
			};
		if (e.length > 1) {
			e[1];
			var a = e[1].split("&");
			for (var n in a) {
				var s = a[n].split("=");
				i[s[0]] = decodeURI(s[1])
			}
		}
		return i
	}
	function w(t, e, i, a, n) {
		var s = t,
			o = -e,
			r = i,
			h = -a,
			l = r - s,
			c = h - o,
			g = 3.1415926 / 180 * n,
			u = l * Math.cos(g) + c * Math.sin(g),
			p = -l * Math.sin(g) + c * Math.cos(g),
			d = u + s,
			m = p + o;
		return {
			x: d,
			y: -m
		}
	}
	function b(t, e) {
		for (var i = StringUtil.getAnalysisText(t, e), a = 0, n = 0, s = new OText; i.texts.length > 0;) {
			var o = i.texts.shift();
			o.x = a, o.y = n, a += o.width, s.addtext(o)
		}
		return s
	}
	function S(t, e, i, a, n, s) {
		for (var o = GloableData.getInstance().textLineHeight, r = 0, h = 0, l = 0; e > 0;) {
			e--;
			var c = n.texts.shift();
			c.x = i, c.y = a, i += c.width, r += c.width, s.addtext(c)
		}
		r > l && (l = r), t.newline ? (a += o, h += o) : h += o, s.size(l, h)
	}
	function E(t, e) {
		document.cookie = t + "=" + e
	}
	function x(t) {
		var e = document.cookie;
		t += "=";
		var i = e.indexOf(t);
		if (-1 != i) {
			var a = i + t.length,
				n = e.indexOf(";", a); - 1 == n && (n = e.length);
			var s = e.substring(a, n);
			return s
		}
		return ""
	}
	function M() {
		for (var t = GloableData.getInstance().gameMainData.System.SaveData, e = "save" + GloableData.getInstance().gameMainData.Headr.guid + OrgWeb.getInstance().getUid(), i = 0; i < t.max; i++) {
			var a = localStorage.getItem(e + i);
			if (a) return !0
		}
		return !1
	}
	t.hasProperties = e, t.copyProperties = i, t.copyPropertiesFromStaticData = a, t.initialUpper = n, t.pointToAngle = s, t.getPointDistance = o, t.randomInt = r, t.radiusToDegree = h, t.degreeToRadius = l, t.pointInRect = c, t.GetQueryString = g, t.getResourceTypeByFileName = u, t.getMatByWebColor = p, t.getMatByColor = d, t.getOText = m, t.getTalkOText = v, t.getTime = f, t.addPlace = I, t.getDateByTime = y, t.getGet = _, t.f_funcConvertEarthPos = w, t.getBitFontByString = b, t.showAllTextByConfig = S, t.addCookie = E, t.getCookie = x, t.localHasSaveData = M
}(utils || (utils = {}));
var Tips = function() {
		function t() {}
		return t.tip = function(e, i, a, n) {
			void 0 === e && (e = ""), void 0 === i && (i = "#FF0000"), void 0 === a && (a = 2500), void 0 === n && (n = !0), t.MASK_BACK && t.dispose(null), n && (t.MASK_BACK = new UIMaskSprite, t.MASK_BACK.offAll(), t.MASK_BACK.visible = !0, OTween.to(t.MASK_BACK, {
				alpha: 0
			}, 300, Laya.Ease.backIn, OHandler.create(t, t.dispose), 1e3, !0, !0), UIManager.getInstance().addChild(t.MASK_BACK));
			var s = new OSprite,
				o = new OText(!0);
			o.width = GloableData.getInstance().gameInfo.gGameWidth, o.wordWrap = !0, o.text = e, o.color = i, o.align = "center", o.fontSize = 24, s.addChild(o), s.pivotX = GloableData.getInstance().gameInfo.gGameWidth / 2, s.pivotY = o.height / 2, s.x = GloableData.getInstance().gameInfo.gGameWidth / 2, s.y = GloableData.getInstance().gameInfo.gGameHeight / 2, s.scaleX = .1, s.scaleY = .1, UIManager.getInstance().addChild(s), OTween.to(s, {
				scaleX: 1,
				scaleY: 1
			}, 500, Laya.Ease.backOut, null, null, !0, !0), OTween.to(s, {
				y: 100,
				scaleX: 0,
				scaleY: 0
			}, 300, Laya.Ease.backIn, null, 1e3, !1, !0)
		}, t.dispose = function(e) {
			t.MASK_BACK && (UIManager.getInstance().removeChild(t.MASK_BACK), t.MASK_BACK.offAll(), t.MASK_BACK.destroy(!0), t.MASK_BACK = null)
		}, t.showSaveFileTitleFlower = function() {
			t.MASK_BACK && (t.MASK_BACK.destroy(!0), t.MASK_BACK = null), t.MASK_BACK = new UIMaskSprite, t.MASK_BACK.offAll(), t.MASK_BACK.visible = !0, UIManager.getInstance().addChild(t.MASK_BACK);
			var e = new OButton(view.SaveFileUI.serverPath + "res/sysmenu/req_player_addflowers_0.png?v=" + playerVer);
			t.MASK_BACK.addChild(e), e.x = GloableData.getInstance().gameInfo.gGameWidth / 2 - e.width / 2, e.y = GloableData.getInstance().gameInfo.gGameHeight / 2 - e.height / 2, e.click(t, t.dispose)
		}, t.prototype.onChange = function() {
			console.log("onChange")
		}, t.TASK_TIP = "提示：\n任务功能已经不可编辑和创建，已使用的任务功能可以继续使用，建议您删除工程里面的相关任务。", t
	}(),
	TimeManager = function() {
		function t() {
			this.timeFunction = new Dictionary, this.dataId = 1, this.delta = GloableStaticData.GAME_RUN_TIME, this.tiemKey = 0
		}
		return t.prototype.startTimeout = function() {
			this.tiemKey = setTimeout(this.start.bind(this), this.delta)
		}, t.prototype.start = function() {
			this.tiemKey = setTimeout(this.startTime.bind(this), this.delta)
		}, t.prototype.startTime = function() {
			if (clearTimeout(this.tiemKey), this.timeFunction && this.timeFunction._keys) for (var t in this.timeFunction._keys) {
				var e = this.timeFunction._keys[t],
					i = this.timeFunction.getValue(e);
				for (var a in i) {
					var n = i[a];
					if (!this.isPause || n.isEffect) if (n && n.isCall && 2 == n.type && n.repeatCount <= 0) this.removeTime(n);
					else if (GloableData.getInstance().quickRun && n.isJump) n.isCall = !0, n.repeatCount > 0 && n.repeatCount--, n.callBack.call(n.thisArg, n.args), n.runDelay = 0;
					else {
						var s = this.delta;
						n.runDelay += s, n.runDelay >= n.delay && (n.isCall = !0, n.repeatCount > 0 && n.repeatCount--, n.callBack.call(n.thisArg, n.args), n.runDelay = n.runDelay - n.delay)
					}
				}
			}
			return this.tiemKey = setTimeout(this.startTime.bind(this), this.delta), !1
		}, t.getInstance = function() {
			return null == t._instance && (t._instance = new t), t._instance
		}, t.prototype.addTime = function(t) {
			var e = this.timeFunction.getValue(t.delay);
			e ? e.push(t) : (e = [], e.push(t), this.timeFunction.add(t.delay, e)), this.dataId++
		}, t.prototype.stopTime = function() {
			clearTimeout(this.tiemKey)
		}, t.prototype.removeAll = function() {
			var t, e = this.timeFunction._keys.length;
			for (t = 0; e > t; t++) {
				var i = this.timeFunction._keys[t],
					a = this.timeFunction.getValue(i);
				if (a) {
					for (var n = 0; n < a.length; n++) {
						var s = a[t];
						s && s.isRemove && (a.splice(n, 1), n--)
					}
					0 === a.length && (a = null, this.timeFunction.remove(i))
				}
			}
		}, t.prototype.pauseTime = function() {
			this.isPause = !0
		}, t.prototype.resumeTime = function() {
			this.isPause = !1
		}, t.prototype.removeTime = function(t) {
			this.pauseTime();
			var e = this.timeFunction.getValue(t.delay);
			if (e) {
				for (var i = 0; i < e.length; i++) {
					var a = e[i];
					if (a.id == t.id) {
						e.splice(i, 1);
						break
					}
				}
				0 === e.length && (e = null, this.timeFunction.remove(t.delay))
			}
			this.resumeTime()
		}, t.prototype.removeTimeById = function(t) {
			this.pauseTime();
			for (var e = 0; e < this.timeFunction.values().length; e++) for (var i = this.timeFunction.values()[e], a = 0; a < i.length; a++) {
				var n = i[a];
				if (n.id == t.id) return i.splice(a, 1), 0 === i.length && (i = null, this.timeFunction.remove(this.timeFunction.keys()[e])), void this.resumeTime()
			}
			this.resumeTime()
		}, t.prototype.removeTimeByIdNumber = function(t) {
			this.pauseTime();
			for (var e = 0; e < this.timeFunction.values().length; e++) for (var i = this.timeFunction.values()[e], a = 0; a < i.length; a++) {
				var n = i[a];
				if (n.id == t) return i.splice(a, 1), 0 === i.length && (i = null, this.timeFunction.remove(this.timeFunction.keys()[e])), void this.resumeTime()
			}
			this.resumeTime()
		}, t
	}(),
	GameTimeData = function() {
		function t() {
			this.id = TimeManager.getInstance().dataId, this.type = 1, this.delay = 0, this.repeatCount = 0, this.runDelay = 0, this.isJump = !0, this.isEffect = !1, this.isRemove = !0, this.isCall = !1
		}
		return t
	}(),
	StringUtil = function() {
		function t() {}
		return t.TextToTemp = function(t, e, i, a) {
			var n = a.substring(a.indexOf(t) + 1, a.indexOf(e));
			a = a.substring(n.length + t.length + e.length, a.length);
			var s = n.replace(i, "$1"),
				o = s.replace(" ", "");
			return o
		}, t.TextToTemp2 = function(t, e, i, a) {
			var n = t.substring(t.indexOf(e) + 1, t.indexOf(i));
			t = t.substring(n.length + e.length + i.length, t.length);
			var s = new Array(n.replace(a, "$1"), t);
			return s
		}, t.TextAnalysis = function(t) {
			var e = t;
			return e = e.replace(/\|[Nn]/g, String.fromCharCode(200)), e = e.replace(/\\[Nn]/g, String.fromCharCode(200)), e = e.replace(/\\[Ww]\[([0-9]+)]/g, String.fromCharCode(201) + "[$1]"), e = e.replace(/\\[Cc]\[([0-9]+,[0-9]+,[0-9]+)]/g, String.fromCharCode(202) + "[$1]"), e = e.replace(/\\[Ss]\[([0-9]+)]/g, String.fromCharCode(203) + "[$1]"), e = e.replace(/\\\|/g, String.fromCharCode(204)), e = e.replace(/\\\./g, String.fromCharCode(205)), e = e.replace(/\\\>/g, String.fromCharCode(206)), e = e.replace(/\\\=/g, String.fromCharCode(207)), e = e.replace(/\\[Vv]\[([0-9]+)]/g, String.fromCharCode(208) + "[$1]"), e = e.replace(/\\[Xx]\[([0-9]+)]/g, String.fromCharCode(209) + "[$1]"), e = e.replace(/\\[Tt]\[([0-9]+)]/g, String.fromCharCode(210) + "[$1]")
		}, t.TextAnalysisNull = function(t) {
			var e = t;
			return e = e.replace(/\|[Nn]/g, ""), e = e.replace(/\\[Nn]/g, ""), e = e.replace(/\\[Ww]\[([0-9]+)]/g, ""), e = e.replace(/\\[Cc]\[([0-9]+,[0-9]+,[0-9]+)]/g, ""), e = e.replace(/\\[Ss]\[([0-9]+)]/g, ""), e = e.replace(/\\\|/g, ""), e = e.replace(/\\\./g, ""), e = e.replace(/\\\>/g, ""), e = e.replace(/\\\=/g, ""), e = e.replace(/\\[Vv]\[([0-9]+)]/g, ""), e = e.replace(/\\[Xx]\[([0-9]+)]/g, ""), e = e.replace(/\\[Tt]\[([0-9]+)]/g, "")
		}, t.madeString = function(e, i, a) {
			if (i += 1, i >= 20 || !e) return "";
			e = t.TextAnalysis(e);
			for (var n = "";;) {
				if (e.length <= 0) break;
				var s = e.substring(0, 1);
				e = e.substring(1, e.length);
				var o = s.charCodeAt(0);
				if (200 == o) n += "|n";
				else if (202 == o) {
					var r = t.TextToTemp2(e, "[", "]", "\\[([0-9| ]+[，,][0-9| ]+[，,][0-9| ]+)]");
					e = r[1], n += r[0]
				} else if (208 == o) {
					var r = t.TextToTemp2(e, "[", "]", "\\[([0-9| ]+)]");
					e = r[1];
					var h = parseInt(r[0]);
					n += GloableData.getInstance().dGameSystem.vars.getVar(h - 1)
				} else if (209 == o) {
					var r = t.TextToTemp2(e, "[", "]", "\\[([0-9| ]+)]");
					e = r[1];
					var h = parseInt(r[0]);
					n += GloableData.getInstance().dGameSystem.varsEx.getVar(h - 1)
				} else if (210 == o) {
					var r = t.TextToTemp2(e, "[", "]", "\\[([0-9| ]+)]");
					e = r[1];
					var h = parseInt(r[0]);
					n += t.madeString(GloableData.getInstance().dGameSystem.dGameString.getVar(h - 1), i, a)
				} else n += s
			}
			return 215 == a || (n = n.replace("\\", "/")), n
		}, t.stringIsNull = function(t) {
			var e = t.replace(/\\ +/g, "");
			return e = t.replace(/\\[ \\]/g, ""), e = t.replace(/\\[\r\n\\]/g, ""), e.length > 0
		}, t.updateMessage = function(e) {
			var i = t.getAnalysisText(e, GloableData.getInstance().gameMainData.System.FontUiColor.getColor()),
				a = i.message;
			return a
		}, t.replaceVTX = function(t) {
			var e, i = t,
				a = /(\\|\/)[Vv]\[([0-9]+)]/,
				n = /(\\|\/)[Tt]\[([0-9]+)]/,
				s = /(\\|\/)[Xx]\[([0-9]+)]/,
				o = /(\d+)/,
				r = i.match(a),
				h = i.match(n),
				l = i.match(s);
			return r ? (e = r[0].match(o), e && (t = t.replace(a, GloableData.getInstance().dGameSystem.vars.getVar(e[0] - 1)))) : h ? (e = h[0].match(o), e && (t = t.replace(n, GloableData.getInstance().dGameSystem.dGameString.getVar(e[0] - 1)))) : l && (e = l[0].match(o), t = t.replace(s, GloableData.getInstance().dGameSystem.varsEx.getVar(e[0] - 1))), i != t && (i = this.replaceVTX(t)), a = null, n = null, s = null, o = null, r = null, h = null, l = null, i
		}, t.arrayIsEqule = function(t, e) {
			if (!t || !e) return !1;
			if (t.length != e.length) return !1;
			for (var i = 0; i < t.length; i++) if (t[i] != e[i]) return !1;
			return !0
		}, t.createAnalysisTextData = function(e, i, a) {
			var n = this.replaceVTX(e);
			n = t.TextAnalysis(n);
			var s, o = null,
				r = null,
				h = null;
			s = GloableData.getInstance().fontBitmapData.isUserBitMap ? GloableData.getInstance().gameMainData.System.FontSize : GloableData.getInstance().sysFontSize;
			for (var l = 0;;) {
				if (n.length <= 0) break;
				var c = 0,
					g = !1,
					u = !1,
					p = 0,
					d = !1,
					m = void 0,
					v = n.substr(0, 1);
				n = n.substr(1, n.length);
				var f = v.charCodeAt(0);
				switch (f) {
				case 200:
					u = !0;
					break;
				case 201:
					c = parseInt(this.TextToTemp("[", "]", /\[([0-9]+)]/, n)), n = n.replace(/\[([0-9]+)]/, "");
					break;
				case 202:
					var I = new data.OColor(this.TextToTemp("[", "]", /\[([0-9]+,[0-9]+,[0-9]+)]/, n));
					o = I.getColorToUint(), h = I.getBitmapColor(), n = n.replace(/\[([0-9]+,[0-9]+,[0-9]+)]/, "");
					break;
				case 203:
					p = parseInt(this.TextToTemp("[", "]", /\[([0-9]+)]/, n)), n = n.replace(/\[([0-9]+)]/, "");
					break;
				case 204:
					c = 10;
					break;
				case 205:
					c = 5;
					break;
				case 206:
					d = !0;
					break;
				case 207:
					g = !0;
					break;
				default:
					l++, m = new OSprite, h ? r = utils.getMatByWebColor(h) : a && (r = utils.getMatByColor(a));
					var y = GloableData.getInstance().fontBitmapData.bitFontMaps.getValue(v),
						_ = GloableData.getInstance().fontBitmapData.fontFilterMaps.getValue(v);
					if (!y) {
						l--;
						break
					}
					if (GloableData.getInstance().fontBitmapData.isUserBitMap) {
						var w = y.sp.clone();
						if (null !== r) {
							var b = new Laya.ColorFilter(r);
							t.arrayIsEqule(GloableData.getInstance().fontBitmapData.white, r) || (w.filters = [b])
						}
						if (GloableData.getInstance().gameMainData.System.FontStroke) {
							var S = _;
							for (var E in S) m.addChild(S[E].clone())
						}
						if (GloableData.getInstance().gameMainData.System.FontFilter) {
							var S = _;
							for (var x in S) m.addChild(S[x].clone())
						}
						m.addChild(w)
					} else {
						var M = new OText;
						M.text = v, o ? M.color = o : a ? M.color = a : M.color = GloableData.getInstance().gameMainData.System.FontTalkColor.getColorToUint(), M.fontSize = s;
						var C = 0;
						if (M.width < y.w ? C = (y.w - M.width) / 2 : M.width > y.w && (M.scaleX = y.w / M.width), M.x = C, GloableData.getInstance().gameMainData.System.FontFilter) {
							var D = new OText;
							D.color = GloableData.getInstance().gameMainData.System.FontStyleColor, D.text = v, D.x = 1, D.y = 1, D.fontSize = s, m.addChild(D), m.addChild(M)
						} else GloableData.getInstance().gameMainData.System.FontStroke && (M.stroke = 2, M.strokeColor = GloableData.getInstance().gameMainData.System.FontStyleColor), M.fontSize = s, m.addChild(M)
					}
					m.width = y ? y.w : GloableData.getInstance().fontBitmapData.maxW, m.height > GloableData.getInstance().fontBitmapData.maxH || (m.height = y ? y.h : GloableData.getInstance().fontBitmapData.maxH), y = null, _ = null, i.message += v, i.texts.push(m)
				}
				if (0 != c || g || u || 0 != p || d) {
					var G = new utils.FontConfig;
					G.textNum = l, G.waitFrame = c, G.newline = u, G.isWaitPlayer = g, G.drawSpeed = p, G.skipMessage = d, i.configs.push(G), l = 0
				}
			}
			if (n = null, l > 0) {
				var G = new utils.FontConfig;
				G.textNum = l, i.configs.push(G)
			}
		}, t.createCharTextData = function(e, i, a, n) {
			var s = this.replaceVTX(e);
			s = t.TextAnalysis(s);
			for (var o = a ? a : GloableData.getInstance().gameMainData.System.FontTalkColor.getColorToUint(), r = n ? n : GloableData.getInstance().sysFontSize, h = 0;;) {
				if (s.length <= 0) break;
				var l = 0,
					c = !1,
					g = !1,
					u = 0,
					p = !1,
					d = void 0,
					m = s.substr(0, 1);
				s = s.substr(1, s.length);
				var v = m.charCodeAt(0);
				switch (v) {
				case 200:
					g = !0;
					break;
				case 201:
					l = parseInt(this.TextToTemp("[", "]", /\[([0-9]+)]/, s)), s = s.replace(/\[([0-9]+)]/, "");
					break;
				case 202:
					var f = new data.OColor(this.TextToTemp("[", "]", /\[([0-9]+,[0-9]+,[0-9]+)]/, s));
					o = f.getColorToUint(), s = s.replace(/\[([0-9]+,[0-9]+,[0-9]+)]/, "");
					break;
				case 203:
					u = parseInt(this.TextToTemp("[", "]", /\[([0-9]+)]/, s)), s = s.replace(/\[([0-9]+)]/, "");
					break;
				case 204:
					l = 10;
					break;
				case 205:
					l = 5;
					break;
				case 206:
					p = !0;
					break;
				case 207:
					c = !0;
					break;
				default:
					h++, d = new OSprite;
					var I = new OText;
					I.text = m, I.color = o, I.height = 30, I.fontSize = r, d.addChild(I);
					var y = {
						h: I.textHeight,
						w: I.textWidth
					};
					d.width = y ? y.w : GloableData.getInstance().fontBitmapData.maxW, d.height = y.h, i.message += m, i.texts.push(d)
				}
				if (0 != l || c || g || 0 != u || p) {
					var _ = new utils.FontConfig;
					_.textNum = h, _.waitFrame = l, _.newline = g, _.isWaitPlayer = c, _.drawSpeed = u, _.skipMessage = p, i.configs.push(_), h = 0
				}
			}
			if (h > 0) {
				var _ = new utils.FontConfig;
				_.textNum = h, i.configs.push(_)
			}
		}, t.getAnalysisText = function(e, i) {
			var a = new utils.CharFontUtil;
			return t.createAnalysisTextData(e, a, i), a
		}, t.getCharText = function(e, i, a) {
			var n = new utils.CharFontUtil;
			return t.createCharTextData(e, n, i, a), n
		}, t.getVarBitmapFont = function(e, i, a) {
			var n = new OSprite;
			if (t.fontString != i.url) {
				t.fontString = i.url;
				for (var s = i.width / 10, o = i.height, r = 0, h = 0, l = 0; 10 > l; l++) {
					var c = new OSprite;
					c.size(s, o), c.texture = OTexture.createFromTexture(i, r, h, s, o), r += s, t.varBitmapFontMaps || (t.varBitmapFontMaps = new Dictionary), t.varBitmapFontMaps.add(l, c)
				}
			}
			var g = null;
			a && (g = utils.getMatByColor(a));
			for (var u = 0, p = 0; p < e.length; p++) {
				var d = parseInt(e.charAt(p)),
					m = t.varBitmapFontMaps.getValue(d),
					v = m.clone();
				if (v.x = u, u += v.width, a) {
					var f = new Laya.ColorFilter(g),
						I = utils.getMatByColor(GloableData.getInstance().gameMainData.System.FontStyleColor),
						y = new Laya.ColorFilter(I);
					if (GloableData.getInstance().gameMainData.System.FontStroke) {
						var _ = m.clone();
						_.x = v.x + 1, _.y = 1, _.filters = [y], _.cacheAsBitmap = !0, n.addChild(_);
						var w = m.clone();
						w.x = v.x + 1, w.y = 0, w.filters = [y], w.cacheAsBitmap = !0, n.addChild(w);
						var b = m.clone();
						b.x = v.x + 1, b.y = -1, b.filters = [y], b.cacheAsBitmap = !0, n.addChild(b);
						var S = m.clone();
						S.x = v.x, S.y = -1, S.filters = [y], S.cacheAsBitmap = !0, n.addChild(S);
						var E = m.clone();
						E.x = v.x - 1, E.y = -1, E.filters = [y], E.cacheAsBitmap = !0, n.addChild(E);
						var x = m.clone();
						x.x = v.x - 1, x.y = 0, x.filters = [y], x.cacheAsBitmap = !0, n.addChild(x);
						var M = m.clone();
						M.x = v.x - 1, M.y = 1, M.filters = [y], M.cacheAsBitmap = !0, n.addChild(M);
						var C = m.clone();
						C.x = v.x, C.y = 1, C.filters = [y], C.cacheAsBitmap = !0, n.addChild(C)
					}
					if (GloableData.getInstance().gameMainData.System.FontFilter) {
						var E = m.clone();
						E.x = v.x + 1, E.y = 1, E.filters = [y], E.cacheAsBitmap = !0, n.addChild(E)
					}
					v.filters = [f]
				}
				n.addChild(v)
			}
			return n
		}, t.fontString = "", t
	}(),
	ReportorError = function() {
		function t() {
			this.startTime = (new Date).getTime(), this.upAnyData = {
				clientType: "9",
				winSys: "",
				clientVer: "",
				deviceModel: "",
				deviceID: "",
				errorType: "",
				runTime: "",
				memoryTotal: "",
				memoryCanUse: "",
				userID: "",
				gameID: "",
				nowTime: "",
				catchTitle: "",
				browserVer: "",
				catchCotent: "",
				internetType: "",
				"default": ""
			}
		}
		return t.prototype.getBrowser = function() {
			var t = navigator.userAgent,
				e = t.indexOf("Opera") > -1,
				i = t.indexOf("compatible") > -1 && t.indexOf("MSIE") > -1 && !e,
				a = t.indexOf("Windows NT 6.1; Trident/7.0;") > -1 && !i,
				n = t.indexOf("Firefox") > -1,
				s = t.indexOf("Safari") > -1 && -1 == t.indexOf("Chrome"),
				o = t.indexOf("Chrome") > -1 && t.indexOf("Safari") > -1;
			if (i) {
				var r = new RegExp("MSIE (\\d+\\.\\d+);");
				r.test(t);
				var h = parseFloat(RegExp.$1);
				return 7 == h ? "IE7" : 8 == h ? "IE8" : 9 == h ? "IE9" : 10 == h ? "IE10" : 11 == h ? "IE11" : "0"
			}
			return n ? "FF" : e ? "Opera" : s ? "Safari" : o ? "Chrome" : a ? "Edge" : "Other"
		}, t.prototype.createErrorInfo = function(t, e) {
			var i = (new Date).getTime(),
				a = Math.ceil((i - this.startTime) / 1e3);
			if (this.upAnyData.runTime = a, this.upAnyData.nowTime = i, this.upAnyData.clientVer || (this.upAnyData.clientVer = playerVer), this.upAnyData.browserVer || (this.upAnyData.browserVer = this.getBrowser()), e ? this.upAnyData.errorType = "crash" : this.upAnyData.errorType = "", this.upAnyData.gameID || (this.upAnyData.gameID = GloableData.getInstance().gameInfo.gIndex), this.upAnyData.winSys || (this.upAnyData.winSys = ""), !this.upAnyData["default"]) {
				var n = void 0;
				n = GloableData.getInstance().gameInfo.isPc ? "PC" : OrgWeb.getInstance().getOrgPlat(), this.upAnyData["default"] = n + "_" + OrgWeb.getInstance().getPlatForm()
			}
			var s = OrgWeb.getInstance().getUid();
			this.upAnyData.userID = s, e ? (this.upAnyData.catchTitle = e.message, this.upAnyData.catchCotent = this.repliceAll(e.stack)) : (this.upAnyData.catchTitle = "", this.upAnyData.catchCotent = "");
			var o = {
				t: t,
				i: this.errorInfoToString()
			};
			return o
		}, t.prototype.repliceAll = function(t) {
			return t.indexOf("|") > -1 ? (t = t.replace("|", "T"), this.repliceAll(t)) : t
		}, t.prototype.upError = function(t) {
			var e = this.createErrorInfo("client_error", t);
			/*Sam*///AjaxManager.getInstance().sendAjaxPost(HttpURL.Ajax_Url.REPORT_SERVER, e, this, this.upErrorComplete)
		}, t.prototype.upInit = function() {
			var t = this.createErrorInfo("project");
			/*Sam*///AjaxManager.getInstance().sendAjaxPost(HttpURL.Ajax_Url.REPORT_SERVER, t, this, this.upInitComplete)
		}, t.prototype.upErrorComplete = function(t) {
			console.log(t)
		}, t.prototype.upInitComplete = function(t) {
			console.log(t)
		}, t.prototype.errorInfoToString = function() {
			var t = "";
			for (var e in this.upAnyData) t += this.upAnyData[e] + "|";
			return t = t.substr(0, t.length - 1)
		}, t
	}(),
	ClientInfo = function() {
		function t() {
			this.userAgent = navigator.userAgent
		}
		return t.prototype.detectOS = function() {
			var t = this.userAgent,
				e = "Win32" == navigator.platform || "Windows" == navigator.platform,
				i = "Mac68K" == navigator.platform || "MacPPC" == navigator.platform || "Macintosh" == navigator.platform || "MacIntel" == navigator.platform;
			if (i) return "Mac";
			var a = "X11" == navigator.platform && !e && !i;
			if (a) return "Unix";
			var n = String(navigator.platform).indexOf("Linux") > -1;
			if (n) return "Linux";
			if (e) {
				var s = t.indexOf("Windows NT 5.0") > -1 || t.indexOf("Windows 2000") > -1;
				if (s) return "Win2000";
				var o = t.indexOf("Windows NT 5.1") > -1 || t.indexOf("Windows XP") > -1;
				if (o) return "WinXP";
				var r = t.indexOf("Windows NT 5.2") > -1 || t.indexOf("Windows 2003") > -1;
				if (r) return "Win2003";
				var h = t.indexOf("Windows NT 6.0") > -1 || t.indexOf("Windows Vista") > -1;
				if (h) return "WinVista";
				var l = t.indexOf("Windows NT 6.1") > -1 || t.indexOf("Windows 7") > -1;
				if (l) return "Win7"
			}
			return "other"
		}, t
	}(),
	utils;
!
function(t) {
	var e;
	!
	function(t) {}(e = t.ErrorEnum || (t.ErrorEnum = {}));
	var i = function() {
			function t() {}
			return t.prototype.report = function(t) {}, t
		}();
	t.Reportor = i
}(utils || (utils = {}));
var ErrorMessage = function() {
		function t() {}
		return t.getInstance = function() {
			return t._instance || (t._instance = new t), t._instance
		}, t.prototype.getErrorStringByCode = function(t) {
			var e = "";
			switch (t) {
			case 1:
				e = "成功";
				break;
			case 10100:
				e = "余额不足";
				break;
			case 10101:
				e = "购买失败";
				break;
			case 10102:
				e = "充值失败";
				break;
			case 10201:
				e = "参数不足";
				break;
			case 10202:
				e = "url授权校验失败";
				break;
			case 10301:
				e = "使用道具失败";
				break;
			case 10401:
				e = "获取商城内道具列表失败";
				break;
			case 10402:
				e = "获取道具详情失败";
				break;
			case 10403:
				e = "获取背包内道具列表失败";
				break;
			case 10404:
				e = "无效的玩家ID";
				break;
			case 10501:
				e = "更新支付状态失败";
				break;
			case 10601:
				e = "登录信息无效";
				break;
			case 10701:
				e = "购买失败";
				break;
			case 10702:
				e = "不允许重复购买";
				break;
			case 10999:
				e = "未知的异常";
				break;
			case 10103:
				e = "支付失败，余额不足";
				break;
			case 10801:
				e = "创建订单失败";
				break;
			case -1e4:
				e = "服务器异常，请稍后。";
				break;
			default:
				e = "请重新登陆或连接网络"
			}
			return e
		}, t._instance = null, t
	}(),
	utils;
!
function(t) {
	var e = function() {
			function t() {
				this.textNum = 0, this.waitFrame = 0, this.isWaitPlayer = !1, this.newline = !1, this.drawSpeed = 0, this.skipMessage = !1
			}
			return t
		}();
	t.FontConfig = e;
	var i = function() {
			function t() {
				this.texts = new Array, this.configs = new Array, this.message = ""
			}
			return t
		}();
	t.CharFontUtil = i
}(utils || (utils = {}));
var HPLockProxy = function() {
		function t() {
			this.reNumInit = 0, this.pmode = 0, this.eventData = null, this.eventCall = {}, this.HpNowSysTime = 0, "undefined" != typeof window.pmode ? this.pmode = parseInt(window.pmode) : this.pmode = 0
		}
		return t.getInstance = function() {
			return null == t._instance && (t._instance = new t), t._instance
		}, t.prototype.init = function(t) {
			if (void 0 === t && (t = null), this.initCall = t, this.reNumInit >= 3) return void(this.initCall && this.initCall("失败"));
			this.reNumInit++;
			var e = {
				token: OrgWeb.getInstance().getABoxToken()
			},
				i = HttpURL.Ajax_Url.GET_PH_INIT;
			AjaxManager.getInstance().sendGetAjaxJSONP(i, this.initSuc, this, this.initErr, this, e)
		}, t.prototype.initSuc = function(t) {
			try {
				var e = void 0,
					i = void 0;
				OrgWeb.getInstance().getIsClient() ? i = t : (e = window.base91.decode(t), i = JSON.parse(e)), "undefined" != typeof window.base91 && (console.log(i), 1 == parseInt(i.status) ? (console.log("成功了不做处理", i), this.initCall && this.initCall("成功")) : this.init())
			} catch (a) {}
		}, t.prototype.initErr = function(t) {
			this.init()
		}, t.prototype.getHPLockStatus = function(e, i, a, n) {
			void 0 === i && (i = null), void 0 === a && (a = null), void 0 === n && (n = null), this.eventData = {
				par: e
			}, this.eventCall.sucFn = i, this.eventCall.lockFn = a, this.eventCall.errFn = n, t.getInstance().getHPLckSYStime(this.eventData.par, this.getHPLckSysTimeCall)
		}, t.prototype.getHPLckSysTimeCall = function(t) {
			this.HpNowSysTime = t;
			var e = {
				lock_id: org_event.HPLockEvent.LOCKEVENT.lock_id,
				gindex: GloableData.getInstance().gameInfo.gIndex,
				pmode: this.pmode
			},
				i = HttpURL.Ajax_Url.GET_PH_STATUS;
			AjaxManager.getInstance().sendGetAjaxJSONP(i, this.getHPLockSuc, this, this.getHPLockErr, this, e)
		}, t.prototype.getHPLockSuc = function(t) {
			var e, i;
			if (OrgWeb.getInstance().getIsClient() ? i = t : (e = window.base91.decode(t), i = JSON.parse(e)), "undefined" != typeof window.base91) if (console.log("getHPLockSuc===", i), 1 == parseInt(i.status)) {
				var a = i.data.expire_time;
				a >= this.HpNowSysTime ? this.eventCall && this.eventCall.sucFn.call(this.eventData.par, parseInt(i.status), i) : this.eventCall && this.eventCall.errFn.call(this.eventData.par, "无效的返回")
			} else 10200 == parseInt(i.status) ? this.eventCall && this.eventCall.lockFn.call(this.eventData.par, i.msg) : this.eventCall && this.eventCall.errFn.call(this.eventData.par, i.msg);
			this.eventCall = {}, this.eventData = null
		}, t.prototype.getHPLockErr = function(t) {
			this.eventCall && this.eventCall.errFn.call(this.eventData.par, "获取接口失败了")
		}, t.prototype.getHPLckSYStime = function(t, e) {
			void 0 === e && (e = null), this.HPLckSYStimeSelf = t, this.HPLckSYStimeCall = e;
			var i = {},
				a = HttpURL.Ajax_Url.GET_SYS_TIME;
			AjaxManager.getInstance().sendGetAjaxJSONP(a, this.HPLckSYStimeSuc, this, this.HPLckSYStimeErr, this, i)
		}, t.prototype.HPLckSYStimeSuc = function(t) {
			console.log("HPLckSYStimeSuc==", t);
			var e, i;
			OrgWeb.getInstance().getIsClient() ? i = t : (e = window.base91.decode(t), i = JSON.parse(e)), "undefined" != typeof window.base91 && (console.log("HPLckSYStimeSuc==", i), 1 == parseInt(i.status) ? this.HPLckSYStimeCall && this.HPLckSYStimeCall.call(this.HPLckSYStimeSelf, parseInt(i.data.time)) : this.HPLckSYStimeCall && this.HPLckSYStimeCall.call(this.HPLckSYStimeSelf, 0))
		}, t.prototype.HPLckSYStimeErr = function(t) {
			this.HPLckSYStimeCall && this.HPLckSYStimeCall.call(this.HPLckSYStimeSelf, 0)
		}, t.prototype.getUserHp = function(t, e) {
			var i = {
				token: OrgWeb.getInstance().getABoxToken()
			},
				a = HttpURL.Ajax_Url.GAT_USER_HP;
			AjaxManager.getInstance().sendGetAjaxJSONP(a, function(i) {
				var a, n;
				if (OrgWeb.getInstance().getIsClient() ? n = i : (a = window.base91.decode(i), n = JSON.parse(a)), "undefined" != typeof window.base91) try {
					if (1 == parseInt(n.status)) t && t(n.data.hp);
					else {
						console.log("getuserHpError=============", n);
						var s = new HPLockErrorMessageView(e, GloableStaticData.REP_USE_HP);
						UIManager.getInstance().showView(s, "HPLockErrorMessageView")
					}
				} catch (o) {
					var s = new HPLockErrorMessageView(e, GloableStaticData.REP_USE_HP);
					UIManager.getInstance().showView(s, "HPLockErrorMessageView")
				}
			}, null, this.requestHpError.bind(this, e), null, i)
		}, t.prototype.requestHpError = function(t) {
			console.log("getuserHpError");
			var e = new HPLockErrorMessageView(t, GloableStaticData.REP_GET_HP);
			UIManager.getInstance().showView(e, "HPLockErrorMessageView")
		}, t.prototype.rcvUserHp = function(t) {
			if ("undefined" != typeof window.base91) {
				var e = window.base91.decode(t),
					i = JSON.parse(e);
				console.log("getuserHp=============", i, i.data.hp), 1 == parseInt(i.status)
			}
		}, t
	}(),
	CloudProxy = function() {
		function t() {
			this.headUrl = "", this.tipsAgain = !1, this.cloudData = {}, this.headUrl = HttpURL.M_C_SERVER_URL + "cloud/v1/index/"
		}
		return t.prototype.getData = function() {
			var t = {};
			t.guid = GloableData.getInstance().gameInfo.guid, t.gindex = GloableData.getInstance().gameInfo.gIndex, t.uid = OrgWeb.getInstance().getUid(), t.newClient_type = 7;
			var e = Math.ceil(Date.now() / 1e3),
				i = new Object;
			i.r = md5(e.toString()).substr(1, 3);
			var a = JSON.stringify(i),
				n = base64.urlEncoder(a),
				s = encodeURIComponent(n);
			t.auth = s, t.newTs = e;
			var o = md5("client_type=" + t.newClient_type + "&ts=" + e + "t_16b4a01f45313e88");
			return t.newSign = o, t
		}, t.getInstance = function() {
			return null == t._instance && (t._instance = new t), t._instance
		}, t.prototype.checkCloudState = function(t, e) {
			var i = this.getData(),
				a = this.headUrl + "cloud_flag?ts=" + i.newTs + "&sign=" + i.newSign + "&client_type=" + i.newClient_type;
			AjaxManager.getInstance().sendAjaxPost(a, i, this, function(i) {
				e && e.call(t, i)
			})
		}, t.prototype.downSaveData = function(t, e) {
			var i = this.getData(),
				a = this.headUrl + "cloud_load?ts=" + i.newTs + "&sign=" + i.newSign + "&client_type=" + i.newClient_type;
			AjaxManager.getInstance().sendAjaxPost(a, i, this, function(i) {
				1 == i.status ? e && e.call(t, i) : (e && e.call(t, i), Tips.tip(i.msg, "#FFFFFF"))
			})
		}, t.prototype.upSaveExData = function(t, e, i, a) {
			void 0 === i && (i = null), void 0 === a && (a = null);
			var n = this.getData();
			n.varsEx = e, n.varsType = t;
			var s = this.headUrl + "cloud_save_ex?ts=" + n.newTs + "&sign=" + n.newSign + "&client_type=" + n.newClient_type;
			AjaxManager.getInstance().sendAjaxPost(s, n, this, function(t) {
				a && a.call(i, t)
			})
		}, t.prototype.downSaveExData = function(t, e, i) {
			void 0 === e && (e = null), void 0 === i && (i = null);
			var a = this.getData();
			a.varsType = t;
			var n = this.headUrl + "cloud_load_ex?ts=" + a.newTs + "&sign=" + a.newSign + "&client_type=" + a.newClient_type;
			AjaxManager.getInstance().sendAjaxPost(n, a, this, function(t) {
				i && i.call(e, t)
			})
		}, t.prototype.upSaveData = function(t) {
			var e = this.getData();
			e.content = JSON.stringify(t);
			var i = this.headUrl + "cloud_save?ts=" + e.newTs + "&sign=" + e.newSign + "&client_type=" + e.newClient_type;
			AjaxManager.getInstance().sendAjaxPost(i, e, this, this.upSaveComplete)
		}, t.prototype.upSaveComplete = function(t) {
			if (1 == t.status) if (this.tipsAgain) {
				var e = new HPLockTip("保存成功，下载后也可以读取云存档。");
				UIManager.getInstance().popMessageLayer.addChild(e)
			} else Tips.tip("保存成功。", "#FFFFFF");
			else console.log(t.msg), Tips.tip("保存失败，请重试。", "#FFFFFF")
		}, t
	}(),
	ORGVideoMgr = function() {
		function t() {}
		return t.video = new OVideo, t
	}(),
	ORGSoundManager = function() {
		function t() {
			this.isAudio = !1, this.isWaiteStop = !1, this.channelPos = {
				BGMPosition: 0,
				BGSPosition: 0,
				SEPosition: 0,
				VoicePosition: 0
			}, this.blurBGMpos = 0, this.playBGMv = 0, this.playBGSv = 0, this.playSEv = 0, this.playVoicev = 0, GloableData.getInstance().wmodUseType ? (this.bgVolume = .1, this.seVolume = 1, this.voiceVolume = 1) : (this.bgVolume = .8, this.seVolume = .8, this.voiceVolume = .8), this.muted = !1, this.audio = new OAudio, this.isAudio = !0, "ANDROID" == OrgWeb.getInstance().getOrgPlat() && (this.isAudio = !1), this.isAudio && (this.audio.bgmV(this.bgVolume), this.audio.bgsV(this.bgVolume), this.audio.seV(this.seVolume), this.audio.voiceV(this.voiceVolume)), this.isAudio && (OrgWeb.getInstance().getIsPC() ? $("#layaCanvas").one("mousedown", function() {
				t.getInstance().initAudio()
			}) : ($("#layaCanvas").one("touchstart", function() {
				t.getInstance().initAudio()
			}), $("#layaCanvas").one("touchend", function() {
				t.getInstance().initAudio()
			})))
		}
		return t.prototype.initAudio = function() {
			this.audio.init()
		}, t.prototype.setChannelPause = function(t) {
			t && (t.stop(), OSoundManager.removeChannel(t))
		}, t.prototype.setChannelResume = function(t) {
			var e, i = 80;
			switch (t) {
			case "bgm":
				e = this._bgmPath, this.BGMChannel && (i = 100 * this.BGMChannel.volume / this.bgVolume, OSoundManager.removeChannel(this.BGMChannel), this.BGMChannel = null), this.playBGM(e, i, this.blurBGMpos), this.blurBGMpos = 0;
				break;
			case "voice":
				e = this._voicePath, this.VoiceChannel && (i = 100 * this.VoiceChannel.volume / this.voiceVolume, OSoundManager.removeChannel(this.VoiceChannel), this.VoiceChannel = null);
				break;
			case "bgs":
				e = this._bgsPath, this.BGSChannel && (i = 100 * this.BGSChannel.volume / this.bgVolume, OSoundManager.removeChannel(this.BGSChannel), this.BGSChannel = null), this.playBGS(e, i);
				break;
			case "se":
				e = this._sePath, this.SEChannel && (i = 100 * this.SEChannel.volume / this.seVolume, OSoundManager.removeChannel(this.SEChannel), this.SEChannel = null)
			}
		}, t.prototype.stageBlur = function() {
			var t = AppFacade.getInstance().getMediatorByName(view.BGMUIMediator.NAME);
			t && t.pauseSound(), this.isAudio ? this.audio.stopAll() : (this.BGMChannel && this.BGMChannel.pause(), this.BGSChannel && this.BGSChannel.pause(), this.SEChannel && this.SEChannel.pause(), this.VoiceChannel && this.VoiceChannel.pause())
		}, t.prototype.stageFocus = function(t) {
			if (void 0 === t && (t = !1), !t) {
				var e = AppFacade.getInstance().getMediatorByName(view.BGMUIMediator.NAME);
				if (e) return void e.resumeSound()
			}
			this.isAudio ? this.audio.resumeBGM() : (this.BGMChannel && this.BGMChannel.resume(), this.BGSChannel && this.BGSChannel.resume(), this.SEChannel && this.SEChannel.resume(), this.VoiceChannel && this.VoiceChannel.resume())
		}, t.getInstance = function() {
			return t._instance || (t._instance = new t), t._instance
		}, Object.defineProperty(t.prototype, "BGVolume", {
			set: function(t) {
				return this.bgVolume = t, "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box ? (this._bgmPath && window.org_box.ControlAudio(1, 0, 100 * t, GloableData.getInstance().getFileListItemURL(this._bgmPath)), void(this._bgsPath && window.org_box.ControlAudio(1, 3, 100 * t, GloableData.getInstance().getFileListItemURL(this._bgsPath)))) : this.isAudio ? void this.audio.bgmV(t) : (this.BGMChannel && (this.BGMChannel.volume = t), void(this.BGSChannel && (this.BGSChannel.volume = t)))
			},
			enumerable: !0,
			configurable: !0
		}), Object.defineProperty(t.prototype, "SEVolume", {
			set: function(t) {
				return this.seVolume = t, "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box ? void(this._sePath && window.org_box.ControlAudio(1, 1, 100 * t, GloableData.getInstance().getFileListItemURL(this._sePath))) : void(this.isAudio ? this.audio.seV(this.seVolume) : this.SEChannel && (this.SEChannel.volume = t))
			},
			enumerable: !0,
			configurable: !0
		}), Object.defineProperty(t.prototype, "VoiceVolume", {
			set: function(t) {
				return this.voiceVolume = t, "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box ? void(this._voicePath && window.org_box.ControlAudio(1, 2, 100 * t, GloableData.getInstance().getFileListItemURL(this._voicePath))) : void(this.isAudio ? this.audio.voiceV(this.voiceVolume) : this.VoiceChannel && (this.VoiceChannel.volume = t))
			},
			enumerable: !0,
			configurable: !0
		}), Object.defineProperty(t.prototype, "BGMPath", {
			get: function() {
				return this.BGMChannel && !this.BGMChannel.isStopped ? this._bgmPath : this._bgmPath
			},
			set: function(t) {
				this._bgmPath = t
			},
			enumerable: !0,
			configurable: !0
		}), Object.defineProperty(t.prototype, "BGSPath", {
			get: function() {
				return this.BGSChannel && !this.BGSChannel.isStopped ? this._bgsPath : ""
			},
			enumerable: !0,
			configurable: !0
		}), Object.defineProperty(t.prototype, "SEPath", {
			get: function() {
				return ""
			},
			enumerable: !0,
			configurable: !0
		}), Object.defineProperty(t.prototype, "VoicePath", {
			get: function() {
				return this.VoiceChannel && !this.VoiceChannel.isStopped ? this._voicePath : ""
			},
			enumerable: !0,
			configurable: !0
		}), t.prototype.resumeMusic = function() {
			this.BGMChannel && this.BGMChannel.play(), this.BGSChannel && this.BGSChannel.play(), this.SEChannel && this.SEChannel.play(), this.VoiceChannel && this.VoiceChannel.play()
		}, t.prototype.setVolume = function(t) {
			void 0 === t && (t = null);
			var e, i, a, n;
			null != t ? (0 == t && (this.muted = !0), e = i = a = n = t) : (this.muted = !1, this.stageFocus(!1), e = this.bgVolume, i = this.bgVolume, a = this.seVolume, n = this.voiceVolume), this.isAudio ? (this.audio.setMuted(this.muted), this.audio.seV(a), this.audio.voiceV(n), this.audio.bgmV(e), this.audio.bgsV(i)) : (this.BGSChannel && (this.BGSChannel.volume = i), this.BGMChannel && (this.BGMChannel.volume = e), this.SEChannel && (this.SEChannel.volume = a), this.VoiceChannel && (this.VoiceChannel.volume = n))
		}, t.prototype.playBGM = function(t, e, i) {
			void 0 === i && (i = 0);
			var a = this._bgmPath;
			if (t instanceof Object ? this._bgmPath = t.path : t = {
				path: t,
				volume: e
			}, this._bgmPath = t.path, this.bgmTimeData && (TimeManager.getInstance().removeTime(this.bgmTimeData), this.bgmTimeData = null), "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box) return void window.org_box.ControlAudio(1, 0, t.volume * this.bgVolume, GloableData.getInstance().getFileListItemURL(t.path));
			if (this.isAudio) this.playBGMv = t.volume / 100 * this.bgVolume, t.volume <= 0 ? this.audio.pauseBGM() : a == t.path ? (this.audio.bgmV(this.playBGMv), this.audio.bgm.play()) : this.audio.playBGM(GloableData.getInstance().getFileListItemURL(t.path), this.playBGMv);
			else {
				if (this.BGMChannel) {
					if (this.BGMChannel.url !== t.path) return this.BGMChannel.url === GloableData.getInstance().getFileListItemURL(t.path) ? void(t.volume <= 0 ? this.stopBGM() : this.BGMChannel.volume = this.playBGMv = t.volume / 100 * this.bgVolume) : (this.BGMChannel.stop(), this.BGMChannel = OSoundManager.playSound(GloableData.getInstance().getFileListItemURL(t.path), 0, null, null, this.channelPos.BGMPosition), t.volume <= 0 ? this.stopBGS() : this.BGMChannel && (this.BGMChannel.volume = this.playBGSv = t.volume / 100 * this.bgVolume), void(this.BGMChannel && (this.BGMChannel.loops = 1)))
				} else this.BGMChannel = OSoundManager.playSound(GloableData.getInstance().getFileListItemURL(t.path), 0, null, null, i);
				this.BGMChannel && (this.BGMChannel.loops = 1, t.volume <= 0 ? this.stopBGM() : (this.BGMChannel.volume = this.playBGMv = t.volume / 100 * this.bgVolume, this.muted ? this.BGMChannel.stop() : this.BGMChannel.play()))
			}
		}, t.prototype.clearCompleteHandler = function() {
			this.collectBGM = null, this.isAudio ? this.audio.bgmComplete = null : this.BGMChannel && (this.BGMChannel.completeHandler = null)
		}, t.prototype.setCompleteHandler = function(t) {
			this.collectBGM = t, this.isAudio ? this.audio && (this.audio.bgmComplete = {
				caller: this,
				callBack: this.bgmOver
			}) : this.BGMChannel && (this.BGMChannel.completeHandler = OHandler.create(this, this.bgmOver))
		}, t.prototype.bgmOver = function() {
			this.collectBGM && this.playBGM(this.collectBGM)
		}, t.prototype.playBGS = function(t, e) {
			var i = this._bgmPath;
			if (t instanceof Object ? this._bgsPath = t.path : t = {
				path: t,
				volume: e
			}, this._bgsPath == t.path, this.bgsTimeData && (TimeManager.getInstance().removeTime(this.bgsTimeData), this.bgsTimeData = null), "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box) return void window.org_box.ControlAudio(1, 3, t.volume * this.bgVolume, GloableData.getInstance().getFileListItemURL(t.path));
			if (this.isAudio) this.playBGSv = t.volume / 100 * this.bgVolume, t.volume <= 0 ? this.audio.pauseBGS() : i == t.path ? (this.audio.bgsV(this.playBGSv), this.audio.bgs.play()) : this.audio.playBGS(GloableData.getInstance().getFileListItemURL(t.path), this.playBGSv);
			else {
				if (this.BGSChannel) {
					if (this.BGSChannel.url === t.path) return void(t.volume <= 0 ? this.stopBGS() : this.BGSChannel.volume = this.playBGSv = t.volume / 100 * this.bgVolume);
					if (this.BGSChannel.url === GloableData.getInstance().getFileListItemURL(t.path)) return void(t.volume <= 0 ? this.stopBGS() : this.BGSChannel.volume = this.playBGSv = t.volume / 100 * this.bgVolume);
					this.BGSChannel.stop(), this.BGSChannel = OSoundManager.playSound(GloableData.getInstance().getFileListItemURL(t.path), 0, null, null, this.channelPos.BGSPosition)
				} else this.BGSChannel = OSoundManager.playSound(GloableData.getInstance().getFileListItemURL(t.path), 0, null, null, 0);
				this.BGSChannel && (t.volume <= 0 ? this.stopBGS() : (this.BGSChannel.volume = this.playBGSv = t.volume / 100 * this.bgVolume, this.muted ? this.BGSChannel.stop() : this.BGSChannel.play()))
			}
		}, t.prototype.playSE = function(t, e) {
			var i = this;
			if (t instanceof Object ? this._sePath = t.path : t = {
				path: t,
				volume: e
			}, t.path && "" != t.path.trim()) {
				if (this._sePath = t.path, "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box) return void window.org_box.ControlAudio(1, 1, t.volume * this.seVolume, GloableData.getInstance().getFileListItemURL(t.path));
				if (this.isAudio) this.playSEv = t.volume / 100 * this.seVolume, t.volume <= 0 ? this.audio.pauseSE() : this.audio.playSE(GloableData.getInstance().getFileListItemURL(t.path), this.playSEv);
				else {
					if (this.SEChannel) {
						if (this.SEChannel.url === t.path) return void(t.volume <= 0 ? this.stopSE() : this.SEChannel.volume = this.playSEv = t.volume / 100 * this.seVolume);
						if (this.SEChannel.url === GloableData.getInstance().getFileListItemURL(t.path)) return void(t.volume <= 0 ? this.stopSE() : this.SEChannel.volume = this.playSEv = t.volume / 100 * this.seVolume);
						this.SEChannel.stop(), this.SEChannel = OSoundManager.playSound(GloableData.getInstance().getFileListItemURL(t.path), 1, OHandler.create(this, function() {
							i.stopSE()
						}), null, this.channelPos.SEPosition)
					} else this.SEChannel = OSoundManager.playSound(GloableData.getInstance().getFileListItemURL(t.path), 1, OHandler.create(this, function() {
						i.stopSE()
					}), null, 0);
					this.SEChannel && (t.volume <= 0 ? this.stopSE() : (this.SEChannel.volume = this.playSEv = t.volume / 100 * this.seVolume, this.muted ? this.SEChannel.stop() : this.SEChannel.play()))
				}
			}
		}, t.prototype.playVoice = function(t, e) {
			var i = this;
			t instanceof Object ? this._voicePath = t.path : t = {
				path: t,
				volume: e
			}, this._voicePath = t.path;
			var a;
			if (a = GloableData.getInstance().wmodUseType ? t.path : GloableData.getInstance().getFileListItemURL(t.path), "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box) return void window.org_box.ControlAudio(1, 2, t.volume * this.voiceVolume, GloableData.getInstance().getFileListItemURL(t.path));
			if (this.isAudio) this.playVoicev = t.volume / 100 * this.voiceVolume, t.volume <= 0 ? this.audio.pauseVoice() : this.audio.playVoice(a, this.playVoicev);
			else {
				if (this.VoiceChannel) {
					if (this.VoiceChannel.url === t.path) return void(t.volume <= 0 ? this.stopSE() : this.VoiceChannel.volume = this.playVoicev = t.volume / 100 * this.voiceVolume);
					if (this.VoiceChannel.url === a) return void(t.volume <= 0 ? this.stopSE() : this.VoiceChannel.volume = this.playVoicev = t.volume / 100 * this.voiceVolume);
					this.VoiceChannel.stop(), this.VoiceChannel = OSoundManager.playSound(a, 1, OHandler.create(this, function() {
						i.stopVoice()
					}), null, this.channelPos.VoicePosition)
				} else this.VoiceChannel = OSoundManager.playSound(a, 1, OHandler.create(this, function() {
					i.stopVoice()
				}), null, 0);
				this.VoiceChannel && (t.volume <= 0 ? this.stopVoice() : (this.VoiceChannel.volume = this.playVoicev = t.volume / 100 * this.voiceVolume, this.muted ? this.VoiceChannel.stop() : this.VoiceChannel.play()))
			}
		}, t.prototype.changeBGMVolume = function(t) {
			if (this.clearCompleteHandler(), this.isAudio) {
				var e = this.playBGMv;
				e < t[0] ? this.playBGMv = 0 : this.playBGMv -= t[0], this.audio.bgmV(this.playBGMv), this.playBGMv <= 0 && (this.audio.pauseBGM(), TimeManager.getInstance().removeTime(this.bgmTimeData), this.bgmTimeData = null, this._bgmPath = "")
			} else if (this.BGMChannel) {
				var e = this.BGMChannel.volume;
				e < t[0] ? this.BGMChannel.volume = 0 : this.BGMChannel.volume -= t[0], this.BGMChannel.volume <= 0 && (this.BGMChannel.stop(), TimeManager.getInstance().removeTime(this.bgmTimeData), this.bgmTimeData = null, OSoundManager.removeChannel(this.BGMChannel), this.BGMChannel = null, this._bgmPath = "")
			} else TimeManager.getInstance().removeTime(this.bgmTimeData), this.bgmTimeData = null, this._bgmPath = ""
		}, t.prototype.fadeBGM = function(t) {
			return "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box ? void window.org_box.ControlAudio(0, 0, t.time, "null") : void(t.time > 0 ? (this.bgmTimeData && (TimeManager.getInstance().removeTime(this.bgmTimeData), this.bgmTimeData = null), this.bgmTimeData = new GameTimeData, this.bgmTimeData.isRemove = !1, this.bgmTimeData.delay = GloableStaticData.GAME_RUN_TIME, this.bgmTimeData.args = [this.playBGMv / t.time], this.bgmTimeData.repeatCount = t.time, this.bgmTimeData.type = 2, this.bgmTimeData.thisArg = this, this.bgmTimeData.callBack = this.changeBGMVolume, TimeManager.getInstance().addTime(this.bgmTimeData)) : this.stopBGM())
		}, t.prototype.changeBGSVolume = function(t) {
			if (this.isAudio) {
				var e = this.playBGSv;
				e < t[0] ? this.playBGSv = 0 : this.playBGSv -= t[0], this.audio.bgsV(this.playBGSv), this.playBGSv <= 0 && (this.audio.pauseBGS(), TimeManager.getInstance().removeTime(this.bgsTimeData), this.bgsTimeData = null, this._bgsPath = "")
			} else if (this.BGSChannel) {
				var e = this.BGSChannel.volume;
				e < t[0] ? this.BGSChannel.volume = 0 : this.BGSChannel.volume -= t[0], this.BGSChannel.volume <= 0 && (this.BGSChannel.stop(), TimeManager.getInstance().removeTime(this.bgsTimeData), this.bgsTimeData = null, OSoundManager.removeChannel(this.BGSChannel), this.BGSChannel = null, this._bgsPath = "")
			} else TimeManager.getInstance().removeTime(this.bgsTimeData), this.bgsTimeData = null, this._bgsPath = ""
		}, t.prototype.fadeBGS = function(t) {
			return "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box ? void window.org_box.ControlAudio(0, 3, t.time, "null") : void(t.time > 0 ? (this.bgsTimeData && (TimeManager.getInstance().removeTime(this.bgsTimeData), this.bgsTimeData = null), this.bgsTimeData = new GameTimeData, this.bgsTimeData.isRemove = !1, this.bgsTimeData.delay = GloableStaticData.GAME_RUN_TIME, this.bgsTimeData.args = [this.playBGSv / t.time], this.bgsTimeData.repeatCount = t.time, this.bgsTimeData.type = 2, this.bgsTimeData.thisArg = this, this.bgsTimeData.callBack = this.changeBGSVolume, TimeManager.getInstance().addTime(this.bgsTimeData)) : this.stopBGS())
		}, t.prototype.stopBGM = function() {
			this.bgmTimeData && (TimeManager.getInstance().removeTime(this.bgmTimeData), this.bgmTimeData = null), this.isAudio ? (this.audio.pauseBGM(), this._bgmPath = "") : this.BGMChannel && (this.BGMChannel.stop(), this.BGMChannel.volume = 0, OSoundManager.removeChannel(this.BGMChannel), this.BGMChannel = null, this._bgmPath = "")
		}, t.prototype.stopBGS = function() {
			this.bgsTimeData && (TimeManager.getInstance().removeTime(this.bgsTimeData), this.bgsTimeData = null), this.isAudio ? (this.audio.pauseBGS(), this._bgsPath = "") : this.BGSChannel && (this.BGSChannel.stop(), this.BGSChannel.volume = 0, OSoundManager.removeChannel(this.BGSChannel), this.BGSChannel = null, this._bgsPath = "")
		}, t.prototype.stopSE = function(t) {
			return void 0 === t && (t = null), "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box ? void window.org_box.ControlAudio(0, 1, 0, "null") : void(this.isAudio ? (this.audio.pauseSE(), this._sePath = "") : this.SEChannel && (this.SEChannel.stop(), this.SEChannel.volume = 0, OSoundManager.removeChannel(this.SEChannel), this.SEChannel = null, this._sePath = ""))
		}, t.prototype.stopVoice = function(t) {
			return void 0 === t && (t = null), "ANDROID" == OrgWeb.getInstance().getOrgPlat() && "undefined" != typeof window.org_box ? void window.org_box.ControlAudio(0, 2, 0, "null") : void(this.isAudio ? (this.audio.pauseVoice(), this._voicePath = "") : this.VoiceChannel && (this.VoiceChannel.stop(), this.VoiceChannel.volume = 0, OSoundManager.removeChannel(this.VoiceChannel), this.VoiceChannel = null, this._voicePath = ""))
		}, t.prototype.resumeAll = function() {
			this.isAudio && this.audio.resumeAll()
		}, t.prototype.stopAll = function() {
			this.isAudio ? this.audio.stopAll() : (this.stopSE(), this.stopBGM(), this.stopBGS(), this.stopVoice(), this.BGMChannel = null, this.BGSChannel = null, this.SEChannel = null, this.VoiceChannel = null)
		}, t
	}(),
	PreLoader = function() {
		function t() {
			this.preInx = 0, this.CACHE_LENGTH = 40, this.SAFE_LEN = 100, this.STUFF_LEN = 50, this.STEP_LEN = 20, this.preArr = [
				["res/weather/org_rain.png", "res/sysmenu/game_menu2.png", "res/sysmenu/game_menu2_pitch.png", "res/sysmenu/game_menu3.png", "res/sysmenu/game_menu3_pitch.png", "res/sysmenu/game_menu2_web.png", "res/sysmenu/game_menu2_web_pitch.png", "res/sysmenu/game_menu3_web.png", "res/sysmenu/game_menu3_web_pitch.png"]
			];
			var e = GloableData.getInstance().gameMainData.System.Cuis;
			if (e) {
				for (var i = [], a = 0, n = e; a < n.length; a++) for (var s = n[a], o = 0, r = s.controls; o < r.length; o++) {
					var h = r[o];
					switch (h.type) {
					case 0:
						var l = h.isUserIndex ? GloableData.getInstance().dGameSystem.vars.getVar(h.index) - 1 : h.index,
							c = GloableData.getInstance().gameMainData.System.Buttons[l];
						c && "" != c.image1.name && this.getFileURL(i, t.btnShifter + c.image1.name), c && "" != c.image2.name && this.getFileURL(i, t.btnShifter + c.image2.name);
						for (var g = 0, u = h.event; g < u.length; g++) {
							var p = u[g];
							215 == p.Code && "" != p.Argv[1] && this.getFileURL(i, t.otherShifter + p.Argv[1])
						}
						break;
					case 3:
						"" != h.image1 && this.getFileURL(i, t.otherShifter + h.image1), "" != h.image2 && this.getFileURL(i, t.otherShifter + h.image1)
					}
				}
				this.preArr.push(i)
			}
			this.next(), EventCenter.addEventListener(GameEventConstant.JUMP_POS, this, this.jpHandler), EventCenter.addEventListener(GameEventConstant.JUMP_STORY, this, this.jsHandler)
		}
		return t.prototype.parseAndLoad = function(e) {
			this.assArr = [];
			for (var i in e) if (e[i] instanceof data.DFileName) this.getFileURL(this.assArr, t.uiShifter + e[i].name);
			else if (e[i] instanceof data.DButtonIndex) {
				var a = GloableData.getInstance().gameMainData.System.Buttons[e[i].index];
				this.getFileURL(this.assArr, t.btnShifter + a.image1.name), this.getFileURL(this.assArr, t.btnShifter + a.image2.name)
			} else e instanceof Array && this.assArr.concat(e);
			this.load()
		}, t.prototype.load = function(t) {
			void 0 === t && (t = ""), ORG.loader.load(this.assArr, OHandler.create(this, this.next), null, OLoader.IMAGE, 2, !0, t, !1)
		}, t.prototype.getFileURL = function(t, e) {
			var i = GloableData.getInstance().getFileItem(e.toLowerCase());
			i && (ORG.loader.getRes(i.url()) || OrgWeb.getInstance().upTrafficFileNum(i.fileSize, 1), t.push(i.url()))
		}, t.prototype.next = function() {
			if (this.preArr.length > 0 && this.preInx < this.preArr.length) this.parseAndLoad(this.preArr[this.preInx++]);
			else {
				this.preArr = [];
				var t = GloableData.getInstance().gameMainData.System.StartStoryId,
					e = GloableData.getInstance().gameMainData.getStory(t);
				null != e && this.cacheAssLinks(e.events, t)
			}
		}, t.prototype.cacheAssLinks = function(e, i) {
			this.storyId = i, this.assLinks = [];
			for (var a = 0; a < e.length; a++) {
				var n = e[a],
					s = void 0;
				switch (n.Code) {
				case 100:
					break;
				case 204:
					break;
				case 206:
					break;
				case 214:
					break;
				case 215:
					break;
				case 219:
					break;
				case 251:
					break;
				case 400:
					"0" == n.Argv[11] && (s = [a, GloableData.getInstance().getFileListItemURL(t.graphicsShifter + n.Argv[1])]);
					break;
				case 403:
					break;
				case 405:
					break;
				case 406:
					break;
				case 600:
					break;
				case 1011:
				}
				null != s && this.assLinks.push(s)
			}
			this.storyInitLoader()
		}, t.prototype.preLoadEventAsset = function(t, e, i) {}, t.prototype.storyInitLoader = function() {
			for (var t = [], e = 0, i = Math.min(this.CACHE_LENGTH, this.assLinks.length); e++ < i;) t.push(this.assLinks.shift()[1]);
			t.length > 0 && ORG.loader.load(t, OHandler.create(this, this.followLoader, null, !1), OHandler.create(this, this.progress, null, !1), OLoader.IMAGE, 1, !0, "storyInit", !1)
		}, t.prototype.followLoader = function() {
			EventCenter.dispatchEvent(new GameEvent(GameEventConstant.PRELOADER_READY, this.storyId)), this.assLinks.length > 0
		}, t.prototype.progress = function(t) {}, t.prototype.jpHandler = function(t) {
			if (this.assLinks && this.assLinks.length > 0 && t % 10 == 0 && this.assLinks[0][0] - t < this.SAFE_LEN) {
				var e = void 0;
				if (t > this.assLinks[0][0]) {
					for (var i = 0; i < this.assLinks.length; i++) if (this.assLinks[i][0] > t) {
						e = i;
						break
					}
					if (null == e) return
				} else e = 0;
				var a = this.assLinks.splice(e, this.STEP_LEN);
				a.length > 0 && (a.forEach(this.rebuild), ORG.loader.load(a, null, null, OLoader.IMAGE, 2, !0, "storyInit", !1))
			}
		}, t.prototype.workerLoad = function(t) {
			for (var e = new laya.net.WorkerLoader, i = 0, a = t; i < a.length; i++) {
				var n = a[i];
				e.loadImage(n)
			}
		}, t.prototype.rebuild = function(t, e, i) {
			i[e] = t[1]
		}, t.prototype.jsHandler = function(t) {
			this.cacheAssLinks(GloableData.getInstance().gameMainData.getStory(t).events, t)
		}, t.graphicsShifter = "Graphics/", t.headIconShifter = "Graphics/Face/", t.uiShifter = "Graphics/UI/", t.bgShifter = "Graphics/Background/", t.btnShifter = "Graphics/Button/", t.otherShifter = "Graphics/Other/", t.ChatShifter = "Graphics/Chat/", t
	}(),
	LoadMapBin = function() {
		function t(t) {
			if (t && t.length > 0) this.urlmap = t;
			else {
				0 != GloableData.getInstance().gameInfo.quality ? this.urlmap = HttpURL.M_RESOUSE_SERVER_URL + "web/" + GloableData.getInstance().gameInfo.guid + "/" + GloableData.getInstance().gameVer + "/Map_" + GloableData.getInstance().gameInfo.quality + ".bin" : this.urlmap = HttpURL.M_RESOUSE_SERVER_URL + "web/" + GloableData.getInstance().gameInfo.guid + "/" + GloableData.getInstance().gameVer + "/Map.bin", this.testPath = utils.GetQueryString("testPath");
				var e;
				e = "true" == this.testPath ? HttpURL.TMP_Pro + "//test-cg"+HOST+"/" : HttpURL.CGV2_SERVER_URL;
				window.location.href;
				this.urlmap = "https://yzsam.com/editor/api/oapi_map.php?action=create_bin&guid=" + GloableData.getInstance().gameInfo.guid + "&version=" + GloableData.getInstance().gameVer + "&quality=" + GloableData.getInstance().gameInfo.quality
			}
		}
		return t.prototype.load = function() {
			this.loadFile(this.urlmap)
		}, t.prototype.loadFile = function(t) {
			var e = this;
			GloableData.getInstance().gameInfo.isPc ? EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_INIT_BIN_COMPLETE)) : ORG.loader.load(t, OHandler.create(this, function(t) {
				e.readMapBinByArray(t)
			}), OHandler.create(this, this.mbProgress, null, !1), "json", 0, !1)
		}, t.prototype.readMapBinByArray = function(t) {
			for (var e = t.data.length, i = 0; e > i; i++) try {
				var a = new data.FileData_1(t.data[i], 1);
				GloableData.getInstance().addFileListItem(a, a.fileName), GloableData.getInstance().gameInfo.isPc || 31 != GloableData.getInstance().gameInfo.quality || (a.initSize(), GloableData.getInstance().addInfoListItem(a.obj, a.url()))
			} catch (n) {
				console.log("fd.fileName=>null")
			}
			this.loadGameMiniBin()
		}, t.prototype.mbProgress = function(t) {}, t.prototype.readMapBin = function(t) {
			for (var e = t.getInt32(), i = 0; e > i; i++) try {
				var a = new data.FileData(t, 1);
				GloableData.getInstance().addFileListItem(a, a.fileName), GloableData.getInstance().gameInfo.isPc || 31 != GloableData.getInstance().gameInfo.quality || (a.initSize(), GloableData.getInstance().addInfoListItem(a.obj, a.url()))
			} catch (n) {
				console.log("fd.fileName=>null")
			}
			this.loadGameMiniBin()
		}, t.prototype.loadMapComplete = function(t) {
			var e = new GameByte(t.data);
			this.readMapBin(e)
		}, t.prototype.loadGameMiniBin = function() {
			"-1" != GloableData.getInstance().gameInfo.game_bin_path && "" != GloableData.getInstance().gameInfo.game_bin_path ? (this.urlmini = HttpURL.M_RESOUSE_SERVER_URL + GloableData.getInstance().gameInfo.game_bin_path, EventCenter.addEventListener(this.urlmini, this, this.loadMiniBinComplete), HttpManager.getInstance().sendGetRequest(this.urlmini, null, null, "arraybuffer", this)) : EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_INIT_BIN_COMPLETE))
		}, t.prototype.loadMiniBinComplete = function(t) {
			for (var e = new GameByte(t.data), i = e.getInt32(), a = 0; i > a; a++) try {
				var n = new data.FileData(e, 0),
					s = n.fileName;
				GloableData.getInstance().addFileListItem(n, s)
			} catch (o) {
				console.log("game_bin_path is error")
			}
			EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_INIT_BIN_COMPLETE))
		}, t
	}(),
	LoadAssets = function() {
		function t() {
			this.loadCounter = 0, this.fastBtnArr = new Array, this.otherImgArr = new Array, this.imgTemp = new Array, this.faceImageArr = new Array, this.oActPicArrData = {}, this.oActPicArr = new Array, this.oVideoArr = {}, this.pic_task = [], this.backSceneCountdown = 0;
			this.bloadAssets = !1, this.curLoadScene = "", this.bInit = !1, this.pos_index = 0, this.pos_story = 0
		}
		return t.getInstance = function() {
			return null == t._instance && (t._instance = new t), t._instance
		}, t.prototype.loadGameBin = function() {
			if (GloableData.getInstance().gameInfo.isPc) {
				var t = Base64Binary.decodeArrayBuffer(GloableData.getInstance().tempData.GameBinArr),
					e = new GameByte(t);
				e.endian = OByteArray.LITTLE_ENDIAN;
				try {
					this.readGameBin(e)
				} catch (i) {}
			} else {
				var a;
				GloableData.getInstance().fileList.containsKey("game00.bin") ? (GloableData.getInstance().isNew = !0, a = GloableData.getInstance().getFileListItemURL("game00.bin")) : (a = GloableData.getInstance().getFileListItemURL("data/game.bin"), GloableData.getInstance().gameInfo.isPc || OrgWeb.prototype.upTrafficFileNum(GloableData.getInstance().getFileItem("data/game.bin").fileSize, 1)), this.loadFile(a)
			}
		}, t.prototype.loadFile = function(t) {
			var e = this;
			ORG.loader.load(t, OHandler.create(this, function(t) {
				var i = new GameByte(t);
				e.readGameBin(i)
			}), OHandler.create(this, this.gbProgress, null, !1), "arraybuffer", 0, !1)
		}, t.prototype.gbProgress = function(t) {
			EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOADING_BAR_PROGRESS, [t, 0]))
		}, t.prototype.mallBinprogress = function(t) {}, t.prototype.readGameBin = function(t) {
			try {
				var e = t.readCString(6);
				if ("ORGDAT" == e) {
					GloableData.getInstance().gameMainData = new data.DMain(t), t.clear();
					var i = GloableData.getInstance().gameMainData.System,
						a = [];
					if ("" !== i.Title.logoImage.toString()) {
						var n = "res/logo/" + GloableData.getInstance().gameMainData.Headr.GWidth + "x" + GloableData.getInstance().gameMainData.Headr.GHeight + ".jpg";
						a.push(n)
					}
					"" !== i.Title.titleImagle.toString() && this.getFileURL(a, "Graphics/Background/" + i.Title.titleImagle);
					for (var s = 0; s < i.Title.buttons.length; ++s) {
						var o = i.Buttons[i.Title.buttons[s].index];
						"" !== o.image1.toString() && this.getFileURL(a, "Graphics/Button/" + o.image1), 
						"" !== o.image2.toString() && this.getFileURL(a, "Graphics/Button/" + o.image2)
					}
					if (!GloableData.getInstance().gameInfo.isPc && GloableData.getInstance().getFileItem("data/mall.bin")) a.length > 0 ? ORG.loader.load(a, OHandler.create(this, this.loadMallBin), null, OLoader.IMAGE) : this.loadMallBin();
					else {
						if (GloableData.getInstance().gameInfo.isPc) {
							try {
								this.loadMallBin()
							} catch (r) {
								$("#ORGLog").append(JSON.stringify(r))
							}
							return
						}
						a.length > 0 ? ORG.loader.load(a, OHandler.create(this, this.loadFileIComplete), null, OLoader.IMAGE) : this.loadFileIComplete()
					}
					OrgWeb.getInstance().getIsPC() && "WEB" == OrgWeb.getInstance().getOrgPlat() && (GloableData.preloader = new PreLoader)
				}
			} catch (r) {
				throw new Error(r)
			}
		}, t.prototype.loadGameBinComplet = function(t) {
			var e = new GameByte(t.data);
			this.readGameBin(e)
		}, t.prototype.loadMallBin = function() {
			var t = this;
			if (GloableData.getInstance().gameInfo.isPc) {
				var e = Base64Binary.decodeArrayBuffer(GloableData.getInstance().tempData.MallBinArr),
					i = new GameByte(e);
				return i.endian = OByteArray.LITTLE_ENDIAN, void this.readGameMallBin(i)
			}
			var a = GloableData.getInstance().getFileListItemURL("data/mall.bin") + "?v=" + GloableData.getInstance().gameInfo.ver;
			ORG.loader.load(a, OHandler.create(this, function(e) {
				var i = new GameByte(e);
				i.endian = OByteArray.LITTLE_ENDIAN, t.readGameMallBin(i)
			}), OHandler.create(this, this.mallBinprogress, null, !1), "arraybuffer", 0, !1)
		}, t.prototype.readGameMallBin = function(t) {
			GloableData.getInstance().gameMallBin = new data.DMall(t), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.INIT_DMAIN_COMPLETE))
		}, t.prototype.loadFileIComplete = function() {
			EventCenter.dispatchEvent(new GameEvent(GameEventConstant.INIT_DMAIN_COMPLETE))
		}, t.prototype.getFileURL = function(t, e) {
			if (GloableData.getInstance().gameInfo.isPc) return void t.push(HttpURL.LocalPath + "/" + e);
			var i = GloableData.getInstance().getFileItem(e.toLowerCase());
			i && t.push(i.url())
		}, t._instance = null, t
	}(),
	org_event;
!
function(t) {
	var e = function() {
			function t() {
				this.type = 0, this.id = -1, this.op = -1, this.otherVar = -1, this.haveElse = !1, this.idOrValue = -1, this.isRect = !1, this.endType = -1, this.rect = {
					x: -1,
					y: -1,
					width: 0,
					heigth: 0
				}, this.picId = -1, this.isClick = !1, this.isMove = !1
			}
			return t.prototype.clean = function() {
				this.type = 0, this.id = -1, this.op = -1, this.otherVar = -1, this.haveElse = !1, this.idOrValue = -1, this.isRect = !1, this.endType = -1, this.rect.x = this.rect.y = -1, this.rect.width = this.rect.heigth = 0, this.picId = -1, this.isClick = !1, this.isMove = !1
			}, t
		}();
	t.TextDifUtilObject = e;
	var i = function() {
			function t() {}
			return t.choiceIf = function(e) {
				if (null == e || e.length <= 0) return !0;
				var i = t.dataToVar(e),
					a = !1,
					n = -1,
					s = -1;
				if (i.type <= 1) switch (n = 0 == i.type ? GloableData.getInstance().dGameSystem.vars.getVar(i.id) : GloableData.getInstance().dGameSystem.varsEx.getVar(i.id), 0 == i.otherVar ? s = i.idOrValue : 1 == i.otherVar ? s = GloableData.getInstance().dGameSystem.vars.getVar(i.idOrValue) : 2 == i.otherVar && (s = GloableData.getInstance().dGameSystem.varsEx.getVar(i.idOrValue)), i.op) {
				case 0:
					a = n == s;
					break;
				case 1:
					a = n >= s;
					break;
				case 2:
					a = s >= n;
					break;
				case 3:
					a = n > s;
					break;
				case 4:
					a = s > n;
					break;
				case 5:
					a = n != s;
					break;
				default:
					a = !1
				} else if (2 == i.type);
				else {
					if (3 == i.type) return n = GloableData.getInstance().flowerHua, -1 == GloableData.getInstance().flowerHua && (n = 0), s = this.getValueB(i.otherVar, i.idOrValue), a = this.compareVar(n, s, i.op);
					if (8 == i.type) {
						var o = GloableData.getInstance().getItemById(i.id);
						a = o ? o.max > 0 : !1, (GloableData.getInstance().isFreeLimit || GloableData.getInstance().isLightDay || GloableData.getInstance().isLightVIP) && (a = !0)
					}
				}
				return i = null, a
			}, t.dataToVar = function(e) {
				var i;
				i = e instanceof Array ? e : e.split(",");
				var a = t.difObj;
				if (a.clean(), i[0].toLowerCase().indexOf("ex") > -1) a.type = 1, a.id = parseInt(i[0].split("|")[1]), a.op = parseInt(i[1]), a.otherVar = parseInt(i[2]), a.idOrValue = parseInt(i[3]), a.haveElse = 0 != parseInt(i[4]);
				else if (i[0].indexOf("MO") > -1) {
					if (a.type = 2, a.isRect = "0" === i[1], a.isRect) {
						var n = i[2].split(",");
						a.rect = {
							x: parseInt(n[0]),
							y: parseInt(n[1]),
							width: parseInt(n[2]),
							height: parseInt(n[3])
						}
					} else a.picId = parseInt(i[2]);
					a.endType = parseInt(i[3]), a.haveElse = 0 != parseInt(i[4])
				} else i[0].indexOf("FL") > -1 ? (a.type = 3, a.op = parseInt(i[1]), a.otherVar = parseInt(i[2]), a.idOrValue = parseInt(i[3]), a.haveElse = 0 != parseInt(i[4])) : i[0].indexOf("PT") > -1 ? (a.type = 4, a.idOrValue = parseInt(i[3]), a.haveElse = 0 != parseInt(i[4])) : i[0].indexOf("PA") > -1 ? (a.type = 5, a.id = parseInt(i[0].split("|")[1]), a.op = parseInt(i[2])) : i[0].indexOf("ST") > -1 ? (a.type = 8, a.id = parseInt(i[2]), a.haveElse = 0 != parseInt(i[4])) : i.length > 6 ? i[6].indexOf("TA") && (a.type = 6, a.haveElse = 0 != parseInt(i[4]), a.id = parseInt(i[6].split("|")[1])) : (a.id = parseInt(i[0]), a.op = parseInt(i[1]), a.otherVar = parseInt(i[2]), a.idOrValue = parseInt(i[3]), a.haveElse = 0 != parseInt(i[4]));
				return a
			}, t.compareVar = function(t, e, i) {
				switch (i) {
				case 0:
					return t == e;
				case 1:
					return t >= e;
				case 2:
					return e >= t;
				case 3:
					return t > e;
				case 4:
					return e > t;
				case 5:
					return t != e;
				default:
					return !1
				}
			}, t.checkIIF = function(e, i, a) {
				void 0 === a && (a = null);
				var n, s, o = !1,
					r = !1,
					h = -1,
					l = -1,
					c = -1,
					g = 0,
					u = -1,
					p = -1,
					d = -1;
				if (e.Argv[0].indexOf("EX") > -1) g = 1, u = parseInt(e.Argv[0].split("|")[1]), c = parseInt(e.Argv[1]), l = parseInt(e.Argv[2]), h = 3 == l ? t.maxValue(e.Argv[3]) : 4 == l ? t.minValue(e.Argv[3]) : parseInt(e.Argv[3]);
				else if (e.Argv[0].indexOf("MO") > -1) {
					if (g = 2, r = "0" == e.Argv[1]) {
						var m = e.Argv[2].split(",");
						n = {
							x: parseInt(m[0]),
							y: parseInt(m[1]),
							width: parseInt(m[2]),
							height: parseInt(m[3])
						}
					} else p = parseInt(e.Argv[2]);
					d = parseInt(e.Argv[3])
				} else e.Argv[0].indexOf("FL") > -1 ? (g = 3, c = parseInt(e.Argv[1]), l = parseInt(e.Argv[2]), h = 3 == l ? t.maxValue(e.Argv[3]) : 4 == l ? t.minValue(e.Argv[3]) : parseInt(e.Argv[3])) : e.Argv[0].indexOf("PT") > -1 ? (g = 4, h = parseInt(e.Argv[3])) : e.Argv[0].indexOf("PA") > -1 ? (g = 5, u = parseInt(e.Argv[0].split("|")[1]), c = parseInt(e.Argv[2])) : e.Argv.length > 6 ? e.Argv[6].indexOf("TA") > -1 ? (g = 6, s = 0 != parseInt(e.Argv[4]), u = parseInt(e.Argv[6].split("|")[1])) : e.Argv[6].indexOf("AS") > -1 && (g = 7) : (u = parseInt(e.Argv[0]), c = parseInt(e.Argv[1]), l = parseInt(e.Argv[2]), h = 3 == l ? t.maxValue(e.Argv[3]) : 4 == l ? t.minValue(e.Argv[3]) : parseInt(e.Argv[3]));
				var v = -1,
					f = -1;
				if (1 >= g) v = 0 == g ? GloableData.getInstance().dGameSystem.vars.getVar(u) : GloableData.getInstance().dGameSystem.varsEx.getVar(u), f = t.getValueB(l, h), o = t.compareVar(v, f, c);
				else if (2 == g) if (r) o = UIManager.getInstance().onTouchX > n.x && UIManager.getInstance().onTouchX <= n.x + n.width && UIManager.getInstance().onTouchY > n.y && UIManager.getInstance().onTouchY <= n.y + n.height && (0 == d ? UIManager.getInstance().onTouchMove : UIManager.getInstance().onTouchClick);
				else {
					var I = GloableData.getInstance().getGamePic(p);
					if (I && null != I.getBitmap()) {
						var y = GloableData.getInstance().getGamePic(p).getRect();
						o = UIManager.getInstance().onTouchX > y.x && UIManager.getInstance().onTouchX <= y.x + y.width && UIManager.getInstance().onTouchY > y.y && UIManager.getInstance().onTouchY <= y.y + y.height && (0 == d ? UIManager.getInstance().onTouchMove : UIManager.getInstance().onTouchClick)
					}
				} else 3 == g ? (v = GloableData.getInstance().flowerHua, -1 == GloableData.getInstance().flowerHua && (v = 0), f = this.getValueB(l, h), o = this.compareVar(v, f, c)) : 4 == g ? o = GloableData.getInstance().gameInfo.isPc ? 1 == h : "WEB" == OrgWeb.getInstance().getOrgPlat() ? 2 == h : 5 == h : 6 == g ? i.push(u) : 7 == g && a && a.push(!0);
				return 6 != g || 7 != g ? o : void 0
			}, t.getValueB = function(t, e) {
				return 0 == t ? e : 1 == t ? GloableData.getInstance().dGameSystem.vars.getVar(e) : 2 == t ? GloableData.getInstance().dGameSystem.varsEx.getVar(e) : e
			}, t.maxValue = function(t) {
				for (var e = t.split(","), i = -1e9, a = 0; a < e.length; a++) {
					var n = e[a],
						s = n.split("|")[1];
					s > i && (i = s)
				}
				return parseInt(i)
			}, t.minValue = function(t) {
				for (var e = t.split(","), i = 1e10, a = 0; a < e.length; a++) {
					var n = e[a],
						s = n.split("|")[1];
					i > s && (i = s)
				}
				return parseInt(i)
			}, t.difObj = new e, t
		}();
	t.TextDifUtil = i
}(org_event || (org_event = {}));
var data;
!
function(t) {
	var e;
	!
	function(t) {
		var e = function() {
				function t() {}
				return t
			}();
		t.SnapData = e;
		var i = function() {
				function t() {}
				return t
			}();
		t.PlayerItems = i
	}(e = t.snap || (t.snap = {}))
}(data || (data = {}));
var data;
!
function(t) {
	var e;
	!
	function(t) {
		var e = function() {
				function t() {}
				return t.addItem = function(t) {
					return this.items.push(t)
				}, t.snap = function(e) {
					for (var i = 0, a = t.items; i < a.length; i++) {
						var n = a[i];
						n.snap()
					}
				}, t.restore = function(e) {
					for (var i = 0, a = t.items; i < a.length; i++) {
						var n = a[i];
						n.restore(this.snapDataArr[e])
					}
				}, t.download = function() {
					var e = HttpURL.M_M_SERVER_URL + "cloud/v1/index/",
						i = t.getData(),
						a = e + "cloud_load?ts=" + i.newTs + "&sign=" + i.newSign + "&client_type=" + i.newClient_type;
					HttpManager.getInstance().sendPostRequest(a, i, t.loadedHandler, "arraybuffer", null, !0)
				}, t.getData = function() {
					var t = {};
					t.guid = GloableData.getInstance().gameInfo.guid, t.gindex = GloableData.getInstance().gameInfo.gIndex, t.uid = OrgWeb.getInstance().getUid(), t.newClient_type = 7;
					var e = Math.floor(Date.now() / 1e3),
						i = new Object;
					i.r = md5(e.toString()).substr(1, 3);
					var a = JSON.stringify(i),
						n = base64.urlEncoder(a),
						s = encodeURIComponent(n);
					t.auth = s, t.newTs = e;
					var o = md5("client_type=" + t.newClient_type + "&ts=" + e + "t_16b4a01f45313e88");
					return t.newSign = o, t
				}, t.loadedHandler = function(t) {}, t
			}();
		t.SnapMgr = e
	}(e = t.snap || (t.snap = {}))
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t, e, i, a) {
				void 0 === e && (e = null), void 0 === i && (i = null), void 0 === a && (a = null), this.R = 0, this.G = 0, this.B = 0, this.A = 255, null == e ? (a = t.split(","), 3 == a.length ? (this.R = parseInt(a[0]), this.G = parseInt(a[1]), this.B = parseInt(a[2]), this.A = 255) : 4 == a.length && (this.R = parseInt(a[0]), this.G = parseInt(a[1]), this.B = parseInt(a[2]), this.A = parseInt(a[3]))) : null == a ? (this.R = t, this.G = e, this.B = i, this.A = 255) : (this.R = t, this.G = e, this.B = i, this.A = a)
			}
			return t.prototype.getColor = function() {
				return "rgba(" + this.R + "," + this.G + "," + this.B + "," + this.A + ")"
			}, t.prototype.getBitmapColor = function() {
				return [this.R, this.G, this.B]
			}, t.prototype.getColorToUint = function() {
				var t = 1 == this.R.toString(16).length ? "0" + this.R.toString(16) : this.R.toString(16),
					e = 1 == this.G.toString(16).length ? "0" + this.G.toString(16) : this.G.toString(16),
					i = 1 == this.B.toString(16).length ? "0" + this.B.toString(16) : this.B.toString(16);
				return "#" + t + e + i
			}, t
		}();
	t.OColor = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e, i) {
				this.descItems = [], this.actionsItems = [], this.imageResourcePath = [];
				var a = (e.readCString(6), {
					minX: 0,
					minY: 0,
					maxX: 0,
					maxY: 0
				});
				this.descCount = e.getInt32();
				for (var n = 0; n < this.descCount; n++) {
					var s = new t.OAF2DescData(e);
					this.descItems.push(s)
				}
				this.oaf2Name = e.readStringE(), 
				this.maxw = e.getInt32(), 
				this.maxh = e.getInt32(), 
				this.bgPath = e.readStringE(), 
				"" !== this.bgPath && (this.bgPath = "Graphics/Oafs/" + this.bgPath), 
				this.bgX = e.getInt32(), 
				this.bgY = e.getInt32(), 
				this.bgW = e.getInt32(), 
				this.bgH = e.getInt32(), 
				this.bgScaleW = e.getInt32() / 100, 
				this.bgScaleH = e.getInt32() / 100, 
				this.bgRotaion = e.getInt32(), 
				this.bgOpacity = e.getInt32() / 255, 
				this.bgMirror = e.getInt32(), 
				this.offsetX = e.getInt32(), 
				this.offsetY = e.getInt32(), 
				this.Obligate1 = e.readStringE(), 
				this.Obligate2 = e.readStringE(), 
				this.actionsCount = e.getInt32(), 
				console.log(this.actionsCount);
				for (var o = 0; o < this.actionsCount; o++) if (this.isShowAction(i, o)) {
					var r = new t.OAF2ActionsItemData(e, this.imageResourcePath, a);
					r.actionIndex = o, this.actionsItems.push(r)
				} else {
					var h = [],
						r = new t.OAF2ActionsItemData(e, h, a);
					r = null, h = []
				}
				e.clear(), console.log("最大尺寸：", this.maxw, this.maxh), this.maxSize = {
					w: this.maxw,
					h: this.maxh
				}
			}
			return e.prototype.isShowAction = function(t, e) {
				for (var i in t.actionData) {
					var a = t.actionData[i];
					if (a.actIndex == e) return !0
				}
				return !1
			}, e
		}();
	t.OAF2Data = e;
	var i = function() {
			function t(t) {
				this.descName = t.readStringE(), this.descInfo = t.readStringE()
			}
			return t
		}();
	t.OAF2DescData = i;
	var a = function() {
			function e(e, i, a) {
				this.actionFrameData = [], 
				this.actionName = e.readStringE(), 
				this.isSupport = 1 == e.getInt32(), 
				this.animationFrameNumber = e.getInt32();
				for (var n = 0; n < this.animationFrameNumber; n++) e.readStringE();
				this.actionObligate1 = e.readStringE(), 
				this.actionObligate2 = e.readStringE(), 
				this.frameCount = e.getInt32();
				for (var s = 0; s < this.frameCount; s++) {
					var o = new t.OAFFrameReasource(e, i, a);
					this.actionFrameData.push(o)
				}
			}
			return e
		}();
	t.OAF2ActionsItemData = a;
	var n = function() {
			function e(e, i, a) {
				this.resourceItems = [], this.resourceItemNumber = e.getInt32();
				for (var n = 0; n < this.resourceItemNumber; n++) {
					var s = new t.OAF2ResourceData(e, i, a);
					this.resourceItems.push(s)
				}
			}
			return e
		}();
	t.OAFFrameReasource = n;
	var s = function() {
			function t(t, e, i) {
				this.materialPath = "Graphics/oafs/" + t.readStringE(), 
				console.log(this.materialPath), e.push(this.materialPath), 
				this.materialzindex = t.getInt32(), 
				this.materialX = t.getInt32(), 
				this.materialY = t.getInt32(), 
				this.materialW = t.getInt32(), 
				this.materialH = t.getInt32(), 
				this.materialZoomW = t.getInt32() / 100, 
				this.materialZoomH = t.getInt32() / 100, 
				this.materialRotate = t.getInt32(), 
				this.materialOpacity = t.getInt32(), 
				this.materialMirror = t.getInt32(), 
				this.materialObligate1 = t.readStringE(), 
				this.materialObligate2 = t.readStringE(), 
				this.materialObligate3 = t.readStringE()
			}
			return t
		}();
	t.OAF2ResourceData = s;
	var o = function() {
			function t() {}
			return t
		}();
	t.OAFSaveData = o
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				this.partName = "", this.actCount = [], this.parent = null, this.partName = t.readStringE();
				for (var e = t.getInt32(), a = 0; e > a; a++) {
					var n = new i(t);
					this.actCount.push(n)
				}
			}
			return t
		}();
	t.OActivePartsData = e;
	var i = function() {
			function t(t) {
				this.frameTime = t.getInt32(), 
				this.frameDataIndex = t.getInt32()
			}
			return t
		}();
	t.ActCountData = i
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t() {
				this.guid = 0, 
				this.ver = 0, 
				this.gGameHeight = 0, 
				this.gGameWidth = 0, 
				this.gIndex = 0, 
				this.isPc = !1, 
				this.isFirstHp = !0, 
				this.gName = "", 
				this.author_uname = "", 
				this.check_level = 0
			}
			return t
		}();
	t.GameInfoData = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t() {
				this.isShowTextStyle = 0, 
				this.shakePower = 0, 
				this.shakeSpeed = 0, 
				this.shakeDuration = 0, 
				this.shakeDirection = 1, 
				this.shake = 0, 
				this.floatButFlag = !1
			}
			return t
		}();
	t.GameGloableValue = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t, e) {
				this.fileName = t.readStringE().toLowerCase().replace(/\/\/+/g, "/"), 
				this.fileSize = t.getInt32(), 
				this.md5 = t.readStringE(), 
				this.isUpDone = 0, 1 == e && 31 == GloableData.getInstance().gameInfo.quality && (this.info = t.readStringE(), this.obj = new i)
			}
			return t.prototype.initSize = function() {
				if ("" == this.info || 0 == this.info) this.obj.w = -1, this.obj.h = -1;
				else {
					var t = this.info.split(",")[1],
						e = t.split("x");
					this.obj.w = e[0], this.obj.h = e[1]
				}
			}, t.prototype.url = function() {
				return GloableData.getInstance().gameInfo.isPc ? HttpURL.LocalPath + "/" + this.fileName : HttpURL.M_RESOUSE_SERVER_URL + this.md5.substr(0, 2).toLowerCase() + "/" + this.md5
			}, t
		}();
	t.FileData = e;
	var i = function() {
			function t() {}
			return t
		}();
	t.FileDataSize = i;
	var a = function() {
			function t(t, e) {
				this.fileName = t[0].toLowerCase().replace(/\/\/+/g, "/"), 
				this.fileSize = t[1], this.md5 = t[2], this.isUpDone = 0, 1 == e && 31 == GloableData.getInstance().gameInfo.quality && (this.info = t[3], this.obj = new i)
			}
			return t.prototype.initSize = function() {
				if ("" == this.info || 0 == this.info) this.obj.w = -1, this.obj.h = -1;
				else {
					var t = this.info.split(",")[1],
						e = t.split("x");
					this.obj.w = parseInt(e[0]), this.obj.h = parseInt(e[1])
				}
			}, t.prototype.url = function() {
				return GloableData.getInstance().gameInfo.isPc ? HttpURL.LocalPath + "/" + this.fileName : HttpURL.M_RESOUSE_SERVER_URL + this.md5.substr(0, 2).toLowerCase() + "/" + this.md5
			}, t
		}();
	t.FileData_1 = a
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				var e = t.readCString(6);
				if ("WMODMB" == e) {
					this.id = t.readStringE(), this.ver = t.readStringE(), this.gindex = t.readStringE(), this.gver = t.readStringE();
					var a = t.getInt32();
					this.resList = new Dictionary;
					for (var n = 0; a > n; n++) {
						var s = new i(t, this.id, this.ver);
						this.resList.add(s.name, s)
					}
				}
			}
			return t
		}();
	t.DWmodData = e;
	var i = function() {
			function t(t, e, i) {
				this.id = e, this.ver = i, this.name = t.readStringE().toLowerCase(), this.md5 = t.readStringE(), this.fileSize = t.getInt32(), this.resType = t.readStringE(), this.isUpDone = 0
			}
			return Object.defineProperty(t.prototype, "url", {
				get: function() {
					if ("MP3" == this.resType) return HttpURL.WMOD_RES_SERVER_URL + "audio/" + GloableData.getInstance().gameMainData.Headr.guid + "/" + this.md5.substr(0, 2) + "/" + this.md5;
					if ("BIN" == this.resType) {
						var t = GloableData.getInstance().wmodUseType,
							e = "";
						return "wmod" == t ? e = "debug" : "group" == t && (e = "online"), HttpURL.WMOD_RES_SERVER_URL + "modbin/" + this.id + "/" + e + "/" + this.ver + "/" + this.md5
					}
					return ""
				},
				enumerable: !0,
				configurable: !0
			}), t
		}();
	t.DWmodResItem = i;
	var a = function() {
			function t(t) {
				if ("WMODGB" == t.readCString(6)) {
					this.id = t.readStringE(), 
					this.ver = t.readStringE(), 
					this.gindex = t.readStringE(), 
					this.gver = t.readStringE();
					var e = t.getInt32();
					this.eventList = new Dictionary;
					for (var i = 0; e > i; i++) {
						var a = new n(t);
						this.eventList.add(a.unId, a)
					}
				}
			}
			return t
		}();
	t.DWmodStory = a;
	var n = function() {
			function t(t) {
				this.unId = t.getInt32(), 
				this.roleId = t.getInt32(), 
				this.storyId = t.getInt32(), 
				this.pos = t.getInt32(), 
				this.volume = t.getInt32(), 
				this.path = t.getInt32(), 
				this.name = t.readStringE(), 
				this.md5 = t.readStringE(), 
				this.msg = t.readStringE()
			}
			return t
		}();
	t.DWmodStoryEvent = n
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				t.getInt32(), 
				this.x = t.getInt32(), 
				this.y = t.getInt32(), 
				this.width = t.getInt32(), 
				this.height = t.getInt32()
			}
			return t
		}();
	t.DViewport = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				e.getInt32(), 
				1 == GloableData.getInstance().sdkLogin.menuShowLog ? this.showLog = 0 != e.getInt32() : this.showLog = 0 == e.getInt32(), 
				this.logoImage = new t.DFileName(e), 
				this.titleImagle = new t.DFileName(e), 
				this.drawTitle = 0 != e.getInt32(), 
				this.bgm = new t.DMusicItem(e);
				var i = e.getInt32();
				this.buttons = new Array(i);
				for (var a = 0; i > a; a++) this.buttons[a] = new t.DButtonIndex(e)
			}
			return e
		}();
	t.DTitle = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				if (this.Cuis = null, 
				this.FontStyleColor = "", 
				this.FontStroke = !1, 
				this.FontFilter = !1, 
				e.getInt32(), 
				this.FontName = e.readStringE(), 
				this.FontSize = e.getInt32(), 
				GloableData.getInstance().isMobile || GloableData.getInstance().isIos ? this.FontSize *= .8 : this.FontSize *= .8, 
				this.FontTalkColor = new t.OColor(e.readStringE()), 
				this.FontUiColor = new t.OColor(e.readStringE()), 
				GloableData.getInstance().gameInfo.ver >= 101 && (this.FontStyle = e.getInt32()), 0 !== this.FontStyle) 
				switch (this.FontStyle) {
				case 1:
					this.FontFilter = !0, this.FontStyleColor = "#000000";
					break;
				case 2:
					this.FontFilter = !0, this.FontStyleColor = "#999b9f";
					break;
				case 3:
					this.FontFilter = !0, this.FontStyleColor = "#FFFFFF";
					break;
				case 4:
					this.FontStroke = !0, this.FontStyleColor = "#000000";
					break;
				case 5:
					this.FontStroke = !0, this.FontStyleColor = "#999b9f";
					break;
				case 6:
					this.FontStroke = !0, this.FontStyleColor = "#FFFFFF"
				}
				this.SkipTitle = 0 != e.getInt32(), 
				this.StartStoryId = e.getInt32(), 
				e.getInt32(), 
				this.IconName = new t.DFileName(e), 
				this.ShowAD = 0 != e.getInt32(), 
				this.AuthorWords = e.readStringE(), 
				this.AuthorWordsTiming = e.getInt32(), 
				this.AutoRun = 0 != e.getInt32(), 
				this.ShowSystemMenu = 0 != e.getInt32(), 
				this.SEClick = new t.DMusicItem(e), 
				this.SEMove = new t.DMusicItem(e), 
				this.SECancel = new t.DMusicItem(e), 
				this.SEError = new t.DMusicItem(e), 
				this.Title = new t.DTitle(e), 
				this.GameMenu = new t.DGameMenu(e), 
				this.CG = new t.DCG(e), 
				this.BGM = new t.DBGM(e), 
				this.SaveData = new t.DSaveData(e), 
				this.MessageBox = new t.DMessageBox(e), 
				this.Replay = new t.DReplay(e), 
				this.Setting = new t.DSetting(e);
				var i = e.getInt32();
				this.Buttons = new Array(i);
				for (var a = 0; i > a; a++) this.Buttons[a] = new t.DButton(e);
				if (
					this.UIInitSave = 0 != e.getInt32(), 
					this.Cuis = null, this.MenuIndex = 0, 
					GloableData.getInstance().autoPlay = this.AutoRun, 
					GloableData.getInstance().gameInfo.ver >= 103
				) {
					var n = e.getInt32();
					this.Cuis = new Array(n);
					for (var a = 0; n > a; a++) this.Cuis[a] = new t.DCustomUIData(e);
					this.MenuIndex = e.getInt32()
				}
			}
			return e
		}();
	t.DSystem = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				if (void 0 === e && (e = null), e) {
					this.Name = e.readStringE(), 
					this.ID = e.getInt32();
					var i = e.getInt32();
					this._events = new Array(i);
					for (var a = 0; i > a; a++) e.getInt32(), 
					this._events[a] = new t.DEvent(e), 
					this._events[a].tpos = a
				} else this.Name = "", 
					this.ID = -1, 
					this._events = new Array
			}
			return Object.defineProperty(e.prototype, "length", {
				get: function() {
					return this._events ? this._events.length : 0
				},
				enumerable: !0,
				configurable: !0
			}), Object.defineProperty(e.prototype, "events", {
				get: function() {
					return this._events
				},
				set: function(t) {
					this._events = t;
					for (var e = 0; e < this._events.length; e++) this._events[e].tpos = e
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.dispose = function() {
				if (this.Name = null, this.ID = null, this._events) for (; this._events.length > 0;) {
					var t = this._events.shift();
					t.dispose(), t = null
				}
				this._events = null
			}, e
		}();
	t.DStory = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				e.getInt32(), 
				this.backimage = new t.DFileName(e), 
				this.barNone = new t.DFileName(e), 
				this.barMove = new t.DFileName(e), 
				this.BgmX = e.getInt32(), 
				this.BgmY = e.getInt32(), 
				this.SeX = e.getInt32(), 
				this.SeY = e.getInt32(), 
				this.VoiceX = e.getInt32(), 
				this.VoiceY = e.getInt32(), 
				this.ShowFull = 0 != e.getInt32(), 
				this.ShowAuto = 0 != e.getInt32(), 
				this.ShowBGM = 0 != e.getInt32(), 
				this.ShowSE = 0 != e.getInt32(), 
				this.ShowVoice = 0 != e.getInt32(), 
				this.ShowTitle = 0 != e.getInt32(), 
				this.closeButton = new t.DButtonIndex(e), 
				this.fullButton = new t.DButtonIndex(e), 
				this.winButton = new t.DButtonIndex(e), 
				this.AutoOn = new t.DButtonIndex(e), 
				this.AutoOff = new t.DButtonIndex(e), 
				this.TitleButton = new t.DButtonIndex(e)
			}
			return e
		}();
	t.DSetting = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t() {
				this.replay = []
			}
			return t.prototype.add = function(t) {
				this.replay.length > 50 && this.replay.splice(0, 1), "" !== t ? this.replay.push(t) : this.replay.push(StringUtil.TextAnalysisNull(UIManager.getInstance().message[UIManager.getInstance().msgIndex].msg))
			}, t.prototype.saveData = function(t) {
				if (GloableData.getInstance().dGameSystem.rwFile.isCloud) {
					t.length = this.replay.length;
					for (var e = 0; e < this.replay.length; e++) t[e] = this.replay[e]
				} else {
					var i = this.replay.length + "|";
					t.push(i);
					for (var e = 0; e < this.replay.length; ++e) {
						var a = this.replay[e] + "|";
						t.push(a)
					}
				}
			}, t.prototype.loadData = function(t) {
				if (GloableData.getInstance().dGameSystem.rwFile.isCloud) {
					this.replay.length = 0;
					for (var e = t.length, i = 0; e > i; i++) {
						var a = t[i];
						this.replay.push(a)
					}
				} else {
					this.replay.length = 0;
					for (var n = t.shift(), s = parseInt(n), i = 0; s > i; i++) {
						var a = t.shift();
						this.replay.push(a)
					}
				}
			}, t
		}();
	t.SaveReplay = e;
	var i = function() {
			function t() {
				this.cg_index = new Array, this.bgm_index = new Array
			}
			return t.prototype.addBGM = function(t) {
				this.bgm_index.indexOf(t) < 0 && this.bgm_index.push(t)
			}, t.prototype.addCG = function(t) {
				this.cg_index.indexOf(t) < 0 && this.cg_index.push(t)
			}, t.prototype.saveCGData = function() {
				for (var t = "SCGItem" + GloableData.getInstance().savekey, e = "", i = 0; i < this.cg_index.length; i++) e += this.cg_index[i] + "|";
				GloableData.getInstance().gameInfo.isPc ? PCSaveData(t, e) : window.localStorage.setItem(t, e)
			}, t.prototype.loadCGData = function() {
				var t, e = "SCGItem" + GloableData.getInstance().savekey;
				if (t = GloableData.getInstance().gameInfo.isPc ? PCLoadData(e) : window.localStorage.getItem(e)) for (var i = t.substring(0, t.length - 1).split("|"), a = 0; a < i.length; a++) this.cg_index[a] = parseInt(i[a], 10)
			}, t.prototype.loadBGMData = function() {
				var t, e = "SBGMItem" + GloableData.getInstance().savekey;
				if (t = GloableData.getInstance().gameInfo.isPc ? PCLoadData(e) : window.localStorage.getItem(e)) for (var i = t.substring(0, t.length - 1).split("|"), a = 0; a < i.length; a++) this.bgm_index[a] = parseInt(i[a], 10)
			}, t.prototype.saveBGMData = function() {
				for (var t = "SBGMItem" + GloableData.getInstance().savekey, e = "", i = 0; i < this.bgm_index.length; i++) e += this.bgm_index[i] + "|";
				GloableData.getInstance().gameInfo.isPc ? PCSaveData(t, e) : window.localStorage.setItem(t, e)
			}, t
		}();
	t.SaveOther = i;
	var a = function() {
			function t() {
				this.isCloud = !0, this.buttonState = new Array, this.cloudAllData = null, this.buttonFreeLimit = new Array, this.loadHeadCloudData = function(t) {
					if (null == t) return null;
					var e = new Array,
						i = new Date(parseInt(t.Header.SaveTime)),
						a = i.getFullYear() + "/" + (i.getMonth() + 1) + "/" + i.getDate() + " " + i.getHours() + ":" + i.getMinutes() + ":" + i.getSeconds();
					return e.push(a), e.push(t.Header.StoryName), e.push(t.Thumbnail.base64), e.push(parseInt(t.Header.SaveTime)), e.push(parseInt(t.Header.IsFreeLimit)), e
				}, this.cloudLoadData = function(t, e) {
					return GloableData.getInstance().operationFrame.ParseFrameInfo(t, e)
				}
			}
			return t.prototype.saveData = function(t, e) {
				if (this.isCloud) return this.cloudSaveData(t, null), !0;
				var i = new Array,
					a = new Date,
					n = a.getFullYear() + "/" + (a.getMonth() + 1) + "/" + a.getDate() + " " + a.getHours() + ":" + a.getMinutes(),
					s = "time=" + n + "@";
				i.push(s);
				var o = "storyname=" + GloableData.getInstance().iMain.storyName + "@";
				i.push(o);
				var r = new Array;
				GloableData.getInstance().iMain.saveData(r);
				for (var h = "", l = 0; l < r.length; ++l) h += r[l];
				var c = "imain=" + h + "@";
				i.push(c);
				var g = new Array;
				GloableData.getInstance().dGameSystem.vars.saveData(g);
				for (var u = "", l = 0; l < g.length; ++l) u += g[l];
				var p = "vars=" + u + "@";
				i.push(p);
				var d = new Array;
				GloableData.getInstance().dGameSystem.dGameString.saveData(d);
				for (var m = "", l = 0; l < d.length; ++l) m += d[l];
				var v = "string=" + m + "@";
				i.push(v);
				var f = new Array;
				UIManager.getInstance().saveData(f);
				for (var I = "", l = 0; l < f.length; ++l) I += f[l];
				var y;
				0 == UIManager.getInstance().isShowTextStyle ? (y = "canvas=" + encodeURIComponent(I) + "@", i.push(y)) : (y = "lifeline=" + encodeURIComponent(I) + "@", i.push(y));
				var _ = new Array;
				GloableData.getInstance().dGameSystem.replay.saveData(_);
				for (var w = "", l = 0; l < _.length; ++l) w += _[l];
				var b = "replay=" + encodeURIComponent(w) + "@";
				i.push(b);
				var S = "cuiindex=" + GloableData.getInstance().CUIFromIndex + "@";
				i.push(S), (!GloableData.getInstance().img_src || GloableData.getInstance().img_src.length <= 0) && (GloableData.getInstance().img_src = "//pic"+HOST+"/orange/title/" + GloableData.getInstance().gameInfo.guid + "_" + GloableData.getInstance().gameInfo.ver + ".jpg!470x270?v=" + playerVer);
				var E = "saveIcon=" + GloableData.getInstance().img_src + "@";
				if (i.push(E), UIManager.getInstance().sFloatButton) {
					var x = "sFloatBut=" + UIManager.getInstance().sFloatButton.saveFbFlag + "@";
					i.push(x)
				}
				if (GloableData.getInstance().operationFrame.getIsFree()) {
					var M = "limit=1@";
					i.push(M)
				}
				var C = "",
					D = {};
				GloableData.getInstance().ovideo.saveData(D);
				for (var G in D) C += D[G] + "|";
				var O = "videoMgr=" + C + "@";
				i.push(O);
				for (var T = "", l = 0; l < i.length; ++l) T += i[l];
				var L = !1;
				return this.isCloud ? this.cloudSaveData(t, T) : (L = this.localSaveData(t, T), T = "", i.length = 0, L)
			}, t.prototype.cloudSaveData = function(t, e) {
				return !1
			}, t.prototype.localSaveData = function(t, e) {
				return !0
			}, t.prototype.loadData = function(t, e) {
				if (GloableData.getInstance().dGameSystem.rwFile.isCloud) {
					var i = GloableData.getInstance().operationFrame.getLocalCloudData(t),
						a = JSON.parse(i);
					return a ? this.cloudLoadData(t, a) : !1
				}
				var n;
				try {
					n = window.localStorage.getItem("orgsave" + GloableData.getInstance().gameInfo.guid + t)
				} catch (s) {
					return console.log("Dsavefile<<<loadData<<<安卓webview无法使用localStorage"), !1
				}
				if (null == n) return !1;
				var o = n.split("@"),
					r = o[2].split("=");
				if ("imain" == r[0]) {
					var h = r[1].split("|");
					GloableData.getInstance().iMain.isLoad = !0, GloableData.getInstance().iMain.loadData(h)
				}
				var l = o[3].split("=");
				if ("vars" == l[0]) {
					var c = l[1].split("|");
					GloableData.getInstance().dGameSystem.vars.loadData(c)
				}
				var g = o[4].split("=");
				if ("string" == g[0]) {
					var u = g[1].split("|");
					GloableData.getInstance().dGameSystem.dGameString.loadData(u)
				}
				var p = o[5].split("=");
				if ("canvas" == p[0]) {
					var d = decodeURIComponent(p[1]).split("|");
					UIManager.getInstance().loadData(d)
				} else if ("lifeline" == p[0]) {
					var d = decodeURIComponent(p[1]).split("|");
					UIManager.getInstance().loadLifeData(d)
				}
				var m = o[6].split("=");
				if ("replay" == m[0]) {
					var v = decodeURIComponent(m[1]).split("|");
					GloableData.getInstance().dGameSystem.replay.loadData(v)
				}
				var f = o[7].split("=");
				if ("cuiindex" == f[0]) {
					var I = f[1];
					GloableData.getInstance().CUIFromIndex = parseInt(I)
				}
				var y = o[9].split("=");
				if ("sFloatBut" == y[0] && UIManager.getInstance().sFloatButton.loadData(y[1]), o[11]) {
					var _ = o[11].split("=");
					"videoMgr" == _[0] && GloableData.getInstance().ovideo.loadData(_[1])
				} else {
					var _ = o[10].split("=");
					"videoMgr" == _[0] && GloableData.getInstance().ovideo.loadData(_[1])
				}
				return !0
			}, t.prototype.loadHeadData = function(t) {
				var e;
				if (GloableData.getInstance().dGameSystem.rwFile.isCloud) {
					var i = GloableData.getInstance().operationFrame.getLocalCloudData(t);
					return e = JSON.parse(i), this.loadHeadCloudData(e)
				}
				return e = window.localStorage.getItem("orgsave" + GloableData.getInstance().gameInfo.guid + t), this.loadHeadLocalData(e)
			}, t.prototype.loadHeadLocalData = function(t) {
				if (null == t) return null;
				var e = new Array,
					i = t.split("@"),
					a = i[0].split("=");
				"time" == a[0] && (e[0] = a[1]);
				var n = i[1].split("=");
				"storyname" == n[0] && (e[1] = n[1]);
				var s = i[8].split("=");
				if ("saveIcon" == s[0] && (e[2] = s[1]), i[10]) {
					var o = i[10].split("=");
					"limit" == o[0] && (e[3] = parseInt(o[1]))
				}
				return e
			}, t
		}();
	t.SaveFile = a
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				e.getInt32(), 
				this.showMapName = 0 != e.getInt32(), 
				this.showDate = 0 != e.getInt32(), 
				this.backimage = new t.DFileName(e), 
				this.max = e.getInt32(), 
				this.column = e.getInt32(), 
				this.spanRow = e.getInt32(), 
				this.spanCol = e.getInt32(), 
				this.showMinPic = 0 != e.getInt32(), 
				this.nameX = e.getInt32(), 
				this.nameY = e.getInt32(), 
				this.dateX = e.getInt32(), 
				this.dateY = e.getInt32(), 
				this.picX = e.getInt32(), 
				this.picY = e.getInt32(), 
				this.zoom = e.getInt32(), 
				this.viewport = new t.DViewport(e), 
				this.backButton = new t.DButtonIndex(e), 
				this.closeButton = new t.DButtonIndex(e);
			}
			return e
		}();
	t.DSaveData = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				e.getInt32(), 
				this.backimage = new t.DFileName(e), 
				this.closeButton = new t.DButtonIndex(e), 
				this.viewport = new t.DViewport(e)
			}
			return e
		}();
	t.DReplay = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				this.profiles = [];
				var c = t.getInt32();
				for (var e = c, i = 0; e > i; i++) 
					t.getInt32(),
					this.profiles.push({
						id: t.getInt32(),
						name: t.readStringE(),
						headPath: t.readStringE(),
						layoutType: t.getInt32(),
						headWidth: t.getInt32(),
						headHeight: t.getInt32(),
						bgPath: t.readStringE(),
						sendActionType: t.getInt32(),
						sePath: t.readStringE(),
						uiIndex: t.readStringE(),
						bgTopH: t.getInt32(),
						bgBottomH: t.getInt32(),
						bgLeftW: t.getInt32(),
						bgRightW: t.getInt32(),
						msgAreaTopH: t.getInt32(),
						msgAreaBottomH: t.getInt32(),
						msgAreaLeftW: t.getInt32(),
						msgAreaRightW: t.getInt32(),
						bubbleOffY: t.getInt32(),
						spaceFaceAndName: t.getInt32(),
						spaceFaceAndMsg: t.getInt32(),
						msgFontPath: t.readStringE(),
						msgFontSize: t.getInt32(),
						spaceNameAndMsg: t.getInt32(),
						lineSpace: t.getInt32(),
						nameFontSize: t.getInt32(),
						voiceHeight: t.getInt32(),
						tempA: t.readStringE(),
						tempB: t.readStringE()
					});//, alert(c+' '+i+' '+this.profiles.length)
				for (var a = t.getInt32(), i = 0; a > i; i++) 
					t.readStringE(), 
					t.getInt32(), 
					t.getInt32()
			}
			return t
		}();
	t.DPopMsg = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				e.getInt32(), 
				this.FileName = new t.DFileName(e), 
				this.Volume = e.getInt32()
			}
			return e
		}();
	t.DMusicItem = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				this.rowNum = t.getInt32(), this.colNum = t.getInt32(), this.bLonger = 1 == t.getInt8(), this.listTurnNum = new Array, this.listTurnPosRow = new Array;
				for (var e = 0; e < this.rowNum; ++e) {
					var i = t.getInt32();
					this.listTurnNum.push(i);
					var a = new Array;
					if (0 == i) a.push(t.getInt32());
					else for (var n = 0; i > n; ++n) a.push(t.getInt32());
					this.listTurnPosRow.push(a)
				}
			}
			return t
		}();
	t.DMpngImage = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				t.getInt32(), 
				this.FaceStyle = t.getInt32(), 
				this.ChoiceButtonIndex = t.getInt32(), 
				this.Talk = new i(t), 
				this.Name = new a(t)
			}
			return t.prototype.faceInMessageBox = function() {
				return 1 == this.FaceStyle
			}, t
		}();
	t.DMessageBox = e;
	var i = function() {
			function e(e) {
				e.getInt32(), 
				this.backX = e.getInt32(), 
				this.backY = e.getInt32(), 
				this.backimage = new t.DFileName(e), 
				this.FaceBorderImage = new t.DFileName(e), 
				this.FaceBorderX = e.getInt32(), 
				this.FaceBorderY = e.getInt32(), 
				this.textX = e.getInt32(), 
				e.getInt32(), 
				this.textY = e.getInt32(), 
				e.getInt32();
				var i = e.getInt32();
				this.buttons = new Array(i);
				for (var a = 0; i > a; a++) this.buttons[a] = new t.DButtonIndex(e)
			}
			return e
		}();
	t.TalkWin = i;
	var a = function() {
			function e(e) {
				e.getInt32(), 
				this.backX = e.getInt32(), 
				this.backY = e.getInt32(), 
				this.backimage = new t.DFileName(e), 
				this.isCenter = 0 != e.getInt32(), 
				this.textX = e.getInt32(), 
				this.textY = e.getInt32()
			}
			return e
		}();
	t.NameWin = a
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				this.items = [], 
				this.itemHP = [], 
				this.dataVer = 0, 
				this.bgPic = new t.DFileName(e), 
				this.rightPic = new t.DFileName(e), 
				this.rightPicPos = new OPoint(
					e.getInt32(), 
					e.getInt32()
				), 
				this.flowerCountTextPos = new OPoint(
					e.getInt32(), 
					e.getInt32()
				), 
				this.flowerCountFont = e.readStringE(), 
				this.flowerCountFontSize = e.getInt32(), 
				this.flowerPic = new t.DFileName(e), 
				this.flowerPicPos = new OPoint(
					e.getInt32(), 
					e.getInt32()
				), 
				this.flowerCountPos = new OPoint(
					e.getInt32(), 
					e.getInt32()
				), 
				this.payBtn = new t.DButtonIndex(e), 
				this.rewardAuthorBtn = new t.DButtonIndex(e), 
				this.closeBtn = new t.DButtonIndex(e), 
				this.buyMessagePic = new t.DFileName(e), 
				this.confirmBuyBtn = new t.DButtonIndex(e), 
				this.cancelBuyBtn = new t.DButtonIndex(e), 
				this.buySuccessPic = new t.DFileName(e), 
				this.buyErrorPic = new t.DFileName(e), 
				this.itemNumber = e.getInt32();
				for (var i = 0; i < this.itemNumber; i++) e.getInt32(), this.items.push(new t.DMallItem(e));
				try {
					this.dataVer = e.getInt32();
					for (var a = e.getInt32(), n = 0; a > n; n++) {
						var s = e.getInt32(),
							o = 1 == e.getInt32();
						e.readStringE(), this.itemHP.push({
							id: s,
							hp: o
						})
					}
				} catch (r) {}
			}
			return e.prototype.getItemDataById = function(t) {
				var e, i = this.items;
				for (var a in i) if (e = i[a], e.itemId == t) break;
				return e
			}, e
		}();
	t.DMall = e;
	var i = function() {
			function e(e) {
				this.itemAttributes = [], this.itemId = e.getInt32(), this.itemPos = new OPoint(e.getInt32(), e.getInt32()), this.itemSize = {
					w: e.getInt32(),
					h: e.getInt32()
				}, this.itemName = e.readStringE(), this.itemNamePos = new OPoint(e.getInt32(), e.getInt32()), this.itemNameFontSize = e.getInt32(), this.itemFontName = e.readStringE(), this.fontColor = new t.OColor(e.readStringE()).getColorToUint(), this.itemType = e.getInt32(), this.itemPic = new t.DFileName(e), this.itemPicSize = {
					w: e.getInt32(),
					h: e.getInt32()
				}, this.itemPicBG = new t.DFileName(e), this.itemPicBGPos = new OPoint(e.getInt32(), e.getInt32()), this.itemPicBGSize = {
					w: e.getInt32(),
					h: e.getInt32()
				}, this.itemPrice = e.getInt32(), this.priceFlowerPos = new OPoint(e.getInt32(), e.getInt32()), this.itemPricePos = new OPoint(e.getInt32(), e.getInt32()), this.itemPriceFontSize = e.getInt32(), this.itemDesc = e.readStringE(), this.isRepeat = 0 != e.getInt32(), this.itemStatus = e.getInt32(), this.itemFree = 0 != e.getInt32(), this.itemBgPic = new t.DFileName(e), this.itemDisabled = new t.DFileName(e), this.itemBuyBtn = new t.DButtonIndex(e), this.itemEnable = new t.DFileName(e), this.itemAttribute = e.readStringE(), this.itemVarAttributeNum = e.getInt32();
				for (var i = 0; i < this.itemVarAttributeNum; i++) this.itemAttributes.push(new t.DMallItemAttribute(e))
			}
			return e
		}();
	t.DMallItem = i;
	var a = function() {
			function t(t) {
				t.getInt32(), this.arrributeId = t.getInt32(), this.operator = t.getInt32(), this.varValue = t.getInt32()
			}
			return t
		}();
	t.DMallItemAttribute = a
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				if (
					this.Headr = new t.DHeader(e), 
					mgr.DataMgr.instance.bd.set("popMsg.ver", this.Headr.ver > 104 ? 2 : 1), 
					this.System = new t.DSystem(e), 
					2 == mgr.DataMgr.instance.bd.get("popMsg.ver") && 
						mgr.DataMgr.instance.bd.set("popMsg.profiles", new t.DPopMsg(e).profiles), 
					this.stories = new Dictionary, 
					GloableData.getInstance().isNew
				) {
					if (GloableData.getInstance().gameInfo.ver >= 104) {
						var i = e.getInt32();
						this.DFloatButton = new Array(i);
						for (var a = 0; i > a; a++) this.DFloatButton[a] = new t.DFloatButtonData(e)
					}
				} else {
					e.getInt32(), this.projectName = e.readStringE();
					for (var n = e.getInt32(), a = 0; n > a; a++) {
						e.getInt32();
						var s = new t.DStory(e);
						this.stories.add(s.ID, s)
					}
					if (GloableData.getInstance().gameInfo.ver >= 104) {
						var i = e.getInt32();
						this.DFloatButton = new Array(i);
						for (var a = 0; i > a; a++) this.DFloatButton[a] = new t.DFloatButtonData(e)
					}
				}
			}
			return e.prototype.getStory = function(t) {
				return this.stories.containsKey(t) ? this.stories.getValue(t) : (this.loadStory(t), null)
			}, e.prototype.delStory = function(t) {
				this.stories.remove(t)
			}, e.prototype.loadStory = function(t, e, i) {
				if (void 0 === e && (e = null), void 0 === i && (i = null), this.loadCompleteCallBack = e, this.loadCompleteCallBackThisObj = i, t && GloableData.getInstance().hasFileItem("game" + t + ".bin")) {
					var a = GloableData.getInstance().getFileItem("game" + t + ".bin"), n = a.url();
					0 == a.isUpDone && (a.isUpDone = 1, OrgWeb.prototype.upTrafficFileNum(a.fileSize, 1)), LoadAssets.getInstance().imgTemp.length > 0 && LoadAssets.getInstance().imgTemp.splice(0, LoadAssets.getInstance().imgTemp.length), EventCenter.addEventListener(n, this, this.loadStoryComplete), HttpManager.getInstance().sendGetRequest(n, null, null, "arraybuffer", this, !0)
				}
			}, e.prototype.loadStoryComplete = function(e) {
				var i = new GameByte(e.data);
				i.getInt32();
				var a = new t.DStory(i);
				i.clear(), 
				this.stories.add(a.ID, a), 
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_STORY_ITEM_COMPLETE, a)), 
				this.loadCompleteCallBack && (this.loadCompleteCallBackThisObj ? this.loadCompleteCallBack.call(this.loadCompleteCallBackThisObj, a) : this.loadCompleteCallBack.call())
			}, e
		}();
	t.DMain = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t() {
				this.Depth = 0, this.StoryId = 0, this.Pos = 0, this.IsHaveSub = 0, this.SubStory = "", this.Depth = GloableData.getInstance().allDepth, this.StoryId = 0, this.Pos = 0, this.IsHaveSub = 0, this.SubStory = "", this.IndentStack = new Object
			}
			return t
		}();
	t.DLogic = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				this.ver = t.getInt32(), 
				this.GWidth = t.getInt32(), 
				this.GHeight = t.getInt32(), 
				this.MaxPicWidth = t.getInt32(), 
				this.MaxPicHeight = t.getInt32(), 
				this.guid = t.readStringE(), 
				this.title = t.readStringE(), 
				this.pver = t.getInt32(), 
				t.getInt32(), 
				t.getInt32(), 
				GloableData.getInstance().gameInfo.ver = this.ver, 
				GloableData.getInstance().gameInfo.gName = this.title, 
				GloableData.getInstance().gameInfo.gGameHeight = this.GHeight, 
				GloableData.getInstance().gameInfo.gGameWidth = this.GWidth
			}
			return t
		}();
	t.DHeader = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t() {
				this.waitLoadExData = !1, this.tempStrEx = "", this.data = new Array;
				for (var t = 0; t < this.data.length; ++t) this.data[t] = null
			}
			return t.prototype.initData = function() {
				for (var t = 0; t < this.data.length; ++t) this.data[t] = null
			}, t.prototype.getVar = function(t) {
				return (null == this.data[t] || isNaN(this.data[t])) && (this.data[t] = 0), this.data[t]
			}, t.prototype.setVar = function(t, e) {
				var i = parseInt(e);
				this.data[t] = i, isNaN(i) && (this.data[t] = 0), this.saveExData()
			}, t.prototype.saveData = function(t) {
				for (var e = 0, i = "", a = 0; a < this.data.length; a++) null != this.data[a] && (t ? t.push(a + "|", this.data[a] + "|") : i += a + "|" + this.data[a] + "|", e += 1);
				return t ? t.unshift(e + "|") : i = e + "|" + i, i
			}, t.prototype.loadData = function(t) {
				for (var e = 0; e < this.data.length; e++) this.data[e] && null == this.data[e];
				for (var i = parseInt(t.shift()), e = 0; e < this.data.length; ++e) this.data[e] = null;
				for (var e = 0; i > e; ++e) {
					var a = parseInt(t.shift());
					this.data[a] = parseInt(t.shift())
				}
				this.saveExData(null, !0)
			}, t.prototype.saveExData = function(t, e) {
				var i = this;
				void 0 === t && (t = null), clearTimeout(this.tEx), this.tEx = setTimeout(function() {
					var t = GloableData.getInstance().savekey + "varsEx",
						a = new Array;
					GloableData.getInstance().dGameSystem.varsEx.saveData(a);
					for (var n = "", s = 0; s < a.length; ++s) n += a[s];
					if (n = "varsEx=" + n + "#time=" + Math.ceil(Date.now() / 1e3) + "#limit=1#new=true#platform=H5_NEW", GloableData.getInstance().gameInfo.isPc) return void PCSaveData(t, n);
					if (!e) {
						if (!OrgWeb.getInstance().getIsUnLock() && OrgWeb.getInstance().getTanFlowerState()) return i.isUpVarsExData = !0, void CloudProxy.getInstance().upSaveExData("limitfree", n, i, i.upExComplete);
						OrgWeb.getInstance().getLoginStatus() && (i.isUpVarsExData = !0, CloudProxy.getInstance().upSaveExData("normal", n, i, i.upExComplete))
					}
					window.localStorage.setItem(t, n)
				}, 10 * GloableStaticData.GAME_RUN_TIME)
			}, t.prototype.upExComplete = function() {
				this.isUpVarsExData = !1, GloableData.getInstance().waitUpExCompleteSnap()
			}, t.prototype.loadExDataComplete = function(t) {
				if (1 == parseInt(t.status) && "" != t.data) {
					if (this.tempStrEx) return void this.restoreExData(this.tempStrEx, t.data);
					this.restoreExData(t.data)
				}
			}, t.prototype.getExTimePlat = function(t) {
				var e = new Array;
				if (t && t.indexOf("#") > -1) {
					var i = t.split("#");
					i[0].indexOf("varsEx") > -1 && (e[0] = i[0].split("=")[1]), i[1].indexOf("time") > -1 && (e[1] = i[1].split("=")[1]), i[2].indexOf("limit") > -1 && (e[2] = i[2].split("=")[1]), i[3].indexOf("new") > -1 && (e[3] = i[3].split("=")[1]), i[4] && i[4].indexOf("platform") > -1 && (e[4] = i[4].split("=")[1])
				}
				return e
			}, t.prototype.restoreExData = function(t, e) {
				void 0 === e && (e = null);
				var i = this.getExTimePlat(t),
					a = this.getExTimePlat(e);
				if (i.length > 0 && a.length > 0) {
					if (i[1] && a[1]) return void(i[1] > a[1] ? GloableData.getInstance().dGameSystem.varsEx.loadData(i[0].split("|")) : GloableData.getInstance().dGameSystem.varsEx.loadData(a[0].split("|")));
					if (i[1]) return void GloableData.getInstance().dGameSystem.varsEx.loadData(i[0].split("|"));
					if (a[1]) return void GloableData.getInstance().dGameSystem.varsEx.loadData(a[0].split("|"))
				}
				return i.length > 0 ? void GloableData.getInstance().dGameSystem.varsEx.loadData(i[0].split("|")) : a.length > 0 ? void GloableData.getInstance().dGameSystem.varsEx.loadData(a[0].split("|")) : void 0
			}, t.prototype.loadExData = function(t) {
				if (this.tempStrEx = "", !GloableData.getInstance().gameInfo.isPc && !OrgWeb.getInstance().getIsUnLock() && OrgWeb.getInstance().getTanFlowerState()) return void CloudProxy.getInstance().downSaveExData("limitfree", this, this.loadExDataComplete);
				var e, i = GloableData.getInstance().savekey + "varsEx";
				return e = GloableData.getInstance().gameInfo.isPc ? PCLoadData(i) : window.localStorage.getItem(i), t && !GloableData.getInstance().gameInfo.isPc ? (this.tempStrEx = e, void CloudProxy.getInstance().downSaveExData("normal", this, this.loadExDataComplete)) : void this.restoreExData(e)
			}, t
		}();
	t.DGameVariables = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e() {
				this.autoRun = !1, this.quickRun = !1, this.vars = new t.DGameVariables, this.varsEx = new t.DGameVariables, this.dGameString = new t.DGameString, this.replay = new t.SaveReplay, this.other = new t.SaveOther, this.rwFile = new t.SaveFile
			}
			return e.prototype.initData = function() {
				this.vars.initData(), this.dGameString.initData()
			}, e
		}();
	t.DGameSystem = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t() {
				this.data = new Array;
				for (var t = 0; t < this.data.length; ++t) this.data[t] = null
			}
			return t.prototype.initData = function() {
				for (var t = 0; t < this.data.length; ++t) this.data[t] = null
			}, t.prototype.getVar = function(t) {
				return null == this.data[t] && (this.data[t] = ""), this.data[t]
			}, t.prototype.setVar = function(t, e) {
				this.data[t] = e.toString()
			}, t.prototype.saveData = function(t) {
				for (var e = "", i = 0, a = 0; a < this.data.length; a++) null != this.data[a] && (t ? t.push(a + "|", this.data[a] + "|") : e += a + "|" + this.data[a] + "|", i += 1);
				return t ? t.unshift(i + "|") : e = i + "|" + e, e
			}, t.prototype.saveJsonData = function() {
				for (var t = {}, e = 0; e < this.data.length; e++) null != this.data[e] && (t[e] = encodeURIComponent(this.data[e]));
				return t
			}, t.prototype.loadJsonData = function(t) {
				for (var e = 0; e < this.data.length; e++) this.data[e] && null == this.data[e];
				for (var i in t) this.data[i] = decodeURIComponent(t[i])
			}, t.prototype.loadData = function(t) {
				for (var e = 0; e < this.data.length; e++) this.data[e] && null == this.data[e];
				for (var i = parseInt(t.shift()), e = 0; e < this.data.length; ++e) this.data[e] = null;
				for (var e = 0; i > e; ++e) {
					var a = parseInt(t.shift());
					this.data[a] = t.shift()
				}
			}, t
		}();
	t.DGameString = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				e.getInt32(), 
				this.backImage = new t.DFileName(e);
				var i = e.getInt32();
				this.buttons = new Array(i);
				for (var a = 0; i > a; a++) this.buttons[a] = new t.DButtonIndex(e)
			}
			return e
		}();
	t.DGameMenu = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				var a = 0;
				a = e.getInt32(), this.event = new Array(a);
				for (var n = 0; a > n; n++) e.getInt32(), this.event[n] = new t.DEvent(e);
				this.x = e.getInt32(), 
				this.y = e.getInt32(), 
				this.name = e.readStringE(), 
				a = e.getInt32(), 
				this.items = new Array(a);
				for (var n = 0; a > n; n++) this.items[n] = new i(e)
			}
			return e
		}();
	t.DFloatButtonData = e;
	var i = function() {
			function e(e) {
				this.type = e.getInt32(), 
				this.x = e.getInt32(), 
				this.y = e.getInt32(), 
				this.image = e.readStringE(), 
				this.isUserString = 0 != e.getInt32(), 
				this.indexOfStr = e.getInt32(), 
				this.stringIndex = e.getInt32(), 
				this.varIndex = e.getInt32(), 
				this.color = new t.OColor(e.readStringE())
			}
			return e
		}();
	t.DFloatButtonElementData = i
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				t.getInt32(), 
				this.From = t.getInt32(), 
				this.name = t.readStringE()
			}
			return t.prototype.toString = function() {
				return this.name
			}, t.prototype.IsNil = function() {
				return this.name.length <= 0
			}, t
		}();
	t.DFileName = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t, e, i) {
				if ("number" == typeof t) return this.Code = t, 
				this.Indent = e, 
				void(this.Argv = i);
				var a = t;
				this.Code = a.getInt32(), 
				this.Indent = a.getInt32();
				var n = a.getInt32();
				this.Argv = new Array(n);
				for (var s = 0; n > s; s++) this.Argv[s] = a.readStringE(), 
				100 != this.Code && 
				215 != this.Code && 
				107 != this.Code && 
				221 != this.Code && 
				(this.Argv[s] = this.Argv[s].replace("\\", "/"))
			}
			return t.prototype.dispose = function() {
				for (this.Code = null, this.Indent = null; this.Argv.length > 0;) {
					var t = this.Argv.shift();
					t = null
				}
				this.Argv = null
			}, t
		}();
	t.DEvent = e;
	var i = function() {
			function t(t, e, i) {
				this.Code = t, 
				this.Indent = e, 
				this.Argv = i
			}
			return t.prototype.update = function(t, e, i) {
				this.Code = t, this.Indent = e, this.Argv = i
			}, t.prototype.dispose = function() {
				for (this.Code = null, this.Indent = null; this.Argv.length > 0;) {
					var t = this.Argv.shift();
					t = null
				}
				this.Argv = null
			}, t
		}();
	t.DEvent1 = i
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				e.getInt32();
				var a = 0;
				a = e.getInt32(), this.loadEvent = new Array(a);
				for (var n = 0; a > n; n++) e.getInt32(), this.loadEvent[n] = new t.DEvent(e);
				a = e.getInt32(), this.afterEvent = new Array(a);
				for (var n = 0; a > n; n++) e.getInt32(), this.afterEvent[n] = new t.DEvent(e);
				a = e.getInt32(), this.controls = new Array(a);
				for (var n = 0; a > n; n++) this.controls[n] = new i(e);
				this.showEffect = e.getInt32(), 
				this.isMouseExit = 0 != e.getInt32(), 
				this.isKeyExit = 0 != e.getInt32()
			}
			return e
		}();
	t.DCustomUIData = e;
	var i = function() {
			function e(e) {
				e.getInt32();
				var i = e.getInt32();
				this.event = new Array(i);
				for (var a = 0; i > a; a++) e.getInt32(), this.event[a] = new t.DEvent(e);
				this.type = e.getInt32(), 
				this.isUserString = 0 != e.getInt32(), 
				this.image1 = e.readStringE(), 
				this.image2 = e.readStringE(), 
				this.stringIndex = e.getInt32(), 
				this.isUserVar = 0 != e.getInt32(), 
				this.x = e.getInt32(), 
				this.y = e.getInt32(), 
				this.isUserIndex = 0 != e.getInt32(), 
				this.index = e.getInt32(), 
				this.maxIndex = e.getInt32(), 
				this.color = new t.OColor(e.readStringE())
			}
			return e
		}();
	t.DCustomUIItem = i
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				this.unid = -1, 
				e.getInt32(), 
				this.backImage = new t.DFileName(e), 
				this.column = e.getInt32(), 
				this.spanRow = e.getInt32(), 
				this.spanCol = e.getInt32(), 
				this.showPic = !! e.getInt32(), 
				this.showMsg = !! e.getInt32(), 
				this.px = e.getInt32(), 
				this.py = e.getInt32(), 
				this.mx = e.getInt32(), 
				this.my = e.getInt32(), 
				this.nx = e.getInt32(), 
				this.ny = e.getInt32(), 
				this.noName = e.readStringE(), 
				this.extend1 = e.readStringE(), 
				this.extend2 = e.readStringE(), 
				this.noPic = new t.DFileName(e);
				var a = e.getInt32();
				this.storyList = [];
				for (var n = 0; a > n; n++) this.storyList[n] = new i(e);
				this.viewport = new t.DViewport(e), this.selectButton = new t.DButtonIndex(e), this.closeButton = new t.DButtonIndex(e)
			}
			return e
		}();
	t.DCollectStory = e;
	var i = function() {
			function e(e) {
				try {
					e.getInt32(), this.name = e.readStringE(), this.storyID = e.getInt32(), this.picPath = new t.DFileName(e);
					var i = e.getInt32();
					this.remainData = !! i, this.message = e.readStringE(), this.extend1 = e.readStringE(), this.extend2 = e.readStringE()
				} catch (a) {}
			}
			return e
		}();
	t.DStoryItem = i
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				try {
					this.backImage = new t.DFileName(e), this.closeButton = new t.DButtonIndex(e), this.isHorizontal = !! e.getInt32(), this.isFreedom = !! e.getInt32(), this.padding = e.getInt32(), this.extend1 = e.readStringE(), this.extend2 = e.readStringE();
					var i = e.getInt32();
					this.itemList = [];
					for (var a = 0; i > a; a++) this.itemList[a] = new n(e)
				} catch (s) {
					throw console.error(s), new Error(s)
				}
			}
			return e.prototype.getItemByUnID = function(t) {
				t = Math.ceil(t);
				for (var e = 0; e < this.itemList.length; e++) if (this.itemList[e].unid == t) return this.itemList[e];
				return null
			}, e
		}();
	t.DCollect = e;
	var i = function() {
			function t() {}
			return t.CG = 1, t.BGM = 2, t.STORY = 3, t
		}();
	t.DCollectItemType = i;
	var a = function() {
			function t() {}
			return t.FAST_CHANGE = 1, t.LOOP = 2, t.OVER_CHANGE = 3, t
		}();
	t.DCloseMusicType = a;
	var n = function() {
			function e(e) {
				try {
					e.getInt32(), this.unid = e.getInt32(), this.type = e.getInt32(), this.type === i.CG ? this.item = new t.DCG(e) : this.type === i.BGM ? this.item = new t.DBGM(e) : this.type === i.STORY && (this.item = new t.DCollectStory(e)), this.item.unid = this.unid, this.name = e.readStringE(), this.button = new t.DButtonIndex(e), this.closeStatus = e.getInt32(), this.extend1 = e.readStringE(), this.extend2 = e.readStringE()
				} catch (a) {
					throw console.error(a), new Error(a)
				}
			}
			return e
		}();
	t.DCollectItem = n
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				this.curId = 0, this.repeat = [
					[],
					[]
				], this.cmdArr = t.events, this.formScene()
			}
			return t.prototype.formScene = function(t) {
				void 0 === t && (t = null);
				for (var e = []; this.curId < this.cmdArr.length;) {
					var i = this.cmdArr[this.curId++];
					switch (i.Code) {
					case 202:
						this.repeat[0].push(this.curId), null == this.repeat[1][this.repeat[0].length - 1] && this.repeat[1].unshift([]);
						break;
					case 209:
						if (0 == this.repeat[1].length) {
							this.logError(1001);
							continue
						}
						if (this.repeat[1].length < parseInt(i.Argv[0]) && this.logError(1002), 0 == parseInt(i.Argv[0])) {
							this.logError(1007);
							continue
						}
						this.repeat[1][(this.repeat[1].length < parseInt(i.Argv[0]) ? this.repeat[1].length : parseInt(i.Argv[0])) - 1].push(i);
						break;
					case 203:
						for (this.repeat[1].reverse(); this.repeat[1][this.repeat[0].length - 1].length > 0;) this.repeat[1][this.repeat[0].length - 1].pop().links = [this.curId];
						this.repeat[1].pop(), this.repeat[1].reverse(), i.links = [this.repeat[0].pop()];
						break;
					case 101:
					case 1010:
					case 1011:
					case 204:
					case 200:
					case 217:
						var a = this.formScene(i.links = 200 == i.Code || 217 == i.Code ? [this.curId] : []);
						if (!a) {
							this.logError(1006);
							continue
						}
						for (; a.length;) a.pop().push(this.curId);
						break;
					case 108:
					case 212:
						if (null == t) {
							this.logError(1003);
							continue
						}
						0 == t.length ? i.links = [this.curId] : e.push(i.links = []), t.push(this.curId);
						break;
					case 211:
						if (null == t) {
							this.logError(1004);
							continue
						}
						t.push(this.curId), e.push(i.links = []);
						break;
					case 102:
					case 205:
						return e.push(i.links = []), e;
					case 201:
						if (null == t) {
							this.logError(1005);
							continue
						}
						return 1 == t.length && t.push(this.curId), e.push(i.links = []), e
					}
				}
			}, t.prototype.logError = function(t, e) {
				switch (void 0 === e && (e = null), e = null == e ? this.curId - 1 : e, t) {
				case 1001:
					console.warn("repeat interrupt not in repeat @cmdId:", e);
					break;
				case 1002:
					console.warn("repeat interrupt level confused @cmdId:", e);
					break;
				case 1003:
					console.error("branch option without beginning  @cmdId:", e);
					break;
				case 1004:
					console.error("condition branch else without beginning (200/217) @cmdId:", e);
					break;
				case 1005:
					console.error("condition branch ending without beginning (200/217) @cmdId:", e);
					break;
				case 1006:
					console.error("branch beginning without ending @cmdId:", e);
					break;
				case 1007:
					console.warn("repeat interrupt level 0 @cmdId:", e)
				}
			}, t
		}();
	t.DChapter = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				this.unid = -1, 
				e.getInt32(), 
				this.backimage = new t.DFileName(e), 
				this.column = e.getInt32(), 
				this.spanRow = e.getInt32(), 
				this.spanCol = e.getInt32(), 
				this.showMessage = 0 != e.getInt32(), 
				this.megX = e.getInt32(), 
				this.megY = e.getInt32(), 
				this.zoom = e.getInt32(), 
				this.cgx = e.getInt32(), 
				this.cgy = e.getInt32(), 
				this.nopic = new t.DFileName(e);
				var a = e.getInt32();
				this.cglist = new Array(a);
				for (var n = 0; a > n; n++) this.cglist[n] = new i(e);
				this.viewport = new t.DViewport(e), 
				this.backButton = new t.DButtonIndex(e), 
				this.closeButton = new t.DButtonIndex(e)
			}
			return e
		}();
	t.DCG = e;
	var i = function() {
			function e(e) {
				e.getInt32(), 
				this.name = e.readStringE(), 
				this.cgpath = new t.DFileName(e), 
				this.message = e.readStringE()
			}
			return e
		}();
	t.DCGItem = i
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				t instanceof Array ? (
					this.index = parseInt(t[0]), 
					this.x = parseInt(t[1]), 
					this.y = parseInt(t[2])
				) : (
					t.getInt32(), 
					this.index = t.getInt32(), 
					this.x = t.getInt32(), 
					this.y = t.getInt32()
				)
			}
			return t
		}();
	t.DButtonIndex = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				e.getInt32(), 
				this.name = e.readStringE(), 
				this.image1 = new t.DFileName(e), 
				this.image2 = new t.DFileName(e), 
				this.setImagePath(this.image1, this.image2), 
				this.x = e.getInt32(), 
				this.y = e.getInt32()
			}
			return e.prototype.setImagePath = function(t, e) {
				return "" !== t.name && "" == e.name ? void(e.name = t.name) : "" == t.name && "" !== e.name ? void(t.name = e.name) : void 0
			}, e
		}();
	t.DButton = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t() {
				this.urlStr = "", this.minW = 0, this.minH = 0, this.isUserBitMap = !1, this.urlStr = "font/font.list"
			}
			return t.prototype.startLoad = function(t, e) {
				if (this.callBack = e, this.caller = t, GloableData.getInstance().gameInfo.isPc) return void this.pathCallback(null);
				var i = GloableData.getInstance().getFileListItemURL(this.urlStr);
				EventCenter.addEventListener(i, this, this.pathCallback), HttpManager.getInstance().sendGetRequest(i, null, this.pathCallback, "arraybuffer", this, !0)
			}, t.prototype.pathCallback = function(t) {
				var e;
				if (GloableData.getInstance().gameInfo.isPc) {
					var i = Base64Binary.decodeArrayBuffer(GloableData.getInstance().tempData.FontListArr);
					e = new GameByte(i)
				} else EventCenter.removeEventListener(t.url, this, this.pathCallback), e = new GameByte(t.data);
				e.getInt32(), this.FontName = e.readStringE(), this.FontSize = e.getInt32(), this.BitmapPicName = this.FontName + "$" + this.FontSize;
				var a;
				if (GloableData.getInstance().gameInfo.isPc) this.path_2_Callback(null);
				else {
					var n = "font/" + this.FontName + "$" + this.FontSize + ".xfi";
					a = GloableData.getInstance().getFileListItemURL(n.toLowerCase()), EventCenter.addEventListener(a, this, this.path_2_Callback), HttpManager.getInstance().sendGetRequest(a, null, this.path_2_Callback, "arraybuffer", this, !0)
				}
			}, t.prototype.path_2_Callback = function(t) {
				var e;
				if (GloableData.getInstance().gameInfo.isPc) {
					var i = Base64Binary.decodeArrayBuffer(GloableData.getInstance().tempData.FontXfiArr);
					e = new GameByte(i)
				} else EventCenter.removeEventListener(t.url, this, this.path_2_Callback), e = new GameByte(t.data);
				if (this.bitFontMaps = new Dictionary, this.fontFilterMaps = new Dictionary, this.rows = e.getInt32(), this.cols = e.getInt32(), this.maxW = e.getInt32(), GloableData.getInstance().sysFontSize = GloableData.getInstance().gameMainData.System.FontSize, this.maxH = e.getInt32(), GloableData.getInstance().sysFontSize > 34 && (GloableData.getInstance().sysFontSize = 34), GloableData.getInstance().sysFontDifY = GloableData.getInstance().getFontDiffy(GloableData.getInstance().gameMainData.System.FontName, GloableData.getInstance().sysFontSize), this.count = e.getInt32(), OrgWeb.getInstance().getIsPC()) {
					this.isUserBitMap = !0;
					for (var a = Math.ceil(this.count / (this.rows * this.cols)), n = [], s = 0; a > s; s++) n.push(GloableData.getInstance().getFileListItemURL("font/" + this.BitmapPicName + "$" + (s + 1) + ".png"));
					return void ORG.loader.load(n, OHandler.create(this, this.loadFontPngComplete, [a, e]), null, OLoader.IMAGE)
				}
				this.readFontConfig(e)
			}, t.prototype.countSysFontSize = function(t, e) {
				var i = new OText;
				return i.text = "啊", i.fontSize = e, t - 2 > i.width && (e += .5, e = this.countSysFontSize(t, e)), i.width > t && (e -= .5, e = this.countSysFontSize(t, e)), e
			}, t.prototype.loadFontPngComplete = function(t, e, i) {
				for (var a = {}, n = 0; t > n; n++) {
					var s = GloableData.getInstance().getFileListItemURL("font/" + this.BitmapPicName + "$" + (n + 1) + ".png");
					ORG.loader.getRes(s) ? a[n] = ORG.loader.getRes(s) : (a[n] = new laya.resource.Texture, a[n].src = s)
				}
				this.readFontConfig(e, a), a = null
			}, t.prototype.readFontConfig = function(t, e) {
				var i = 0,
					a = 0,
					n = GloableData.getInstance().gameMainData.System.FontTalkColor.getBitmapColor();
				this.white = [1, 0, 0, 0, n[0], 0, 1, 0, 0, n[1], 0, 0, 1, 0, n[2], 0, 0, 0, 1, 0];
				for (var s = new Laya.ColorFilter(this.white), o = 0; o < this.count; o++) if (t) {
					var r = t.getInt32(),
						h = t.getInt32(),
						l = t.getInt32(),
						c = t.readC2String(1);
					if (0 >= h ? h = this.maxW : i = h, 0 >= l ? l = this.maxH : a = l, this.isUserBitMap) {
						var g = Math.floor(r / (this.rows * this.cols)),
							u = r % this.cols * this.maxW,
							p = (Math.floor(r / this.cols) - this.rows * g) * this.maxH,
							d = new OSprite;
						d.size(h, l + 2), OrgWeb.getInstance().getIsPC() || (h -= 1), d.texture = OTexture.createFromTexture(e[g], u, p, h, l), this.fontFilterMaps.add(c, this.getFilter(d)), d.filters = [s], this.bitFontMaps.add(c, {
							index: r,
							w: h,
							h: l,
							sp: d
						})
					} else this.bitFontMaps.add(c, {
						index: r,
						w: h,
						h: l
					})
				}
				var m = this.bitFontMaps.getValue("|");
				if (m) GloableData.getInstance().textLineHeight = 1.5 * m.h;
				else {
					var v = encodeURIComponent("□ ");
					GloableData.getInstance().textLineHeight = 1.5 * this.getTextLineHeight(v)
				}
				this.callBack.call(this.caller)
			}, t.prototype.getTextLineHeight = function(t) {
				var e = t.substr(0, 1);
				t = t.substr(1, t.length);
				var i = this.bitFontMaps.getValue(e);
				return i ? i.h : this.getTextLineHeight(t)
			}, t.prototype.getFilter = function(t) {
				var e = [],
					i = utils.getMatByColor(GloableData.getInstance().gameMainData.System.FontStyleColor),
					a = new Laya.ColorFilter(i);
				if (GloableData.getInstance().gameMainData.System.FontStroke) {
					var n = t.clone();
					n.x = 1, n.y = 1, n.filters = [a];
					var s = t.clone();
					s.x = 1, s.y = 0, s.filters = [a], e.push(s);
					var o = t.clone();
					o.x = 1, o.y = -1, o.filters = [a], e.push(o);
					var r = t.clone();
					r.x = 0, r.y = -1, r.filters = [a], e.push(r);
					var h = t.clone();
					h.x = -1, h.y = -1, h.filters = [a], e.push(h);
					var l = t.clone();
					l.x = -1, l.y = 0, l.filters = [a], e.push(l);
					var c = t.clone();
					c.x = -1, c.y = 1, c.filters = [a], e.push(c);
					var g = t.clone();
					g.x = 0, g.y = 1, g.filters = [a], e.push(g)
				}
				if (GloableData.getInstance().gameMainData.System.FontFilter) {
					var h = t.clone();
					h.x = 1, h.y = 1, h.filters = [a], e.push(h)
				}
				return e
			}, t
		}();
	t.DBitmapFontData = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				this.unid = -1, 
				e.getInt32(), 
				this.backimage = new t.DFileName(e), 
				this.column = e.getInt32(), 
				this.spanRow = e.getInt32(), 
				this.spanCol = e.getInt32(), 
				this.showPic = 0 != e.getInt32(), 
				this.showMsg = 0 != e.getInt32(), 
				this.px = e.getInt32(), 
				this.py = e.getInt32(), 
				this.mx = e.getInt32(), 
				this.my = e.getInt32(), 
				this.nx = e.getInt32(), 
				this.ny = e.getInt32(), 
				this.noName = e.readStringE(), 
				this.noPic = new t.DFileName(e), 
				this.bgmCount = e.getInt32(), 
				this.bgmList = new Array(this.bgmCount);
				for (var a = 0; a < this.bgmCount; a++) this.bgmList[a] = new i(e);
				this.viewport = new t.DViewport(e), 
				this.selectButton = new t.DButtonIndex(e), 
				this.closeButton = new t.DButtonIndex(e)
			}
			return e
		}();
	t.DBGM = e;
	var i = function() {
			function e(e) {
				e.getInt32(), 
				this.name = e.readStringE(), 
				this.bgmPath = new t.DFileName(e), 
				this.picPath = new t.DFileName(e), 
				this.message = e.readStringE()
			}
			return e
		}();
	t.DBGMItem = i
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function e(e) {
				this.partsContent = [], this.md5Content = [], this.isFullAnimate = !1;
				try {
					this.ms = e.readCString(6), this.decCount = e.getInt32();
					for (var i = 0; i < this.decCount; i++) {
						e.readStringE(), e.readStringE()
					}
					if (this.backName = e.readStringE(), this.bgmd5 = e.readStringE(), "" !== this.bgmd5 && 32 != this.bgmd5.length) throw new Error(this.backName + " DAnimateData data error");
					this.partsCount = e.getInt32();
					for (var a = 0; a < this.partsCount; a++) {
						var n = new t.OActivePartsData(e);
						this.partsContent.push(n)
					}
					this.md5Count = e.getInt32();
					for (var i = 0; i < this.md5Count; i++) {
						var s = e.readStringE();
						if (32 != s.length) throw new Error(this.backName + " DAnimateData data error");
						this.md5Content.push(s)
					}
					e.clear(), this.isFullAnimate = !0
				} catch (o) {
					this.isFullAnimate = !1, e.clear(), console.error(o)
				}
			}
			return e
		}();
	t.DAnimateData = e
}(data || (data = {}));
var data;
!
function(t) {
	var e = function() {
			function t(t) {
				this.curId = 0, this.repeat = [
					[],
					[]
				], this.cmdArr = this.reform2Cmd(t.events), this.formScene()
			}
			return t.prototype.reform2Cmd = function(t) {
				for (var e = [], i = 0, a = t; i < a.length; i++) {
					var n = a[i];
					e.push({
						code: n.Code,
						para: n.Argv
					})
				}
				return e
			}, t.prototype.formScene = function(t) {
				void 0 === t && (t = null);
				for (var e = []; this.curId < this.cmdArr.length;) {
					var i = this.cmdArr[this.curId++];
					switch (i.code) {
					case 202:
						this.repeat[0].push(this.curId), null == this.repeat[1][this.repeat[0].length - 1] && this.repeat[1].push([]);
						break;
					case 209:
						this.repeat[1][parseInt(i.para[0]) - 1].push(i);
						break;
					case 203:
						for (this.repeat[1].reverse(); this.repeat[1][this.repeat[0].length - 1].length > 0;) this.repeat[1][this.repeat[0].length - 1].pop().links = [this.curId];
						this.repeat[1].pop(), this.repeat[1].reverse(), i.links = [this.repeat[0].pop()];
						break;
					case 101:
					case 1010:
					case 1011:
					case 204:
					case 200:
					case 217:
						for (var a = this.formScene(i.links = 200 == i.code || 217 == i.code ? [this.curId] : []); a.length;) a.pop().push(this.curId);
						break;
					case 108:
					case 212:
						0 == t.length ? i.links = [this.curId] : e.push(i.links = []), t.push(this.curId);
						break;
					case 211:
						t.push(this.curId), e.push(i.links = []);
						break;
					case 102:
					case 205:
						return e.push(i.links = []), e;
					case 201:
						return 1 == t.length && t.push(this.curId), e.push(i.links = []), e
					}
				}
			}, t
		}();
	t.Chapter = e
}(data || (data = {}));
var UrlType = function() {
		function t() {}
		return t.C_URL = "C_URL", t.WWW_URL = "WWW_URL", t.M_URL = "M_URL", t.P_URL = "P_URL", t.R_URL = "R_URL", t.CG2_URL = "CG2_URL", t
	}(),
	HttpURL = function() {
		function t() {}
		return t.init = function() {
			var e = window.location.href,
				i = utils.GetQueryString("testPath"),
				a = t.getWebUrl(UrlType.C_URL) + "/",
				n = t.getWebUrl(UrlType.WWW_URL) + "/",
				s = (t.getWebUrl(UrlType.M_URL) + "/", t.getWebUrl(UrlType.P_URL) + "/"),
				o = t.getWebUrl(UrlType.R_URL) + "/",
				r = t.getWebUrl(UrlType.CG2_URL) + "/",
				h = "//wmodcdn"+HOST+"/",
				l = "//dlcdn1.cgyouxi.com/shareres/";
			i ? (r = window.cgUrl + "/", l = "//testcdn"+HOST+"/") : (l = "//dlcdn1.cgyouxi.com/shareres/", r = "//cgv2"+HOST+"/"), e.indexOf("local-") > -1 ? h = "//test-" + h.replace("//", "") : e.indexOf("test-") > -1 ? h = "//test-" + h.replace("//", "") : e.indexOf("debug-") > -1 && (l = "//dlcdn1.cgyouxi.com/shareres/"), t.WMOD_RES_SERVER_URL = t.TMP_Pro + h, t.M_RESOUSE_SERVER_URL = t.TMP_Pro + l, t.M_C_SERVER_URL = t.TMP_Pro + a, t.M_M_SERVER_URL = t.TMP_Pro + n, t.CGV2_SERVER_URL = t.TMP_Pro + r, t.M_MAll_SERVER_URL = t.M_M_SERVER_URL, t.POSSPORT_SERVER_URL = t.TMP_Pro + s, t.REPORT_SERVER_URL = t.TMP_Pro + o, t.Ajax_Url = {
				UP_GAME_GET_KEY: t.M_C_SERVER_URL + "collect/v1/index/getkey",
				UP_GAME_RUN_TIME: t.M_C_SERVER_URL + "collect/v1/index/runtime",
				UP_GAME_UV: t.M_C_SERVER_URL + "collect/v1/index/set_match_game_uv",
				UP_GAME_PV: t.M_C_SERVER_URL + "collect/v1/index/set_game_pv_post",
				FLOWER_GAME_ALL_FLOWER: t.M_M_SERVER_URL + "ajax/game/game_flower_by_me.json",
				FLOWER_SHARE_PLUS_FLOWER: t.M_M_SERVER_URL + "ajax/share/share_game.json",
				FLOWER_CHB_BUY_FLOWER: t.M_M_SERVER_URL + "ajax/pay/flower.json",
				FLOWER_SEND_FLOWER: t.M_M_SERVER_URL + "ajax/contains/flower.json",
				FLOWER_SHARE_ALL_INFO: t.M_M_SERVER_URL + "ajax/share/all_share_award_conf.json",
				FLOWER_SHARE_NOW_FLOWER: t.M_M_SERVER_URL + "ajax/share/share_award_conf.json",
				USER_CJH_INFO: t.M_M_SERVER_URL + "ajax/user/get_flower.json",
				USER_INFO: t.M_M_SERVER_URL + "ajax/user/getUserInfo.json",
				GAME_GET_GAME_INFO: t.M_M_SERVER_URL + "ajax/game/get_game_info.json",
				GAME_SHARE_HREF: t.M_M_SERVER_URL + "game",
				GAME_UPDATE_LOG: t.M_M_SERVER_URL + "ajax/game/update_log_list.json",
				GAME_SYSTEM_TIME: t.M_M_SERVER_URL + "api/tool",
				GAME_TASK_CONTENT: t.M_M_SERVER_URL + "ajax/task/game_task_point.json",
				GAME_LINK_OVER: t.M_M_SERVER_URL + "ajax/game/get_game_link.json",
				GAME_COMMENT: t.M_M_SERVER_URL + "ajax/comment/comments.json",
				GAME_FINE_COMMEN: t.M_M_SERVER_URL + "ajax/comment/fine_comments.json",
				GET_MALL_ITEM_LIST_BY_USER: t.M_MAll_SERVER_URL + "PropShop/engine/v1/user/getUserHaveAllPropNum",
				GET_MALL_ITEM_INFO_BY_ID: t.M_MAll_SERVER_URL + "PropShop/engine/v1/user/getUserHavePropNum",
				GET_USER_FLOWER: t.M_MAll_SERVER_URL + "PropShop/engine/v1/user/getMyAccountMoney",
				GET_MALL_BUY_ITEM_ORDER: t.M_MAll_SERVER_URL + "PropShop/engine/v1/PropOrder/createBuyOrder",
				GET_PH_INIT: t.M_M_SERVER_URL + "HpSys/engine/v1/user/init_user_hp",
				GET_PH_STATUS: t.M_M_SERVER_URL + "HpSys/engine/v1/user/un_lock",
				GET_SYS_TIME: t.M_M_SERVER_URL + "HpSys/engine/v1/user/get_sys_time",
				GAT_USER_HP: t.M_M_SERVER_URL + "HpSys/engine/v1/user/get_user_hp",
				REPORT_SERVER: t.REPORT_SERVER_URL + "report/v1/index/bdlog",
				FREE_SERVER_TIME: t.M_M_SERVER_URL + "PropShop/engine/v1/game/getLimitFreeTime",
				FREE_OLD_SERVER_TIME: t.M_M_SERVER_URL + "PropShop/engine/v1/game/getOldLimitFreeTime",
				GAT_AD_List: t.M_M_SERVER_URL + "ajax/ad/new_get_game_ad_list.json",
				GAT_ABOX_FLOWER_BY_ME: t.M_M_SERVER_URL + "api/client",
				GET_MALL_BUY_ITEM_ORDER_V2: t.M_MAll_SERVER_URL + "PropShop/engine/v2/PropOrder/createBuyOrder",
				GET_LIGHT_STATUS: t.M_M_SERVER_URL + "ajax/LightText/get_status"
			}
		}, t.getResourceURL = function(e, i) {
			return void 0 === i && (i = !1), e ? GloableData.getInstance().gameInfo.isPc && i ? "/Graphics/Oafs/Resource/" + e : t.M_RESOUSE_SERVER_URL + e.substr(0, 2) + "/" + e : ""
		}, t.getWebUrl = function(t) {
			var e = "";
			switch (t) {
			case UrlType.C_URL:
				if (window.cUrl) return window.cUrl;
				e = "https://yzsam.com/edirot/api/c";
				break;
			case UrlType.WWW_URL:
				if (window.webUrl) return window.webUrl;
				e = "https://yzsam.com/edirot/api/editor";
				break;
			case UrlType.M_URL:
				if (window.mUrl) return window.mUrl;
				e = "https://yzsam.com/edirot/api/m";
				break;
			case UrlType.P_URL:
				if (window.passUrl) return window.passUrl;
				e = "https://yzsam.com/edirot/api/passport";
				break;
			case UrlType.R_URL:
				if (window.reportUrl) return window.reportUrl;
				e = "https://yzsam.com/edirot/api/report";
				break;
			case UrlType.CG2_URL:
				if (window.cgUrl) return window.cgUrl;
				e = "https://yzsam.com/edirot/api/cgv2"
			}
			return e
		}, t.is_test_server = window.is_test_server, t.M_C_SERVER_URL = "", t.M_M_SERVER_URL = "", t.M_RESOUSE_SERVER_URL = "", t.M_IMG_SERVER_URL = "", t.M_MAll_SERVER_URL = "", t.WMOD_RES_SERVER_URL = "", t.POSSPORT_SERVER_URL = "", t.CGV2_SERVER_URL = "", t.REPORT_SERVER_URL = "", t.Ajax_Url = {}, t.TMP_Pro = "file:" == window.location.protocol ? "http:" : window.location.protocol, t.LocalPath = "", t
	}();
HttpURL.init();
var HttpManager = function() {
		function t() {}
		return t.getInstance = function() {
			return null == t._instance && (t._instance = new t), t._instance
		}, t.prototype.sendPostRequest = function(t, e, i, a, n, s) {
			void 0 === s && (s = !1);
			var o = new OHttpRequest;
			o.on(Laya.Event.COMPLETE, n, this.onComplete, [t, o]), o.on(Laya.Event.ERROR, this, this.onPostIOError), o.on(Laya.Event.PROGRESS, this, this.onPostProgress);
			var r = ["Content-Type", "application/x-www-form-urlencoded"];
			s && r.join("text/plain; charset=x-user-defined"), o.send(t, e, "post", a, r)
		}, t.prototype.sendGetRequest = function(t, e, i, a, n, s) {
			void 0 === e && (e = null), void 0 === i && (i = null), void 0 === a && (a = "arraybuffer"), void 0 === n && (n = null), void 0 === s && (s = !1);
			var o = new OHttpRequest;
			o.on(Laya.Event.COMPLETE, n, this.onComplete, [t, o]), o.on(Laya.Event.ERROR, this, this.onPostIOError), o.on(Laya.Event.PROGRESS, this, this.onPostProgress);
			var r = ["Content-Type", "application/x-www-form-urlencoded"];
			s && (r.join("text/plain; charset=x-user-defined"), "json" == a && (a = "jsonp"));
			var h = t,
				l = "";
			for (var c in e) {
				var g = e[c];
				l += "" + c + "=" + g + "&"
			}
			l && (h = h + "?" + l), o.send(h, e, "get", a, r), o = null
		}, t.prototype.onComplete = function(t, e) {
			EventCenter.dispatchEvent(new GameEvent(t, e))
		}, t.prototype.onPostIOError = function(t) {
			console.log("post error : " + t)
		}, t.prototype.onPostProgress = function(t) {}, t
	}(),
	AjaxManager = function() {
		function t() {}
		return t.getInstance = function() {
			return null == t._instance && (t._instance = new t), t._instance
		}, t.prototype.getSystemTimestramp = function() {
			this.sendGetAjaxJSONP(HttpURL.Ajax_Url.GAME_SYSTEM_TIME, this.rcvSystemTimestramp, this)
		}, t.prototype.rcvSystemTimestramp = function(t) {
			-1 !== t && 1 == parseInt(t.status) ? (GloableData.getInstance().systemTime.sysTimestramp = t.data.timestramp, GloableData.getInstance().systemTime.nowTimestramp = Math.floor((new Date).getTime() / 1e3)) : (GloableData.getInstance().systemTime.sysTimestramp = 0, GloableData.getInstance().systemTime.nowTimestramp = Math.floor((new Date).getTime() / 1e3))
		}, t.prototype.sendGetAjaxJSONP = function(t, e, i, a, n, s) {
			void 0 === e && (e = null), void 0 === i && (i = null), void 0 === a && (a = null), void 0 === n && (n = null), void 0 === s && (s = null);
			var o = t,
				r = "";
			for (var h in s) {
				var l = s[h];
				r += "" + h + "=" + l + "&"
			}
			r = r.substr(0, r.length - 1), o = o + "?" + r, $.ajax({
				url: o,
				type: "get",
				dataType: "jsonp",
				jsonp: "jsonCallBack",
				success: function(t) {
					e.call(i, t)
				},
				error: function(t) {
					a ? a.call(n, data) : e.call(i, data)
				}
			})
		}, t.prototype.sendAjaxGet = function(t, e, i) {
			$.ajax({
				url: t,
				type: "get",
				dataType: "json",
				success: function(t) {
					i && i.call(e, t)
				},
				error: function() {
					i && i.call(e, -1e4)
				}
			})
		}, t.prototype.sendAjaxPost = function(t, e, i, a) {
			$.ajax({
				url: t,
				type: "post",
				data: e,
				dataType: "json",
				success: function(t) {
					a && a.call(i, t)
				},
				error: function(t) {
					a && a.call(i, -1e4)
				}
			})
		}, t
	}(),
	popmsg;
!
function(t) {
	var e = function() {
			function e() {
				this.to = NaN, this.bd = mgr.DataMgr.instance.bd, this.layers = [], this.dragged = !1, Laya.stage.on(laya.events.Event.MOUSE_DOWN, this, this.mdHandler), Laya.stage.on(laya.events.Event.MOUSE_UP, this, this.muHandler), Laya.stage.on(laya.events.Event.MOUSE_OUT, this, this.moHandler), EventCenter.addEventListener(GameEventConstant.LONG_DOWN_EVENT, this, this.FF), EventCenter.addEventListener(GameEventConstant.LONG_DOWN_CANCEL_BY_BRANCH, this, this.cancelFF), EventCenter.addEventListener(GameEventConstant.LONG_DOWN_CANCEL_BY_MOVINE_EVENT, this, this.cancelFF), EventCenter.addEventListener(GameEventConstant.AUTO_PLAY, this, this.autoPlay), this.bd.bind("popMsg.mod", this, this.exe), this.bd.bind("popMsg.cur", this, this.exe)
			}
			return e.prototype.FF = function(t) {
				return this.dragged ? UIManager.getInstance().gameLoadLayer.prevent = !0 : void(221 == GloableData.getInstance().currentLine.currentEvent.Code && (this.toggle = !1, this.ff = !0))
			}, e.prototype.cancelFF = function() {
				this.ff = !1
			}, Object.defineProperty(e.prototype, "ff", {
				set: function(t) {
					this._ff = t, t && isNaN(this.to) ? this.to = setTimeout(this.delayFinish.bind(this), 300) : t || (clearTimeout(this.to), this.to = NaN)
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.delayFinish = function() {
				GloableData.getInstance().quickRun && 221 == GloableData.getInstance().currentLine.currentEvent.Code ? this.bd.get("popMsg.cur") && (this.bd.get("popMsg.cur").finish(), console.log("popMsg.cur finished"), this.to = setTimeout(this.delayFinish.bind(this), 300)) : this.ff = !1
			}, e.prototype.autoPlay = function() {
				221 == GloableData.getInstance().currentLine.currentEvent.Code && this.autoPlayFinish()
			}, e.prototype.autoPlayFinish = function() {
				clearTimeout(this.to), this.to = NaN, GloableData.getInstance().autoPlay && 221 == GloableData.getInstance().currentLine.currentEvent.Code && this.waiting && (!UIManager.getInstance().hasViewShow() && view.SCustomUI.F_Index < 0 ? (console.log("finished"), this.bd.get("popMsg.cur").finish()) : (console.log("waiting for goon"), this.to = setTimeout(this.autoPlayFinish.bind(this), 1e3)))
			}, e.prototype.mdHandler = function(e) {
				for (var i = this.layers.length - 1; i >= 0; i--) {
					var a = this.layers[i];
					if (a && new laya.maths.Rectangle(a.isMirror ? a.x - a.width : a.x, a.y, a.width, a.height).contains(e.stageX, e.stageY)) {
						if (a.alpha > 0) {
							this.pm = a, a.mouseEnabled = !0;
							break
						}
						a.mouseEnabled = !1
					}
				}
				if (!UIManager.getInstance().textDif.visible && this.pm instanceof t.PopMsg && !UIManager.getInstance().hasViewShow() && view.SCustomUI.F_Index < 0) {
					Laya.stage.on(laya.events.Event.MOUSE_MOVE, this, this.mmHandler);
					var n = this.pm.height - this.pm.oriHeight;
					0 != n && (this.dragging = !0, this.sx = e.stageX, this.sy = e.stageY, this.my = this.pm.image.core.scrollRect.y, this.deep = this.pm.height - this.pm.oriHeight)
				}("content" != e.target.name || e.target instanceof talk.TextMessageUI) && this.waiting && (this.toggle = !0), UIManager.getInstance().message[UIManager.getInstance().msgIndex].visible && UIManager.getInstance().message[UIManager.getInstance().msgIndex].clickUI(e)
			}, e.prototype.mmHandler = function(t) {
				if (this.dragging) {
					var e = void 0,
						i = Math.round(this.pm.image.rotation);
					Math.abs(Math.sin(Math.PI * i / 180)) > Math.abs(Math.cos(Math.PI * i / 180)) ? (e = (this.sx - t.stageX) * -Math.sin(Math.PI * i / 180), this.pm.isMirror && (e = -e)) : e = (this.sy - t.stageY) * Math.cos(Math.PI * i / 180), this.sy == t.stageY && this.sx == t.stageX || (this.toggle = !1, this.dragged = !0), e += this.my, this.pm.image.core.scrollRect.y = 0 > e ? 0 : e > this.deep ? this.deep : e, UIManager.getInstance().moveIsCancleQuick(t)
				}
			}, e.prototype.muHandler = function(e) {
				return this.dragging = !1, Laya.stage.off(laya.events.Event.MOUSE_MOVE, this, this.mmHandler), this.dragged ? UIManager.getInstance().gameLoadLayer.prevent = this.dragged = this.toggle = !1 : (this.isInBGLayer(e.target) && view.SCustomUI.F_Index < 0 && e.target.hitTestPoint(e.stageX, e.stageY) && this.waiting && this.toggle && 221 == GloableData.getInstance().currentLine.currentEvent.Code ? (this.bd.get("popMsg.cur").finish(), e.target instanceof t.PopMsg && (this.waiting = !1)) : e.target instanceof talk.TextMessageUI && 221 == GloableData.getInstance().currentLine.currentEvent.Code && (e.target.mouseEnabled = !1), void(this.toggle = !1))
			}, e.prototype.isInBGLayer = function(t) {
				return t instanceof BackgroundLayer || (t.parent ? this.isInBGLayer(t.parent) : !1)
			}, e.prototype.moHandler = function() {
				this.dragging = !1, Laya.stage.off(laya.events.Event.MOUSE_MOVE, this, this.mmHandler)
			}, e.prototype.exe = function(e) {
				var i = this.layers[e.data.Argv[0]] || (this.layers[e.data.Argv[0]] = new t.PopMsg(parseInt(e.data.Argv[0])));
				switch (e.code) {
				case 220:
					i.setMode(e);
					break;
				case 221:
					i.addPop(e)
				}
				return 221 == e.code && i.show ? (GloableData.getInstance().quickRun && (this.ff = !0), GloableData.getInstance().autoPlay ? (this.to = setTimeout(this.autoPlayFinish.bind(this), 1e3), this.waiting = !0) : this.waiting = !0) : (220 != e.code || i.show || (this.to = NaN, this.ff = !1), void e.finish())
			}, e.prototype.snap = function() {
				for (var t = {}, e = 0, i = this.layers; e < i.length; e++) {
					var a = i[e];
					if (a) {
						var n = void 0,
							s = a.selfInitScaleX + a.scaleFrame * a.frameChangeScaleX;
						n = a.selfInitX, a.isMirror && (s = Math.abs(a.selfInitScaleX) + a.scaleFrame * a.frameChangeScaleX, n -= a.width * Math.abs(s)), t[a.id] = {
							x: n,
							y: a.y,
							height: a.h,
							width: a.w,
							spaceTop: a.tp,
							spaceBottom: a.bp,
							spaceLeft: a.lp,
							spaceRight: a.rp,
							visible: a.visible,
							zoomX: 100 * s,
							zoomY: 100 * a.scaleY,
							opacity: 255 * a.alpha,
							data: []
						};
						for (var o = 0, r = a.items; o < r.length; o++) {
							var h = r[o],
								l = void 0;
							if (221 == GloableData.getInstance().currentLine.currentEvent.Code && (l = this.bd.get("popMsg.cur")), l && a.items.indexOf(h) == a.items.length - 1 && a.id == parseInt(l.data.Argv[0])) break;
							t[a.id].data.push({
								message: "2" == h.data.Argv[3] ? h.data.Argv[12] : h.data.Argv[6],
								characterIndex: h.data.Argv[11],
								largePic: h.data.Argv[6],
								type: h.data.Argv[3],
								size: "2" == h.data.Argv[3] ? h.data.Argv[14] : h.data.Argv[7]
							})
						}
					}
				}
				return t
			}, e.prototype.restore = function(e) {
				for (var i in e) {
					var a = this.layers[i] = new t.PopMsg(parseInt(i)),
						n = e[i],
						s = {
							data: {
								Argv: [i, n.visible, "", n.x, n.y, n.width, n.height, "", n.spaceTop, n.spaceBottom, n.spaceLeft, n.spaceRight, "", n.zoomX, n.zoomY, n.opacity, "", "", ""]
							}
						};
					a.setMode(s);
					for (var o = 0, r = n.data; o < r.length; o++) {
						var h = r[o];
						a.layoutBySnap(h)
					}
					a.visible && UIManager.getInstance().backgroundLayer.addPopMsg(a)
				}
			}, e.prototype.renew = function() {
				for (var t = 0, e = this.layers; t < e.length; t++) {
					var i = e[t];
					i && i.complete()
				}
			}, e.prototype.refresh = function() {
				clearTimeout(this.to), Laya.stage.off(laya.events.Event.MOUSE_DOWN, this, this.mdHandler), Laya.stage.off(laya.events.Event.MOUSE_UP, this, this.muHandler), Laya.stage.off(laya.events.Event.MOUSE_MOVE, this, this.mmHandler), Laya.stage.off(laya.events.Event.MOUSE_OUT, this, this.moHandler), EventCenter.removeEventListener(GameEventConstant.LONG_DOWN_EVENT, this, this.FF), EventCenter.removeEventListener(GameEventConstant.LONG_DOWN_CANCEL_BY_BRANCH, this, this.cancelFF), EventCenter.removeEventListener(GameEventConstant.LONG_DOWN_CANCEL_BY_MOVINE_EVENT, this, this.cancelFF), this.bd.remove("popMsg.mod"), this.bd.remove("popMsg.cur"), this.bd.remove("popMsg.curVo");
				for (var t = 0, e = this.layers; t < e.length; t++) {
					var i = e[t];
					if (i) {
						for (var a = 0, n = i.items; a < n.length; a++) {
							var s = n[a];
							s.dispose()
						}
						i.items = [], this.bd.remove("popMsg.saved" + i.id)
					}
				}
			}, e
		}();
	t.PopMsgMgr = e
}(popmsg || (popmsg = {}));
var audio;
!
function(t) {
	var e;
	!
	function(t) {
		t[t.bg = 0] = "bg", t[t.fx = 1] = "fx", t[t.vo = 2] = "vo", t[t.bfx = 3] = "bfx"
	}(e = t.ChannelEnum || (t.ChannelEnum = {}));
	var i = function() {
			function e() {}
			return e.prototype.getChannel = function(e) {
				switch (OrgWeb.getInstance().getOrgPlat()) {
				case "ANDROID":
					return window.org_box ? new t.BoxAudio(e) : new t.TagAudio(e);
				default:
					return new t.TagAudio(e)
				}
			}, e
		}();
	t.ChannelGenerator = i
}(audio || (audio = {}));
var gloabelData;
!
function(t) {
	var e = function() {
			function t() {}
			return t
		}();
	t.SystempTimeData = e
}(gloabelData || (gloabelData = {}));
var GloableStaticData = function() {
		function t() {}
		return t.BUTTON_TYPE_TEXT_CHOICE = 1, t.BUTTON_TYPE_TEXT_CHOICE_2 = 3, t.BUTTON_TYPE_TEXT_CHOICE_DIY = 4, t.BUTTON_TYPE_PIC_CHOICE = 2, t.TITLE_BUTTON_TYPE_1 = 1, t.TITLE_BUTTON_TYPE_2 = 2, t.TITLE_BUTTON_TYPE_3 = 3, t.TITLE_BUTTON_TYPE_4 = 4, t.TITLE_BUTTON_TYPE_5 = 5, t.TITLE_BUTTON_TYPE_6 = 6, t.TIME_FLASH_ID = -1001, t.TIME_SHAKE_ID = -1e3, t.TIME_SCUI_ID = -999, t.TIME_WAITE_ID = -998, t.TIME_RUNNUMBER_ID = -997, t.TIME_TALK_ID = -996, t.TIME_ACT_ID = -995, t.GAME_RUN_TIME = 16.6666666667, t.GAME_RUN_LOW_TIME = 33.33333333, t.NO_OPTION = -1e3, t.GET_SERVER_TIME = "GET_SERVER_TIME", t.DRAW_TALK_SPEED = [1, 3, 6, 9, 12], t.DRAW_SPEED_TYPE_LOW = -1, t.DRAW_SPEED_TYPE_CENTER = 0, t.DRAW_SPEED_TYPE_FAST = 1, t.DRAW_TALK_SPEED_TYPE_SHOW_ALL = -10001, t.DRAW_TALK_SPEED_TYPE_SHOW_LINE = -10002, t.VIEW_INDEX_MENU = 10001, t.VIEW_INDEX_REPLAY = 10002, t.VIEW_INDEX_CGUI = 10003, t.VIEW_INDEX_BGMUI = 10004, t.VIEW_INDEX_SAVEFILEUI = 10005, t.VIEW_INDEX_LOADFILEUI = 10006, t.VIEW_INDEX_SETTINGUI = 10007, t.VIEW_INDEX_MALLUI = 10010, t.FIRET_HPLOCK_VIEW = "FIRET_HPLOCK_VIEW", t.MALL_STORY_TYPE = 1, t.MALL_VAR_TYPE = 2, t.MALL_GIFT_TYPE = 3, t.MALL_GIFT_ITEM_ID = 1, t.REP_GET_HP = "REP_GET_HP", t.REP_USE_HP = "REP_USE_HP", t.REP_MALL_DATA = "REP_MALL_DATA", t.BUY_ITEM_ERROR = "BUY_ITEM_ERROR", t.UPDATE_MALL_FLOWER = -1, t.UPDATE_MALL_ALL_ITEM = -2, t.USER_GAME_SETING_INFO = "userGameSetingInfo", t.SHOW_SAVE_GUIDE_TYPE_1 = "local_have_data", t.SHOW_SAVE_GUIDE_TYPE_2 = "first_open_save_view", t.SHOW_SAVE_GUIDE_TYPE_3 = "local_have_data_login", t.SELECT_SAVE_TYPE_LOCAL = "1", t.SELECT_SAVE_TYPE_CLOUD = "2", t
	}(),
	ProxyManager = function() {
		function t() {}
		return t.start = function() {
			AppFacade.getInstance().registerProxy(new MallProxy), AppFacade.getInstance().registerProxy(new LightFreeProxy)
		}, t
	}(),
	Proxy = function() {
		function t(t) {
			this.name = t
		}
		return Object.defineProperty(t.prototype, "name", {
			get: function() {
				return this._name
			},
			set: function(t) {
				this._name = t
			},
			enumerable: !0,
			configurable: !0
		}), t
	}(),
	Mediator = function() {
		function t(t, e) {
			this.name = t, this.viewComponent = e, this.onEventCenterRegister(), this.onViewRegister()
		}
		return t.prototype.onViewRegister = function() {}, t.prototype.onViewRemove = function() {}, t.prototype.onEventCenterRegister = function() {}, t.prototype.onEventCenterRemove = function() {}, t.prototype.removeListener = function() {
			this.onEventCenterRemove(), this.onViewRemove(), this.viewComponent = null
		}, Object.defineProperty(t.prototype, "name", {
			get: function() {
				return this._name
			},
			set: function(t) {
				this._name = t
			},
			enumerable: !0,
			configurable: !0
		}), Object.defineProperty(t.prototype, "viewComponent", {
			get: function() {
				return this._viewComponent
			},
			set: function(t) {
				this._viewComponent = t
			},
			enumerable: !0,
			configurable: !0
		}), t
	}(),
	GameEventConstant = function() {
		function t() {}
		return t.TEST_CENTER = "TEST_CENTER", t.TEST_1_CENTER = "TEST_1_CENTER", t.LOAD_INIT_BIN_COMPLETE = "LOAD_INIT_BIN_COMPLETE", t.ORG_EVENT_FINISH = "ORG_EVENT_FINISH", t.LOAD_STORY_ITEM_COMPLETE = "LOAD_STORY_ITEM_COMPLETE", t.INIT_DMAIN_COMPLETE = "INIT_DMAIN_COMPLETE", t.LOADING_BAR_PROGRESS = "loading_bar_progress", t.LOADING_BAR_GB_COMPLETE = "loading_bar_gb_complete", t.LOADING_BAR_COMPLETE = "loading_bar_complete", t.LOAD_IMAGE_COMPLETE = "LOAD_IMAGE_COMPLETE", t.CLICK_TEXT_CHOICE_BUTTON = "CLICK_TEXT_CHOICE_BUTTON", t.TEXT_MESSAGE_PLAY_COMPLETE = "TEXT_MESSAGE_PLAY_COMPLETE", t.TEXT_MESSAGE_PLAY_COMPLETE_AUTO = "TEXT_MESSAGE_PLAY_COMPLETE_AUTO", t.CLICK_TITLE_VIEW_BUTTON = "CLICK_TITLE_VIEW_BUTTON", t.CLICK_SETTING_VIEW_BUTTON = "CLICK_SETTING_VIEW_BUTTON", t.CLICK_SAVE_UI_ITEM = "CLICK_SAVE_UI_ITEM", t.LONG_DOWN_EVENT = "LONG_DOWN_EVENT", t.LONG_DOWN_CANCEL_BY_BRANCH = "LONG_DOWN_CANCEL_BY_BRANCH", t.LONG_DOWN_CANCEL_BY_MOVINE_EVENT = "LONG_DOWN_CANCEL_BY_MOVINE_EVENT", t.CLICK_CG_UI_ITEM = "CLICK_CG_UI_ITEM", t.SHOW_CG_UI_ITEM = "SHOW_CG_UI_ITEM", t.SHOW_CG_UI_ITEM_MSG = "SHOW_CG_UI_ITEM_MSG", t.HIDE_CG_UI_ITEM_MSG = "HIDE_CG_UI_ITEM_MSG", t.JUMP_STORY = "JUMP_STORY", t.JUMP_POS = "JUMP_POS", t.PRELOADER_READY = "PRELOADER_READY", t.RELOAD_START_STORY = "RELOAD_START_STORY", t.CLICK_MAIN_MENU_BUTTON = "CLICK_MAIN_MENU_BUTTON", t.CLICK_SYSTEM_MENU_BUTTON = "CLICK_SYSTEM_MENU_BUTTON", t.CLICK_SCUI_BUTTON = "CLICK_SCUI_BUTTON", t.CLICK_SFLOAT_BUTTON = "CLICK_SFLOAT_BUTTON", t.NO_CLICK_BTUTTON = "NO_CLICK_BTUTTON", t.NO_MOUSE_OVER_BUTTON = "NO_MOUSE_OVER_BUTTON", t.CLICK_BGM_UI_ITEM = "CLICK_CG_UI_ITEM", t.SHOW_BGM_UI_ITEM = "SHOW_CG_UI_ITEM", t.SHOW_BGM_UI_ITEM_MSG = "SHOW_CG_UI_ITEM_MSG", t.HIDE_BGM_UI_ITEM_MSG = "HIDE_CG_UI_ITEM_MSG", t.MALL_BUY_BUTTON = "MALL_BUY_BUTTON", t.MALL_CANCLE_BUTTON = "MALL_CANCLE_BUTTON", t.MALL_CLICK_ITEM_BUY = "MALL_CLICK_ITEM_BUY", t.MALL_SHOW_MESSAGE = "MALL_SHOW_MESSAGE", t.MALL_REWARD_BUTTON = "MALL_REWARD_BUTTON", t.MALL_PAY_BUTTON = "MALL_PAY_BUTTON", t.MALL_CLOSE_VIEW = "MALL_CLOSE_VIEW", t.MALL_BUY_ITEM_RESULT = "MALL_BUY_ITEM_RESULT", t.UPDATE_MALL_ITEM = "UPDATE_MALL_ITEM", t.UPDATE_USER_FLOWER = "UPDATE_USER_FLOWER", t.LOAD_UI_RESOURCE_COMPLETE = "LOAD_UI_RESOURCE_COMPLETE", t.LOAD_ORGBUTTON_COMPLETE = "LOAD_ORGBUTTON_COMPLETE", t.CLOSE_CGUI_ITEM_PIC = "CLOSE_CGUI_ITEM_PIC", t.CLOSE_CGUI_VIEW = "CLOSE_CGUI_VIEW", t.LEFT_SLIDE_EXIT = "LEFT_SLIDE_EXIT", t.LOAD_COLLECTSYSTEM_COMPLETE = "LOAD_COLLECTSYSTEM_COMPLETE", t.CLICK_COLLECT_BTN = "CLICK_COLLECT_BTN", t.SHOW_COLLECT_VIEW = "SHOW_COLLECT_VIEW", t.LOAD_CHATITEM_COMPLETE = "LOAD_CHATITEM_COMPLETE", t.CHANGE_CHATUI_WH = "CHANGE_CHATUI_WH", t.STAGE_BLUR = "STAGE_BLUR", t.STAGE_ONFOCUS = "STAGE_ONFOCUS", t.UPDATE_USER_ALL_FLOWER = "UPDATE_USER_ALL_FLOWER", t.CLOSE_SAVE_GUIDE = "CLOSE_SAVE_GUIDE", t.AUTO_PLAY = "AUTO_PLAY", t.SHOW_QUICK_ICON = "SHOW_QUICK_ICON", t
	}(),
	EventCenter = function() {
		function t() {}
		return t.addEventListener = function(t, e, i, a) {
			this.instance.on(t, e, i, a)
		}, t.addOnceEventListener = function(t, e, i, a) {
			this.instance.once(t, e, i, a)
		}, t.dispatchEvent = function(t) {
			this.instance.event(t.type, t.parameter)
		}, t.hasEventListener = function(t) {
			return this.instance.hasListener(t)
		}, t.removeEventListener = function(t, e, i, a) {
			this.instance.off(t, e, i, a)
		}, t.removeOnceEventListener = function(t, e, i, a) {
			this.instance.off(t, e, i, !0)
		}, t.removeAllEventListener = function() {
			this.instance.offAll()
		}, t.instance = new OEventDispatcher, t
	}(),
	GameConfig = function() {
		function t() {}
		return t.imageVer = 20170312, t
	}(),
	OrgWeb = function() {
		function t() {
			this.countServer = !1, "undefined" != typeof window.commonPlayer && (this.commonPlayer = !0)
		}
		return t.getInstance = function() {
			return null == t._instance && (t._instance = new t), t._instance
		}, t.prototype.upEffectiveClick = function() {
			this.commonPlayer && window.commonPlayer.countServer.durationCall()
		}, t.prototype.upTrafficFileNum = function(t, e, i, a) {
			this.commonPlayer && window.commonPlayer.countServer.submitAllFlow(t, e, i, a)
		}, t.prototype.getFlowrHuaNum = function() {
			if (!window.commonPlayer) return 0;
			"IOS" == this.getOrgPlat() && (window.commonPlayer.loginStatus = !0, window.iOSinfo || (window.iOSinfo = window.commonPlayer.flower, window.iOSinfo.num = 0), window.commonPlayer.flower = window.iOSinfo);
			var t = 0;
			return t = window.commonPlayer.flower.num, Math.ceil(t)
		}, t.prototype.webInit = function(t, e) {
			this.commonPlayer ? GloableData.getInstance().flowerHua : e && e.call(t, null)
		}, t.prototype.getUid = function() {
			if ("IOS" == this.getOrgPlat()) return window.iOSinfo && window.iOSinfo.uid ? window.iOSinfo.uid : 0;
			if (!this.commonPlayer) return 0;
			try {
				return window.commonPlayer.userInfos.uid
			} catch (t) {
				return 0
			}
		}, t.prototype.getUserInitName = function() {
			if ("WEB" != this.getOrgPlat() || !this.commonPlayer) return "";
			try {
				return window.commonPlayer.userInfos.uname
			} catch (t) {
				return ""
			}
		}, t.prototype.getInitUid = function() {
			if (!this.commonPlayer) return 0;
			try {
				return window.commonPlayer.userInfos.uid
			} catch (t) {
				return 0
			}
		}, t.prototype.getUserInfos = function() {
			if (!this.commonPlayer) return null;
			try {
				return window.commonPlayer.userInfos
			} catch (t) {
				return null
			}
		}, t.prototype.getWebUserFlower = function(t, e) {
			this.commonPlayer ? 0 == GloableData.getInstance().flowerHua && this.commonPlayer ? window.commonPlayer.loginStatus ? e && e.call(t, this.getFlowrHuaNum()) : e && e.call(t, 0) : e && e.call(t, window.commonPlayer.flower.num) : e && e.call(t, GloableData.getInstance().flowerHua)
		}, t.prototype.getGameInfo = function(t, e) {
			this.commonPlayer ? window.commonPlayer.gameMenu.get_Game_Info(function(i) {
				e && e.call(t, i)
			}) : e && e.call(t, null)
		}, t.prototype.getGameUpdateList = function(t, e) {
			this.commonPlayer ? window.commonPlayer.gameMenu.get_Update_List(function(i) {
				e && e.call(t, i)
			}) : e && e.call(t, null)
		}, t.prototype.getGameControlInfo = function(t, e) {
			this.commonPlayer ? window.commonPlayer.gameMenu.gameMenuState(function(i) {
				e && e.call(t, window.commonPlayer.gameMenu.stateInfo)
			}) : e && e.call(t, null)
		}, t.prototype.getGameAttentionState = function() {
			return this.commonPlayer ? window.commonPlayer.gameMenu.attentionState : 0
		}, t.prototype.getGameThumbsState = function() {
			return this.commonPlayer ? window.commonPlayer.gameMenu.thumbsState : 0
		}, t.prototype.getGameThumbsNum = function() {
			return this.commonPlayer ? window.commonPlayer.gameMenu.thumbsNum : 0
		}, t.prototype.getGameCollectState = function() {
			return this.commonPlayer ? window.commonPlayer.gameMenu.collectState : 0
		}, t.prototype.getGameCollectNum = function() {
			return this.commonPlayer ? window.commonPlayer.gameMenu.collectNum : 0
		}, t.prototype.getGameOverInfo = function(t, e) {
			this.commonPlayer ? window.commonPlayer.gameMenu.get_Over_Info(function(i) {
				e && e.call(t, i)
			}) : e && e.call(t, null)
		}, t.prototype.setCommentPos = function() {
			return "WEB" == this.getOrgPlat() ? (window.commonPlayer.gameMenu.commentBut(), !0) : !1
		}, t.prototype.getGameComment = function(t, e, i, a) {
			void 0 === i && (i = 1), void 0 === a && (a = 10), this.commonPlayer ? window.commonPlayer.gameMenu.get_Game_Comment(i, a, function(i) {
				e && e.call(t, i)
			}) : e && e.call(t, null)
		}, t.prototype.getGameFineComment = function(t, e, i, a) {
			void 0 === i && (i = 1), void 0 === a && (a = 10), this.commonPlayer ? window.commonPlayer.gameMenu.get_Fine_Comment(i, a, function(i) {
				e && e.call(t, i)
			}) : e && e.call(t, null)
		}, t.prototype.getLoginStatus = function() {
			return this.commonPlayer ? !! window.commonPlayer.loginStatus : !1
		}, t.prototype.isLoginStatus = function() {
			return this.commonPlayer ? window.commonPlayer.loginStatus ? !0 : (window.commonPlayer.login.midLogin(function() {}), !1) : !1
		}, t.prototype.goToPay = function() {
			this.isLoginStatus() && window.commonPlayer.sendFlower.go_To_Pay()
		}, t.prototype.showPaypanel = function() {
			if (this.getIsUnaudited()) return void Tips.tip("本作品尚未过审，不能赠送鲜花", "#FFFFFF");
			var t = GetQueryString("isCgMenu");
			t = t ? "false" != t && 0 != t : !0, !GloableData.getInstance().gameInfo.isPc && t && this.isLoginStatus() && this.initSendFlower(this, this.showPannel)
		}, t.prototype.showPannel = function() {
			var t = this.getOrgPlat();
			if (["WEB", "ANDROID"].indexOf(t) > -1) return void this.initSendFlower(null, null);
			if (["IOS"].indexOf(t) > -1) try {
				var e = !0;
				540 == GloableData.getInstance().gameInfo.gGameWidth && (e = !1);
				var i = e ? 1 : 0;
				window.webkit.messageHandlers.show_iOS_sendFlower.postMessage(i)
			} catch (a) {
				console.error(a)
			} else view.PaySendUI.getInstance().showUI()
		}, t.prototype.sendFlower = function(t, e, i) {
			this.isLoginStatus() ? window.commonPlayer.sendFlower.up_Sent_Flower(i, function(a) {
				e && e.call(t, [i, a])
			}) : e && e.call(t, null)
		}, t.prototype.initSendFlower = function(t, e) {
			this.isLoginStatus() ? window.commonPlayer.sendFlower.sendFlowerState(function(i) {
				e && e.call(t, i)
			}) : e && e.call(t, null)
		}, t.prototype.getHaveFlower = function() {
			if (!this.isLoginStatus()) return 0;
			if (t.getInstance().getIsClient()) {
				if ("ANDROID" == this.getOrgPlat()) {
					if ("undefined" == window.org_box) return 0;
					if (window.org_box.GetLoginStatus()) return window.org_box.getUserHaveFlower()
				} else if ("IOS" == this.getOrgPlat()) {
					if ("undefined" == typeof window.iOSinfo) return 0;
					if (window.iOSinfo.payFlowerNumStr) return window.iOSinfo.payFlowerNumStr
				}
			} else try {
				return window.commonPlayer.sendFlower.userCoin.coin2.coin_count
			} catch (e) {
				try {
					return window.commonPlayer.userInfos.coin2.coin_count
				} catch (e) {
					return 0
				}
			}
		}, t.prototype.getPlatForm = function() {
			return this.commonPlayer && "" != window.commonPlayer.channel_id ? parseInt(window.commonPlayer.channel_id) : 0
		}, t.prototype.getIsPC = function() {
			for (var t = window.navigator.userAgent, e = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"], i = !0, a = 0; a < e.length; a++) if (t.indexOf(e[a]) > 0) {
				i = !1;
				break
			}
			return i
		}, t.prototype.getIsChrome = function() {
			var t = navigator.userAgent.toLowerCase(),
				e = t.indexOf("MicroMessenger") > -1;
			return t.indexOf("chrome") > -1 || e
		}, t.prototype.getIsIOS = function() {
			var t = navigator.userAgent,
				e = !! t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
			return e
		}, t.prototype.getIsAbox = function() {
			return "ANDROID" == t.getInstance().getOrgPlat()
		}, t.prototype.getIsUC = function() {
			var t = navigator.userAgent.toLowerCase(),
				e = t.indexOf("uc") > -1;
			return e
		}, t.prototype.getIsClient = function() {
			return "ANDROID" == t.getInstance().getOrgPlat() || "IOS" == t.getInstance().getOrgPlat()
		}, t.prototype.getOrgPlat = function() {
			if (!this.commonPlayer) return "WEB";
			try {
				for (var t in window.mark) if (1 == window.mark[t]) return t
			} catch (e) {
				return "WEB"
			}
		}, t.prototype.getAuthorID = function() {
			if (!this.commonPlayer) return "";
			try {
				return window.commonPlayer.gameMenu.author_uid
			} catch (t) {
				return ""
			}
		}, t.prototype.goShare = function() {
			if (this.isLoginStatus()) try {
				window.commonPlayer.gameMenu.shareBut()
			} catch (t) {}
		}, t.prototype.getABoxToken = function() {
			try {
				return "ANDROID" == this.getOrgPlat() ? "undefined" == typeof window.org_box ? "" : window.org_box.GetLoginStatus() ? window.org_box.GetLoginToken() : "" : "IOS" == this.getOrgPlat() ? "undefined" == typeof window.iOSinfo ? "" : window.iOSinfo.token ? window.iOSinfo.token : "" : ""
			} catch (t) {
				return ""
			}
		}, t.prototype.goConcern = function(t, e) {
			if (this.isLoginStatus()) try {
				window.commonPlayer.gameMenu.attention_Btn(function(i) {
					e && e.call(t, i)
				})
			} catch (i) {} else e && e.call(t, null)
		}, t.prototype.goThumbs = function(t, e) {
			if (this.isLoginStatus()) try {
				window.commonPlayer.gameMenu.up_Thumbs(function(i) {
					e && e.call(t, i)
				})
			} catch (i) {} else e && e.call(t, null)
		}, t.prototype.goCollect = function(t, e) {
			if (this.isLoginStatus()) try {
				window.commonPlayer.gameMenu.collect_Btn(function(i) {
					e && e.call(t, i)
				})
			} catch (i) {} else e && e.call(t, null)
		}, t.prototype.getReWidFlower = function() {
			if ("IOS" == this.getOrgPlat()) {
				var t = 0;
				return window.iOSinfo.fresh_flower_num && (t += parseInt(window.iOSinfo.fresh_flower_num)), window.iOSinfo.wild_flower && (t += parseInt(window.iOSinfo.wild_flower)), console.log(t), t
			}
			if (this.commonPlayer && this.getLoginStatus()) {
				var e = parseInt(window.commonPlayer.flower.fresh_flower_num),
					i = parseFloat(window.commonPlayer.flower.wild_flower_num) / 100;
				return e + i
			}
			return -1
		}, t.prototype.getTanFlowerState = function() {
			return "IOS" == this.getOrgPlat() ? parseInt(window.commonPlayer.flower.tanHuaPlayFowerStr) > 0 : this.commonPlayer && this.getLoginStatus() ? parseInt(window.commonPlayer.flower.tanhua_flower_num) > 0 : !1
		}, t.prototype.getServerTime = function() {
			return this.commonPlayer ? window.commonPlayer.timesTrampSys : -1
		}, t.prototype.getFlowerLock = function() {
			return this.commonPlayer ? window.commonPlayer.flower_unlock : 0
		}, t.prototype.getIsUnLock = function() {
			return this.getLoginStatus() ? this.getReWidFlower() >= this.getFlowerLock() : !1
		}, t.prototype.getScreenState = function() {
			return this.commonPlayer ? window.commonPlayer.gameMenu.fullScreen : void 0
		}, t.prototype.getVoiceState = function() {
			return this.commonPlayer && "WEB" == this.getOrgPlat() ? window.gameGlobal.Silence : void 0
		}, t.prototype.setiOSinfo = function() {
			"IOS" == this.getOrgPlat() && window.commonPlayer && window.commonPlayer.login && window.commonPlayer.login.setiOSFlowerInfo && window.commonPlayer.login.setiOSFlowerInfo()
		}, t.prototype.exitOrFullScreen = function(e) {
			void 0 === e && (e = !1);
			try {
				if (this.commonPlayer) {
					if ("WEB" != t.getInstance().getOrgPlat() && e) return;
					return "IOS" == t.getInstance().getOrgPlat() ? void UIManager.getInstance().orgDissent.exitGame() : window.commonPlayer.gameMenu.ExitBut(function(e) {
						"WEB" == t.getInstance().getOrgPlat() && console.log(e)
					})
				}
			} catch (i) {
				console.log("fullScreen error,please try again")
			}
		}, t.prototype.boxPay = function() {
			if ("IOS" == this.getOrgPlat()) try {
				var t = !0;
				540 == GloableData.getInstance().gameInfo.gGameWidth && (t = !1);
				var e = t ? 1 : 0;
				window.webkit.messageHandlers.show_iOS_menuPayFlower.postMessage(e)
			} catch (i) {
				console.error(i)
			} else if ("ANDROID" == this.getOrgPlat()) try {
				var t = !0;
				540 == GloableData.getInstance().gameInfo.gGameWidth && (t = !1);
				var e = t ? 1 : 0;
				window.org_box.intentToShop()
			} catch (i) {
				console.error(i)
			}
		}, t.prototype.updateUserInfoCoin = function(e) {
			if (void 0 === e && (e = null), this.getIsClient()) {
				if (this.getIsAbox()) try {
					console.log("refreshUserDate"), window.org_box.refreshUserDate()
				} catch (i) {
					console.error(i)
				} else if ("IOS" == this.getOrgPlat()) try {
					console.log("show_iOS_UpdateUserFlowerNumStr"), window.webkit.messageHandlers.show_iOS_UpdateUserFlowerNumStr.postMessage("")
				} catch (i) {
					console.error(i)
				}
				e && e()
			} else AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.USER_CJH_INFO + "?gindex=" + GloableData.getInstance().gameInfo.gIndex, function(i) {
				if ("H5" == t.getInstance().getOrgPlat()) window.commonPlayer.sendFlower.userCoin = i.data, view.PaySendUI.getInstance().refreshFlowerNum();
				else {
					for (var a in i.data) window.commonPlayer.userInfos[a] && (window.commonPlayer.userInfos[a] = i.data[a]);
					view.PaySendUI.getInstance().refreshFlowerNum()
				}
				e && e()
			}), AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.FLOWER_GAME_ALL_FLOWER + "?gindex=" + GloableData.getInstance().gameInfo.gIndex, function(t) {
				window.commonPlayer.flower = t.data, e && e()
			})
		}, t.prototype.getIsfireFox = function() {
			var t = navigator.userAgent.toLowerCase();
			return t.indexOf("firefox") > -1
		}, t.prototype.getIsUnaudited = function() {
			return GloableData.getInstance().gameInfo.isPc ? !1 : GloableData.getInstance().gameInfo.check_level <= 0
		}, t.prototype.sendReWidFlower = function(t) {
			if (void 0 === t && (t = null), "IOS" == this.getOrgPlat()) {
				var e = this.getABoxToken();
				AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GAT_ABOX_FLOWER_BY_ME + "?action=game_flower_by_me&token=" + e + "&gindex=" + GloableData.getInstance().gameInfo.gIndex, function(e) {
					1 == e.status && e.data && (window.iOSinfo.fresh_flower_num && (window.iOSinfo.fresh_flower_num = e.data.fresh_flower_num), window.iOSinfo.wild_flower && (window.iOSinfo.wild_flower = e.data.wild_flower_num), window.iOSinfo.tanhua_flower_num && (window.iOSinfo.tanhua_flower_num = e.data.tanhua_flower_num), window.iOSinfo.num && (window.iOSinfo.num = e.data.num), window.iOSinfo.sum && (window.iOSinfo.sum = e.data.sum)), t && t()
				})
			} else t && t()
		}, t
	}(),
	OrgDissent = function() {
		function t() {
			this.dx = -1, this.dy = -1, this.isLeftDis = !1, "IOS" == OrgWeb.getInstance().getOrgPlat() && EventCenter.addEventListener(GameEventConstant.LEFT_SLIDE_EXIT, this, this.exitGame)
		}
		return t.prototype.mouseDown = function(t) {
			t && (this.isLeftDis = !0, this.dx = t.stageX, clearTimeout(this.tmp_leftT), this.tmp_leftT = setTimeout(function() {
				this.isLeftDis = !1, this.clearExtTime()
			}.bind(this), 850))
		}, t.prototype.mouseUp = function(t) {
			if (t) {
				var e = this.dx,
					i = t.stageX;
				return this.dx = -1, e - i > 70 && this.isLeftDis ? (this.clearExtTime(), void EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LEFT_SLIDE_EXIT))) : void this.clearExtTime()
			}
		}, t.prototype.clearExtTime = function() {
			clearTimeout(this.tmp_leftT), this.isLeftDis = !1, this.tmp_leftT = null
		}, t.prototype.exitGame = function(t) {
			console.log("退出");
			try {
				window.webkit.messageHandlers.exit_iOS_Game.postMessage("1")
			} catch (t) {
				console.error(t)
			}
		}, t.prototype.dispose = function() {
			"IOS" == OrgWeb.getInstance().getOrgPlat() && EventCenter.removeAllEventListener();
		}, t
	}(),
	AppConfig = function() {
		function t() {}
		return t.init = function(t) {
			this.stageWidth = t.width, this.stageHeight = t.height
		}, t
	}(),
	KeyCodeNum = function() {
		function t() {}
		return t.OPEN_MENU = 0, t.CLOSE_VIEW = 0, t.PC_QUICK_PLAY = 0, t.WEB_QUICK_PLAY = 0, t
	}(),
	AppFacade = function() {
		function t() {
			this.mediatorDictionary = new Dictionary, this.proxyDictionary = new Dictionary
		}
		return t.getInstance = function() {
			return null == this.instance && (this.instance = new t), this.instance
		}, t.prototype.registerMediator = function(t) {
			this.mediatorDictionary[t.name] = t
		}, t.prototype.registerProxy = function(t) {
			this.proxyDictionary[t.name] = t
		}, t.prototype.getProxyByName = function(t) {
			return this.proxyDictionary[t]
		}, t.prototype.getMediatorByName = function(t) {
			return this.mediatorDictionary[t]
		}, t.prototype.delMediatorByName = function(t) {
			var e = this.mediatorDictionary[t];
			e && e.removeListener(), this.mediatorDictionary[t] = null, delete this.mediatorDictionary[t]
		}, t.prototype.startUp = function() {
			ProxyManager.start()
		}, t
	}(),
	__extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), BaseUI = function(t) {
	function e(e, i, a, n) {
		void 0 === e && (e = -1), void 0 === i && (i = []), void 0 === a && (a = !1), void 0 === n && (n = !1);
		var s = t.call(this) || this;
		s.viewResourceGroupName = [], s.needGroup = [], s.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), s.openViewIndex = e, s._isCenter = n, s.isCache = a, s.viewResourceGroupName = i;
		for (var o = 0; o < s.viewResourceGroupName.length; o++) ORG.loader.getRes(s.viewResourceGroupName[o]) || s.needGroup.push(s.viewResourceGroupName[o]);
		return s.needGroup.length > 0 ? ORG.loader.load(s.needGroup, OHandler.create(s, s.onResourceLoadComplete), OHandler.create(s, s.onResourceProgress)) : s.createCompleteEvent(), s
	}
	return __extends(e, t), e.prototype.loadRes = function() {}, e.prototype.onResourceLoadComplete = function() {
		this.createCompleteEvent()
	}, e.prototype.onResourceLoadError = function() {}, e.prototype.onResourceProgress = function() {}, e.prototype.createCompleteEvent = function() {
		""
	}, e.prototype.center = function() {
		this._isCenter && (this.x = (AppConfig.stageWidth - this.width) / 2, this.y = (AppConfig.stageHeight - this.height) / 2)
	}, e.prototype.show = function() {
		this.visible = !0
	}, e.prototype.hide = function() {
		UIManager.getInstance().gameSystemUILayer.setMenuVisible(!0), this.visible = !1
	}, e.prototype.dispose = function() {}, e.prototype.hasViewGroup = function(t) {
		var e = UIManager.getInstance().winMap.values();
		for (var i in e) {
			var a = e[i];
			if (-1 !== a.viewResourceGroupName.indexOf(t)) return !0
		}
		return !1
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), OrgWebFree = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.screenV = !1, e.pathPackUrl = "", e.clockPic = !1, e.useclock = 0, e.isChangeTime = !1, e.clearNum = 0, e.isUserClose = !1, e.isFree = !1, e.countdownTime = 0, e.overMinTime = 10, e.size(0, 0), GloableData.getInstance().isFreeLimit && setTimeout(function() {
			UIManager.getInstance().orgWebFreeLayer.dispose(), this.timeBack || this.getFreeTime()
		}.bind(e), 33), e
	}
	return __extends(e, t), e.prototype.getCountDownTimeString = function() {
		var t, e = Math.floor(this.countdownTime / 60 / 60);
		t = 10 > e ? "0" + e.toString() + ":" : e.toString() + ":";
		var i, a = Math.floor(this.countdownTime / 60) % 60;
		i = 10 > a ? "0" + a.toString() + ":" : a.toString() + ":";
		var n, s = this.countdownTime % 60;
		return n = 10 > s ? "0" + s.toString() : s.toString(), t + i + n
	}, e.prototype.getFreeTime = function() {
		if (!GloableData.getInstance().gameInfo.isPc) {
			540 == GloableData.getInstance().gameMainData.Headr.GWidth && (this.screenV = !0);
			var t = AppFacade.getInstance().getProxyByName(LightFreeProxy.NAME);
			t.getLightFreeStatus(this.getFreeTimeComplete.bind(this))
		}
	}, e.prototype.getFreeTimeComplete = function() {
		this.isFree = GloableData.getInstance().isFreeLimit, this.isFree && (this.countdownTime = GloableData.getInstance().isFreeTime, this.showCountDownView())
	}, e.prototype.loadInit = function(t) {
		1 == parseInt(t.status) && (this.isFree = !0, this.countdownTime = parseInt(t.data.expire_time), this.showCountDownView())
	}, e.prototype.createOverView = function() {
		this.overBack = new OSprite, this.size(GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight);
		var t = [this.pathPackUrl + "buyBtn.png", this.pathPackUrl + "buyBtn1.png", this.pathPackUrl + "clock.png", this.pathPackUrl + "clock1.png", this.pathPackUrl + "numberPic.png", this.pathPackUrl + "overBack.png", this.pathPackUrl + "overBtn.png", this.pathPackUrl + "overBtn1.png", this.pathPackUrl + "saveBtn.png", this.pathPackUrl + "saveBtn1.png", this.pathPackUrl + "flower.png"];
		UIResouecrLoad.loadArrRes(t, this, this.loadImageComplete)
	}, e.prototype.showPannel = function() {
		this.isFree && this.countdownTime <= 60 * this.overMinTime && (this.visible = !0)
	}, e.prototype.loadImageComplete = function() {
		GloableData.getInstance().pauseCurrentLine();
		var t = new OSprite;
		this.overBack.visible = !1, t.loadImage(this.pathPackUrl + "overBack.png", 0, 0, GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight), this.overBack.addChild(t), this.addChild(this.overBack);
		var e = new OSprite;
		this.overBack.addChild(e);
		var i = new OButton([this.pathPackUrl + "buyBtn.png", this.pathPackUrl + "buyBtn1.png"]),
			a = new OButton([this.pathPackUrl + "saveBtn.png", this.pathPackUrl + "saveBtn1.png"]),
			n = new OButton([this.pathPackUrl + "overBtn.png", this.pathPackUrl + "overBtn1.png"]);
		this.screenV ? this.ScreenScale = 720 / GloableData.getInstance().gameMainData.Headr.GHeight : this.ScreenScale = GloableData.getInstance().gameMainData.Headr.GWidth / 1280;
		var s = GloableData.getInstance().gameMainData.Headr.GHeight / 720;
		i.scaleX = i.scaleY = this.ScreenScale, a.scaleX = a.scaleY = this.ScreenScale, n.scaleX = n.scaleY = this.ScreenScale, this.screenV ? (a.y = (i.height + 24) * this.ScreenScale, n.y = a.y + (i.height + 24) * this.ScreenScale, e.y = 881 * this.ScreenScale, e.x = 141 * this.ScreenScale) : (a.x = i.width * this.ScreenScale + 56, n.x = a.x + (i.width * this.ScreenScale + 56), e.y = 537 * s, e.x = 183.5 * this.ScreenScale), e.addChild(i), e.addChild(a), e.addChild(n), i.click(this, this.buyFree), a.click(this, this.showSaveView), n.click(this, this.gameOver), this.setPicClock(), this.isChangeTime = !0
	}, e.prototype.checkFreeStatus = function() {
		OrgWeb.getInstance().getReWidFlower() >= this.getPlayNum() && (this.isFree = !1), GloableData.getInstance().isFreeLimit = this.isFree
	}, e.prototype.buyFree = function() {
		this.showFlowerPannel()
	}, e.prototype.showFlowerPannel = function() {
		this.maskSendFlower || (this.maskSendFlower = new OSprite, this.addChild(this.maskSendFlower), this.maskSendFlower.zOrder = 20);
		var t = 880,
			e = 580,
			i = new UIMaskSprite;
		i.offAll(), i.visible = !0, this.maskSendFlower.addChild(i);
		var a = ORGGraphics.getInstance().getRound(t, e, 24, {
			fillStyle: "#ffffff"
		}, null, null, null);
		if (this.screenV) a.scale(.5, .5), a.x = (GloableData.getInstance().gameMainData.Headr.GWidth - .5 * a.width) / 2, a.y = (GloableData.getInstance().gameMainData.Headr.GHeight - .5 * a.height) / 2;
		else {
			var n = GloableData.getInstance().gameMainData.Headr.GWidth / 1920;
			a.scale(n, n), a.x = (GloableData.getInstance().gameMainData.Headr.GWidth - a.width * n) / 2, a.y = (GloableData.getInstance().gameMainData.Headr.GHeight - a.height * n) / 2
		}
		var s = new OSprite;
		s.texture = ORG.loader.getRes(this.pathPackUrl + "flower.png"), s.x = 380, s.y = 100, a.addChild(s);
		var o = new laya.html.dom.HTMLDivElement;
		GloableData.getInstance().gameMainData.Headr.GWidth / 1920;
		this.screenV ? (o.style.fontSize = 48, o.style.lineHeight = 80) : o.style.fontSize = 40, o.style.fontFamily = "微软雅黑", o.innerHTML = "你只需要打赏<span style='color: #FD8391;width: auto'>" + Math.ceil(this.getPlayNum() - OrgWeb.getInstance().getReWidFlower()) + " 朵</span>鲜花，就能继续玩", o.width = 650, this.screenV ? (o.y = 230, o.x = (t - o.width) / 2) : (o.y = 292, o.x = (t - o.width) / 2 + 5), a.addChild(o), this.maskSendFlower.addChild(a);
		var r = ORGGraphics.getInstance().getRound(320, 112, 16, {
			fillStyle: "#ebecee"
		}),
			h = new OButton([r, r]),
			l = new OText;
		this.screenV ? l.fontSize = 43 : l.fontSize = 40, l.color = new data.OColor(113, 115, 122).getColorToUint(), l.text = "取消", h.setTitle(l), l.y -= 5, a.addChild(h), h.x = 100, h.click(this, this.canclePannel);
		var c = ORGGraphics.getInstance().getRound(320, 112, 16, {
			fillStyle: "#ffac28"
		}),
			g = new OButton([c, c]),
			u = new OText;
		this.screenV ? u.fontSize = 43 : u.fontSize = 40, u.color = "#ffffff", u.text = "去打赏", g.setTitle(u), u.y -= 5, a.addChild(g), g.x = 460, this.screenV ? (g.y = 430, h.y = 430) : (g.y = 400, h.y = 400), g.click(this, this.toPay)
	}, e.prototype.toPay = function() {
		OrgWeb.getInstance().showPaypanel()
	}, e.prototype.getPlayNum = function() {
		return this.isNewOldShop() && 2 != GloableData.getInstance().gameMallBin.items[0].itemStatus && 3 == GloableData.getInstance().gameMallBin.items[0].itemType ? this.getMallPackPrice() : OrgWeb.getInstance().getFlowerLock()
	}, e.prototype.canclePannel = function() {
		this.maskSendFlower && (this.maskSendFlower.removeAll(), this.maskSendFlower = null)
	}, e.prototype.showSaveView = function() {
		var t = new view.SaveFileUI(!1, !0);
		UIManager.getInstance().showView(t, view.SaveFileUIMediator.NAME), this.visible = !1
	}, e.prototype.gameOver = function() {
		this.isChangeTime = !1, this.timerFree && (clearInterval(this.timerFree), this.timerFree = null), OrgWeb.getInstance().getIsPC() ? window.location.reload() : OrgWeb.getInstance().getIsClient() ? OrgWeb.getInstance().exitOrFullScreen() : window.location.href = window.location.protocol + "//" + window.location.host + "/game/" + GloableData.getInstance().gameInfo.gIndex
	}, e.prototype.setPicTime = function() {
		this.picSpData || (this.picSpData = new Array), this.picSpData.length <= 0 && this.setPicData(this.picSpData), this.picM || (this.picM = new OSprite, this.picM1 = new OSprite, this.colon = new OSprite, this.picS = new OSprite, this.picS1 = new OSprite, this.picM.scaleY = this.picM.scaleX = this.ScreenScale, this.picM1.scaleY = this.picM1.scaleX = this.ScreenScale, this.picS.scaleY = this.picS.scaleX = this.ScreenScale, this.picS1.scaleY = this.picS1.scaleX = this.ScreenScale, this.colon.scaleY = this.colon.scaleX = this.ScreenScale, this.screenV ? (this.picM.x = 10, this.picM1.x = this.picM.x + 63, this.colon.x = this.picM1.x + 50, this.picS.x = this.colon.x + 50, this.picS1.x = this.picS.x + 63) : (this.picM.x = 20 * this.ScreenScale, this.picM1.x = this.picM.x + 92 * this.ScreenScale - 5, this.colon.x = this.picM1.x + 92 * this.ScreenScale - 18, this.picS.x = this.colon.x + 92 * this.ScreenScale - 18, this.picS1.x = this.picS.x + 92 * this.ScreenScale - 5)), this.picTimeBack || (this.picTimeBack = new OSprite, this.overBack.addChild(this.picTimeBack), this.picTimeBack.addChild(this.picM), this.picTimeBack.addChild(this.picM1), this.picTimeBack.addChild(this.colon), this.picTimeBack.addChild(this.picS), this.picTimeBack.addChild(this.picS1), this.screenV ? (this.picTimeBack.x = 150 * this.ScreenScale, this.picTimeBack.y = 511 * this.ScreenScale) : (this.picTimeBack.x = 628 * this.ScreenScale, 800 == GloableData.getInstance().gameInfo.gGameWidth ? this.picTimeBack.y = 150 * this.ScreenScale + 50 : this.picTimeBack.y = 150 * this.ScreenScale));
		var t = this.getCountDownTimeString();
		this.picM.texture = this.picSpData[t.substr(3, 1)].texture, this.picM1.texture = this.picSpData[t.substr(4, 1)].texture, this.colon.texture = this.picSpData[10].texture, this.picS.texture = this.picSpData[t.substr(6, 1)].texture, this.picS1.texture = this.picSpData[t.substr(7, 1)].texture
	}, e.prototype.setPicData = function(t) {
		if (!(t.length > 0)) for (var e = ORG.loader.getRes(this.pathPackUrl + "numberPic.png"), i = 0; 11 > i; i++) if (0 != i) if (10 != i) {
			var a = new OSprite;
			a.texture = OTexture.createFromTexture(e, 92 * (i - 1), 0, 91, 122), t.push(a)
		} else {
			var n = new OSprite;
			n.texture = OTexture.createFromTexture(e, 92 * i, 0, 91, 122), t.push(n)
		} else {
			var s = new OSprite;
			s.texture = OTexture.createFromTexture(e, 828, 0, 91, 122), t.push(s)
		}
	}, e.prototype.setPicClock = function() {
		if (!this.clockPic) {
			var t;
			t = OrgWeb.getInstance().getIsPC() ? 10 : 5, this.clockPic = !0, this.changeClock(), this.overBack.visible = !0, Laya.timer.frameLoop(t, this, this.changeClock)
		}
	}, e.prototype.changeClock = function() {
		var t;
		0 == this.useclock ? (this.useclock = 1, t = this.pathPackUrl + "clock.png") : 1 == this.useclock && (this.useclock = 0, t = this.pathPackUrl + "clock1.png"), this.clockSp || (this.clockSp = new OSprite, this.overBack.addChild(this.clockSp), this.screenV ? (this.clockSp.x = 98 * this.ScreenScale, this.clockSp.y = 46 * this.ScreenScale) : (this.clockSp.x = 96 * this.ScreenScale, 800 == GloableData.getInstance().gameInfo.gGameWidth ? this.clockSp.y = 65 * this.ScreenScale + 50 : this.clockSp.y = 65 * this.ScreenScale), this.clockSp.scale(this.ScreenScale, this.ScreenScale)), this.clockSp.texture = ORG.loader.getRes(t)
	}, e.prototype.changeTime = function() {
		return this.checkFreeStatus(), 0 == this.isFree ? (this.timeText.text = "送花够，可以继续玩", void this.clearView()) : (this.isChangeTime && this.overBack && this.setPicTime(), !this.overBack && (this.timeText.text = "免费倒计时   " + this.getCountDownTimeString(), this.countdownTime <= 60 * this.overMinTime) ? void this.createOverView() : this.countdownTime <= 0 ? void this.gameOver() : void this.countdownTime--)
	}, e.prototype.clearView = function() {
		this.clearNum++, this.maskSendFlower && (this.maskSendFlower.removeAll(), this.maskSendFlower = null), this.overBack && (GloableData.getInstance().resumeCurrentLine(), Laya.timer.clear(this, this.changeClock), this.overBack.removeAll(), this.overBack = null, this.size(this.timeBack.width, this.timeBack.height)), 10 == this.clearNum && ("undefined" != typeof this.changeClock && Laya.timer.clear(this, this.changeClock), clearInterval(this.timerFree), this.timerFree = null, this.removeAll())
	}, e.prototype.dispose = function() {
		this.maskSendFlower && (this.maskSendFlower.removeAll(), this.maskSendFlower = null), this.overBack && (Laya.timer.clear(this, this.changeClock), this.overBack.removeAll(), this.overBack = null, this.size(this.timeBack.width, this.timeBack.height)), "undefined" != typeof this.changeClock && Laya.timer.clear(this, this.changeClock), this.timerFree && (clearInterval(this.timerFree), this.timerFree = null), this.removeAll()
	}, e.prototype.createView = function() {
		if (!this.timeBack) {
			var t = "#ffffff";
			new data.OColor(255, 254, 254, 255).getColorToUint();
			this.timeBack = new OSprite, OrgWeb.getInstance().getIsPC() ? (this.timeBack.loadImage(this.pathPackUrl + "timeBack.png", 0, 0, 180, 26), this.timeBack.x = GloableData.getInstance().gameMainData.Headr.GWidth - 60 - 200) : (this.timeBack.loadImage(this.pathPackUrl + "timeBack.png", 0, 0, 240, 40), this.timeBack.x = GloableData.getInstance().gameMainData.Headr.GWidth - 60 - 260), this.timeBack.y = 34, this.timeBack.alpha = .8, this.addChild(this.timeBack), this.timeText = new OText, this.timeText.x = 14, this.timeText.color = t, this.timeBack.addChild(this.timeText), this.closeText = new OText, this.closeText.text = "×", OrgWeb.getInstance().getIsPC() ? (this.timeText.fontSize = 12, this.closeText.fontSize = 16, this.closeText.x = 180 - this.closeText.width - 12, this.closeText.y = (26 - this.closeText.height) / 2 - 4, this.timeText.y = (26 - this.closeText.height) / 2) : (this.timeText.fontSize = 18, this.closeText.fontSize = 22, this.closeText.x = 240 - this.closeText.width - 12, this.closeText.y = (40 - this.closeText.height) / 2 - 3, this.timeText.y = (40 - this.closeText.height) / 2), this.closeText.color = t, this.timeBack.addChild(this.closeText), this.closeText.on(GameEvent.CLICK, this, this.closeTimeBack)
		}
	}, e.prototype.closeTimeBack = function() {
		this.isUserClose || (this.isUserClose = !0), this.timeBack && (this.timeBack.visible = !1)
	}, e.prototype.setTimeBackV = function(t) {
		if (this.timeBack) if (t) {
			if (!this.isUserClose && !UIManager.getInstance().hasViewShow()) return void(this.timeBack.visible = t)
		} else this.timeBack.visible = t
	}, e.prototype.isNewOldShop = function() {
		if (GloableData.getInstance().hasFileItem("data/mall.bin")) for (var t in GloableData.getInstance().gameMallBin.items) if (1 == GloableData.getInstance().gameMallBin.items[t].itemType && 2 != GloableData.getInstance().gameMallBin.items[t].itemStatus) return !0;
		return !1
	}, e.prototype.getMallPackPrice = function() {
		return GloableData.getInstance().hasFileItem("data/mall.bin") ? GloableData.getInstance().gameMallBin.items[0].itemPrice : 0
	}, e.prototype.showCountDownView = function() {
		if (!this.timerFree) {
			var t = "";
			this.screenV && (t = "v"), this.pathPackUrl = GloableData.getInstance().serverPath + "res/webfree" + t + "/", this.createView(), this.changeTime(), this.timerFree = setInterval(this.changeTime.bind(this), 1e3)
		}
	}, e.NAME = "freeview", e
}(BaseUI), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), OSprite = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.tag = null, e
	}
	return __extends(e, t), e.prototype.clone = function() {
		var t = new e;
		return t.texture = this.texture, t.filters = this.filters, t.x = this.x, t.y = this.y, t.size(this.width, this.height), t
	}, e.prototype.getDataSource = function(t, e, i, a) {
		void 0 === t && (t = "image/png"), void 0 === e && (e = null), void 0 === i && (i = GloableData.getInstance().gameMainData.Headr.GWidth), void 0 === a && (a = GloableData.getInstance().gameMainData.Headr.GHeight);
		try {
			var n = void 0;
			return n = this.drawToCanvas(i, a, 0, 0).getCanvas().toDataURL(t, e)
		} catch (s) {
			return "//pic"+HOST+"/orange/title/" + GloableData.getInstance().gameInfo.guid + "_" + GloableData.getInstance().gameVer + ".jpg!470x270?v=" + playerVer
		}
	}, e.prototype.thumbSnap = function(t, i) {
		var a = GloableData.getInstance().gameMainData.Headr.GWidth,
			n = GloableData.getInstance().gameMainData.Headr.GHeight,
			s = this.drawToCanvas(a, n, 0, 0),
			o = (new e).scale(t / a, i / n);
		return o.graphics.drawTexture(new laya.resource.Texture(s)), o.drawToCanvas(t, i, 0, 0)
	}, e.prototype.osize = function(t, e) {
		this.size(t, e)
	}, e.prototype.addEventLisner = function(t, e, i) {
		this.on(t, e, i, [this])
	}, e.prototype.removeEventLisner = function(t, e, i, a) {
		void 0 === a && (a = !1), this.off(t, e, i, a)
	}, e.prototype.removeChildByNode = function(t) {
		t && (t.offAll(), this.removeChild(t))
	}, e.prototype.removeAllChild = function() {
		for (; this._childs && this._childs.length > 0;) this.removeChildByNode(this._childs.shift())
	}, e.prototype.removeAll = function() {
		this.offAll(), this.destroy(!0)
	}, e.prototype.dispose = function() {
		this.offAll(), this.destroy(!0)
	}, e
}(laya.display.Sprite), OTexture = function(t) {
	function e(e, i) {
		return t.call(this, e, i) || this
	}
	return __extends(e, t), e
}(laya.resource.Texture), OButton = function(t) {
	function e(e, i, a) {
		void 0 === i && (i = !0), void 0 === a && (a = !0);
		var n = t.call(this) || this;
		return n.back = new OImage, n.isClick = !0, n.isSetSize = !0, n.isClick = i, n.isSetSize = a, "string" == typeof e ? (n.state1Src = e, n.state2Src = null, n.state3Src = null) : e && (n.state1Src = e[0], n.state2Src = e[1], n.state3Src = e[2], n.on(GameEvent.MOUSE_OVER, n, n.overEvent), n.on(GameEvent.MOUSE_OUT, n, n.outEvent), n.on(GameEvent.MOUSE_UP, n, n.upEvent), n.on(GameEvent.MOUSE_DOWN, n, n.downEvent), n.on(GameEvent.BLUR, n, n.upEvent)), n.addChild(n.back), n.state1Src && n.showImage(n.state1Src), n
	}
	return __extends(e, t), e.prototype.showImage = function(t) {
		if ("string" == typeof t) {
			if ("" == t) return;
			ORG.loader.getRes(t) ? (this.back.texture = ORG.loader.getRes(t), this.isClick && this.size(this.back.texture.width, this.back.texture.height)) : ORG.loader.load(t, OHandler.create(this, this.loadState1Ok, [t]), null, OLoader.IMAGE)
		} else this.removeChild(this.back), this.back = t, this.addChildAt(this.back, 0), this.isClick && this.isSetSize && (this.back.size(t.width, t.height), this.size(t.width, t.height))
	}, e.prototype.loadState1Ok = function(t) {
		this.back.texture = ORG.loader.getRes(t), this.isClick && this.back.texture && this.size(this.back.texture.width, this.back.texture.height)
	}, e.prototype.overEvent = function() {
		this.state2Src && this.showImage(this.state2Src)
	}, e.prototype.outEvent = function() {
		this.showImage(this.state1Src)
	}, e.prototype.upEvent = function() {
		this.showImage(this.state1Src)
	}, e.prototype.downEvent = function() {
		!this.state3Src && this.state2Src ? this.showImage(this.state2Src) : this.state3Src && this.showImage(this.state3Src)
	}, e.prototype.updateURL = function(t) {
		"" == t && this.size(0, 0), "string" == typeof t && t != this.state1Src ? (this.state1Src = t, this.state2Src = null, this.state3Src = null) : "string" != typeof t && t && (t[0] != this.state1Src && (this.state1Src = t[0]), t[1] != this.state2Src && (this.state2Src = t[1]), t[2] != this.state3Src && (this.state3Src = t[2])), this.state1Src && this.showImage(this.state1Src)
	}, e.prototype.getUrl = function() {
		return this.state1Src
	}, e.prototype.click = function(t, e) {
		this.isClick && this.on(GameEvent.CLICK, t, function(i, a) {
			e.call(t, i, [a])
		}, [this])
	}, e.prototype.removeAll = function() {
		this.destroy(!0), this.offAll()
	}, Object.defineProperty(e.prototype, "setText", {
		set: function(t) {
			if (this.title) this.title.text = t;
			else {
				this.title = new OText, this.title.text = t, this.title.x = (this.width - this.title.width) / 2, this.title.y = (this.height - this.title.height) / 2;
				var e = GloableData.getInstance().getFontDiffy(this.title.font, this.title.fontSize);
				this.title.y -= e
			}
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.setTitle = function(t) {
		this.title ? (this.title.x = (this.width - t.width) / 2, this.title.y = (this.height - t.height) / 2, this.title.text = t.text) : (this.title = t, this.title.x = (this.width - t.width) / 2, this.title.y = (this.height - t.height) / 2, this.addChild(t));
		var e = GloableData.getInstance().getFontDiffy(this.title.font, this.title.fontSize);
		this.title.y -= e
	}, e
}(OSprite), OMouseEvent = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e.getInstance = function() {
		return laya.events.MouseManager.instance
	}, e
}(laya.events.MouseManager), OTextInput = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.tag = null, e
	}
	return __extends(e, t), e.prototype.oprompt = function(t) {
		this.prompt = t
	}, e.prototype.osize = function(t, e) {
		this.size(t, e)
	}, e.prototype.osettype = function(t) {
		this.type = t
	}, e.prototype.addEventLisner = function(t, e, i) {
		this.on(t, e, i, [this])
	}, e
}(laya.ui.TextInput), OImage = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e.prototype.setGrid = function(t) {
		this.sizeGrid = t
	}, e.prototype.setGrid1 = function(t, i) {
		this.gridBack = new e, this.gridTexturn = i;
		var a = t.split(","),
			n = parseInt(a[0]),
			s = parseInt(a[1]),
			o = parseInt(a[2]),
			r = parseInt(a[3]);
		this.imgArr = [], this.imgArr[0] = new e, this.imgArr[1] = new e, this.imgArr[2] = new e, this.imgArr[3] = new e, this.imgArr[4] = new e, this.imgArr[5] = new e, this.imgArr[6] = new e, this.imgArr[7] = new e, this.imgArr[8] = new e;
		var h = this.gridTexturn.sourceWidth,
			l = this.gridTexturn.sourceHeight,
			c = h - r - s,
			g = l - n - o;
		this.createTexture(0, 0, r, n, this.imgArr[0]), this.createTexture(r, 0, c, n, this.imgArr[1]), this.createTexture(h - s, 0, s, n, this.imgArr[2]), this.createTexture(0, n, r, g, this.imgArr[3]), this.createTexture(r, n, c, g, this.imgArr[4]), this.createTexture(h - s, n, s, g, this.imgArr[5]), this.createTexture(0, l - o, r, l - o - g, this.imgArr[6]), this.createTexture(r, l - o, c, l - o - g, this.imgArr[7]), this.createTexture(h - s, l - o, s, l - o - g, this.imgArr[8]);
		for (var u in this.imgArr) this.gridBack.addChild(this.imgArr[u]);
		this.addChild(this.gridBack)
	}, e.prototype.setGridWH = function(t, e) {
		this.gridBack.size(t, e), this.size(t, e);
		var i = t - this.imgArr[0].width - this.imgArr[2].width,
			a = e - this.imgArr[0].height - this.imgArr[6].height;
		this.imgArr[1].scaleX = i / this.imgArr[1].width, this.imgArr[7].scaleX = i / this.imgArr[7].width, this.imgArr[1].width = i, this.imgArr[7].width = i, this.imgArr[2].x = Math.floor(this.imgArr[1].x + this.imgArr[1].width), this.imgArr[8].x = Math.floor(this.imgArr[7].x + this.imgArr[7].width), this.imgArr[3].scaleY = a / this.imgArr[3].height, this.imgArr[5].scaleY = a / this.imgArr[5].height, this.imgArr[3].height = a, this.imgArr[5].height = a, this.imgArr[6].y = Math.floor(this.imgArr[3].y + this.imgArr[3].height), this.imgArr[8].y = Math.floor(this.imgArr[5].y + this.imgArr[5].height), this.imgArr[4].scaleX = i / this.imgArr[4].width, this.imgArr[4].scaleY = a / this.imgArr[4].height, this.imgArr[4].width = i, this.imgArr[4].height = a, this.imgArr[5].x = Math.floor(this.imgArr[4].x + this.imgArr[4].width), this.imgArr[7].y = Math.floor(this.imgArr[4].y + this.imgArr[4].height)
	}, e.prototype.createTexture = function(t, e, i, a, n) {
		n.texture = OTexture.create(this.gridTexturn, t, e, i, a), n.x = t, n.y = e, n.size(i, a)
	}, e
}(laya.ui.Image), OByteArray = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.utils.Byte), OText = function(t) {
	function e(e) {
		var i = t.call(this) || this;
		return i.tag = null, i.font = "微软雅黑", i.texts = new Array, e ? i : i
	}
	return __extends(e, t), Object.defineProperty(e.prototype, "allText", {
		get: function() {
			return this.texts
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.addtext = function(t) {
		GloableData.getInstance().fontBitmapData.isUserBitMap || (t.y -= GloableData.getInstance().sysFontDifY), this.texts.push(t), this.addChild(t)
	}, Object.defineProperty(e.prototype, "getHeight", {
		get: function() {
			return this.height
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.gettext = function(t) {
		return this.texts[t] ? this.texts[t] : null
	}, e.prototype.updateText = function(t) {
		if (this.texts != t) {
			this.cleanTexts(), this.removeChildren();
			for (var e in t) this.addtext(t[e])
		}
	}, e.prototype.cleanTexts = function() {
		for (; this.texts.length > 0;) {
			var t = this.texts.shift();
			t.parent && t.parent.removeChild(t), t.dispose(), t = null
		}
		this.texts = []
	}, e.prototype.dispose = function() {
		this.removeChildren(), this.destroy(!0)
	}, e
}(laya.display.Text), OHttpRequest = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.net.HttpRequest), OLoaderManager = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.net.LoaderManager), OLoader = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.net.Loader), OLocalStorage = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.net.LocalStorage), OEvent = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.events.Event), OEventDispatcher = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.events.EventDispatcher), OSoundManager = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.media.SoundManager), OSoundChannel = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.media.SoundChannel), OTween = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.utils.Tween), ORectangle = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.maths.Rectangle), OPoint = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.maths.Point), OStage = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.display.Stage), OHandler = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.utils.Handler), OBox = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.ui.Box), OList = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e.prototype.addCell = function(e) {
		t.prototype.addCell.call(this, e)
	}, Object.defineProperty(e.prototype, "listcontent", {
		get: function() {
			return this._content
		},
		enumerable: !0,
		configurable: !0
	}), e
}(laya.ui.List), OHScrollBar = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.ui.HScrollBar), OHSlider = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.ui.HSlider), OProgressBar = function(t) {
	function e() {
		return null !== t && t.apply(this, arguments) || this
	}
	return __extends(e, t), e
}(laya.ui.ProgressBar), OPanel = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e
}(laya.ui.Panel), ORG = function() {
	function t() {}
	return Object.defineProperty(t, "loader", {
		get: function() {
			return Laya.loader ? Laya.loader : void 0
		},
		enumerable: !0,
		configurable: !0
	}), t.reloader = function() {}, t.org_timer = new laya.utils.Timer, t.Tween = new OTween, t
}(), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), GameEvent = function(t) {
	function e(e, i) {
		var a = t.call(this) || this;
		return a.type = e, a.parameter = i, a
	}
	return __extends(e, t), e
}(OEvent), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), GameByte = function(t) {
	function e(e) {
		return t.call(this, e) || this
	}
	return __extends(e, t), e.prototype.readCString = function(t) {
		void 0 === t && (t = null);
		var e = this.getUTFBytes(t);
		return e
	}, e.prototype.readC2String = function(t) {
		return void 0 === t && (t = null), String.fromCharCode.apply(null, this.readUint16Array(t, null))
	}, e.prototype.readUint16Array = function(t, i) {
		t = null == t ? this.bytesAvailable - this.pos / 2 : t;
		var a = new Uint16Array(t);
		return this.memcpy(a.buffer, 0, this.buffer, this.pos, t * a.BYTES_PER_ELEMENT), this.arrayToNative(a, null == i ? e.getSystemEndian() : i), this.pos += a.byteLength, a
	}, e.prototype.memcpy = function(t, e, i, a, n) {
		var s = new Uint8Array(t, e, n),
			o = new Uint8Array(i, a, n);
		s.set(o)
	}, e.prototype.arrayToNative = function(t, i) {
		return i == e.getSystemEndian() ? t : this.flipArrayEndianness(t)
	}, e.prototype.flipArrayEndianness = function(t) {
		for (var e = new Uint8Array(t.buffer, t.byteOffset, t.byteLength), i = 0; i < t.byteLength; i += t.BYTES_PER_ELEMENT) for (var a = i + t.BYTES_PER_ELEMENT - 1, n = i; a > n; a--, n++) {
			var s = e[n];
			e[n] = e[a], e[a] = s
		}
		return t
	}, e.prototype.readStringE = function() {
		var t = this.getInt32(),
			e = "UTF-8";
		return null == e || "ASCII" == e ? this.getUTFBytes(t) : this.getUTFBytes(t)
	}, e.prototype.getInt8 = function() {
		var t = this.getUint8() - 128;
		return t
	}, e
}(OByteArray), data;
!
function(t) {
	var e;
	!
	function(t) {
		var e = function() {
				function t() {}
				return t.addItem = function(t) {
					return this.items.push(t)
				}, t.snap = function(e) {
					for (var i = 0, a = t.items; i < a.length; i++) {
						var n = a[i];
						n.snap()
					}
				}, t.restore = function(e) {
					for (var i = 0, a = t.items; i < a.length; i++) {
						var n = a[i];
						n.restore(this.snapDataArr[e])
					}
				}, t.download = function() {
					var e = HttpURL.M_M_SERVER_URL + "cloud/v1/index/",
						i = t.getData(),
						a = e + "cloud_load?ts=" + i.newTs + "&sign=" + i.newSign + "&client_type=" + i.newClient_type;
					HttpManager.getInstance().sendPostRequest(a, i, t.loadedHandler, "arraybuffer", null, !0)
				}, t.getData = function() {
					var t = {};
					t.guid = GloableData.getInstance().gameInfo.guid, t.gindex = GloableData.getInstance().gameInfo.gIndex, t.uid = OrgWeb.getInstance().getUid(), t.newClient_type = 7;
					var e = Math.floor(Date.now() / 1e3),
						i = new Object;
					i.r = md5(e.toString()).substr(1, 3);
					var a = JSON.stringify(i),
						n = base64.urlEncoder(a),
						s = encodeURIComponent(n);
					t.auth = s, t.newTs = e;
					var o = md5("client_type=" + t.newClient_type + "&ts=" + e + "t_16b4a01f45313e88");
					return t.newSign = o, t
				}, t.loadedHandler = function(t) {}, t
			}();
		t.SnapMgr = e
	}(e = t.snap || (t.snap = {}))
}(data || (data = {}));
var GloableData = function() {
		function t() {
			this.allDepth = 0, this.fileList = new Dictionary, this.infoList = new Dictionary, this.gamePictrue = new Dictionary, this.wmodList = new Dictionary, this.wmodUseType = "", this.wmodStory = null, this.wmodStoryGroup = null, this.wmodPlayUrl = "", this.operationCloud = {}, this.operationFrame = {}, this.autoRun = !1, this.quickRun = !1, this.isWX = !1, this.img_src = "", this.ovideo = {}, this.mark = "", this.sdkLogin = {}, this.isNew = !1, this.pos = 0, this.saveFileData = [], this.isCloud = !1, this.flowerMallHua = 0, this.serverPath = "", this.isORGnew = !1, this.isM = !1, this.DEBUG = !1, this.isWaite = !1, this.gameVer = 1, this.talkSpeedType = -1, this.sysFontDifY = 0, this.updateUIByDataTimeKey = 0, this.isShowSysMenu = !1, this.isFreeLimit = !1, this.initUserName = "", this.localHP = 200, this.groupID = "", this.isPreLoad = !1, this.userAllFlower = 0, this.isLightVIP = !1, this.isLightDay = !1, this.isFreeTime = 0, this.msg_free = "限免期间，已自动为您发放", this.msg_lightVip = "您是轻短篇会员，已为您解锁全部体力锁限制，畅玩无阻。", this.msg_lightDay = "轻短篇限时免费期间，已为您解锁全部体力锁限制，畅玩无阻。", this.isOpenSaveFileUI = !1, this.tmpDepth = 0, this.isCollect = !1, this.isCollectSave = !1, this.loadOafDataNumber = 0, this.mallBuyItem = new Dictionary, this.hasMall = !1, this.reportorError = new ReportorError, this.isUpDoneData = {}
		}
		return t.prototype.saveShot = function(e, i) {
			if (!this.isCloud || i) {
				var a = encodeURIComponent(JSON.stringify(this.saveFileData));
				t.getInstance().gameInfo.isPc ? PCSaveData(this.savekey + "icon", a) : localStorage.setItem(this.savekey + "icon", a)
			} else {
				null != e && e++;
				var n = {};
				n[e] = CloudProxy.getInstance().cloudData[e], CloudProxy.getInstance().upSaveData(n)
			}
		}, t.prototype.loadShot = function(e) {
			void 0 === e && (e = !1);
			try {
				if (this.isCloud && !e) if (this.saveFileData = null, this.saveDataInit(), null != CloudProxy.getInstance().cloudData) {
					var i = CloudProxy.getInstance().cloudData;
					for (var a in i) if ("number" == typeof parseInt(a)) {
						if (!i[a]) break;
						var n = parseInt(a) - 1;
						if (0 > n) continue;
						if (i[a].Thumbnail.screenshot && "" != i[a].Thumbnail.screenshot && i[a].Thumbnail.screenshot.indexOf("data:image/jpeg;base64") > 0) this.saveFileData[n].picurl = i[a].Thumbnail.screenshot;
						else {
							var s = "//pic"+HOST+"/orange/title/" + t.getInstance().gameInfo.guid + "_" + t.getInstance().gameVer + ".jpg!470x270";
							this.saveFileData[n].picurl = s
						}
						this.saveFileData[n].name = i[a].Header.StoryName, this.saveFileData[n].date = "" == i[a].Header.SaveTime ? 1 : parseInt(i[a].Header.SaveTime), this.saveFileData[n].isfree = 0, OrgWeb.getInstance().getIsUnLock() || 1 != i[a].Header.IsFreeLimit || (this.saveFileData[n].isfree = 1)
					}
				} else CloudProxy.getInstance().cloudData = {};
				else {
					var o = void 0;
					try {
						if (t.getInstance().gameInfo.isPc) {
							var r = PCLoadData(this.savekey + "icon");
							o = "-1" == r ? "" : r
						} else o = localStorage.getItem(this.savekey + "icon")
					} catch (h) {}
					if (o) {
						var l = JSON.parse(decodeURIComponent(o));
						this.saveFileData = l;
						var c = t.getInstance().gameMainData.System.SaveData.max - this.saveFileData.length;
						if (c > 0) for (var a = 0; c > a; a++) this.saveFileData.push({
							index: a,
							picurl: "",
							name: "",
							date: -1
						});
						for (var a in this.saveFileData) {
							var n = (this.saveFileData[a], this.savekey + a);
							if (o = t.getInstance().gameInfo.isPc ? PCLoadData(n) : window.localStorage.getItem(n)) {
								var g = JSON.parse(o);
								OrgWeb.getInstance().getIsUnLock() || 1 != g.Header.IsFreeLimit ? this.saveFileData[a].isfree = 0 : this.saveFileData[a].isfree = 1
							}
						}
					} else if (this.saveItemInit(), !t.getInstance().gameInfo.isPc) for (var u = this.gameMainData.System.SaveData.max, a = 0; u > a; a++) {
						var n = "orgsave" + t.getInstance().gameInfo.guid + a + "|" + OrgWeb.getInstance().getUid(),
							p = localStorage.getItem(n);
						p && this.parseOldData(p, a)
					}
				}
			} catch (h) {}
		}, Object.defineProperty(t.prototype, "flowerHua", {
			get: function() {
				return OrgWeb.getInstance().getFlowrHuaNum()
			},
			enumerable: !0,
			configurable: !0
		}), t.prototype.changeFileData = function() {
			for (var e = t.getInstance().gameMainData.System.SaveData, i = (OrgWeb.getInstance().getUid(), !1), a = 0; a < e.max; a++) {
				var n = localStorage.getItem(this.savekey + a);
				n && (i = !0)
			}
			if (!i) {
				for (var s = "save" + t.getInstance().gameMainData.Headr.guid + 0, a = 0; a < e.max; a++) {
					var n = localStorage.getItem(s + a);
					n && (localStorage.setItem(this.savekey + a, n), localStorage.removeItem(s + a))
				}
				var o = localStorage.getItem(s + "icon");
				o && (localStorage.setItem(this.savekey + "icon", o), localStorage.removeItem(s + "icon")), UIManager.getInstance().getViewByName("SaveFileUIMediator") && UIManager.getInstance().getViewByName("SaveFileUIMediator").visible && UIManager.getInstance().getViewByName("SaveFileUIMediator").refreshUI()
			}
		}, t.prototype.reSaveData = function() {
			if (this.gameInfo.isPc && this.gameMainData.System.UIInitSave) {
				for (var t = this.gameMainData.System.SaveData, e = 0; e < t.max + 1; e++) this.deleteSnap(e);
				PCSaveData(this.savekey + "icon", "-1")
			}
		}, t.prototype.getOldDataItemByKey = function(t, e) {
			for (var i = 0; i < t.length; i++) if (t[i].indexOf(e) > -1) return t[i].split("=")[1];
			return ""
		}, t.prototype.parseOldStringCode = function(t) {
			var e = t.split("|"),
				i = Math.floor(e.length / 2),
				a = {};
			for (a.length = i; e.length > 0;) {
				var n = e.shift();
				a[n] = e.shift()
			}
			return a
		}, t.prototype.parseOldStack = function(t) {
			var e = {},
				i = t.shift();
			e.length = i;
			for (var a = 0; i > a; a++) {
				var n = t.shift(),
					s = void 0;
				switch (parseInt(n)) {
				case 0:
					s = n + "|" + t.shift() + "|";
					break;
				case 1:
					s = n + "|" + t.shift() + "|" + t.shift() + "|";
					break;
				case 2:
					var o = t.shift();
					s = n + "|";
					for (var r = 0; o > r; r++) s += t.shift() + "|"
				}
				e[a] = s
			}
			return e
		}, t.prototype.parseOldiMain = function(e) {
			var i, a = t.getInstance().tmpDepth,
				n = parseInt(e.shift().toString()),
				s = parseInt(e.shift().toString()),
				o = parseInt(e.shift().toString());
			1 == o && (i = this.parseOldiMain(e), t.getInstance().tmpDepth++);
			var r = this.parseOldStack(e),
				h = {
					Depth: a,
					StoryId: n,
					Pos: s,
					IsHaveSub: o,
					SubStory: i,
					IndentStack: r
				};
			return h
		}, t.prototype.parseOldData = function(e, i) {
			var a = e.split("@"),
				n = new Date(this.getOldDataItemByKey(a, "time")).getTime(),
				s = this.getOldDataItemByKey(a, "imain").split("|"),
				o = this.getOldDataItemByKey(a, "storyname"),
				r = this.getOldDataItemByKey(a, "vars"),
				h = this.getOldDataItemByKey(a, "stringCode"),
				l = this.getOldDataItemByKey(a, "string"),
				c = decodeURIComponent(this.getOldDataItemByKey(a, "canvas")),
				g = this.getOldDataItemByKey(a, "cuiindex"),
				u = this.getOldDataItemByKey(a, "sFloatBut"),
				p = (this.getOldDataItemByKey(a, "videoMgr"), this.getOldDataItemByKey(a, "saveIcon")),
				d = {
					Platform: "H5_NEW",
					Version: "17.04.13",
					Name: this.gameMainData.Headr.title,
					StoryName: this.iMain.story ? this.iMain.story.Name : "",
					SaveTime: n,
					IsFreeLimit: 0,
					StoryID: s[0]
				};
			this.tmpDepth = 0;
			for (var m = this.parseOldiMain(s), v = {
				FloatStatus: "" == u || "false" != u && 0 != u ? 1 : 0,
				WeatherType: 0,
				Layers: c,
				CuiIndex: parseInt(g),
				chatInfo: null,
				chatNewInfo: null,
				LayerMirrorInfo: null,
				LayerRotateInfo: null
			}, f = {
				BGM: "",
				BGS: "",
				SE: "",
				Voice: "",
				BGMV: 100 * window.channels[audio.ChannelEnum.bg].oriVol,
				BGSV: 100 * window.channels[audio.ChannelEnum.bfx].oriVol,
				SEV: 100 * window.channels[audio.ChannelEnum.fx].oriVol,
				VoiceV: 100 * window.channels[audio.ChannelEnum.vo].oriVol,
				BGMFade: !1,
				BGMFadeTime: 0,
				BGMFadeTimeMax: 0,
				BGSFade: !1,
				BGSFadeTime: 0,
				BGSFadeTimeMax: 0,
				VoiceFade: !1,
				VoiceFadeTime: 0,
				VoiceFadeTimeMax: 0
			}, I = {
				String: l,
				varString: this.parseOldStringCode(h),
				Vars: r
			}, y = {
				length: 0
			}, _ = {
				base64: "//pic"+HOST+"/orange/title/" + t.getInstance().gameInfo.guid + "_" + t.getInstance().gameVer + ".jpg!470x270",
				screenshot: ""
			}, w = {
				items: []
			}, b = [], S = 0; 50 > S; S++) b.push({
				haveRotate: "0"
			});
			var E = {
				Header: d,
				Logic: m,
				Canvas: v,
				layerRotateInfo: b,
				Music: f,
				SystemDefine: I,
				RePlay: y,
				Thumbnail: _,
				PlayerBuyItem: w,
				OAF2: null
			};
			this.saveFileData[i].picurl = p, this.saveFileData[i].name = o, this.saveFileData[i].date = n, null != i && i++;
			var x = this.savekey + i,
				M = encodeURIComponent(JSON.stringify(this.saveFileData));
			t.getInstance().gameInfo.isPc || localStorage.setItem(this.savekey + "icon", M);
			try {
				localStorage.setItem(x, JSON.stringify(E))
			} catch (C) {}
		}, t.prototype.checkAllowSave = function(e) {
			if (UIManager.getInstance().orgWebFreeLayer.isFree) return !0;
			if (t.getInstance().gameInfo.isPc) return !0;
			if (0 != OrgWeb.getInstance().getPlatForm()) return !0;
			if (OrgWeb.getInstance().getReWidFlower() > 0) return !0;
			e += 1;
			var i = void 0,
				a = this.gameMainData.System.SaveData,
				n = 0;
			if (this.isCloud) {
				if (CloudProxy.getInstance().cloudData) {
					for (var s = CloudProxy.getInstance().cloudData, o = 0; o < a.max + 1; o++) s[o] && n++;
					s[e] && (i = JSON.stringify(s[e]))
				}
			} else {
				for (var o = 0; o < a.max + 1; o++) {
					var r = this.savekey + o,
						h = window.localStorage.getItem(r);
					h && n++
				}
				var l = this.savekey + e;
				i = window.localStorage.getItem(l)
			}
			return !0//取消送花打开存盘数量 n > 0 && !i ? (Tips.showSaveFileTitleFlower(), !1) : !0
		}, t.prototype.waitUpExCompleteSnap = function() {
			if (this.tmp_saveData && this.tmp_saveData.length > 0) {
				var t = this.tmp_saveData.shift();
				return t.call.call(t.caller, t.index, t.isMust), void this.waitUpExCompleteSnap()
			}
			this.tmp_saveData = null
		}, t.prototype.snap = function(e, i, a) {
			void 0 === i && (i = !1), void 0 === a && (a = !1);
			var n = 0;
			if (!a) {
				if (this.dGameSystem.varsEx.isUpVarsExData) return this.tmp_saveData || (this.tmp_saveData = new Array), void this.tmp_saveData.push({
					caller: this,
					call: this.snap,
					index: e,
					isMust: i
				});
				null != e && e++, t.getInstance().gameInfo.isPc || OrgWeb.getInstance().getTanFlowerState() && !OrgWeb.getInstance().getIsUnLock() && (n = 1)
			}
			var s = {
				Platform: "H5_NEW",
				Version: "17.04.13",
				Name: this.gameMainData.Headr.title,
				StoryName: this.iMain.story.Name,
				SaveTime: (new Date).getTime(),
				IsFreeLimit: n,
				StoryID: this.iMain.storyId
			},
				o = this.iMain.snap(),
				r = {
					FloatStatus: SFloatButtonUI.floatStatus,
					WeatherType: UIManager.getInstance().effectsLayer.type,
					Layers: this.createPicStr(),
					CuiIndex: this.CUIFromIndex,
					chatInfo: UIManager.getInstance().chat.savedata(),
					chatNewInfo: UIManager.getInstance().popMsgMgr.snap(),
					LayerMirrorInfo: this.getPicMirror(),
					LayerRotateInfo: this.getPicRotation()
				},
				h = this.createOAF2Str(),
				l = {
					BGM: window.channels[audio.ChannelEnum.bg].curUrl,
					BGS: window.channels[audio.ChannelEnum.bfx].curUrl,
					SE: "",
					Voice: "",
					BGMV: 100 * window.channels[audio.ChannelEnum.bg].oriVol,
					BGSV: 100 * window.channels[audio.ChannelEnum.bfx].oriVol,
					SEV: 100 * window.channels[audio.ChannelEnum.fx].oriVol,
					VoiceV: 100 * window.channels[audio.ChannelEnum.vo].oriVol,
					BGMFade: !1,
					BGMFadeTime: 0,
					BGMFadeTimeMax: 0,
					BGSFade: !1,
					BGSFadeTime: 0,
					BGSFadeTimeMax: 0,
					VoiceFade: !1,
					VoiceFadeTime: 0,
					VoiceFadeTimeMax: 0
				},
				c = {
					String: t.getInstance().dGameSystem.dGameString.saveData(),
					varString: t.getInstance().dGameSystem.dGameString.saveJsonData(),
					Vars: t.getInstance().dGameSystem.vars.saveData()
				},
				g = {
					length: 0
				},
				u = {
					base64: "//pic"+HOST+"/orange/title/" + t.getInstance().gameInfo.guid + "_" + t.getInstance().gameVer + ".jpg!470x270",
					screenshot: ""
				},
				p = {
					items: this.saveMallAllItems()
				},
				d = UIManager.getInstance().chat.savedata(),
				m = [],
				v = {
					Header: s,
					Logic: o,
					Canvas: r,
					layerRotateInfo: m,
					Music: l,
					SystemDefine: c,
					RePlay: g,
					Thumbnail: u,
					PlayerBuyItem: p,
					chatInfo: d,
					OAF2: h
				};
			if (a) return v;
			if (!this.isCloud || i || t.getInstance().gameInfo.isPc) {
				var f = this.savekey + e;
				if (t.getInstance().gameInfo.isPc) return PCSaveData(f, JSON.stringify(v)), !0;
				try {
					localStorage.setItem(f, JSON.stringify(v))
				} catch (I) {
					return !1
				}
			} else CloudProxy.getInstance().cloudData[e] = v;
			return null
		}, t.prototype.restore = function(e, i, a) {
			var n = this;
			void 0 === i && (i = !1), void 0 === a && (a = null), e && this.clearCollectData();
			var s;
			if (a) s = "1";
			else if (null != e && e++, !this.isCloud || i || t.getInstance().gameInfo.isPc) {
				var o = this.savekey + e;
				if (t.getInstance().gameInfo.isPc) {
					var r = PCLoadData(o);
					s = "-1" == r ? "" : PCLoadData(o)
				} else s = localStorage.getItem(o)
			} else if (CloudProxy.getInstance().cloudData) {
				var h = CloudProxy.getInstance().cloudData;
				s = JSON.stringify(h[e])
			}
			if (!s) return !1;
			var l;
			if (l = a ? a : JSON.parse(s), !a) {
				if (!t.getInstance().gameInfo.isPc) {
					var c = UIManager.getInstance().orgWebFreeLayer.getPlayNum() > OrgWeb.getInstance().getReWidFlower();
					if (!UIManager.getInstance().orgWebFreeLayer.isFree && 1 == l.Header.IsFreeLimit && c) {
						var g = UIManager.getInstance().orgWebFreeLayer.getPlayNum() - OrgWeb.getInstance().getReWidFlower(),
							u = confirm("作品限免已结束，限免存档需要补送" + g + " 朵鲜花才能继续使用");
						return u ? (OrgWeb.getInstance().showPaypanel(), !1) : !1
					}
				}
				this.dGameSystem.varsEx.waitLoadExData = !0, this.iMain.storyEnd(!0)
			}
			return this.isCollectSave || (this.loadSystemDefine(l.SystemDefine), this.loadMusic(l.Music), this.loadMallAllItems(l.PlayerBuyItem)), this.loadReplay(l.Replay), a || (t.getInstance().gameInfo.isPc || t.getInstance().dGameSystem.varsEx.loadExData(!0), this.isFreeLimit && UIManager.getInstance().orgWebFreeLayer.getFreeTime()), this.isFreeLimit && UIManager.getInstance().orgWebFreeLayer.getFreeTime(), l.Canvas.chatNewInfo && UIManager.getInstance().popMsgMgr.restore(l.Canvas.chatNewInfo), this.loadChatInfo(l.hasOwnProperty("chatInfo") ? l.chatInfo : l.Canvas.chatInfo, function() {
				console.log(">>>>>>>>>>出来了"), n.loadCanvas(l.Canvas, function() {
					l.OAF2 ? n.loadOAFStr(l.OAF2, function() {
						l.Canvas.LayerMirrorInfo ? n.loadPicMirror(l.Canvas.LayerMirrorInfo, function() {
							l.Canvas.LayerRotateInfo ? n.loadPicRotationInfo(l.Canvas.LayerRotateInfo, function() {
								n.loadLogic(l.Logic, null)
							}) : n.loadLogic(l.Logic, null)
						}) : l.Canvas.LayerRotateInfo ? n.loadPicRotationInfo(l.Canvas.LayerRotateInfo, function() {
							n.loadLogic(l.Logic, null)
						}) : n.loadLogic(l.Logic, null)
					}) : l.Canvas.LayerMirrorInfo ? n.loadPicMirror(l.Canvas.LayerMirrorInfo, function() {
						l.Canvas.LayerRotateInfo ? n.loadPicRotationInfo(l.Canvas.LayerRotateInfo, function() {
							n.loadLogic(l.Logic, null)
						}) : n.loadLogic(l.Logic, null)
					}) : l.Canvas.LayerRotateInfo ? n.loadPicRotationInfo(l.Canvas.LayerRotateInfo, function() {
						n.loadLogic(l.Logic, null)
					}) : n.loadLogic(l.Logic, null), a && n.restoreCollectUI()
				})
			}), !0
		}, t.prototype.restoreCollectUI = function() {
			if (this.currentLine && this.currentLine.currentEvent && 214 != this.currentLine.currentEvent.Code && 10011 != this.currentLine.currentEvent.Argv[0]) {
				var t = new view.CollectSystemUI;
				UIManager.getInstance().showView(t, view.CollectSystemUIMediator.NAME)
			}
		}, t.prototype.deleteSnap = function(e) {
			null != e && e++;
			var i = this.savekey + e;
			t.getInstance().gameInfo.isPc ? PCSaveData(i, "-1") : window.localStorage.removeItem(i), this.saveFileData[e - 1] && (this.saveFileData[e - 1].picurl = "", this.saveFileData[e - 1].name = "", this.saveFileData[e - 1].date = "", this.saveShot(e - 1))
		}, t.prototype.saveItemInit = function() {
			if (this.saveFileData) for (var t = 0; t < this.saveFileData.length; t++) {
				var e = {
					index: t,
					picurl: "",
					name: "",
					date: -1
				};
				this.saveFileData[t] = e
			}
		}, t.prototype.saveDataInit = function() {
			if (!this.saveFileData || this.saveFileData.length <= 0) {
				var e = this.gameMainData.System.SaveData;
				this.saveFileData = new Array(e.max);
				for (var i = 0; i < this.saveFileData.length; i++) {
					var a = {
						index: i,
						picurl: "",
						name: "",
						date: -1
					};
					this.saveFileData[i] = a
				}
			} else {
				var n = t.getInstance().gameMainData.System.SaveData.max - this.saveFileData.length;
				if (n > 0) for (var i = 0; n > i; i++) this.saveFileData.push({
					index: i,
					picurl: "",
					name: "",
					date: -1
				})
			}
		}, t.prototype.getSaveSpriteData = function(e, i, a, n) {
			void 0 === i && (i = null), void 0 === a && (a = null), null != e && e++, this.saveDataInit();
			var s = this.gameMainData.System.SaveData,
				o = Math.floor(t.getInstance().gameMainData.Headr.GWidth * (s.zoom / 100)),
				r = Math.floor(t.getInstance().gameMainData.Headr.GHeight * (s.zoom / 100));
			UIManager.getInstance().gameAdvanceUILayer.visible = !1, UIManager.getInstance().gameSystemUILayer.visible = !1;
			var h = UIManager.getInstance().thumbSnap(o, r);
			if (UIManager.getInstance().gameAdvanceUILayer.visible = !0, UIManager.getInstance().gameSystemUILayer.visible = !0, null != e && e--, !(e >= this.saveFileData.length)) {
				this.isCloud ? this.saveFileData[e].picurl = "//pic"+HOST+"/orange/title/" + t.getInstance().gameInfo.guid + "_" + t.getInstance().gameVer + ".jpg!470x270" : this.saveFileData[e].picurl = h.getCanvas().toDataURL("image/jpeg", 6), this.saveFileData[e].name = t.getInstance().iMain.story.Name, this.saveFileData[e].date = (new Date).getTime();
				var l = 0;
				UIManager.getInstance().orgWebFreeLayer && UIManager.getInstance().orgWebFreeLayer.isFree && (l = 1), this.saveFileData[e].isfree = l;
				var c = UIManager.getInstance().getViewByName(view.SaveFileUIMediator.NAME);
				c && (c.listData = this.saveFileData[e]), i && i.update(this.saveFileData[e]), this.saveShot(e, n)
			}
		}, t.prototype.saveSpriteLoadComplete = function(e, i, a, n, s, o, r) {
			if (null != e && e--, !(e >= this.saveFileData.length)) {
				this.gameMainData.System.SaveData;
				if (this.isCloud) this.saveFileData[e].picurl = "//pic"+HOST+"/orange/title/" + t.getInstance().gameInfo.guid + "_" + t.getInstance().gameVer + ".jpg!470x270";
				else {
					var h = void 0;
					h = i.getDataSource("image/jpeg", 6, a, n), this.saveFileData[e].picurl = h
				}
				this.saveFileData[e].name = t.getInstance().iMain.story.Name, this.saveFileData[e].date = (new Date).getTime();
				var l = 0;
				UIManager.getInstance().orgWebFreeLayer && UIManager.getInstance().orgWebFreeLayer.isFree && (l = 1), this.saveFileData[e].isfree = l;
				var c = UIManager.getInstance().getViewByName(view.SaveFileUIMediator.NAME);
				c && (c.listData = this.saveFileData[e]), s && s.update(this.saveFileData[e]), i.destroy(), i = null, this.saveShot(e, r)
			}
		}, t.prototype.setCollectSaveData = function(t) {
			void 0 === t && (t = !1), this.isCollect = !0, this.isCollectSave = t, this.collectSaveData = this.snap(null, !1, !0)
		}, t.prototype.restoreCollectData = function() {
			this.restore(null, !1, this.collectSaveData), this.clearCollectData()
		}, t.prototype.clearCollectData = function() {
			this.isCollect = !1, this.isCollectSave = !1, this.collectSaveData = null
		}, t.prototype.getCollectDataById = function(t) {
			var e, i = OrgWeb.getInstance().getUid(),
				a = this.gameMainData.Headr.guid,
				n = "collect_" + i + "_" + a;
			return e = this.gameInfo.isPc ? PCLoadData(n) : window.localStorage.getItem(n), e && (e = JSON.parse(e), e[t]) ? e[t] : null
		}, t.prototype.saveMallAllItems = function() {
			var t = [];
			if (this.mallBuyItem.values().length > 0) for (var e in this.mallBuyItem.values()) {
				var i = {
					id: this.mallBuyItem.values()[e].id,
					count: this.mallBuyItem.values()[e].max,
					usecount: this.mallBuyItem.values()[e].count
				};
				t.push(i)
			}
			return t
		}, t.prototype.pauseCurrentLine = function() {
			this.currentLine.pause(), UIManager.getInstance().chat.pause = !0, TimeManager.getInstance().pauseTime()
		}, t.prototype.resumeCurrentLine = function() {
			this.currentLine.resume(), UIManager.getInstance().chat.pause = !1, TimeManager.getInstance().resumeTime()
		}, t.prototype.loadMallAllItems = function(t) {
			if (t) {
				var e = t.items;
				if ("string" != typeof e) for (var i = 0; i < e.length; i++)"string" == typeof e[i] && (e[i] = JSON.parse(e[i])), this.addMallBuyItem(parseInt(e[i].id), parseInt(e[i].count), parseInt(e[i].usecount))
			}
		}, t.prototype.loadLogic = function(t, e) {
			this.iMain.restore(t), e && e()
		}, t.prototype.loadCanvas = function(t, e) {
			1 == t.FloatStatus && UIManager.getInstance().sfloatLayer.showFloatUI(), this.loadPicStr(t.Layers, e), 0 != t.WeatherType && UIManager.getInstance().effectsLayer.startWeather(t.WeatherType)
		}, t.prototype.loadMusic = function(t) {
			"" != t.BGM && mgr.AudioMgr.instance.play(audio.ChannelEnum.bg, t.BGM, t.BGMV / (t.BGMV > 100 ? 100 : 1)), "" != t.BGS && mgr.AudioMgr.instance.play(audio.ChannelEnum.bfx, t.BGS, t.BGSV / (t.BGSV > 100 ? 100 : 1)), "" != t.SE && mgr.AudioMgr.instance.play(audio.ChannelEnum.fx, t.SE, t.SEV / (t.SEV > 100 ? 100 : 1)), "" != t.Voice && mgr.AudioMgr.instance.play(audio.ChannelEnum.vo, t.Voice, t.VoiceV / (t.VoiceV > 100 ? 100 : 1))
		}, t.prototype.loadSystemDefine = function(t) {
			t.varString && "" != t.varString ? this.dGameSystem.dGameString.loadJsonData(t.varString) : this.dGameSystem.dGameString.loadData(t.String.split("|")), this.dGameSystem.vars.loadData(t.Vars.split("|"))
		}, t.prototype.loadReplay = function(t) {}, t.prototype.loadThumbnail = function(t) {}, t.prototype.loadChatInfo = function(t, e) {
			UIManager.getInstance().chat.loadData(t, e)
		}, t.prototype.loadOAFStr = function(t, e) {
			if (null !== t) {
				var i = {
					arr: t,
					complete: e
				};
				this.showOaf(i)
			}
		}, t.prototype.loadPicStr = function(e, i) {
			for (var a = e.split("|"), n = [], s = 0; 50 > s; s++) a[7 * s] && "null" != a[7 * s] && n.push(t.getInstance().getFileListItemURL(a[7 * s]));
			var o = {
				arr: a,
				complete: i
			};
			n.length <= 0 ? this.showPicStr(o) : UIResouecrLoad.loadArrRes(n, this, this.showPicStr, o, !1)
		}, t.prototype.showPicStr = function(t) {
			var e = t.arr,
				i = t.complete;
			if (!e) return void(i && i());
			for (var a = 0; 50 > a; a++) {
				var n = e.shift();
				if ("null" !== n && "" != n) {
					var s = this.gamePictrue.getValue(a);
					s ? s.updateURL(n) : ((s instanceof actImage.ActionImageUI || s instanceof oaf2.ActionImageOaf) && (s.stop(), s.dispose()), s = new ImageComponent(n, a), UIManager.getInstance().backgroundLayer.imageList.add(a, s), UIManager.getInstance().backgroundLayer.sortImage(), this.setGamePic(a, s)), s.x = parseInt(e.shift()), s.y = parseInt(e.shift()), s.alpha = parseInt(e.shift()) / 255, s.visible = 1 == parseInt(e.shift()), console.log(s.x, s.y, s.alpha, s.visible), s.scaleX = parseInt(e.shift()) / 100, s.scaleY = parseInt(e.shift()) / 100
				} else e.shift(), e.shift(), e.shift(), e.shift(), e.shift(), e.shift()
			}
			i && i.call()
		}, t.prototype.showOaf = function(e) {
			var i = e.arr.OafDataList,
				a = i.length;
			this.loadOafDataNumber = 0;
			var n = e.complete;
			if (!i) return void(n && n());
			if (0 >= a) return void(n && n());
			for (var s = 0; a > s; s++) {
				var o = i.shift(),
					r = void 0;
				if (o && "null" !== o && "" != o) {
					if (r = "string" == typeof o ? JSON.parse(o) : o, r.actionType) for (var h in r.actionType)"string" == typeof r.actionType[h] && (r.actionType[h] = JSON.parse(r.actionType[h]));
					console.log(r)
				}
				if (r) {
					this.loadOafDataNumber += 1;
					var l = t.getInstance().getFileListItemURL(r.oaf2Path);
					console.log("OAF2.0：" + l), ORG.loader.load(l, OHandler.create(this, this.loadOAF2DataCompletet, [r, n]), null, "arraybuffer", 0, !0)
				}
			}
		}, t.prototype.loadOAF2DataCompletet = function(t, e, i) {
			this.loadOafDataNumber -= 1;
			var a = new org_event.ShowOAF2Event(null, null);
			a.data = {
				Argv: []
			}, a.data.Argv[13] = t.errorPic, a.showId = t.id, a.x = t.x, a.y = t.y, a.zoom_x = Math.abs(t.zoom_x), a.zoom_y = Math.abs(t.zoom_y), a.alpha = t.opacity, a.path = t.oaf2Path, a.mirror = t.mirror, a.actionData = t.actionType, a.advanceActionData = [
				[t.actionTalkName]
			], console.log(a);
			var n = new GameByte(i);
			n.endian = OByteArray.LITTLE_ENDIAN;
			var s = new data.OAF2Data(n, a),
				o = this.gamePictrue.getValue(a.showId);
			console.log(o), o && (o instanceof actImage.ActionImageUI || o instanceof oaf2.ActionImageOaf ? (o.stop(), o.dispose()) : o instanceof ImageComponent && o.dispose());
			try {
				o = new oaf2.ActionImageOaf(a, s), UIManager.getInstance().backgroundLayer.imageList.add(a.showId, o), UIManager.getInstance().backgroundLayer.sortImage()
			} catch (r) {
				var h = UIManager.getInstance().backgroundLayer.imageList.getValue(a.showId);
				h && (UIManager.getInstance().backgroundLayer.imageList.remove(a.showId), h.stop(), h.dispose(), this.gamePictrue.remove(a.showId)), o = new ImageComponent(t.errorPic, a.showId), UIManager.getInstance().backgroundLayer.imageList.add(a.showId, o), UIManager.getInstance().backgroundLayer.sortImage()
			}
			this.setGamePic(a.showId, o), this.loadOafDataNumber <= 0 && e && e()
		}, t.prototype.createOAF2Str = function() {
			for (var t = [], e = 0; 50 > e; e++) {
				var i = this.gamePictrue.getValue(e);
				if (i && i instanceof oaf2.ActionImageOaf && i.isLoadComplete) {
					i.initSelf();
					var a = new data.OAFSaveData;
					a.id = i.oaf2Event.showId;
					var n = i.selfInitScaleX + i.scaleFrame * i.frameChangeScaleX,
						s = void 0;
					s = i.selfInitX, i.isMirror && (n = Math.abs(i.selfInitScaleX) + i.scaleFrame * i.frameChangeScaleX, s -= i.oafData.maxSize.w * Math.abs(n)), console.log(i.selfInitX, i.x, s, "xxxxxx"), a.x = s + i.moveFrame * i.frameChangeX, a.y = i.selfInitY + i.moveFrame * i.frameChangeY, a.zoom_x = n, a.zoom_y = i.selfInitScaleY + i.scaleFrame * i.frameChangeScaleY, a.rotation = i.selfInitRotation + i.rotationFrame * i.frameChangeRotation, (null == a.rotation || isNaN(a.rotation)) && (a.rotation = 0), a.opacity = i.selfInitAlpha + i.moveFrame * i.frameChangeAlpha, a.oaf2Path = i.oaf2Event.path, a.mirror = i.isMirror;
					var o = i.oaf2Event.data.Argv[13],
						r = "";
					o && (o.indexOf(".jpg") > -1 || o.indexOf(".png") > -1) && (r = o), a.errorPic = r, a.actionType = i.oaf2Event.actionData, a.actionTalkName = i.oaf2Event.advanceActionData.length > 0 ? i.oaf2Event.advanceActionData[0][0] : "", t.push(a)
				}
			}
			return {
				OafDataList: t
			}
		}, t.prototype.createPicStr = function() {
			for (var t = "", e = 0; 50 > e; e++) {
				var i = "",
					a = this.gamePictrue.getValue(e);
				if (a && !(a instanceof popmsg.PopMsg) && a instanceof ImageComponent) {
					a.initSelf();
					var n = a.selfInitScaleX + a.scaleFrame * a.frameChangeScaleX,
						s = void 0;
					s = a.selfInitX, a.isMirror && (n = Math.abs(a.selfInitScaleX) + a.scaleFrame * a.frameChangeScaleX, s -= a.width * Math.abs(n)), i += a.url + "|", i += s + a.moveFrame * a.frameChangeX + "|", i += a.selfInitY + a.moveFrame * a.frameChangeY + "|", i += Math.ceil(255 * a.alpha) + "|", i += (a.visible ? "1" : "0") + "|", i += 100 * n + "|", i += 100 * a.scaleY + "|"
				} else i += "null|", i += "0|", i += "0|", i += "0|", i += "0|", i += "0|", i += "0|";
				t += i
			}
			return t
		}, Object.defineProperty(t.prototype, "autoPlay", {
			get: function() {
				return this.autoRun
			},
			set: function(e) {
				t.getInstance().dGameSystem.autoRun = e, this.autoRun = e
			},
			enumerable: !0,
			configurable: !0
		}), t.getInstance = function() {
			return null == t._instance && (t._instance = new t), t._instance
		}, t.prototype.init = function() {
			this.systemTime = new gloabelData.SystempTimeData, this.gameInfo = new data.GameInfoData, this.gameInfo.author_uname = window.author_uname ? window.author_uname : "", this.gameInfo.check_level = parseInt(window.check_level ? window.check_level : 1), this.gameGloabelValue = new data.GameGloableValue, this.fontBitmapData = null, this.sceneUI = null, this.iMain = new MainEventLine, this.dGameSystem = new data.DGameSystem, this.FontZoom = 1.2, this.CUIFromIndex = -1, this.zoomSceneF = 1, this.zoomScene = 1, this.isMobile = navigator.userAgent.indexOf("Android") > -1 || navigator.userAgent.indexOf("iPhone") > -1 || navigator.userAgent.indexOf("iPad") > -1, this.isIos = Laya.Browser.onIPhone || Laya.Browser.onIPad || Laya.Browser.onIOS, this.isAndroid = Laya.Browser.onAndriod, this.isAndroidBox = "aBox" == t.getInstance().mark, this.isSafrai = Laya.Browser.onSafari;
			var e = window.navigator.userAgent.toLowerCase(); - 1 != e.indexOf("micromessenger") && (this.isWX = !0), this.tempCooperation = "", this.isMobile && (this.tempCooperation = "org"), this.photomenuPosXOff = 20, this.safraiSaveIndex = t.getInstance().gameInfo.guid, this.initUserId = OrgWeb.getInstance().getUid()
		}, t.prototype.isIphone = function() {
			return navigator.userAgent.indexOf("iPhone") > -1 || navigator.userAgent.indexOf("iPad") > -1
		}, t.prototype.addFileListItem = function(t, e) {
			var i = e.toLowerCase().replace(/\\/g, "/");
			this.fileList.add(i, t)
		}, t.prototype.addInfoListItem = function(t, e) {
			var i = e.toLowerCase().replace(/\\/g, "/");
			this.infoList.add(i, t)
		}, t.prototype.getFileItem = function(t) {
			var e = t.toLowerCase().replace(/\\/g, "/");
			return this.fileList.getValue(e)
		}, t.prototype.hasFileItem = function(t) {
			var e;
			try {
				if (this.gameInfo.isPc) {
					e = t.replace(/\\/g, "/");
					var i = this.getFileListItemURL(e);
					return PCFileIsExist(i)
				}
				return e = t.toLowerCase().replace(/\\/g, "/"), this.fileList.containsKey(e)
			} catch (a) {
				return !1
			}
		}, t.prototype.getInfoItem = function(t) {
			var e = t.toLowerCase().replace(/\\/g, "/");
			return this.infoList.getValue(e)
		}, t.prototype.getGamePic = function(t) {
			return this.gamePictrue.getValue(t)
		}, t.prototype.cleanGamePic = function() {}, t.prototype.setGamePic = function(t, e) {
			this.gamePictrue.add(t, e)
		}, t.prototype.submitAllFlow = function() {
			if (this.allFlow > 10485760) {
				var t = {
					op: 201,
					guid: this.gameInfo.guid,
					fb: this.allFlow,
					fc: this.allFileNum,
					ref: "h5",
					token: ""
				},
					e = "//cgv2"+HOST+"/api/oweb_log.php";
				HttpManager.getInstance().sendGetRequest(e, t, function(t, e) {}, "json", null), this.allFileNum = 0, this.allFlow = 0
			}
		}, t.prototype.getFileListItemURL = function(e, i, a) {
			if (void 0 === i && (i = !1), void 0 === a && (a = !1), t.getInstance().gameInfo.isPc) return e ? ("\\" == e.charAt(0) && (e = e.substring(1)), HttpURL.LocalPath + "/" + encodeURIComponent(e)) : "";
			if (e) {
				var n = e.toLowerCase().replace(/\\/g, "/"),
					s = t.getInstance().getFileItem(n);
				if (s) {
					0 == s.isUpDone && (s.isUpDone = 1, OrgWeb.getInstance().upTrafficFileNum(s.fileSize, 1));
					var o = s.url();
					return o ? (o.indexOf(".mp3") > -1 && (OrgWeb.getInstance().getIsPC() || OrgWeb.getInstance().getIsIOS() || OrgWeb.getInstance().getIsChrome() || (o = o.replace(".mp3", ""))), o) : ""
				}
			}
			return ""
		}, t.prototype.clearMallBuyItem = function() {
			this.mallBuyItem.clean()
		}, t.prototype.clearMallButItemNumber = function() {
			var t, e = this.mallBuyItem.keys();
			for (var i in e) t = this.mallBuyItem.getValue(e[i]), t && (t.count = 0)
		}, t.prototype.addMallBuyItem = function(e, i, a) {
			var n = t.getInstance().gameMallBin.getItemDataById(e),
				s = this.getItemById(e),
				o = 0;
			s && (o = s.count), a && (o += a), this.mallBuyItem.add(e, {
				id: e,
				count: o,
				max: i
			}), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, e)), n.itemType !== GloableStaticData.MALL_GIFT_TYPE && this.getMallGift() && (this.mallBuyItem.add(GloableStaticData.MALL_GIFT_ITEM_ID, {
				id: GloableStaticData.MALL_GIFT_ITEM_ID,
				count: 1,
				max: 1
			}), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, GloableStaticData.MALL_GIFT_ITEM_ID)))
		}, t.prototype.userItem = function(t, e) {
			void 0 === e && (e = 1);
			var i = this.getItemById(t);
			i && (i.count += e)
		}, t.prototype.getFontReHeight = function(t, e) {
			void 0 === t && (t = "微软雅黑");
			var i = t + e;
			try {
				return this.fontReHeight || (this.fontReHeight = {}), this.fontReHeight[i] ? this.fontReHeight[i] : (this.span_dom || (this.span_dom = document.createElement("span"), document.body.appendChild(this.span_dom), this.span_dom.style.padding = "0px", this.span_dom.style.visibility = "hidden", this.span_dom.innerHTML = "龘"), this.span_dom.style.fontFamily = t, this.span_dom.style.fontSize = e + "px", this.fontReHeight[i] = this.span_dom.offsetHeight, this.fontReHeight[i])
			} catch (a) {
				return this.fontReHeight[i] = e, e
			}
		}, t.prototype.getFontReWidth = function(t, e) {
			void 0 === t && (t = "微软雅黑");
			var i = t + e;
			try {
				return this.fontReWidth || (this.fontReWidth = {}), this.fontReWidth[i] ? this.fontReWidth[i] : (this.span_dom || (this.span_dom = document.createElement("span"), document.body.appendChild(this.span_dom), this.span_dom.style.padding = "0px", this.span_dom.style.visibility = "hidden", this.span_dom.innerHTML = "龘"), this.span_dom.style.fontFamily = t, this.span_dom.style.fontSize = e + "px", this.fontReWidth[i] = this.span_dom.offsetWidth, this.fontReWidth[i])
			} catch (a) {
				return this.fontReWidth[i] = e, e
			}
		}, t.prototype.getFontDiffy = function(t, e) {
			void 0 === t && (t = "微软雅黑"), void 0 === e && (e = 14);
			var i = t + e;
			try {
				if (this.fontDiffyObj || (this.fontDiffyObj = {}), this.fontDiffyObj[i]) return this.fontDiffyObj[i];
				var a = this.getFontReHeight(t, e);
				return this.fontDiffyObj[i] = (a - e) / 4, this.fontDiffyObj[i]
			} catch (n) {
				return this.fontDiffyObj[i] = 0, 0
			}
		}, t.prototype.getItemById = function(t) {
			var e = this.mallBuyItem.getValue(parseInt(t + ""));
			return e ? e : null
		}, t.prototype.getMallGift = function() {
			var e = t.getInstance().gameMallBin.getItemDataById(GloableStaticData.MALL_GIFT_ITEM_ID);
			if (2 == e.itemStatus) return !1;
			if (!e || e.itemType != GloableStaticData.MALL_GIFT_TYPE) return !1;
			var i = e.itemAttribute.split(",");
			for (var a in i) {
				var n = t.getInstance().gameMallBin.getItemDataById(i[a]);
				if (2 === n.itemStatus) return !1;
				var s = this.getItemById(n.itemId);
				if (!s) return !1
			}
			return !0
		}, t.prototype.getMallHpItem = function() {
			var t;
			if (0 !== this.gameMallBin.dataVer) for (var e = 0; e < this.gameMallBin.itemHP.length; e++) {
				var i = this.gameMallBin.itemHP[e];
				if (i.hp) {
					if (t = this.gameMallBin.getItemDataById(i.id), 2 == t.itemStatus) continue;
					break
				}
			} else t = this.gameMallBin.getItemDataById(GloableStaticData.MALL_GIFT_ITEM_ID);
			return t ? 2 == t.itemStatus ? null : t : null
		}, t.prototype.hasHpItem = function() {
			var t, e = this.mallBuyItem.keys(),
				i = null;
			for (var a in e) if (t = this.mallBuyItem.getValue(e[a]), this.itemisHp(t.id)) {
				i = {
					id: t.id,
					hp: !0
				};
				break
			}
			return i
		}, t.prototype.itemisHp = function(t) {
			if (0 !== this.gameMallBin.dataVer) for (var e = 0; e < this.gameMallBin.itemHP.length; e++) {
				var i = this.gameMallBin.itemHP[e];
				if (i.id == t && i.hp) return !0
			}
			return t == GloableStaticData.MALL_GIFT_ITEM_ID
		}, t.prototype.pauseAll = function() {
			UIManager.getInstance().pauseTween(), TimeManager.getInstance().pauseTime()
		}, t.prototype.resumeAll = function() {
			UIManager.getInstance().resumeTween(), TimeManager.getInstance().resumeTime()
		}, t.prototype.clearStory = function(e) {
			!OrgWeb.getInstance().getIsPC() && this.gameInfo.game_bin_path && (e.story && e.story.dispose(), t.getInstance().gameMainData.delStory(e.storyId))
		}, t.prototype.getBtnUrlByIndex = function(e) {
			var i = t.getInstance().gameMainData.System.Buttons[e],
				a = "",
				n = "",
				s = [];
			return i && (a = "Graphics/Button/" + i.image1, n = "Graphics/Button/" + i.image2), i.image1 && s.push(this.getFileListItemURL(a)), i.image2 && s.push(this.getFileListItemURL(n)), s
		}, t.prototype.cleanCachUrlByArray = function(t) {
			for (var e in t) ORG.loader.clearRes(t[e])
		}, t.prototype.isScreenHorizontal = function() {
			return t.getInstance().gameInfo.gGameWidth > t.getInstance().gameInfo.gGameHeight
		}, t.prototype.getPicMirror = function() {
			for (var t = {}, e = 0; 50 > e; e++) {
				var i = this.gamePictrue.getValue(e);
				i && i.isMirror && (t[e + ""] = i.isMirror)
			}
			return t
		}, t.prototype.getPicRotation = function() {
			for (var t = [], e = 0; 50 > e; e++) {
				var i = this.gamePictrue.getValue(e),
					a = {
						haveRotate: "0"
					};
				i && 0 !== i.selfInitRotation && (a = {
					haveRotate: "0",
					totalFrams: "0",
					currentFrams: "0",
					RotateX: "0",
					RotateY: "0",
					type: "0",
					totalAngle: "0",
					currentAngle: "0"
				}, i instanceof oaf2.ActionImageOaf ? (a.haveRotate = "1", a.totalFrams = i.totalRotationFrame, a.currentFrams = i.rotationFrame, 0 !== i.rotationPivotType ? a.RotateX = i.mirror ? i.oafData.maxSize.w - i.showActionView.pivotX : i.showActionView.pivotX : a.RotateX = i.showActionView.pivotX, a.RotateY = i.showActionView.pivotY, a.type = i.rotationPivotType, a.totalAngle = (i.isMirror ? -i.selfInitRotation : i.selfInitRotation) + i.rotationFrame * (i.isMirror ? -i.frameChangeRotation : i.frameChangeRotation), a.currentAngle = i.selfInitRotation) : i instanceof actImage.ActionImageUI ? (a.haveRotate = "1", a.totalFrams = i.totalRotationFrame, a.currentFrams = i.rotationFrame, 0 !== i.rotationPivotType ? a.RotateX = i.mirror ? i.bg.width - i.showSp.pivotX : i.showSp.pivotX : a.RotateX = i.showSp.pivotX, a.RotateY = i.showSp.pivotY, a.type = i.rotationPivotType, a.totalAngle = (i.isMirror ? -i.selfInitRotation : i.selfInitRotation) + i.rotationFrame * (i.isMirror ? -i.frameChangeRotation : i.frameChangeRotation), a.currentAngle = i.selfInitRotation) : i instanceof popmsg.PopMsg ? (a.haveRotate = "1", a.totalFrams = i.totalRotationFrame, a.currentFrams = i.rotationFrame, 0 !== i.rotationPivotType ? a.RotateX = i.mirror ? i.image.width - i.image.pivotX : i.image.pivotX : a.RotateX = i.image.pivotX, a.RotateY = i.image.pivotY, a.type = i.rotationPivotType, a.totalAngle = (i.isMirror ? -i.selfInitRotation : i.selfInitRotation) + i.rotationFrame * (i.isMirror ? -i.frameChangeRotation : i.frameChangeRotation), a.currentAngle = i.selfInitRotation) : i instanceof ImageComponent && (a.haveRotate = "1", a.totalFrams = i.totalRotationFrame, a.currentFrams = i.rotationFrame, 0 !== i.rotationPivotType ? a.RotateX = i.mirror ? i.image.width - i.image.pivotX : i.image.pivotX : a.RotateX = i.image.pivotX, a.RotateY = i.image.pivotY, a.type = i.rotationPivotType, a.totalAngle = (i.isMirror ? -i.selfInitRotation : i.selfInitRotation) + i.rotationFrame * (i.isMirror ? -i.frameChangeRotation : i.frameChangeRotation), a.currentAngle = i.selfInitRotation)), t.push(a)
			}
			return t
		}, t.prototype.loadPicMirror = function(t, e) {
			for (var i = t, a = 0; 50 > a; a++) if (void 0 !== i[a + ""]) {
				var n = this.getGamePic(a);
				if (n && (n.mirror = i[a + ""], n.mirror)) {
					if (n instanceof actImage.ActionImageUI) {
						n.setMirror();
						continue
					}
					if (n instanceof oaf2.ActionImageOaf) {
						n.setMirror();
						continue
					}
					if (n instanceof popmsg.PopMsg) {
						!n.isMirror && n.scaleX >= 0 && (n.mirror = n.isMirror = i[a + ""], n.scaleX = -parseFloat(n.scaleX + ""), n.x += n.width * Math.abs(n.scaleX));
						continue
					}
					if (n instanceof ImageComponent) {
						n.setMirror();
						continue
					}
				}
			}
			e && e()
		}, t.prototype.loadPicRotationInfo = function(t, e) {
			for (var i = t, a = 0; a < i.length; a++) {
				var n = i[a];
				if ("string" == typeof i[a] && (n = JSON.parse(i[a])), "0" !== n.haveRotate && 0 !== n.haveRotate) {
					var s = this.getGamePic(a);
					s && (s instanceof oaf2.ActionImageOaf ? (s.rotationPivotType = n.type, s.oafData ? 0 !== s.rotationPivotType ? (s.showActionView.pivotX = s.mirror ? s.oafData.maxSize.w - n.RotateX : n.RotateX, s.showActionView.pivotY = n.RotateY) : (s.showActionView.pivotX = s.oafData.maxSize.w / 2, s.showActionView.pivotY = s.oafData.maxSize.h / 2) : (s.loadFilePx = n.RotateX, s.loadFilePy = n.RotateY), s.showActionView.rotation = s.mirror ? -n.totalAngle : n.totalAngle, s.showActionView.x = s.showActionView.pivotX, s.showActionView.y = s.showActionView.pivotY, s.initSelf()) : s instanceof actImage.ActionImageUI ? (s.rotationPivotType = n.type, s.bg ? 0 !== s.rotationPivotType ? (s.showSp.pivotX = s.mirror ? s.bg.width - n.RotateX : n.RotateX, s.showSp.pivotY = n.RotateY) : (s.showSp.pivotX = s.bg.width / 2, s.showSp.pivotY = s.bg.height / 2) : (s.loadFilePx = n.RotateX, s.loadFilePy = n.RotateY), s.showSp.rotation = s.mirror ? -n.totalAngle : n.totalAngle, s.showSp.x = s.showSp.pivotX, s.showSp.y = s.showSp.pivotY, s.initSelf()) : s instanceof popmsg.PopMsg ? (s.rotationPivotType = n.type, 0 !== s.rotationPivotType ? (s.image.pivotX = s.mirror ? s.image.width - n.RotateX : n.RotateX, s.image.pivotY = n.RotateY) : (s.image.pivotX = s.image.width / 2, s.image.pivotY = s.image.height / 2), s.image.rotation = s.mirror ? -n.totalAngle : n.totalAngle, s.image.x = s.image.pivotX, s.image.y = s.image.pivotY, s.initSelf()) : s instanceof ImageComponent && (s.rotationPivotType = n.type, 0 !== s.rotationPivotType ? (s.image.pivotX = s.mirror ? s.image.width - n.RotateX : n.RotateX, s.image.pivotY = n.RotateY) : (s.image.pivotX = s.image.width / 2, s.image.pivotY = s.image.height / 2), s.image.rotation = s.mirror ? -n.totalAngle : n.totalAngle, s.image.x = s.image.pivotX, s.image.y = s.image.pivotY, s.initSelf()))
				}
			}
			e && e()
		}, t._instance = null, t.runNum = 0, t
	}(),
	audio;
!
function(t) {
	var e = function() {
			function t(t) {
				this.sysVol = .8, this.oriVol = 1, this.left = 0, this.curUrl = "", this.channelId = t
			}
			return t.prototype.mute = function() {
				this.audioIns.muted = !0
			}, t.prototype.unmute = function() {
				this.audioIns.muted = !1
			}, t.prototype.play = function(t, e, i) {
				this.repeat = 0 == e, this.left > 0 && (this.left = 0, clearInterval(this.timer))
			}, t.prototype.stop = function() {
				this.left >= 0 && (this.left = 0, clearInterval(this.timer)), this.audioIns.stop(), this.curUrl = ""
			}, t.prototype.fadeOut = function(t) {
				0 >= t && this.stop(), this.sum = this.left = 1e3 * t, clearInterval(this.timer), this.timer = setInterval(this.update.bind(this), 17, [17])
			}, t.prototype.update = function(t) {
				if (void 0 === t && (t = 17), this.left > 0) if (this.left -= t, this.left <= 0) this.stop(), this.curUrl = "", clearInterval(this.timer);
				else {
					var e = parseFloat((this.left / this.sum).toFixed(2));
					this.audioIns.volume = this.oriVol * this.sysVol > .1 ? e * (this.oriVol * this.sysVol - .1) : 0
				}
			}, t.prototype.pause = function() {
				this.audioIns.pause()
			}, t.prototype.resume = function() {
				this.audioIns.resume()
			}, Object.defineProperty(t.prototype, "paused", {
				get: function() {
					return this.audioIns.paused
				},
				enumerable: !0,
				configurable: !0
			}), t.prototype.volume = function(t) {
				this.left = 0, this.oriVol = t, this.audioIns.volume = t * this.sysVol
			}, t.prototype.sysVolume = function(t) {
				this.sysVol = t, this.audioIns.volume = this.oriVol * t
			}, t.prototype.complete = function(t) {
				this.appendCall ? this.appendCall[1].call(this.appendCall[0]) : this.repeat ? this.audioIns.play() : this.curUrl = ""
			}, t.prototype.appendFun = function(t, e) {
				void 0 === t && (t = null), void 0 === e && (e = null), t == e ? this.appendCall = null : this.appendCall = [t, e]
			}, t
		}();
	t.AbAudio = e
}(audio || (audio = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), audio;
!
function(t) {
	var e = function(e) {
			function i() {
				return null !== e && e.apply(this, arguments) || this
			}
			return __extends(i, e), i.prototype.mute = function() {}, i.prototype.unmute = function() {}, i.prototype.play = function(e, i, a) {
				return this.oriVol = a / 100, -1 == e.indexOf("http://") && -1 == e.indexOf("audio/") && (e = "audio/" + e), this.channelId != t.ChannelEnum.bg && this.channelId != t.ChannelEnum.bfx || this.curUrl != e ? (this.curUrl = e, -1 == e.indexOf("http://") && (e = GloableData.getInstance().getFileListItemURL(e)), e.indexOf(".mp3") < 0 && (e += ".mp3"), void(this.curUrl != e && (this.curUrl = e, window.org_box.ControlAudio(0, this.channelId, 0, e), window.org_box.ControlAudio(1, this.channelId, Math.round(this.oriVol * this.sysVol * 100), e)))) : this.resume()
			}, i.prototype.stop = function() {
				window.org_box.ControlAudio(0, this.channelId, 0, this.curUrl)
			}, i.prototype.update = function(t) {}, i.prototype.fadeOut = function(t) {
				window.org_box.ControlAudio(0, this.channelId, 60 * t, this.curUrl)
			}, i.prototype.pause = function() {
				window.org_box.ControlAudio(0, this.channelId, 0, this.curUrl)
			}, i.prototype.resume = function() {
				window.org_box.ControlAudio(1, this.channelId, Math.round(this.oriVol * this.sysVol * 100), this.curUrl)
			}, i.prototype.volume = function(t) {
				this.oriVol = t, window.org_box.ControlAudio(1, this.channelId, Math.round(t * this.sysVol * 100), this.curUrl)
			}, i.prototype.sysVolume = function(t) {
				this.sysVol = t, window.org_box.ControlAudio(1, this.channelId, Math.round(t * this.sysVol * 100), this.curUrl)
			}, Object.defineProperty(i.prototype, "paused", {
				get: function() {
					return !window.org_box.PlayIngAudio(this.channelId)
				},
				enumerable: !0,
				configurable: !0
			}), i
		}(t.AbAudio);
	t.BoxAudio = e
}(audio || (audio = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), audio;
!
function(t) {
	var e = function(e) {
			function i(t) {
				var i = e.call(this, t) || this;
				return laya.media.SoundManager.autoStopMusic = !1, i
			}
			return __extends(i, e), i.prototype.play = function(i, a, n) {
				void 0 === a && (a = 0), void 0 === n && (n = 1), e.prototype.play.call(this, i, a, n), this.curUrl = i = GloableData.getInstance().getFileListItemURL("audio/" + i), this.audioIns = laya.media.SoundManager.playSound(i, 1, this.channelId == t.ChannelEnum.bg ? laya.utils.Handler.create(this, this.complete, [this]) : null, laya.media.webaudio.WebAudioSound)
			}, i.prototype.stop = function() {
				return this.audioIns ? e.prototype.stop.call(this) : void 0
			}, i.prototype.fadeOut = function(t) {
				return this.audioIns ? e.prototype.fadeOut.call(this, t) : void 0
			}, i.prototype.resume = function() {
				return this.audioIns ? e.prototype.resume.call(this) : void 0
			}, i.prototype.volume = function(t) {
				return this.audioIns ? e.prototype.volume.call(this, t) : void 0
			}, i.prototype.sysVolume = function(t) {
				return this.audioIns ? e.prototype.sysVolume.call(this, t) : void 0
			}, i
		}(t.AbAudio);
	t.LayaAudio = e
}(audio || (audio = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), audio;
!
function(t) {
	var e = function(e) {
			function i(t) {
				var i = e.call(this, t) || this;
				return i.audioIns = new Audio, i
			}
			return __extends(i, e), i.prototype.play = function(i, a, n) {
				return e.prototype.play.call(this, i, a, n), -1 == i.indexOf("http://") && -1 == i.indexOf("audio/") && (i = "audio/" + i), this.channelId != t.ChannelEnum.bg && this.channelId != t.ChannelEnum.bfx || this.curUrl != i ? (this.curUrl = i, -1 == i.indexOf("http://") && (i = GloableData.getInstance().getFileListItemURL(i)), i.indexOf(".mp3") < 0 && OrgWeb.getInstance().getIsIOS() && (i += ".mp3"), this.audioIns.src = i, this.audioIns.load(i), this.audioIns.autoplay = !0, this.oriVol = n / 100, this.audioIns.volume = this.oriVol * this.sysVol, this.audioIns.play(), void(this.channelId != t.ChannelEnum.bg && this.channelId != t.ChannelEnum.bfx || (this.audioIns.onended = this.complete.bind(this)))) : this.resume()
			}, i.prototype.stop = function() {
				this.audioIns.pause(), this.curUrl = ""
			}, i.prototype.resume = function() {
				this.curUrl && "" != this.curUrl && this.audioIns.play()
			}, Object.defineProperty(i.prototype, "paused", {
				get: function() {
					return this.audioIns.paused
				},
				enumerable: !0,
				configurable: !0
			}), i
		}(t.AbAudio);
	t.TagAudio = e
}(audio || (audio = {}));
var mgr;
!
function(t) {
	var e = function() {
			function t() {}
			return t.prototype.exe = function(t) {}, t.prototype.update = function(t) {}, t
		}();
	t.Mgr = e
}(mgr || (mgr = {}));
var mgr;
!
function(t) {
	var e = function() {
			function t() {
				this.channels = [], this.channelFac = new audio.ChannelGenerator, EventCenter.addEventListener(GameEventConstant.STAGE_BLUR, this, this.blurHandler), EventCenter.addEventListener(GameEventConstant.STAGE_ONFOCUS, this, this.focusHandler), OrgWeb.getInstance().getIsPC() || OrgWeb.getInstance().getIsAbox() || ($(window).one("touchstart", this.initChannel.bind(this)), $(window).one("touchend", this.initChannel.bind(this)))
			}
			return Object.defineProperty(t, "instance", {
				get: function() {
					return this._instance || (this._instance = new t)
				},
				enumerable: !0,
				configurable: !0
			}), t.prototype.init = function() {
				if (4 == this.channels.length) return this.channels;
				for (var t = 0; 4 > t; t++) this.channels[t] = this.channelFac.getChannel(t);
				return window.channels = this.channels, this.channels
			}, t.prototype.exe = function(t) {
				switch (t.Code) {
				case 501:
					this.play(audio.ChannelEnum.bg, t.Argv[0], parseInt(t.Argv[1]));
					break;
				case 502:
					this.play(audio.ChannelEnum.fx, t.Argv[0], parseInt(t.Argv[1]));
					break;
				case 503:
					this.play(audio.ChannelEnum.vo, t.Argv[0], parseInt(t.Argv[1]));
					break;
				case 504:
					this.play(audio.ChannelEnum.bfx, t.Argv[0], parseInt(t.Argv[1]));
					break;
				case 505:
					this.fadeOut(audio.ChannelEnum.bg, parseInt(t.Argv[0]));
					break;
				case 508:
					this.fadeOut(audio.ChannelEnum.bfx, parseInt(t.Argv[0]));
					break;
				case 506:
					this.stop(audio.ChannelEnum.fx);
					break;
				case 507:
					this.stop(audio.ChannelEnum.vo)
				}
			}, t.prototype.mute = function() {
				for (var t = 0, e = this.channels; t < e.length; t++) {
					var i = e[t];
					i.mute()
				}
			}, t.prototype.unmute = function() {
				for (var t = 0, e = this.channels; t < e.length; t++) {
					var i = e[t];
					i.unmute()
				}
			}, t.prototype.update = function(t) {
				for (var e = 0, i = this.channels; e < i.length; e++) {
					var a = i[e];
					a.update(t)
				}
			}, t.prototype.fadeOut = function(t, e) {
				this.channels[t].fadeOut(e)
			}, t.prototype.play = function(t, e, i) {
				if (e) switch (t) {
				case audio.ChannelEnum.bg:
					this.channels[t].play(e, 0, i);
					break;
				case audio.ChannelEnum.fx:
					this.channels[t].play(e, 1, i);
					break;
				case audio.ChannelEnum.vo:
					this.channels[t].play(e, 1, i);
					break;
				case audio.ChannelEnum.bfx:
					this.channels[t].play(e, 0, i)
				}
			}, t.prototype.stop = function(t) {
				if (void 0 === t && (t = -1), 0 > t) for (var e = 0; 4 > e; e++) this.channels[e].stop();
				else this.channels[t] && this.channels[t].stop()
			}, t.prototype.pause = function(t) {
				this.channels[t] && this.channels[t].pause()
			}, t.prototype.resume = function(t) {
				this.channels[t] && this.channels[t].resume()
			}, t.prototype.sysVolume = function(t, e) {
				this.channels[t] && this.channels[t].sysVolume(e)
			}, t.prototype.getSysVolume = function(t) {
				return this.channels[t].sysVol
			}, t.prototype.paused = function(t) {
				return this.channels[t].paused
			}, t.prototype.volume = function(t, e) {
				this.channels[t] && this.channels[t].volume(e)
			}, t.prototype.focusHandler = function() {
				this.resume(audio.ChannelEnum.bg), this.resume(audio.ChannelEnum.bfx)
			}, t.prototype.blurHandler = function() {
				this.pause(audio.ChannelEnum.bg), this.pause(audio.ChannelEnum.bfx)
			}, t.prototype.appendFun = function(t, e) {
				this.channels[audio.ChannelEnum.bg].appendFun(t, e)
			}, t.prototype.initChannel = function(t) {
				void 0 === t && (t = null);
				for (var e = this.channels, i = 0, a = e; i < a.length; i++) {
					var n = a[i];
					n.curUrl || (n.audioIns.src = ""), n.audioIns.play()
				}
			}, t
		}();
	t.AudioMgr = e
}(mgr || (mgr = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), data;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = null !== t && t.apply(this, arguments) || this;
				return e.watcher = {}, e
			}
			return __extends(e, t), e.prototype.bind = function(t, e, i) {
				var a;
				(a = this.watcher[t]) ? -1 == this.exist(a, e, i) && a.push([e, i]) : this.watcher[t] = [
					[e, i]
				]
			}, e.prototype.unbind = function(t, e, i) {
				void 0 === e && (e = null), void 0 === i && (i = null);
				var a;
				null == e && null == i ? delete this.watcher[t] : null == i ? this.deleteCaller(this.watcher[t], e) : (a = this.exist(this.watcher[t], e, i)) > -1 && this.watcher[t].splice(a, 1)
			}, e.prototype.get = function(e) {
				var i, a = e.split(".");
				return this.indexOf(i = a.shift()) > -1 ? a.length ? this.readObj(t.prototype.get.call(this, i), a) : t.prototype.get.call(this, i) : null
			}, e.prototype.set = function(e, i) {
				var a, n, s = e.split(".");
				this.indexOf(a = s.shift()) > -1 ? s.length ? this.saveObj(t.prototype.get.call(this, a), s, i) : t.prototype.set.call(this, a, i) : s.length ? t.prototype.set.call(this, a, n = {}) || this.saveObj(n, s, i) : t.prototype.set.call(this, a, i);
				var o;
				if (o = this.watcher[e]) for (var r = 0, h = o; r < h.length; r++) {
					var l = h[r];
					l[1].call(l[0], i)
				}
			}, e.prototype.remove = function(e) {
				this.unbind(e);
				var i = e.split("."),
					a = i.shift();
				return i.length ? this.delObj(t.prototype.get.call(this, a), i) : t.prototype.remove.call(this, [a])
			}, e.prototype.readObj = function(t, e) {
				var i = e.shift();
				return e.length ? this.readObj(t[i], e) : t[i]
			}, e.prototype.saveObj = function(t, e, i) {
				var a = e.shift();
				return e.length ? t.hasOwnProperty(a) ? this.saveObj(t[a], e, i) : this.saveObj(t[a] = {}, e, i) : t[a] = i
			}, e.prototype.delObj = function(t, e) {
				var i = e.shift();
				return e.length ? this.delObj(t[i], e) : delete t[i]
			}, e.prototype.deleteCaller = function(t, e) {
				for (var i = t.length; i--; i > 0) t[i][0] == e && t.splice(i, 1)
			}, e.prototype.exist = function(t, e, i) {
				for (var a = t.length; a--; a > 0) if (t[a][0] == e && t[a][1] == i) return a;
				return -1
			}, e
		}(laya.utils.Dictionary);
	t.BindableDictionary = e
}(data || (data = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), mgr;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.bd = new data.BindableDictionary, e
			}
			return __extends(e, t), Object.defineProperty(e, "instance", {
				get: function() {
					return this._instance || (this._instance = new e)
				},
				enumerable: !0,
				configurable: !0
			}), e
		}(t.Mgr);
	t.DataMgr = e
}(mgr || (mgr = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.index = -1, a.code = 306, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				console.log(this.data);
				var t = parseInt(this.data.Argv[0]),
					e = parseInt(this.data.Argv[1]),
					i = 1 == parseInt(this.data.Argv[2]);
				this.setCollectEventData(t, e), "ANDROID" == OrgWeb.getInstance().getOrgPlat() ? this.cSystem = new view.CollectSystemUI(!1, function() {
					var e = this.cSystem.data.getItemByUnID(t);
					e && i && e.type == data.DCollectItemType.CG ? (this.index = t, UIManager.getInstance().showView(new view.CGShareUI(!0, this, e.item), view.CGShareUIMediator.NAME)) : this.finish()
				}.bind(this)) : this.finish()
			}, e.prototype.setCollectEventData = function(t, e) {
				var i = OrgWeb.getInstance().getUid(),
					a = GloableData.getInstance().gameMainData.Headr.guid,
					n = "collect_" + i + "_" + a,
					s = this.getCollectData(n);
				s[t] || (s[t] = []), s[t].indexOf(e) > -1 || s[t].push(e), this.setLocalData(n, s)
			}, e.prototype.setLocalData = function(t, e) {
				e && (GloableData.getInstance().gameInfo.isPc ? PCSaveData(t, JSON.stringify(e)) : window.localStorage.setItem(t, JSON.stringify(e)))
			}, e.prototype.getCollectData = function(t) {
				var e;
				return e = GloableData.getInstance().gameInfo.isPc ? PCLoadData(t) : window.localStorage.getItem(t), e ? e = JSON.parse(e) : {}
			}, e
		}(OrgEventBase);
	t.AddCollectEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.type = -1, a.isFinish = !1, a.isEx = !1, a.bwaitSysTime = !1, a.valelSysCont = 0, a.getServerValueBCallBack = null, a.code = 216, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				if (9 == this.type) this.getServerValueB(function() {
					this.isFinish = !0, this.data.Argv[6] && this.data.Argv[6] > -1 && (this.isFinish = !1, this.DataToVarAgain(), this.getServerValueB(function() {
						this.isFinish = !0
					}))
				});
				else {
					if (this.data.Argv[6] > -1) {
						if (this.dataToVar(), this.valelSysCont = 1, this.valueA = this.getLocalValueB(), 5 == this.type && this.bwaitSysTime) return;
						this.DataToVarAgain(), this.valelSysCont = 2;
						var t = this.getLocalValueB();
						if (this.valueB = this.getValueA(t), 5 == this.type && this.bwaitSysTime) return;
						this.dataToVar()
					} else this.dataToVar(), this.valueB = this.getLocalValueB();
					if (5 == this.type && this.bwaitSysTime) return;
					this.valelSysCont = 0, this.userindex ? this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1) : this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(this.id), this.valueA = this.getValueA(this.valueB), this.userindex ? this.isEx ? GloableData.getInstance().dGameSystem.varsEx.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : this.isEx ? GloableData.getInstance().dGameSystem.varsEx.setVar(this.id, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(this.id, this.valueA), this.isFinish = !0
				}
				this.finish()
			}, e.prototype.DataToVarAgain = function() {
				this.data.Argv[0].indexOf("EX") > -1 ? (this.isEx = !0, this.id = parseInt(this.data.Argv[0].split("|")[1])) : (this.isEx = !1, this.id = parseInt(this.data.Argv[0])), this.op = parseInt(this.data.Argv[6]), this.op += 1, this.type = parseInt(this.data.Argv[7]), 2 == this.type ? (this.randA = parseInt(this.data.Argv[8].split("|")[0]), this.randB = parseInt(this.data.Argv[8].split("|")[1])) : 9 == this.type ? (this.task_id = parseInt(this.data.Argv[8].split("|")[0]), this.point_type = parseInt(this.data.Argv[8].split("|")[1])) : this.idOrValue = parseInt(this.data.Argv[8]), this.userindex = this.data.Argv.length >= 6 ? "1" == this.data.Argv[5] : !1
			}, e.prototype.getLocalValueB = function() {
				if (0 == this.type) this.valueB = this.idOrValue;
				else if (1 == this.type) this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(this.idOrValue);
				else if (2 == this.type) {
					var t = this.randB - this.randA;
					this.valueB = this.randA + Math.ceil(Math.random() * t)
				} else if (3 == this.type) this.valueB = GloableData.getInstance().dGameSystem.varsEx.getVar(this.idOrValue);
				else if (4 == this.type) this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.idOrValue) - 1);
				else if (5 == this.type) {
					var e = this.data.Argv[4],
						i = !1;
					if (-1 != e.indexOf("|&;")) {
						var a = e.split("|&;");
						a.length > 1 && "ON" == a[1] && (i = "ON" == a[1], GloableData.getInstance().systemTime.sysTimestramp = OrgWeb.getInstance().getServerTime())
					}
					if (i) if (-1 == GloableData.getInstance().systemTime.sysTimestramp) {
						this.bwaitSysTime = !0;
						var n = {
							action: "get_server_time"
						};
						AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GAME_SYSTEM_TIME, this.getSystemSuc, this, this.getSystemErr, this, n)
					} else this.SysTimeDate = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp), this.valueB = this.changeSystemVal(this.idOrValue, this.SysTimeDate);
					else {
						if (-1 != OrgWeb.getInstance().getServerTime()) GloableData.getInstance().systemTime.sysTimestramp = OrgWeb.getInstance().getServerTime();
						else {
							var s = Math.floor((new Date).getTime() / 1e3);
							GloableData.getInstance().systemTime.sysTimestramp = s
						}
						var o = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp);
						switch (this.idOrValue) {
						case 0:
							this.valueB = o.getFullYear();
							break;
						case 1:
							this.valueB = o.getMonth() + 1;
							break;
						case 2:
							this.valueB = o.getDate();
							break;
						case 3:
							0 == o.getDay() ? this.valueB = "7" : this.valueB = o.getDay();
							break;
						case 4:
							this.valueB = o.getHours();
							break;
						case 5:
							this.valueB = o.getMinutes();
							break;
						case 6:
							this.valueB = o.getSeconds();
							break;
						case 7:
							this.valueB = o.getTime() / 1e3
						}
					}
				} else if (6 == this.type) this.valueB = GloableData.getInstance().flowerHua;
				else if (7 == this.type) for (var r = this.data.Argv[3], h = this.getMaxMinNumArr(r), l = 0; l < h.length; l++) this.valueB < parseInt(h[l]) && (this.valueB = parseInt(h[l]));
				else if (8 == this.type) for (var r = this.data.Argv[3], c = this.getMaxMinNumArr(r), l = 0; l < c.length; l++) this.valueB > parseInt(c[l]) && (this.valueB = parseInt(c[l]));
				else if (10 == this.type) switch (this.idOrValue) {
				case 0:
					this.valueB = (new Date).getFullYear();
					break;
				case 1:
					this.valueB = (new Date).getMonth() + 1;
					break;
				case 2:
					this.valueB = (new Date).getDate();
					break;
				case 3:
					0 == (new Date).getDay() ? this.valueB = "7" : this.valueB = (new Date).getDay();
					break;
				case 4:
					this.valueB = (new Date).getHours();
					break;
				case 5:
					this.valueB = (new Date).getMinutes();
					break;
				case 6:
					this.valueB = (new Date).getSeconds();
					break;
				case 7:
					this.valueB = Math.floor(Date.now() / 1e3)
				}
				return this.valueB
			}, e.prototype.getValueA = function(t) {
				switch (this.valueA = parseInt(this.valueA), this.op) {
				case 0:
					this.valueA = t;
					break;
				case 1:
					this.valueA += t;
					break;
				case 2:
					this.valueA -= t;
					break;
				case 3:
					this.valueA *= t;
					break;
				case 4:
					this.valueA = Math.floor(this.valueA / t);
					break;
				case 5:
					this.valueA = Math.floor(this.valueA % t)
				}
				return this.valueA
			}, e.prototype.isFun = function(t) {
				switch (this.op) {
				case 0:
					this.valueA = this.valueB;
					break;
				case 1:
					this.valueA += this.valueB;
					break;
				case 2:
					this.valueA -= this.valueB;
					break;
				case 3:
					this.valueA *= this.valueB;
					break;
				case 4:
					this.valueA = Math.floor(this.valueA / this.valueB);
					break;
				case 5:
					this.valueA = Math.floor(this.valueA % this.valueB)
				}
				this.userindex ? GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(this.id, this.valueA), t && t()
			}, e.prototype.getServerValueB = function(t) {
				this.getServerValueBCallBack = t, AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GAME_TASK_CONTENT + "?gindex=" + GloableData.getInstance().gameInfo.gIndex + "&task_id=" + this.task_id, this.rcvTaskData, this, this.rcvError, this)
			}, e.prototype.rcvTaskData = function(t) {
				if (1 == t.status) {
					var e = t.data.task_info;
					0 == this.point_type ? this.valueB = parseInt(e.point_over) : 1 == this.point_type && (this.valueB = parseInt(e.point_max)), this.isFun(this.getServerValueBCallBack)
				} else this.isFun(this.getServerValueBCallBack)
			}, e.prototype.rcvError = function() {
				this.isFun(this.getServerValueBCallBack)
			}, e.prototype.getMaxMinNumArr = function(t) {
				for (var e = t.split(","), i = [], a = 0; a < e.length; a++) i.push(this.getMaxMinValue(e[a]));
				return i
			}, e.prototype.getMaxMinValue = function(t) {
				var e = 0,
					i = t.split("|");
				switch (i[0]) {
				case "n":
					e = parseInt(i[1]);
					break;
				case "v":
					e = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(i[1]));
					break;
				case "x":
					e = GloableData.getInstance().dGameSystem.varsEx.getVar(parseInt(i[1]));
					break;
				case "s":
					e = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(parseInt(i[1])) - 1)
				}
				return e
			}, e.prototype.dataToVar = function() {
				this.data.Argv[0].indexOf("EX") > -1 ? (this.isEx = !0, this.id = parseInt(this.data.Argv[0].split("|")[1])) : (this.isEx = !1, this.id = parseInt(this.data.Argv[0])), this.op = parseInt(this.data.Argv[1]), this.type = parseInt(this.data.Argv[2]), 2 == this.type ? (this.randA = parseInt(this.data.Argv[3].split("|")[0]), this.randB = parseInt(this.data.Argv[3].split("|")[1])) : 9 == this.type ? (this.task_id = parseInt(this.data.Argv[3].split("|")[0]), this.point_type = parseInt(this.data.Argv[3].split("|")[1])) : this.idOrValue = parseInt(this.data.Argv[3]), this.userindex = this.data.Argv.length >= 6 ? "1" == this.data.Argv[5] : !1
			}, e.prototype.getSystemSuc = function(t) {
				1 == parseInt(t.status) ? (GloableData.getInstance().systemTime.sysTimestramp = parseInt(t.data.timestramp), window.commonPlayer && (window.commonPlayer.timesTrampSys = parseInt(t.data.timestramp)), this.SysTimeDate = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp), this.valueB = this.changeSystemVal(this.idOrValue, this.SysTimeDate)) : this.valueB = -1, this.goOnSystemEven()
			}, e.prototype.getSystemErr = function(t) {
				this.valueB = -1, this.goOnSystemEven()
			}, e.prototype.changeSystemVal = function(t, e) {
				var i;
				switch (t) {
				case 0:
					i = e.getFullYear();
					break;
				case 1:
					i = e.getMonth() + 1;
					break;
				case 2:
					i = e.getDate();
					break;
				case 3:
					i = 0 == e.getDay() ? "7" : e.getDay();
					break;
				case 4:
					i = e.getHours();
					break;
				case 5:
					i = e.getMinutes();
					break;
				case 6:
					i = e.getSeconds();
					break;
				case 7:
					i = GloableData.getInstance().systemTime.sysTimestramp
				}
				return i
			}, e.prototype.goOnSystemEven = function() {
				if (5 == this.type && this.bwaitSysTime) {
					if (this.bwaitSysTime = !1, this.data.Argv[6] > -1) {
						if (1 == this.valelSysCont) {
							this.valueA = this.changeSystemVal(this.idOrValue, this.SysTimeDate), this.DataToVarAgain(), this.valelSysCont = 2;
							var t = this.getLocalValueB();
							if (this.valueB = this.getValueA(t), 5 == this.type && this.bwaitSysTime) return;
							this.dataToVar()
						} else if (2 == this.valelSysCont) {
							var t = this.changeSystemVal(this.idOrValue, this.SysTimeDate);
							this.valueB = this.getValueA(t)
						}
						this.dataToVar()
					}
					this.userindex ? this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1) : this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(this.id), this.valueA = this.getValueA(this.valueB), this.userindex ? this.isEx ? GloableData.getInstance().dGameSystem.varsEx.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : this.isEx ? GloableData.getInstance().dGameSystem.varsEx.setVar(this.id, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(this.id, this.valueA), this.isFinish = !0, this.finish()
				}
			}, e
		}(OrgEventBase);
	t.AdvDataEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 103, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				GloableData.getInstance().dGameSystem.autoRun = "1" === this.data.Argv[0], GloableData.getInstance().autoRun = GloableData.getInstance().dGameSystem.autoRun, this.finish()
			}, e
		}(OrgEventBase);
	t.AutoPlayEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 151, a.eventLine = i, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				UIManager.getInstance().gameSystemUILayer.setMenuVisible(!0), GloableData.getInstance().CUIFromIndex = -1
			}, e.prototype.finish = function() {
				TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_RUNNUMBER_ID);
				var t = new GameTimeData;
				t.delay = GloableStaticData.GAME_RUN_TIME, t.type = 2, t.repeatCount = 1, t.thisArg = this, t.callBack = this.eventEnd, t.isJump = !1, t.id = GloableStaticData.TIME_RUNNUMBER_ID, TimeManager.getInstance().addTime(t)
			}, e.prototype.eventEnd = function() {
				t.prototype.finish.call(this)
			}, e
		}(OrgEventBase);
	t.BackGameEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 207, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.mainLine.endInter()
			}, e
		}(OrgEventBase);
	t.BackTitleEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 307, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				GloableData.getInstance().dGameSystem.other.addBGM(parseInt(this.data.Argv[0])), GloableData.getInstance().dGameSystem.other.saveBGMData(), this.finish()
			}, e
		}(OrgEventBase);
	t.BGMAddEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 212, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				var t = this.mainLine.indentStack[this.mainLine.indentStack.length - 1];
				t instanceof BranchInfo && (t.finishIndex != this.mainLine.currentLinks[0] && console.log("(212)botton selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[0] - 1)), this.finish()
			}, e
		}(OrgEventBase);
	t.ButtonDifChooseEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 205, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.mainLine.auxFetchBranchinfo();
				var t = new GameTimeData;
				t.delay = GloableStaticData.GAME_RUN_TIME, t.type = 2, t.repeatCount = 1, t.thisArg = this.mainLine, t.callBack = this.mainLine.eventFinish, t.isJump = !1, TimeManager.getInstance().addTime(t)
			}, e
		}(OrgEventBase);
	t.ButtonDifEndEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.jumList = [], a.endJump = 0, a.buttons = [], a.code = 204, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				for (var t = this.mainLine.pos; t < this.mainLine.story.events.length; t++) {
					var e = this.mainLine.story.events[t];
					if (212 != e.Code || e.Indent != this.data.Indent + 1) {
						if (205 == e.Code && e.Indent == this.data.Indent) {
							this.endJump = t + 1;
							break
						}
					} else this.jumList.push(t + 1)
				}
				this.mainLine.indentStack.push(new BranchInfo(this.endJump, this.jumList));
				for (var t = 0; t < this.data.Argv.length; t++) {
					var i = this.data.Argv[t].split(",");
					this.buttons[t] = new data.DButtonIndex(i)
				}
			}, e.prototype.finish = function(e) {
				if (void 0 === e && (e = -1), -1 !== e && this.mainLine.indentStack.length > 0) {
					var i = this.mainLine.indentStack[this.mainLine.indentStack.length - 1];
					i instanceof BranchInfo && (i.jump(e) != this.mainLine.currentLinks[e] && console.log("(204)pic selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[e])), t.prototype.finish.call(this)
				}
			}, e
		}(OrgEventBase);
	t.ButtonDifEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.index = 0, a.isSuiFinish = !1, a.code = 214, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				if (this.index = parseInt(this.data.Argv[0]), this.index < 10001) {
					var t = GloableData.getInstance().gameMainData.System.Cuis[this.index];
					if (0 == t.loadEvent.length && 0 == t.afterEvent.length && 0 == t.controls.length) return void this.finish()
				}
				UIManager.getInstance().closeAllView(!1), UIManager.getInstance().cancleLongDown(), this.mainLine.pause(), GloableData.getInstance().currentLine.pause(), UIManager.getInstance().isSCUIShow = !0, GloableData.getInstance().CUIFromIndex = this.index, UIManager.getInstance().showViewByIndex(this.index, this.mainLine)
			}, e
		}(OrgEventBase);
	t.CallMenuEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 251, a.init(), a
			}
			return __extends(e, t), e.prototype.loadComplete = function(t) {
				this.mainLine.subStory = new MainEventLine, this.mainLine.subStory.parentLine = GloableData.getInstance().currentLine, this.mainLine.subStory.jumpStory(t.ID)
			}, e.prototype.init = function() {
				this.mainLine.pause(), setTimeout(this.eventEnd.bind(this), GloableStaticData.GAME_RUN_TIME)
			}, e.prototype.eventEnd = function() {
				this.mainLine.pinCurrentChapter(), this.mainLine.subStory = new MainEventLine, this.mainLine.subStory.parentLine = this.mainLine, this.mainLine.subStory.jumpStory(parseInt(this.data.Argv[0]))
			}, e
		}(OrgEventBase);
	t.CallSubStoryEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.index = -1, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.index = parseInt(this.data.Argv[0]), GloableData.getInstance().dGameSystem.other.addCG(parseInt(this.data.Argv[0])), GloableData.getInstance().dGameSystem.other.saveCGData(), "ANDROID" == OrgWeb.getInstance().getOrgPlat() ? UIManager.getInstance().showView(new view.CGShareUI(!0, this), view.CGShareUIMediator.NAME) : this.finish()
			}, e
		}(OrgEventBase);
	t.CGAddEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 220, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				1 == mgr.DataMgr.instance.bd.get("popMsg.ver") ? UIManager.getInstance().createChatUI(this) : mgr.DataMgr.instance.bd.set("popMsg.mod", this)
			}, e
		}(OrgEventBase);
	t.ChatPatternEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 221, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				1 == mgr.DataMgr.instance.bd.get("popMsg.ver") && this.data.Argv[0] ? UIManager.getInstance().chat.getChatList(this.data.Argv[0] - 1).addChatItem(this) : mgr.DataMgr.instance.bd.set("popMsg.cur", this)
			}, e
		}(OrgEventBase);
	t.ChatSentEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = e.Code, a.type = parseInt(a.data.Argv[0]), a
			}
			return __extends(e, t), e
		}(OrgEventBase);
	t.CWeatherEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.isShow = !1, a.code = 112, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				var t = parseInt(this.data.Argv[0]);
				0 == t ? this.isShow = !1 : 1 == t && (this.isShow = !0)
			}, e.prototype.finish = function() {
				TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_RUNNUMBER_ID);
				var t = new GameTimeData;
				t.delay = GloableStaticData.GAME_RUN_TIME, t.type = 2, t.repeatCount = 1, t.thisArg = this, t.callBack = this.eventEnd, t.isJump = !1, t.id = GloableStaticData.TIME_RUNNUMBER_ID, TimeManager.getInstance().addTime(t)
			}, e.prototype.eventEnd = function() {
				t.prototype.finish.call(this)
			}, e
		}(OrgEventBase);
	t.DFloatButtonEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 401, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.id = parseInt(this.data.Argv[0])
			}, e
		}(OrgEventBase);
	t.DisposePicEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 109, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				UIManager.getInstance().hideAllTextMessage(), this.finish()
			}, e
		}(OrgEventBase);
	t.DisposeTextEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.isFinish = !1, a.code = 213, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.dataToVar();
				if (this.userindex ? this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1) : this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(this.id), 0 == this.type) this.valueB = this.idOrValue;
				else if (1 == this.type) this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(this.idOrValue);
				else if (2 == this.type) {
					var t = Math.min(this.randB, this.randA),
						e = Math.max(this.randB, this.randA),
						i = e - t;
					this.valueB = Math.floor(t + Math.random() * (i + 1))
				} else if (3 == this.type) this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(this.idOrValue);
				else if (4 == this.type) this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.idOrValue) - 1);
				else if (5 == this.type) {
					var a = Math.floor((new Date).getTime() / 1e3),
						n = new Date(GloableData.getInstance().systemTime.sysTimestramp + 1e3 * (a - GloableData.getInstance().systemTime.nowTimestramp));
					switch (this.idOrValue) {
					case 0:
						this.valueB = n.getFullYear();
						break;
					case 1:
						this.valueB = n.getMonth() + 1;
						break;
					case 2:
						this.valueB = n.getDate();
						break;
					case 3:
						0 == n.getDay() ? this.valueB = "7" : this.valueB = n.getDay();
						break;
					case 4:
						this.valueB = n.getHours();
						break;
					case 5:
						this.valueB = n.getMinutes();
						break;
					case 6:
						this.valueB = n.getSeconds();
						break;
					case 7:
						this.valueB = GloableData.getInstance().systemTime.sysTimestramp
					}
				} else if (6 == this.type) this.valueB = GloableData.getInstance().flowerHua;
				else if (9 == this.type);
				else if (10 == this.type) switch (this.idOrValue) {
				case 0:
					this.valueB = (new Date).getFullYear();
					break;
				case 1:
					this.valueB = (new Date).getMonth() + 1;
					break;
				case 2:
					this.valueB = (new Date).getDate();
					break;
				case 3:
					0 == (new Date).getDay() ? this.valueB = 7 : this.valueB = (new Date).getDay();
					break;
				case 4:
					this.valueB = (new Date).getHours();
					break;
				case 5:
					this.valueB = (new Date).getMinutes();
					break;
				case 6:
					this.valueB = (new Date).getSeconds();
					break;
				case 7:
					this.valueB = Date.now() / 1e3
				}
				switch (this.op) {
				case 0:
					this.valueA = this.valueB;
					break;
				case 1:
					this.valueA += this.valueB;
					break;
				case 2:
					this.valueA -= this.valueB;
					break;
				case 3:
					this.valueA *= this.valueB;
					break;
				case 4:
					this.valueA /= this.valueB;
					break;
				case 5:
					this.valueA %= this.valueB
				}
				this.userindex ? (GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA), GloableData.getInstance().dGameSystem.vars.saveExData()) : (GloableData.getInstance().dGameSystem.vars.setVar(this.id, this.valueA), GloableData.getInstance().dGameSystem.vars.saveExData()), this.finish()
			}, e.prototype.isFun = function() {
				switch (this.op) {
				case 0:
					this.valueA = this.valueB;
					break;
				case 1:
					this.valueA += this.valueB;
					break;
				case 2:
					this.valueA -= this.valueB;
					break;
				case 3:
					this.valueA *= this.valueB;
					break;
				case 4:
					this.valueA = Math.floor(this.valueA / this.valueB);
					break;
				case 5:
					this.valueA = Math.floor(this.valueA % this.valueB)
				}
				this.userindex ? (GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA), GloableData.getInstance().dGameSystem.vars.saveExData()) : (GloableData.getInstance().dGameSystem.vars.setVar(this.id, this.valueA), GloableData.getInstance().dGameSystem.vars.saveExData()), this.isFinish = !0
			}, e.prototype.dataToVar = function() {
				this.id = parseInt(this.data.Argv[0]), this.op = parseInt(this.data.Argv[1]), this.type = parseInt(this.data.Argv[2]), 2 == this.type ? (this.randA = parseInt(this.data.Argv[3].split("|")[0]), this.randB = parseInt(this.data.Argv[3].split("|")[1])) : 9 == this.type ? (this.task_id = parseInt(this.data.Argv[3].split("|")[0]), this.point_type = parseInt(this.data.Argv[3].split("|")[1])) : this.idOrValue = parseInt(this.data.Argv[3]), this.userindex = this.data.Argv.length >= 6 ? "1" == this.data.Argv[5] : !1
			}, e.prototype.rcvTaskData = function(t) {
				if (1 == t.status) {
					var e = t.data.task_info;
					0 == this.point_type ? this.valueB = parseInt(e.point_over) : 1 == this.point_type && (this.valueB = parseInt(e.point_max)), this.isFun()
				} else this.isFun()
			}, e.prototype.rcvError = function() {
				this.isFun()
			}, e
		}(OrgEventBase);
	t.ExVarEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 505, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.time = 60 * parseInt(this.data.Argv[0])
			}, e
		}(OrgEventBase);
	t.FadeBGMEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.time = 0, a.code = 508, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.time = 60 * parseInt(this.data.Argv[0])
			}, e
		}(OrgEventBase);
	t.FadeBGSEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.time = 0, a.code = 303, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.color = new data.OColor(this.data.Argv[0]), this.time = Math.floor(this.data.Argv[1])
			}, e
		}(OrgEventBase);
	t.FlashEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(i, a) {
				var n = t.call(this, i, a) || this;
				return n.msgIndex = 0, n.lock_id = 0, n.hasHPItem = !1, n.tips = "成功扣除 XX 点体力，继续剧情", e.LOCKEVENT = n, n.code = 252, "undefined" != typeof window.pmode ? n.pmode = parseInt(window.pmode) : n.pmode = 0, n.init(), n
			}
			return __extends(e, t), e.prototype.init = function() {
				if (this.lock_id = this.data.Argv[0], this.hpNumber = parseInt(this.data.Argv[1]), this.tips = this.tips.replace("XX", this.hpNumber), GloableData.getInstance().gameInfo.isPc) this.pcHpLock();
				else {
					if (GloableData.getInstance().isFreeLimit) return this.hasHPItem = !0, void this.HPLockSuc("限免期间，体力全免！");
					if (GloableData.getInstance().isLightDay || GloableData.getInstance().isLightVIP) return this.hasHPItem = !0, void this.HPLockSuc("轻短篇期间，体力全免！");
					if (OrgWeb.getInstance().getLoginStatus()) {
						if (GloableData.getInstance().hasFileItem("data/mall.bin")) {
							var t = GloableData.getInstance().hasHpItem();
							if (t) {
								var e = GloableData.getInstance().gameMallBin.getItemDataById(t.id);
								return this.hasHPItem = !0, void this.HPLockSuc("已购买" + e.itemName + "，体力全免！")
							}
						}
						GloableData.getInstance().gameInfo.guid + "_" + OrgWeb.getInstance().getUid() + "_" + GloableStaticData.FIRET_HPLOCK_VIEW;
						this.getPlayerHpNumber()
					} else this.HPLoginHint()
				}
			}, e.prototype.getPlayerHpNumber = function() {
				HPLockProxy.getInstance().getUserHp(this.rcvTotalHPShowView.bind(this), this)
			}, e.prototype.rcvTotalHPShowView = function(t) {
				var e = new HPLockMessageView(this.hpNumber, t, this.startSendRequest.bind(this), this.mainLine);
				UIManager.getInstance().showView(e, "HPLockMessageView")
			}, e.prototype.pcHpLock = function() {
				this.HPLockSuc(this.tips)
			}, e.prototype.startSendRequest = function() {
				if (GloableData.getInstance().hasFileItem("data/mall.bin")) {
					var t = GloableData.getInstance().getMallHpItem();
					if (t) {
						var e = GloableData.getInstance().getItemById(t.itemId);
						if (e) return this.hasHPItem = !0, void this.HPLockSuc("已购买" + t.itemName + "，体力全免！")
					}
				}
				var i = {
					lock_id: this.lock_id,
					token: OrgWeb.getInstance().getABoxToken()
				},
					a = HttpURL.Ajax_Url.GET_SYS_TIME;
				AjaxManager.getInstance().sendGetAjaxJSONP(a, this.HPLckSYStimeSuc, this, this.HPLckSYStimeErr, this, i)
			}, e.prototype.HPLckSYStimeSuc = function(t) {
				var e, i;
				if (OrgWeb.getInstance().getIsClient() ? i = t : (e = window.base91.decode(t), i = JSON.parse(e)), console.log("HPLckSYStimeSuc==", i), 1 == parseInt(i.status)) {
					this.HpNowSysTime = parseInt(i.data.time);
					var a = {
						lock_id: this.lock_id,
						gindex: GloableData.getInstance().gameInfo.gIndex,
						pmode: this.pmode,
						token: OrgWeb.getInstance().getABoxToken()
					},
						n = HttpURL.Ajax_Url.GET_PH_STATUS;
					AjaxManager.getInstance().sendGetAjaxJSONP(n, this.getHPLockSuc, this, this.getHPLockErr, this, a)
				} else this.HPLckSYStimeErr()
			}, e.prototype.HPLckSYStimeErr = function() {
				this.showErrorMessageView()
			}, e.prototype.getHPLockSuc = function(t) {
				var e, i;
				if (OrgWeb.getInstance().getIsClient() ? i = t : (e = window.base91.decode(t), i = JSON.parse(e)), 1 == parseInt(i.status)) {
					var a = i.data.expire_time;
					a >= this.HpNowSysTime ? this.HPLockSuc(this.tips) : this.showErrorMessageView()
				} else 10200 == parseInt(i.status) ? this.HPLockBelock(i.msg) : this.showErrorMessageView()
			}, e.prototype.showErrorMessageView = function() {
				var t = new HPLockErrorMessageView(this, GloableStaticData.REP_USE_HP);
				UIManager.getInstance().showView(t, "HPLockErrorMessageView")
			}, e.prototype.getHPLockErr = function() {
				this.showErrorMessageView()
			}, e.prototype.HPLockSuc = function(t) {
				if (this.hasHPItem) {
					var e = new HPLockTip(t);
					return UIManager.getInstance().popMessageLayer.addChild(e), void this.endFinish()
				}
				GloableData.getInstance().gameInfo.isFirstHp && (GloableData.getInstance().gameInfo.isFirstHp = !1);
				var i = GloableData.getInstance().gameInfo.guid + "_" + OrgWeb.getInstance().getUid() + "_" + GloableStaticData.FIRET_HPLOCK_VIEW;
				"first" !== utils.getCookie(i) && utils.addCookie(i, "first");
				var a = new HPLockTip(t);
				UIManager.getInstance().popMessageLayer.addChild(a), this.endFinish()
			}, e.prototype.HPLockBelock = function(t) {
				console.log("出剧情锁=========", t), this.mainLine.isPause = !0;
				var e = new HPLockView(this.mainLine);
				UIManager.getInstance().showView(e, "HPLockView")
			}, e.prototype.HPLockErr = function(t) {
				this.hintBox || (this.hintBox = new FailMessageUI), this.hintBox.click(this, this.refreshEvent), this.hintBox.update(t + ""), UIManager.getInstance().popMessageLayer.addChild(this.hintBox)
			}, e.prototype.HPLoginHint = function() {
				this.hintBox || (this.hintBox = new FailMessageUI), this.hintBox.click(this, this.getLogin), this.hintBox.update("遇到体力锁，请先登录~", "登录"), UIManager.getInstance().popMessageLayer.addChild(this.hintBox)
			}, e.prototype.getLogin = function(t, e) {
				e && e instanceof OEvent && e.stopPropagation(), OrgWeb.getInstance().isLoginStatus()
			}, e.prototype.goError = function() {
				this.refreshEvent()
			}, e.prototype.endFinish = function() {
				this.hintBox && (this.hintBox.closeView(), this.hintBox = null), e.LOCKEVENT = null, this.finish()
			}, e.prototype.refreshEvent = function(t, e) {
				e && e instanceof OEvent && e.stopPropagation(), this.hintBox && (this.hintBox.closeView(), this.hintBox = null), this.mainLine.runEvent()
			}, e.prototype.ErrorHint = function(t, e) {
				void 0 === e && (e = null), this.hintBox || (this.hintBox = new FailMessageUI), this.hintBox.click(this, e), this.hintBox.update("" + t), UIManager.getInstance().popMessageLayer.addChild(this.hintBox)
			}, e
		}(OrgEventBase);
	t.HPLockEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 211, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.mainLine.auxFetchIfinfo().finishJumpIndex != this.mainLine.currentLinks[0] && console.log('(211)condition "else" selection conflict !'), this.mainLine.jumpToIndex(this.mainLine.currentLinks[0]), this.finish()
			}, e
		}(OrgEventBase);
	t.IfChoiceEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 201, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.mainLine.auxFetchIfinfo(), this.finish()
			}, e
		}(OrgEventBase);
	t.IFEndEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(e) {
			function a(t, i) {
				var a = e.call(this, t, i) || this;
				return a.bPayWait = !1, a.jumList = [], a.endJump = 0, a.valueA = -1, a.valueB = -1, a.cmpRet = !1, a.code = 200, a.init(), a
			}
			return __extends(a, e), a.prototype.init = function() {
				for (var e = this.mainLine.pos; e < this.mainLine.story.events.length; e++) {
					var i = this.mainLine.story.events[e];
					if (211 != i.Code || i.Indent != this.data.Indent) {
						if (201 == i.Code && i.Indent == this.data.Indent) {
							this.endJump = e + 1;
							break
						}
					} else this.jumList.push(e + 1)
				}
				this.difObj = t.TextDifUtil.dataToVar(this.data.Argv), this.typeFun()
			}, a.prototype.typeFun = function() {
				if (this.difObj.type <= 1) switch (this.valueA = 0 == this.difObj.type ? GloableData.getInstance().dGameSystem.vars.getVar(this.difObj.id) : GloableData.getInstance().dGameSystem.varsEx.getVar(this.difObj.id), 0 == this.difObj.otherVar ? this.valueB = this.difObj.idOrValue : 1 == this.difObj.otherVar ? this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(this.difObj.idOrValue) : 2 == this.difObj.otherVar && (this.valueB = GloableData.getInstance().dGameSystem.varsEx.getVar(this.difObj.idOrValue)), this.difObj.op) {
				case 0:
					this.cmpRet = this.valueA == this.valueB;
					break;
				case 1:
					this.cmpRet = this.valueA >= this.valueB;
					break;
				case 2:
					this.cmpRet = this.valueA <= this.valueB;
					break;
				case 3:
					this.cmpRet = this.valueA > this.valueB;
					break;
				case 4:
					this.cmpRet = this.valueA < this.valueB;
					break;
				case 5:
					this.cmpRet = this.valueA != this.valueB;
					break;
				default:
					this.cmpRet = !1
				} else if (2 == this.difObj.type) if (this.difObj.isRect) this.cmpRet = utils.pointInRect({
					x: UIManager.getInstance().onTouchX,
					y: UIManager.getInstance().onTouchY
				}, this.difObj.rect) && (0 == this.difObj.endType ? UIManager.getInstance().onTouchMove : UIManager.getInstance().onTouchClick), this.cmpRet && 0 == this.difObj.endType;
				else {
					var t = 1 == this.data.Argv[3];
					if (t) {
						this.difObj.isClick = !0, this.difObj.isMove = !1;
						var e = GloableData.getInstance().getGamePic(this.difObj.picId);
						if (e && null != e.getBitmap()) {
							var a = GloableData.getInstance().getGamePic(this.difObj.picId),
								n = a.getRect(),
								s = !0;
							a.pixelHitTest && (s = a.pointHasColor(UIManager.getInstance().onTouchX, UIManager.getInstance().onTouchY)), this.cmpRet = utils.pointInRect({
								x: UIManager.getInstance().onTouchX,
								y: UIManager.getInstance().onTouchY
							}, n) && (this.difObj.isClick ? UIManager.getInstance().onTouchClick : UIManager.getInstance().onTouchMove) && s, this.cmpRet && this.difObj.isClick
						}
					} else {
						this.difObj.isMove = !0, this.difObj.isClick = !1;
						var a = GloableData.getInstance().getGamePic(this.difObj.picId);
						if (a && null != a.getBitmap()) {
							var n = a.getRect(),
								s = !0;
							a.pixelHitTest && (s = a.pointHasColor(UIManager.getInstance().onTouchX, UIManager.getInstance().onTouchY)), this.cmpRet = utils.pointInRect({
								x: UIManager.getInstance().onTouchX,
								y: UIManager.getInstance().onTouchY
							}, n) && (this.difObj.isMove ? UIManager.getInstance().onTouchMove : UIManager.getInstance().onTouchClick) && s
						}
						this.cmpRet && this.difObj.isClick
					}
				} else {
					if (3 == this.difObj.type) return void("aBox" != GloableData.getInstance().mark ? (this.valueA = GloableData.getInstance().flowerHua, this.isFun()) : (this.valueA = GloableData.getInstance().flowerHua, this.isFun()));
					if (4 == this.difObj.type) GloableData.getInstance().gameInfo.isPc ? this.cmpRet = 1 == this.difObj.idOrValue : "WEB" == OrgWeb.getInstance().getOrgPlat() ? this.cmpRet = 2 == this.difObj.idOrValue : this.cmpRet = 5 == this.difObj.idOrValue;
					else if (5 == this.difObj.type) this.bPayWait = !0, this.cmpRet = !0, GloableData.getInstance().dGameSystem.varsEx.setVar(this.difObj.id, -1);
					else if (6 == this.difObj.type);
					else if (8 == this.difObj.type) if (GloableData.getInstance().gameInfo.isPc) {
						var o = GloableData.getInstance().getItemById(this.difObj.id);
						o && (this.cmpRet = o.max > 0)
					} else {
						if (!(GloableData.getInstance().isFreeLimit || GloableData.getInstance().isLightDay || GloableData.getInstance().isLightVIP)) {
							var r = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
							return UIManager.getInstance().maskSprite.update("通信中..."), void AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GET_MALL_ITEM_INFO_BY_ID, this.rcvItemInfoJSONP, this, null, this, r.sendObj(this.difObj.id))
						}
						this.cmpRet = !0
					}
				}
				3 != this.difObj.type && 6 != this.difObj.type && 5 != this.difObj.type && (this.cmpRet ? this.mainLine.indentStack.push(new i(this.endJump)) : this.difObj.haveElse ? (this.mainLine.indentStack.push(new i(this.endJump)), this.jumList[0] != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])) : (this.endJump != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])), this.finish())
			}, a.prototype.finish = function(t) {
				void 0 === t && (t = !1), this.eventEnd()
			}, a.prototype.eventEnd = function() {
				e.prototype.finish.call(this)
			}, a.prototype.rcvItemInfoJSONP = function(t) {
				this.rcvItemInfo({
					data: t
				}), console.log(JSON.stringify(t))
			}, a.prototype.rcvItemInfo = function(t) {
				if (1 == t.data.status) {
					var e = t.data.data[0];
					e && e.using_num > 0 ? this.cmpRet = !0 : this.cmpRet = !1
				}
				UIManager.getInstance().maskSprite.hide(), 8 == this.difObj.type && (this.cmpRet ? this.mainLine.indentStack.push(new i(this.endJump)) : this.difObj.haveElse ? (this.mainLine.indentStack.push(new i(this.endJump)), this.jumList[0] != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])) : (this.endJump != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1]))), this.finish()
			}, a.prototype.rcvIsFun = function() {
				return this.cmpRet ? (console.log("没有Else"), this.mainLine.indentStack.push(new i(this.endJump))) : this.difObj.haveElse ? (console.log("有Else"), this.mainLine.indentStack.push(new i(this.endJump)), this.jumList[0] != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])) : (this.endJump != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])), this.finish(), !1
			}, a.prototype.isFun = function() {
				switch (0 == this.difObj.otherVar ? this.valueB = this.difObj.idOrValue : 1 == this.difObj.otherVar ? this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(this.difObj.idOrValue) : 2 == this.difObj.otherVar && (this.valueB = GloableData.getInstance().dGameSystem.varsEx.getVar(this.difObj.idOrValue)), this.difObj.op) {
				case 0:
					this.cmpRet = this.valueA == this.valueB;
					break;
				case 1:
					this.cmpRet = this.valueA >= this.valueB;
					break;
				case 2:
					this.cmpRet = this.valueA <= this.valueB;
					break;
				case 3:
					this.cmpRet = this.valueA > this.valueB;
					break;
				case 4:
					this.cmpRet = this.valueA < this.valueB;
					break;
				case 5:
					this.cmpRet = this.valueA != this.valueB;
					break;
				default:
					this.cmpRet = !1
				}
				this.cmpRet ? this.mainLine.indentStack.push(new i(this.endJump)) : this.difObj.haveElse ? (this.mainLine.indentStack.push(new i(this.endJump)), this.jumList[0] != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])) : (this.endJump != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])), this.finish()
			}, a
		}(OrgEventBase);
	t.IFEvent = e;
	var i = function() {
			function t(t) {
				this.finishJumpIndex = t
			}
			return t.prototype.saveData = function(t) {
				var e = "0|";
				return e += this.finishJumpIndex + "|"
			}, t.prototype.loadData = function(t, e) {
				var i = t[e];
				return e += 1, this.finishJumpIndex = parseInt(i), e
			}, t
		}();
	t.IFInfo = i
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(e) {
			function i(t, i) {
				var a = e.call(this, t, i) || this;
				return a.taskArr = [], a.asArr = [], a.cmpRet = !1, a.isFinish = !1, a.endJump = 0, a.jumList = [], a.isOr = !1, a.code = 217, a.init(), a
			}
			return __extends(i, e), i.prototype.init = function() {
				for (var e = this.mainLine.pos; e < this.mainLine.story.events.length; e++) {
					var i = this.mainLine.story.events[e];
					if (211 != i.Code || i.Indent != this.data.Indent) {
						if (201 == i.Code && i.Indent == this.data.Indent) {
							this.endJump = e + 1;
							break
						}
					} else this.jumList.push(e + 1)
				}
				for (var a = parseInt(this.data.Argv[3]), n = 0 == parseInt(this.data.Argv[0]), s = 0; a > 0;) {
					var o = this.data.Argv[4 + s].split("&"),
						r = new data.DEvent1("", "", o);
					if (n) {
						if (t.TextDifUtil.checkIIF(r, this.taskArr)) {
							this.cmpRet = !0;
							break
						}
					} else {
						if (!t.TextDifUtil.checkIIF(r, this.taskArr)) {
							this.cmpRet = !1;
							break
						}
						this.cmpRet = !0
					}
					s++, a--
				}
				var h = "1" == this.data.Argv[1];
				this.cmpRet ? this.mainLine.indentStack.push(new t.IFInfo(this.endJump)) : h ? (this.mainLine.indentStack.push(new t.IFInfo(this.endJump)), this.jumList[0] != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])) : (this.endJump != this.mainLine.currentLinks[1] && console.log("(200)condition selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[1])), this.finish()
			}, i.prototype.finish = function() {
				this.eventEnd()
			}, i.prototype.eventEnd = function() {
				e.prototype.finish.call(this)
			}, i
		}(OrgEventBase);
	t.IFExEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 206, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.jumpId = parseInt(this.data.Argv[0]), this.mainLine.pause(), "1" === this.data.Argv[1] ? (UIManager.getInstance().backgroundLayer.fadeOut(), UIManager.getInstance().closeAllView(), UIManager.getInstance().textLifeLineLayer.visible = !1) : (UIManager.getInstance().textLifeLineLayer.visible = !1, UIManager.getInstance().closeAllView()), UIManager.getInstance().chat.chatList && UIManager.getInstance().chat.closeVOice(!1), UIManager.getInstance().popMsgMgr && (UIManager.getInstance().popMsgMgr.renew(), mgr.AudioMgr.instance.stop(audio.ChannelEnum.vo)), TimeManager.getInstance().removeAll(), this.mainLine.killSelfEventLine(), GloableData.getInstance().clearStory(this.mainLine), this.timeout = setTimeout(this.eventEnd.bind(this), GloableStaticData.GAME_RUN_TIME)
			}, e.prototype.eventEnd = function() {
				clearTimeout(this.timeout), this.mainLine.jumpStory(this.jumpId)
			}, e
		}(OrgEventBase);
	t.JumpStoryEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 219, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				0 == parseInt(this.data.Argv[0]) ? UIManager.getInstance().isShowTextStyle = 0 : 1 == parseInt(this.data.Argv[1]) ? UIManager.getInstance().isShowTextStyle = 1 : UIManager.getInstance().isShowTextStyle = 0
			}, e
		}(OrgEventBase);
	t.LifeLineEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 203, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				var t = this.mainLine.indentStack[this.mainLine.indentStack.length - 1].loopindex;
				t != this.mainLine.currentLinks[0] && console.log("(203)repeat start conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[0]), this.eventEnd()
			}, e.prototype.eventEnd = function() {
				this.finish()
			}, e
		}(OrgEventBase);
	t.LoopAboveStartEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 209, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				for (var t = null, e = parseInt(this.data.Argv[0]), i = 0; e > i; i++) {
					var a = this.mainLine.auxFetchLoopinfo();
					if (!a) break;
					t = a
				}
				t && (t.breakindex != this.mainLine.currentLinks[0] && console.log("(209)repeat breaking conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[0])), this.finish()
			}, e
		}(OrgEventBase);
	t.LoopBreakEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 202, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				for (var t = this.mainLine.pos; t < this.mainLine.story.events.length; t++) {
					var e = this.mainLine.story.events[t];
					if (203 == e.Code && e.Indent == this.data.Indent) {
						this.mainLine.indentStack.push(new i(this.mainLine.pos + 1, t + 1));
						break
					}
				}
				this.finish()
			}, e
		}(OrgEventBase);
	t.LoopEvent = e;
	var i = function() {
			function t(t, e) {
				this.loopindex = 0, this.breakindex = 0, this.loopindex = t, this.breakindex = e
			}
			return t.prototype.saveData = function(t) {
				if (GloableData.getInstance().dGameSystem.rwFile.isCloud) {
					var e = "1|";
					return e += this.loopindex + "|", e += this.breakindex + "|"
				}
				var i = "1|";
				t.push(i);
				var a = this.loopindex + "|";
				t.push(a);
				var n = this.breakindex + "|";
				t.push(n)
			}, t.prototype.loadData = function(t, e) {
				var i = t[e];
				e += 1, this.loopindex = parseInt(i);
				var a = t[e];
				return e += 1, this.breakindex = parseInt(a), e
			}, t
		}();
	t.LoopInfo = i
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.endx = 0, a.endy = 0, a.frames = 0, a.mirror = !1, a.endAlpha = 0, a.zoom_x = 0, a.zoom_y = 0, a.picID = -1, a.code = 402, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.picID = parseInt(this.data.Argv[0]), this.frames = parseInt(this.data.Argv[9]), this.frames = this.frames, this.frames = Math.floor(this.frames), this.frames <= 1 && (this.frames = 0), "1" == this.data.Argv[2] ? (this.endx = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[3])), this.endy = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[4]))) : (this.endx = parseInt(this.data.Argv[3]), this.endy = parseInt(this.data.Argv[4])), this.mirror = "1" == this.data.Argv[8], this.endAlpha = parseInt(this.data.Argv[7]) / 255, this.zoom_x = parseInt(this.data.Argv[5]) / 100, this.zoom_y = parseInt(this.data.Argv[6]) / 100
			}, e
		}(OrgEventBase);
	t.MovePicEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 218, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				if (GloableData.getInstance().isCollect) {
					var t = new HPLockTip("正在剧情鉴赏中，无法进行存读档操作。", !0);
					return UIManager.getInstance().popMessageLayer.addChild(t), void this.finish()
				}
				if (GloableData.getInstance().loadShot(!0), "0" == this.data.Argv[0]) {
					this.mainLine.isMustSave = !0;
					var e = Math.floor(this.data.Argv[1] - 1);
					GloableData.getInstance().getSaveSpriteData(e, null, null, !0), GloableData.getInstance().snap(e, !0), this.finish()
				} else "1" == this.data.Argv[0] && (UIManager.getInstance().cancleLongDown(), GloableData.getInstance().restore(Math.floor(this.data.Argv[1] - 1), !0) || this.finish(), "1" == this.data.Argv[2] && GloableData.getInstance().deleteSnap(Math.floor(this.data.Argv[1] - 1)))
			}, e
		}(OrgEventBase);
	t.MustSaveReadEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 216, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.varAisUserIndex = this.data.Argv.length >= 6 ? "1" == this.data.Argv[5] : !1;
				var t = this.data.Argv[0];
				if (t.indexOf("EX") > -1 ? (this.varAisEx = !0, this.varAIndex = parseInt(t.split("|")[1])) : this.varAIndex = parseInt(t), this.opA = parseInt(this.data.Argv[1]), this.opAValueType = parseInt(this.data.Argv[2]), this.opAValue = this.getValue(this.opAValueType, this.data.Argv[3]), "string" != typeof this.opAValue) {
					if (this.varAisEx ? this.varAisUserIndex ? this.valueA = GloableData.getInstance().dGameSystem.varsEx.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.varAIndex) - 1) : this.valueA = GloableData.getInstance().dGameSystem.varsEx.getVar(this.varAIndex) : this.varAisUserIndex ? this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.varAIndex) - 1) : this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(this.varAIndex), this.opB = parseInt(this.data.Argv[6]), -1 == this.opB) return this.valueA = this.getResult(this.valueA, this.opA, this.opAValue), this.setResult(), void this.finish();
					this.opBValueType = parseInt(this.data.Argv[7]), this.opBValue = this.getValue(this.opBValueType, this.data.Argv[8]);
					var e = this.getResult(this.opAValue, this.opB + 1, this.opBValue);
					this.valueA = this.getResult(this.valueA, this.opA, e), this.setResult(), this.finish()
				}
			}, e.prototype.setResult = function() {
				this.varAisEx ? this.varAisUserIndex ? GloableData.getInstance().dGameSystem.varsEx.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.varAIndex) - 1, this.valueA) : GloableData.getInstance().dGameSystem.varsEx.setVar(this.varAIndex, this.valueA) : this.varAisUserIndex ? GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.varAIndex) - 1, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(this.varAIndex, this.valueA)
			}, e.prototype.getResult = function(t, e, i) {
				switch (e) {
				case 0:
					t = i;
					break;
				case 1:
					t += i;
					break;
				case 2:
					t -= i;
					break;
				case 3:
					t *= i;
					break;
				case 4:
					t = Math.floor(t / i);
					break;
				case 5:
					t = Math.floor(t % i)
				}
				return t
			}, e.prototype.getSystemSuc = function(t) {
				1 == parseInt(t.status) && (GloableData.getInstance().systemTime.sysTimestramp = parseInt(t.data.timestramp), window.commonPlayer && (window.commonPlayer.timesTrampSys = parseInt(t.data.timestramp)), this.init())
			}, e.prototype.getSystemErr = function(t) {
				GloableData.getInstance().systemTime.sysTimestramp = (new Date).getTime() / 1e3, this.init()
			}, e.prototype.changeSystemVal = function(t, e) {
				var i;
				switch (t) {
				case 0:
					i = e.getFullYear();
					break;
				case 1:
					i = e.getMonth() + 1;
					break;
				case 2:
					i = e.getDate();
					break;
				case 3:
					i = 0 == e.getDay() ? "7" : e.getDay();
					break;
				case 4:
					i = e.getHours();
					break;
				case 5:
					i = e.getMinutes();
					break;
				case 6:
					i = e.getSeconds();
					break;
				case 7:
					i = GloableData.getInstance().systemTime.sysTimestramp
				}
				return i
			}, e.prototype.getValue = function(t, e) {
				var i;
				if (0 == t) i = parseInt(e);
				else if (1 == t) i = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(e));
				else if (2 == t) {
					var a = parseInt(e.split("|")[0]),
						n = parseInt(e.split("|")[1]),
						s = Math.min(n, a),
						o = Math.max(n, a),
						r = o - s;
					i = Math.floor(s + Math.random() * r)
				} else if (3 == t) i = GloableData.getInstance().dGameSystem.varsEx.getVar(parseInt(e));
				else if (4 == t) i = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(parseInt(e)) - 1);
				else if (5 == t) {
					var h = this.data.Argv[4],
						l = !1;
					if (-1 != h.indexOf("|&;")) {
						var c = h.split("|&;");
						c.length > 1 && "ON" == c[1] && (l = "ON" == c[1], GloableData.getInstance().systemTime.sysTimestramp = OrgWeb.getInstance().getServerTime())
					}
					if (l) {
						if (-1 == GloableData.getInstance().systemTime.sysTimestramp) {
							var g = {
								action: "get_server_time"
							};
							return AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GAME_SYSTEM_TIME, this.getSystemSuc, this, this.getSystemErr, this, g), GloableStaticData.GET_SERVER_TIME
						}
						var u = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp);
						i = this.changeSystemVal(parseInt(e), u)
					} else {
						if (-1 != OrgWeb.getInstance().getServerTime()) GloableData.getInstance().systemTime.sysTimestramp = OrgWeb.getInstance().getServerTime();
						else {
							var p = Math.floor((new Date).getTime() / 1e3);
							GloableData.getInstance().systemTime.sysTimestramp = p
						}
						var d = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp);
						i = this.changeSystemVal(parseInt(e), d)
					}
				} else if (6 == t) i = GloableData.getInstance().flowerHua;
				else if (7 == t) {
					var m = this.getMaxMinNumArr(e);
					i = parseInt(m[0]);
					for (var v = 0; v < m.length; v++) i < parseInt(m[v]) && (i = parseInt(m[v]))
				} else if (8 == t) {
					var f = this.getMaxMinNumArr(e);
					i = parseInt(f[0]);
					for (var v = 0; v < f.length; v++) i > parseInt(f[v]) && (i = parseInt(f[v]))
				} else if (9 == t) i = 0;
				else if (10 == t) switch (parseInt(e)) {
				case 0:
					i = (new Date).getFullYear();
					break;
				case 1:
					i = (new Date).getMonth() + 1;
					break;
				case 2:
					i = (new Date).getDate();
					break;
				case 3:
					i = 0 == (new Date).getDay() ? 7 : (new Date).getDay();
					break;
				case 4:
					i = (new Date).getHours();
					break;
				case 5:
					i = (new Date).getMinutes();
					break;
				case 6:
					i = (new Date).getSeconds();
					break;
				case 7:
					i = Math.floor(Date.now() / 1e3)
				}
				return i
			}, e.prototype.getMaxMinNumArr = function(t) {
				for (var e = t.split(","), i = [], a = 0; a < e.length; a++) i.push(this.getMaxMinValue(e[a]));
				return i
			}, e.prototype.getMaxMinValue = function(t) {
				var e = 0,
					i = t.split("|");
				switch (i[0]) {
				case "n":
					e = parseInt(i[1]);
					break;
				case "v":
					e = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(i[1]));
					break;
				case "x":
					e = GloableData.getInstance().dGameSystem.varsEx.getVar(parseInt(i[1]));
					break;
				case "s":
					e = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(parseInt(i[1])) - 1)
				}
				return e
			}, e
		}(OrgEventBase);
	t.NewAdvDataEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.isCallPayFlg = !1, a.code = 107, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				var t = this.data.Argv[0];
				if (GloableData.getInstance().isWX && t.indexOf("[SHARE]") > -1);
				else if (t.indexOf("@i~") > -1) try {
					var e = t.substring(3),
						i = e.split("|");
					if (i.length < 2) return null;
					var a = parseInt(i[1]);
					if (a != i.length - 2) return null;
					var n = parseInt(i[0]);
					if (107 == n) return null;
					for (var s = new Array, o = 2; o < i.length; o++) s[o - 2] = i[o];
					var r = new data.DEvent(n, this.data.Indent, s);
					return void this.mainLine.makeEvent(r)
				} catch (h) {
					return
				} else if (t.indexOf("call_pay") > -1) {
					view.SCustomUI.getInstance().needShowSendFlower = !1;
					var l = GetQueryString("isCgMenu");
					l = l ? "false" != l && 0 != l : !0, !GloableData.getInstance().gameInfo.isPc && l && (OrgWeb.getInstance().showPaypanel(), this.mainLine !== GloableData.getInstance().currentLine && this.mainLine.killSelfEventLine(), view.SCustomUI.getInstance().showUI(view.SCustomUI.F_Index))
				}
				this.finish()
			}, e
		}(OrgEventBase);
	t.NotesEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 601, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {}, e.prototype.finish = function() {
				t.prototype.finish.call(this)
			}, e
		}(OrgEventBase);
	t.OperationVideoEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.loadNumber = 0, a.loadPics = [], a.loadOafx = !1, a.oafxPath = "", a.pushPngComplet = !1, a.pushOafxComplet = !1, a.loadOafxNumber = 0, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.mainLine.pause();
				var t = this.data.Argv[0].split("|");
				this.loadNumber = t.length;
				for (var e = 0; e < t.length; e++) {
					var i = GloableData.getInstance().getFileListItemURL(t[e]);
					if (t[e].indexOf(".oafx") > -1) this.loadOafx = !0, this.loadOafxNumber += 1, ORG.loader.load(i, OHandler.create(this, this.loadOafxComplete), null, "arraybuffer");
					else if ("" !== i) {
						var a = {
							url: i,
							type: OLoader.IMAGE
						};
						this.loadPics.push(a)
					}
				}
				this.loadOafx || (this.pushOafxComplet = !0), this.pushPngComplet = !0, this.loadImages()
			}, e.prototype.loadImages = function() {
				if (!this.loadOafx && this.pushPngComplet && this.pushOafxComplet) if (this.loadPics.length > 0) {
					for (var t in this.loadPics) ORG.loader.clearRes(this.loadPics[t].url);
					UIResouecrLoad.loadArrRes(this.loadPics, this, this.loadImageComplete, null, !1)
				} else this.loadImageComplete()
			}, e.prototype.loadOafxComplete = function(t) {
				this.loadOafxNumber -= 1;
				var e = new GameByte(t);
				e.endian = OByteArray.LITTLE_ENDIAN;
				var i = new data.DAnimateData(e);
				if (i && !i.isFullAnimate) return void(this.loadOafxNumber <= 0 && (this.loadOafx = !1, this.pushOafxComplet = !0, this.loadImages()));
				var a = {
					url: HttpURL.getResourceURL(i.bgmd5, !0),
					type: OLoader.IMAGE
				};
				this.loadPics.push(a);
				for (var n = i.partsContent.length, s = 0; n > s; s++) for (var o = i.partsContent[s], r = 0; r < o.actCount.length; r++) {
					var h = i.md5Content[o.actCount[r].frameDataIndex];
					if (h) {
						var l = {
							url: HttpURL.getResourceURL(h, !0),
							type: OLoader.IMAGE
						};
						this.loadPics.push(l)
					}
				}
				this.loadOafxNumber <= 0 && (this.loadOafx = !1, this.pushOafxComplet = !0, this.loadImages())
			}, e.prototype.loadImageComplete = function() {
				this.finish(), this.mainLine && this.mainLine.resume()
			}, e
		}(OrgEventBase);
	t.PreLoadPic = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 104, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				GloableData.getInstance().dGameSystem.quickRun = "1" === data[0], this.finish()
			}, e
		}(OrgEventBase);
	t.QuickPlayEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 150, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.finish()
			}, e
		}(OrgEventBase);
	t.RefreshUIEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.id = 0, a.frames = 0, a.endRotate = 0, a.loop = !1, a.type = 0, a.rotaOriginX = 0, a.rotaOriginY = 0, a.code = 404, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				if (this.id = this.data.Argv[0], 1 == parseInt(this.data.Argv[1]) ? this.frames = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[2])) : this.frames = Math.floor(this.data.Argv[2]), 1 == parseInt(this.data.Argv[3]) ? this.endRotate = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[4])) : this.endRotate = parseInt(this.data.Argv[4]), 1 == this.data.Argv[5] ? this.loop = !0 : this.loop = !1, this.type = parseInt(this.data.Argv[6]), 0 == this.type) this.rotaOriginX = -1, this.rotaOriginY = -1;
				else if (1 == this.type) this.rotaOriginX = 0, this.rotaOriginY = 0;
				else if (10 == this.type) {
					var t = this.data.Argv[7].split(",");
					this.rotaOriginX = parseFloat(t[0]), this.rotaOriginY = parseFloat(t[1])
				}
			}, e
		}(OrgEventBase);
	t.RotatePicEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.prower = 0, a.speed = 0, a.time = 0, a.loop = !1, a.code = 302, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.prower = parseInt(this.data.Argv[0]), this.speed = parseInt(this.data.Argv[1]), this.loop = 1 == parseInt(this.data.Argv[2]), this.time = parseInt(this.data.Argv[3])
			}, e.prototype.startShake = function() {}, e
		}(OrgEventBase);
	t.ShakeEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.actionData = [], a.advanceActionData = [], a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.path = ("graphics/" + this.data.Argv[1] + "x").toLowerCase(), this.bgId = parseInt(this.data.Argv[0]);
				var t = 1 == parseInt(this.data.Argv[2]);
				this.x = t ? GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[3])) : parseInt(this.data.Argv[3]), this.y = t ? GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[4])) : parseInt(this.data.Argv[4]), this.zoom_x = parseInt(this.data.Argv[5]) / 100, this.zoom_y = parseInt(this.data.Argv[6]) / 100, this.alpha = parseInt(this.data.Argv[7]) / 255, this.mirror = "1" == this.data.Argv[8];
				for (var e = this.data.Argv[14].split("|"), a = 0; a < e.length; a++) {
					var n = e[a].split(","),
						s = new i;
					s.actIndex = parseInt(n[0]), s.actType = parseInt(n[1]), this.actionData.push(s)
				}
				if (this.data.Argv.length > 15) for (var o = this.data.Argv[15].split("|"), a = 0; a < o.length; a++) {
					var n = o[a].split(",");
					this.advanceActionData.push(n)
				}
			}, e
		}(OrgEventBase);
	t.ShowActPicEvent = e;
	var i = function() {
			function t() {}
			return t
		}();
	t.OActiveParts = i
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(e) {
			function i(t, i) {
				var a = e.call(this, t, i) || this;
				return a.code = 406, a.init(), a
			}
			return __extends(i, e), i.prototype.init = function() {
				var e = this.data.Argv[13];
				if (e && (e.indexOf(".jpg") > -1 || e.indexOf(".png") > -1)) {
					var i = this.data;
					i.Argv[0] = this.data.Argv[0], i.Argv[1] = e, i.Code = 400, this.showPicEvent = new t.ShowPicEvent(i, this.mainLine)
				}
			}, i
		}(OrgEventBase);
	t.ShowFrameImgEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(e) {
			function i(t, i) {
				var a = e.call(this, t, i) || this;
				return a.actionData = [], a.advanceActionData = [], a.init(), a
			}
			return __extends(i, e), i.prototype.init = function() {
				if (this.data) {
					this.path = "Graphics/" + this.data.Argv[1], this.showId = parseInt(this.data.Argv[0]);
					var e = 1 == parseInt(this.data.Argv[2]);
					this.x = e ? GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[3])) : parseInt(this.data.Argv[3]), this.y = e ? GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[4])) : parseInt(this.data.Argv[4]), this.zoom_x = parseInt(this.data.Argv[5]) / 100, this.zoom_y = parseInt(this.data.Argv[6]) / 100, this.alpha = parseInt(this.data.Argv[7]) / 255, this.mirror = "1" == this.data.Argv[8];
					for (var i = this.data.Argv[14].split("|"), a = 0; a < i.length; a++) {
						var n = i[a].split(","),
							s = new t.OActiveParts;
						s.actIndex = parseInt(n[0]), s.actType = parseInt(n[1]), this.actionData.push(s)
					}
					if (this.data.Argv.length > 15) for (var o = this.data.Argv[15].split("|"), a = 0; a < o.length; a++) {
						var n = o[a].split(",");
						this.advanceActionData.push(n)
					}
				}
			}, i
		}(OrgEventBase);
	t.ShowOAF2Event = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.x = 0, a.y = 0, a.zoom_x = 0, a.zoom_y = 0, a.alpha = 0, a.mirror = !1, a.id = 0, a.code = 400, null !== e && null != i && a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.id = parseInt(this.data.Argv[0]);
				var t = !1;
				t = this.data.Argv.length > 11 ? "1" == this.data.Argv[11] : !1;
				var e = "";
				if (t) {
					e = "Graphics/Other/" + StringUtil.replaceVTX(GloableData.getInstance().dGameSystem.dGameString.getVar(parseInt(this.data.Argv[12]))).toLowerCase();
					var i = e.toLowerCase().replace(/\\/g, "/");
					e = i
				} else e = ("Graphics/" + this.data.Argv[1]).toLowerCase().replace(/\\/g, "/");
				this.path = e, "1" == this.data.Argv[2] ? (this.x = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[3])), this.y = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[4]))) : (this.x = parseInt(this.data.Argv[3]), this.y = parseInt(this.data.Argv[4])), this.zoom_x = this.data.Argv[5] / 100, this.zoom_y = this.data.Argv[6] / 100, this.alpha = this.data.Argv[7] / 255, this.mirror = "1" == this.data.Argv[8]
			}, e
		}(OrgEventBase);
	t.ShowPicEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.path = "", a.volume = 0, a.type = 1, a.code = 501, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.volume = parseInt(this.data.Argv[1]), this.volume < 0 && (this.volume = 80), this.path = ("Audio/" + this.data.Argv[0]).toLowerCase().replace(/\\/g, "/")
			}, e
		}(OrgEventBase);
	t.StartBGMEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.path = "", a.volume = 0, a.type = 4, a.code = 504, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.volume = parseInt(this.data.Argv[1]), this.volume < 0 && (this.volume = 80), this.path = ("Audio/" + this.data.Argv[0]).toLowerCase().replace(/\\/g, "/")
			}, e
		}(OrgEventBase);
	t.StartBGSEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.path = "", a.volume = 0, a.type = 2, a.code = 502, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.volume = parseInt(this.data.Argv[1]), this.volume < 0 && (this.volume = 80), this.path = ("Audio/" + this.data.Argv[0]).toLowerCase().replace(/\\/g, "/")
			}, e
		}(OrgEventBase);
	t.StartSEEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 600, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {}, e
		}(OrgEventBase);
	t.StartVideoEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.path = "", a.volume = 0, a.type = 3, a.code = 503, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.volume = parseInt(this.data.Argv[1]), this.volume < 0 && (this.volume = 80), this.path = ("Audio/" + this.data.Argv[0]).toLowerCase().replace(/\\/g, "/")
			}, e
		}(OrgEventBase);
	t.StartVoiceEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 506, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {}, e
		}(OrgEventBase);
	t.StopSEEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 507, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {}, e
		}(OrgEventBase);
	t.StopVoiceEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 253, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				if (this.itemId = this.data.Argv[0], console.log(this.itemId + "--------------剧情锁ID"), GloableData.getInstance().gameInfo.isPc) {
					var t = GloableData.getInstance().getItemById(this.itemId);
					if (this.isLock = null == t ? !0 : t.max <= 0, this.isLock) {
						this.mainLine.pause();
						var e = new MallLockView(this.itemId, this.mainLine);
						UIManager.getInstance().showView(e, "MallLockView")
					} else this.finish()
				} else {
					if (GloableData.getInstance().isFreeLimit || GloableData.getInstance().isLightDay || GloableData.getInstance().isLightVIP) return void this.finish();
					var i = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
					UIManager.getInstance().maskSprite.update("通信中..."), AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GET_MALL_ITEM_INFO_BY_ID, this.rcvItemInfoJSONP, this, null, this, i.sendObj(this.itemId))
				}
			}, e.prototype.showLoginFail = function() {
				this.failUI || (this.failUI = new FailMessageUI), this.failUI.click(this, this.getLogin), this.failUI.update("遇到剧情锁，请先登录~", "登录"), UIManager.getInstance().popMessageLayer.addChild(this.failUI)
			}, e.prototype.getLogin = function() {
				OrgWeb.getInstance().isLoginStatus()
			}, e.prototype.rcvItemInfoJSONP = function(t) {
				this.rcvItemInfo({
					data: t
				}), console.log(JSON.stringify(t))
			}, e.prototype.rcvItemInfo = function(t) {
				if (EventCenter.removeEventListener(HttpURL.Ajax_Url.GET_MALL_ITEM_INFO_BY_ID, this, this.rcvItemInfo), 1 == t.data.status) {
					var e = t.data.data[0];
					if (UIManager.getInstance().maskSprite.hide(), e && e.using_num > 0) {
						var i = GloableData.getInstance().getItemById(this.itemId);
						if (i && i.count < i.max) {
							var a = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
							a.userItem(this.itemId, 1, !1)
						}
						this.finish()
					} else {
						this.mainLine.pause();
						var n = new MallLockView(this.itemId, this.mainLine);
						UIManager.getInstance().showView(n, "MallLockView")
					}
				} else {
					UIManager.getInstance().maskSprite.hide(), this.mainLine.pause();
					var n = new MallLockView(this.itemId, this.mainLine);
					UIManager.getInstance().showView(n, "MallLockView")
				}
			}, e
		}(OrgEventBase);
	t.StoryLockEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 215, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				GloableData.getInstance().dGameSystem.dGameString.setVar(parseInt(this.data.Argv[0]), StringUtil.replaceVTX(this.data.Argv[1])), this.finish()
			}, e
		}(OrgEventBase);
	t.StringEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 3001, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				var t = GloableData.getInstance().dGameSystem.vars.getVar(parseInt(this.data.Argv[0]) - 1) - 1,
					e = StringUtil.madeString(this.data.Argv[1], 0, this.data.Code);
				GloableData.getInstance().dGameSystem.dGameString.setVar(t, e), this.finish()
			}, e
		}(OrgEventBase);
	t.StringExEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 108, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				try {
					var e = this.mainLine.indentStack[this.mainLine.indentStack.length - 1];
					e instanceof BranchInfo && (e.finishIndex - 1 != this.mainLine.currentLinks[0] - 1 && console.log("(108)selection end conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[0] - 1))
				} catch (i) {
					return console.log("ITextChoice error!"), void t.prototype.finish.call(this)
				}
				t.prototype.finish.call(this)
			}, e
		}(OrgEventBase);
	t.TextChoiceEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.btnResource = [], a.jumList = [], a.endJump = 0, a.code = 101, a.btnResource = GloableData.getInstance().getBtnUrlByIndex(GloableData.getInstance().gameMainData.System.MessageBox.ChoiceButtonIndex), a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				for (var t = this.mainLine.pos; t < this.mainLine.story.length; t++) {
					var e = this.mainLine.story.events[t];
					if (108 != e.Code || e.Indent != this.mainLine.story.events[this.mainLine.pos].Indent + 1) {
						if (102 == e.Code && e.Indent == this.mainLine.story.events[this.mainLine.pos].Indent) {
							this.endJump = t + 1;
							break
						}
					} else this.jumList.push(t + 1)
				}
				this.mainLine.indentStack.push(new BranchInfo(this.endJump, this.jumList))
			}, e.prototype.finish = function(e) {
				void 0 === e && (e = 0);
				try {
					this.mainLine.indentStack[this.mainLine.indentStack.length - 1].jump(e) != this.mainLine.currentLinks[e] && console.log("(101)selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[e]), t.prototype.finish.call(this)
				} catch (i) {
					console.error(i.stack), t.prototype.finish.call(this)
				}
			}, e
		}(OrgEventBase);
	t.TextDifEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(e) {
			function i(t, i) {
				var a = e.call(this, t, i) || this;
				return a.choiceTime = -1, a.TimeIndex = -1, a.endJump = 0, a.choiceShowNum = 0, a.isOpenBimg = !1, a.isCenter = !1, a.isShowTimeBar = !1, a.pos = null, a.isDiyeve = !1, a.btnResource = [], a.code = 1011, a.pos = {
					x: 0,
					y: 0
				}, a.bgImageArgs = {
					path: "",
					x: 0,
					y: 0
				}, a.jumList = [], a.argsArray = [], a.choiceArray = [], a.choiceShowNum = 0, a.btnResource = GloableData.getInstance().getBtnUrlByIndex(GloableData.getInstance().gameMainData.System.MessageBox.ChoiceButtonIndex), a.init(), a
			}
			return __extends(i, e), i.prototype.init = function() {
				this.ChoiceArraySize = this.data.Argv[0];
				for (var e = this.mainLine.pos; e < this.mainLine.story.events.length; ++e) {
					var i = this.mainLine.story.events[e];
					if (108 != i.Code || i.Indent != this.mainLine.story.events[this.mainLine.pos].Indent + 1) {
						if (102 == i.Code && i.Indent == this.mainLine.story.events[this.mainLine.pos].Indent) {
							this.endJump = e + 1;
							break
						}
					} else this.jumList.push(e + 1)
				}
				for (var a = new Array(this.jumList.length), e = 0; e < this.jumList.length; ++e) a[e] = this.jumList[e];
				this.TimeIndex = a.length - 1, this.mainLine.indentStack.push(new BranchInfo(this.endJump, a)), this.isDiyeve = "1" == this.data.Argv[14];
				for (var e = 0; e < this.ChoiceArraySize; ++e) if (this.data.Argv[15 + 3 * e].length <= 0) this.choiceArray[e] = null;
				else {
					if (this.data.Argv[15 + 3 * e].indexOf("ORGTIMEOVER|") > -1) break;
					if (t.TextDifUtil.choiceIf(this.data.Argv[16 + 3 * e])) {
						if (this.choiceArray[e] = this.data.Argv[15 + 3 * e], this.choiceShowNum++, this.isDiyeve) {
							this.argsArray[e] = this.data.Argv[17 + 3 * e];
							var n = this.argsArray[e].split(","),
								s = parseInt(n[0]),
								o = GloableData.getInstance().getBtnUrlByIndex(s);
							o.length > 0 && this.btnResource.indexOf(o[0]) && this.btnResource.push(o[0]), o.length > 1 && this.btnResource.indexOf(o[1]) && this.btnResource.push(o[1])
						}
					} else this.choiceArray[e] = null
				}
				this.isCenter = "1" === this.data.Argv[1], this.choiceTimeMax = this.choiceTime = 60 * parseInt(this.data.Argv[4]), this.timeBg = this.data.Argv[5].replace("/", ""), this.timeBar = this.data.Argv[6].replace("/", ""), this.timeX = parseInt(this.data.Argv[7]), this.timeY = parseInt(this.data.Argv[8]), this.isCenter || (this.pos.x = parseInt(this.data.Argv[2]), this.pos.y = parseInt(this.data.Argv[3])), this.isOpenBimg = "1" == this.data.Argv[9], this.isOpenBimg && (this.bgImageArgs.path = "Graphics/UI/" + this.data.Argv[10], this.bgImageArgs.x = parseInt(this.data.Argv[11]), this.bgImageArgs.y = parseInt(this.data.Argv[12])), 0 == this.choiceTimeMax && (this.choiceTimeMax = this.choiceTime = -200), (this.data.Argv[5].length > 0 || this.data.Argv[6].length > 0) && this.choiceTimeMax > 0 && (this.isShowTimeBar = !0)
			}, i.prototype.finish = function(t) {
				return void 0 === t && (t = -1), t == GloableStaticData.NO_OPTION ? void e.prototype.finish.call(this) : (-1 !== t ? (this.mainLine.indentStack[this.mainLine.indentStack.length - 1].jump(t) != this.mainLine.currentLinks[t] && console.log("(1011)selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[t])) : this.choiceTime <= 0 && (this.mainLine.indentStack[this.mainLine.indentStack.length - 1].jump(this.TimeIndex) != this.mainLine.currentLinks[this.mainLine.currentLinks.length - 1] && console.log("(1011)no selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[this.mainLine.currentLinks.length - 1])), void e.prototype.finish.call(this))
			}, i
		}(OrgEventBase);
	t.TextDifEX2Event = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(e) {
			function i(t, i) {
				var a = e.call(this, t, i) || this;
				return a.TimeIndex = -1, a.endJump = 0, a.choiceShowNum = 0, a.isCenter = !1, a.advancedMode = !1, a.isShowTimeBar = !1, a.btnResource = [], a.code = 1010, a.jumList = [], a.choiceArray = [], a.choiceShowNum = 0, a.pos = {
					x: 0,
					y: 0
				}, a.btnResource = GloableData.getInstance().getBtnUrlByIndex(GloableData.getInstance().gameMainData.System.MessageBox.ChoiceButtonIndex), a.init(), a
			}
			return __extends(i, e), i.prototype.init = function() {
				this.advancedMode = this.data.Argv[0].indexOf("ORGTEXT|") > -1;
				for (var e = this.advancedMode ? parseInt(this.data.Argv[0].split("|")[1]) : this.data.Argv.length, i = this.mainLine.pos; i < this.mainLine.story.events.length; ++i) {
					var a = this.mainLine.story.events[i];
					if (108 != a.Code || a.Indent != this.data.Indent + 1) {
						if (102 == a.Code && a.Indent == this.data.Indent) {
							this.endJump = i + 1;
							break
						}
					} else this.jumList.push(i + 1)
				}
				if (this.TimeIndex = this.jumList.length - 1, this.mainLine.indentStack.push(new BranchInfo(this.endJump, this.jumList)), this.advancedMode) {
					for (var i = 0; e > i; ++i) if (this.data.Argv[9 + 2 * i].length <= 0) this.choiceArray[i] = null;
					else {
						if (this.data.Argv[9 + 2 * i].indexOf("ORGTIMEOVER|") > -1) break;
						t.TextDifUtil.choiceIf(this.data.Argv[10 + 2 * i]) ? (this.choiceArray[i] = this.data.Argv[9 + 2 * i], this.choiceShowNum++) : this.choiceArray[i] = null
					}
					this.isCenter = "1" == this.data.Argv[1], this.pos.x = this.data.Argv[2], this.pos.y = this.data.Argv[3], this.choiceTimeMax = this.choiceTime = 60 * parseInt(this.data.Argv[4]), this.timeBg = this.data.Argv[5].replace("/", ""), this.timeBar = this.data.Argv[6].replace("/", ""), this.timeX = parseInt(this.data.Argv[7]), this.timeY = parseInt(this.data.Argv[8]), 0 == this.choiceTimeMax && (this.choiceTimeMax = this.choiceTime = -200), (this.data.Argv[5].length > 0 || this.data.Argv[6].length > 0) && this.choiceTimeMax > 0 && (this.isShowTimeBar = !0)
				}
			}, i.prototype.finish = function(t) {
				return void 0 === t && (t = -1), t == GloableStaticData.NO_OPTION ? void e.prototype.finish.call(this) : (-1 !== t ? (this.mainLine.indentStack[this.mainLine.indentStack.length - 1].jump(t) != this.mainLine.currentLinks[t] && console.log("(1010)selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[t])) : this.choiceTime <= 0 && (this.mainLine.indentStack[this.mainLine.indentStack.length - 1].jump(this.TimeIndex) != this.mainLine.currentLinks[this.mainLine.currentLinks.length - 1] && console.log("(1010)no selection conflict !"), this.mainLine.jumpToIndex(this.mainLine.currentLinks[this.mainLine.currentLinks.length - 1])), void e.prototype.finish.call(this))
			}, i
		}(OrgEventBase);
	t.TextDifEXEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 102, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.mainLine.auxFetchBranchinfo();
				var t = new GameTimeData;
				t.delay = GloableStaticData.GAME_RUN_TIME, t.type = 2, t.repeatCount = 1, t.thisArg = this, t.callBack = this.finish, t.isJump = !1, TimeManager.getInstance().addTime(t)
			}, e
		}(OrgEventBase);
	t.TextEndEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.msgIndex = 0, a.diyPos = !1, a.talkPerson = !1, a.diyText = !1, a.isClickHide = !1, a.messagePos = 0, a.uiData = GloableData.getInstance().gameMainData.System.MessageBox.Talk, a.code = 100, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				var t = this.data.Argv[16];
				if (t) {
					this.diyText = !0;
					var e = t.split("|")[3];
					if (e) {
						var i = e.split(",");
						if (1 == parseInt(i[0])) switch (parseInt(i[1])) {
						case 0:
							this.msgIndex = 1;
							break;
						case 1:
							this.msgIndex = 2;
							break;
						default:
							this.msgIndex = 0
						}
					}
				}
				if (this.taklBgPath = ("Graphics/UI/" + this.uiData.backimage).toLowerCase().replace(/\\/g, "/"), this.messagePos = parseInt(this.data.Argv[5]), this.data.Argv[3] && this.data.Argv[3].length > 0 && (0 == this.data.Argv[3].indexOf("\\") && (this.data.Argv[3] = this.data.Argv[3].replace("\\", "")), this.facePath = ("Graphics/Face/" + this.data.Argv[3]).toLowerCase()), this.uiData.FaceBorderImage.IsNil() || (this.faceBorder = "Graphics/UI/" + this.uiData.FaceBorderImage), this.diyText) {
					var a = this.data.Argv[16].split("|"),
						n = a[0].split(","),
						s = a[1].split(","),
						o = a[2].split(","),
						r = a[3].split(",");
					1 == n[0] && (this.taklBgPath = ("Graphics/UI/" + n[1]).toLowerCase().replace(/\\/g, "/")), o ? 1 == parseInt(o[0]) ? this.talkPerson = {
						talkP: !0,
						pId: parseInt(o[1])
					} : this.talkPerson = {
						talkP: !1
					} : this.talkPerson = !1, r && (1 == parseInt(r[2]) ? this.isClickHide = !0 : this.isClickHide = !1), 1 == parseInt(s[0]) ? this.diyPos = {
						diy: !0,
						x: parseInt(s[1]),
						y: parseInt(s[2])
					} : this.diyPos = !1
				}
				this.data.Argv[17] && (this.talkSpMove = this.data.Argv[17])
			}, e
		}(OrgEventBase);
	t.TextEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.code = 150, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {}, e
		}(OrgEventBase);
	t.UpdateUIEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.isFinish = !1, a.bwaitSysTime = !1, a.code = 207, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				if (this.dataToVar(), this.valueA = 0, this.valueB = 0, this.userindex ? this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1) : this.valueA = GloableData.getInstance().dGameSystem.vars.getVar(this.id), 0 == this.type) this.valueB = this.idOrValue;
				else if (1 == this.type) this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(this.idOrValue);
				else if (2 == this.type) {
					var t = Math.min(this.randB, this.randA),
						e = Math.max(this.randB, this.randA),
						i = e - t;
					this.valueB = Math.floor(t + Math.random() * i)
				} else if (3 == this.type) this.valueB = GloableData.getInstance().dGameSystem.varsEx.getVar(this.idOrValue);
				else if (4 == this.type) this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(GloableData.getInstance().dGameSystem.vars.getVar(this.idOrValue) - 1);
				else if (5 == this.type) {
					var a = this.data.Argv[4],
						n = !1;
					if (-1 != a.indexOf("|&;")) {
						var s = a.split("|&;");
						s.length > 1 && "ON" == s[1] && (n = "ON" == s[1], GloableData.getInstance().systemTime.sysTimestramp = OrgWeb.getInstance().getServerTime())
					}
					if (n) if (-1 == GloableData.getInstance().systemTime.sysTimestramp) {
						this.bwaitSysTime = !0;
						var o = {
							action: "get_server_time"
						};
						AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GAME_SYSTEM_TIME, this.getSystemSuc, this, this.getSystemErr, this, o)
					} else this.SysTimeDate = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp), this.valueB = this.changeSystemVal(this.idOrValue, this.SysTimeDate);
					else {
						if (-1 != OrgWeb.getInstance().getServerTime()) GloableData.getInstance().systemTime.sysTimestramp = OrgWeb.getInstance().getServerTime();
						else {
							var r = Math.floor((new Date).getTime() / 1e3);
							GloableData.getInstance().systemTime.sysTimestramp = r
						}
						this.SysTimeDate = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp), this.valueB = this.changeSystemVal(this.idOrValue, this.SysTimeDate)
					}
				} else if (6 == this.type) OrgWeb.getInstance().getWebUserFlower(this, this.getFlowerOk);
				else if (9 == this.type) AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GAME_TASK_CONTENT + "?gindex=" + GloableData.getInstance().gameInfo.gIndex + "&task_id=" + this.task_id, this.rcvTaskData, this, this.rcvError, this);
				else if (10 == this.type) switch (this.idOrValue) {
				case 0:
					this.valueB = (new Date).getFullYear();
					break;
				case 1:
					this.valueB = (new Date).getMonth() + 1;
					break;
				case 2:
					this.valueB = (new Date).getDate();
					break;
				case 3:
					0 == (new Date).getDay() ? this.valueB = "7" : this.valueB = (new Date).getDay();
					break;
				case 4:
					this.valueB = (new Date).getHours();
					break;
				case 5:
					this.valueB = (new Date).getMinutes();
					break;
				case 6:
					this.valueB = (new Date).getSeconds();
					break;
				case 7:
					this.valueB = Date.now() / 1e3
				}
				if ((5 != this.type || !this.bwaitSysTime) && 9 != this.type && 6 != this.type) {
					switch (this.op) {
					case 0:
						this.valueA = this.valueB;
						break;
					case 1:
						this.valueA += this.valueB;
						break;
					case 2:
						this.valueA -= this.valueB;
						break;
					case 3:
						this.valueA *= this.valueB;
						break;
					case 4:
						this.valueA = this.valueA / (0 == this.valueB ? 1 : this.valueB);
						break;
					case 5:
						this.valueA = this.valueA % (0 == this.valueB ? 1 : this.valueB)
					}
					this.userindex ? GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(this.id, this.valueA), this.finish()
				}
			}, e.prototype.getFlowerOk = function(t) {
				console.log(t), this.isFun()
			}, e.prototype.rcvTaskData = function(t) {
				if (1 == t.status) {
					var e = t.data.task_info;
					0 == this.point_type ? this.valueB = parseInt(e.point_over) : 1 == this.point_type && (this.valueB = parseInt(e.point_max)), this.isFun()
				} else this.isFun()
			}, e.prototype.rcvError = function() {
				this.isFun()
			}, e.prototype.dataToVar = function() {
				this.id = parseInt(this.data.Argv[0]), this.op = parseInt(this.data.Argv[1]), this.type = parseInt(this.data.Argv[2]), 2 == this.type ? (this.randA = parseInt(this.data.Argv[3].split("|")[0]), this.randB = parseInt(this.data.Argv[3].split("|")[1])) : 9 == this.type ? (this.task_id = parseInt(this.data.Argv[3].split("|")[0]), this.point_type = parseInt(this.data.Argv[3].split("|")[1])) : this.idOrValue = parseInt(this.data.Argv[3]), this.userindex = this.data.Argv.length >= 6 ? "1" == this.data.Argv[5] : !1
			}, e.prototype.isFun = function() {
				switch (this.op) {
				case 0:
					this.valueA = this.valueB;
					break;
				case 1:
					this.valueA += this.valueB;
					break;
				case 2:
					this.valueA -= this.valueB;
					break;
				case 3:
					this.valueA *= this.valueB;
					break;
				case 4:
					this.valueA = this.valueA / this.valueB;
					break;
				case 5:
					this.valueA = this.valueA % this.valueB
				}
				this.userindex ? GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(this.id, this.valueA), this.finish()
			}, e.prototype.getSystemSuc = function(t) {
				1 == parseInt(t.status) ? (GloableData.getInstance().systemTime.sysTimestramp = parseInt(t.data.timestramp), window.commonPlayer && (window.commonPlayer.timesTrampSys = parseInt(t.data.timestramp)), this.SysTimeDate = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp), this.valueB = this.changeSystemVal(this.idOrValue, this.SysTimeDate)) : this.valueB = -1, this.goOnSystemEven()
			}, e.prototype.getSystemErr = function(t) {
				this.valueB = -1, this.goOnSystemEven()
			}, e.prototype.changeSystemVal = function(t, e) {
				var i;
				switch (t) {
				case 0:
					i = e.getFullYear();
					break;
				case 1:
					i = e.getMonth() + 1;
					break;
				case 2:
					i = e.getDate();
					break;
				case 3:
					i = 0 == e.getDay() ? "7" : e.getDay();
					break;
				case 4:
					i = e.getHours();
					break;
				case 5:
					i = e.getMinutes();
					break;
				case 6:
					i = e.getSeconds();
					break;
				case 7:
					i = GloableData.getInstance().systemTime.sysTimestramp
				}
				return i
			}, e.prototype.goOnSystemEven = function() {
				if (5 == this.type && this.bwaitSysTime) {
					switch (this.bwaitSysTime = !1, this.op) {
					case 0:
						this.valueA = this.valueB;
						break;
					case 1:
						this.valueA += this.valueB;
						break;
					case 2:
						this.valueA -= this.valueB;
						break;
					case 3:
						this.valueA *= this.valueB;
						break;
					case 4:
						this.valueA = this.valueA / this.valueB;
						break;
					case 5:
						this.valueA = this.valueA % this.valueB
					}
					this.userindex ? GloableData.getInstance().dGameSystem.vars.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : GloableData.getInstance().dGameSystem.vars.setVar(this.id, this.valueA), this.finish()
				}
			}, e
		}(OrgEventBase);
	t.VarEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.isFinish = !1, a.bwaitSysTime = !1, a.code = 213, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.dataToVar();
				if (this.userindex ? this.valueA = GloableData.getInstance().dGameSystem.varsEx.getVar(GloableData.getInstance().dGameSystem.varsEx.getVar(this.id) - 1) : this.valueA = GloableData.getInstance().dGameSystem.varsEx.getVar(this.id), 0 == this.type) this.valueB = this.idOrValue;
				else if (1 == this.type) this.valueB = GloableData.getInstance().dGameSystem.vars.getVar(this.idOrValue);
				else if (2 == this.type) {
					var t = Math.min(this.randB, this.randA),
						e = Math.max(this.randB, this.randA),
						i = e - t;
					this.valueB = Math.floor(t + Math.random() * (i + 1))
				} else if (3 == this.type) this.valueB = GloableData.getInstance().dGameSystem.varsEx.getVar(this.idOrValue);
				else if (4 == this.type) this.valueB = GloableData.getInstance().dGameSystem.varsEx.getVar(GloableData.getInstance().dGameSystem.varsEx.getVar(this.idOrValue) - 1);
				else if (5 == this.type) {
					var a = this.data.Argv[4],
						n = !1;
					if (-1 != a.indexOf("|&;")) {
						var s = a.split("|&;");
						s.length > 1 && "ON" == s[1] && (n = "ON" == s[1], GloableData.getInstance().systemTime.sysTimestramp = OrgWeb.getInstance().getServerTime())
					}
					if (n) if (-1 == GloableData.getInstance().systemTime.sysTimestramp) {
						this.bwaitSysTime = !0;
						var o = {
							action: "get_server_time"
						};
						AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GAME_SYSTEM_TIME, this.getSystemSuc, this, this.getSystemErr, this, o)
					} else this.SysTimeDate = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp), this.valueB = this.changeSystemVal(this.idOrValue, this.SysTimeDate);
					else {
						if (-1 != OrgWeb.getInstance().getServerTime()) GloableData.getInstance().systemTime.sysTimestramp = OrgWeb.getInstance().getServerTime();
						else {
							var r = Math.floor((new Date).getTime() / 1e3);
							GloableData.getInstance().systemTime.sysTimestramp = r
						}
						var h = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp);
						switch (this.idOrValue) {
						case 0:
							this.valueB = h.getFullYear();
							break;
						case 1:
							this.valueB = h.getMonth() + 1;
							break;
						case 2:
							this.valueB = h.getDate();
							break;
						case 3:
							0 == h.getDay() ? this.valueB = "7" : this.valueB = h.getDay();
							break;
						case 4:
							this.valueB = h.getHours();
							break;
						case 5:
							this.valueB = h.getMinutes();
							break;
						case 6:
							this.valueB = h.getSeconds();
							break;
						case 7:
							this.valueB = GloableData.getInstance().systemTime.sysTimestramp
						}
					}
				} else if (9 == this.type);
				else if (10 == this.type) switch (this.idOrValue) {
				case 0:
					this.valueB = (new Date).getFullYear();
					break;
				case 1:
					this.valueB = (new Date).getMonth() + 1;
					break;
				case 2:
					this.valueB = (new Date).getDate();
					break;
				case 3:
					0 == (new Date).getDay() ? this.valueB = 7 : this.valueB = (new Date).getDay();
					break;
				case 4:
					this.valueB = (new Date).getHours();
					break;
				case 5:
					this.valueB = (new Date).getMinutes();
					break;
				case 6:
					this.valueB = (new Date).getSeconds();
					break;
				case 7:
					this.valueB = Date.now() / 1e3
				}
				if (5 != this.type || !this.bwaitSysTime) {
					switch (this.op) {
					case 0:
						this.valueA = this.valueB;
						break;
					case 1:
						this.valueA += this.valueB;
						break;
					case 2:
						this.valueA -= this.valueB;
						break;
					case 3:
						this.valueA *= this.valueB;
						break;
					case 4:
						this.valueA = this.valueA / (0 == this.valueB ? 1 : this.valueB);
						break;
					case 5:
						this.valueA = this.valueA % (0 == this.valueB ? 1 : this.valueB)
					}
					this.userindex ? GloableData.getInstance().dGameSystem.varsEx.setVar(GloableData.getInstance().dGameSystem.vars.getVar(this.id) - 1, this.valueA) : GloableData.getInstance().dGameSystem.varsEx.setVar(this.id, this.valueA), this.finish()
				}
			}, e.prototype.isFun = function() {
				switch (this.op) {
				case 0:
					this.valueA = this.valueB;
					break;
				case 1:
					this.valueA += this.valueB;
					break;
				case 2:
					this.valueA -= this.valueB;
					break;
				case 3:
					this.valueA *= this.valueB;
					break;
				case 4:
					this.valueA = this.valueA / (0 == this.valueB ? 1 : this.valueB);
					break;
				case 5:
					this.valueA = this.valueA % (0 == this.valueB ? 1 : this.valueB)
				}
				this.userindex ? (GloableData.getInstance().dGameSystem.varsEx.setVar(GloableData.getInstance().dGameSystem.varsEx.getVar(this.id) - 1, this.valueA), GloableData.getInstance().dGameSystem.varsEx.saveExData()) : (GloableData.getInstance().dGameSystem.varsEx.setVar(this.id, this.valueA), GloableData.getInstance().dGameSystem.varsEx.saveExData()), this.isFinish = !0
			}, e.prototype.dataToVar = function() {
				this.id = parseInt(this.data.Argv[0]), this.op = parseInt(this.data.Argv[1]), this.type = parseInt(this.data.Argv[2]), 2 == this.type ? (this.randA = parseInt(this.data.Argv[3].split("|")[0]), this.randB = parseInt(this.data.Argv[3].split("|")[1])) : 9 == this.type ? (this.task_id = parseInt(this.data.Argv[3].split("|")[0]), this.point_type = parseInt(this.data.Argv[3].split("|")[1])) : this.idOrValue = parseInt(this.data.Argv[3]), this.userindex = this.data.Argv.length >= 6 ? "1" == this.data.Argv[5] : !1
			}, e.prototype.rcvTaskData = function(t) {
				if (1 == t.status) {
					var e = t.data.task_info;
					0 == this.point_type ? this.valueB = parseInt(e.point_over) : 1 == this.point_type && (this.valueB = parseInt(e.point_max)), this.isFun()
				} else this.isFun()
			}, e.prototype.rcvError = function() {
				this.isFun()
			}, e.prototype.getSystemSuc = function(t) {
				1 == parseInt(t.status) ? (GloableData.getInstance().systemTime.sysTimestramp = parseInt(t.data.timestramp), window.commonPlayer && (window.commonPlayer.timesTrampSys = parseInt(t.data.timestramp)), this.SysTimeDate = new Date(1e3 * GloableData.getInstance().systemTime.sysTimestramp), this.valueB = this.changeSystemVal(this.idOrValue, this.SysTimeDate)) : this.valueB = -1, this.goOnSystemEven()
			}, e.prototype.getSystemErr = function(t) {
				this.valueB = -1, this.goOnSystemEven()
			}, e.prototype.changeSystemVal = function(t, e) {
				var i;
				switch (t) {
				case 0:
					i = e.getFullYear();
					break;
				case 1:
					i = e.getMonth() + 1;
					break;
				case 2:
					i = e.getDate();
					break;
				case 3:
					i = 0 == e.getDay() ? "7" : e.getDay();
					break;
				case 4:
					i = e.getHours();
					break;
				case 5:
					i = e.getMinutes();
					break;
				case 6:
					i = e.getSeconds();
					break;
				case 7:
					i = GloableData.getInstance().systemTime.sysTimestramp
				}
				return i
			}, e.prototype.goOnSystemEven = function() {
				if (5 == this.type && this.bwaitSysTime) {
					switch (this.bwaitSysTime = !1, this.op) {
					case 0:
						this.valueA = this.valueB;
						break;
					case 1:
						this.valueA += this.valueB;
						break;
					case 2:
						this.valueA -= this.valueB;
						break;
					case 3:
						this.valueA *= this.valueB;
						break;
					case 4:
						this.valueA /= this.valueB;
						break;
					case 5:
						this.valueA %= this.valueB
					}
					this.userindex ? (GloableData.getInstance().dGameSystem.varsEx.setVar(GloableData.getInstance().dGameSystem.varsEx.getVar(this.id) - 1, this.valueA), GloableData.getInstance().dGameSystem.varsEx.saveExData()) : (GloableData.getInstance().dGameSystem.varsEx.setVar(this.id, this.valueA), GloableData.getInstance().dGameSystem.varsEx.saveExData()), this.finish()
				}
			}, e
		}(OrgEventBase);
	t.VarExEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), org_event;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this, e, i) || this;
				return a.time = 0, a.code = 210, a.init(), a
			}
			return __extends(e, t), e.prototype.init = function() {
				this.time = parseInt(this.data.Argv[0]), this.time >= 30 && (UIManager.getInstance().message[UIManager.getInstance().msgIndex].isRoll || UIManager.getInstance().message[UIManager.getInstance().msgIndex].hide()), this.time = Math.floor(this.time), this.time < 1 && (this.time = 1)
			}, e.prototype.finish = function() {
				t.prototype.finish.call(this)
			}, e
		}(OrgEventBase);
	t.WaitEvent = e
}(org_event || (org_event = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), MainEventLine = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.parentLine = null, e.pos = -1, e.isEnd = !1, e.endLogic = null, e.indentStack = [], e.subStory = null, e.isCui = !1, e.storyName = "", e.storyId = 0, e.depth = 0, e.arrDepth = 0, e.lastIndex = 0, e.isMustSave = !1, e.currentEvent = null, e.isLoad = !1, e.isPause = !1, e.isCheck = !1, e._eventRunFinish = !1, e.append = [], e.runNumber = 0, e.wait = !1, e.saveData = function(t) {
			if (GloableData.getInstance().dGameSystem.rwFile.isCloud) {
				t.Depth = GloableData.getInstance().allDepth, GloableData.getInstance().allDepth += 1, t.StoryId = this.storyId;
				for (var e = new Array, i = 0; i < this.indentStack.length; ++i) e.push(this.indentStack[i]);
				var a = void 0;
				a = this.pos >= 0 ? this.story[this.pos].Code : this.story[0].Code, this.pos < this.story.length && (100 == a || 101 == a || 1010 == a || 1011 == a || 204 == a) ? (t.Pos = 0 != this.pos ? this.pos - 1 : 0, e.length > 0 && e.pop()) : t.Pos = this.pos, null != this.subStory ? (t.IsHaveSub = 1, t.SubStory = new data.DLogic, this.subStory.saveData(t.SubStory)) : t.IsHaveSub = 0, t.IndentStack = new Object, t.IndentStack.length = e.length;
				for (var i = 0; i < e.length; ++i) t.IndentStack[i] = e[i].saveData()
			} else {
				var n = this.storyId + "|";
				t.push(n);
				for (var e = new Array, i = 0; i < this.indentStack.length; ++i) e.push(this.indentStack[i]);
				var a = void 0;
				if (a = this.pos >= 0 ? this.story[this.pos].Code : this.story[0].Code, this.pos < this.story.length && (100 == a || 101 == a || 1010 == a || 1011 == a || 204 == a)) {
					var s = void 0;
					s = 0 != this.pos ? 218 == this.story[this.pos - 1].Code && 0 == parseInt(this.story[this.pos - 1].Argv[0]) ? this.pos + "|" : this.pos - 1 + "|" : "0|", t.push(s), e.length > 0
				} else {
					var s = void 0;
					s = this.isMustSave ? this.pos + 1 + "|" : this.pos + "|", t.push(s)
				}
				if (this.pos < this.story.length && (100 == a || 101 == a || 1010 == a || 204 == a)) {
					var s = (0 != this.pos ? this.pos - 1 : 0) + "|";
					t.push(s), e.length > 0 && e.pop()
				} else {
					var s = this.pos + "|";
					t.push(s)
				}
				if (null != this.subStory) {
					var o = "1|";
					t.push(o), this.subStory.saveData(t)
				} else {
					var o = "0|";
					t.push(o)
				}
				var r = e.length + "|";
				t.push(r);
				for (var i = 0; i < e.length; ++i) e[i].saveData(t)
			}
		}, e.runKey = setTimeout(e.check.bind(e), GloableStaticData.GAME_RUN_TIME), e
	}
	return __extends(e, t), e.prototype.pinCurrentChapter = function() {
		this.append.push([this._id, this.pos])
	}, e.prototype.initCheck = function() {}, Object.defineProperty(e.prototype, "eventRunFinish", {
		get: function() {
			return this._eventRunFinish
		},
		set: function(t) {
			this._eventRunFinish = t, this._eventRunFinish && (this.runKey = setTimeout(this.check.bind(this), GloableStaticData.GAME_RUN_TIME))
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.check = function() {
		if (clearTimeout(this.runKey), !this.isPause && this.eventRunFinish) {
			for (;;) {
				if (this.isPause || !this.eventRunFinish) break;
				this.eventFinish()
			}
			UIManager.getInstance().refreshGameCompent(), UIManager.getInstance().onTouchClick = !1
		}
	}, e.prototype.eventFinish = function() {
		if (!this.isPause) {
			if (null != this.subStory && this.subStory.isFinish() && (this.subStory = null), null != this.subStory && !this.subStory.isFinish()) return void this.subStory.eventFinish();
			this.runNumber++, this.pos += 1, this.runEvent()
		}
	}, e.prototype.snap = function(t) {
		if (!this.story) return "";
		var e = GloableData.getInstance().allDepth++,
			i = 0;
		i = this.pos;
		var a = {};
		a.length = this.indentStack.length;
		for (var n in this.indentStack) a[n] = this.indentStack[n].saveData();
		var s = {
			Depth: e,
			StoryId: this.storyId,
			Pos: i,
			IsHaveSub: this.subStory && null != this.subStory ? 1 : 0,
			SubStory: this.subStory && null != this.subStory ? this.subStory.snap() : null,
			IndentStack: a
		};
		return s
	}, e.prototype.getStoryNotSaveReadPos = function(t) {
		return t >= this.story.length ? this.story.length : 218 != this.story.events[t].Code ? t : (t += 1, this.getStoryNotSaveReadPos(t))
	}, e.prototype.loadStoryComplete = function(t) {
		var i = Math.floor(t.Pos);
		0 > i && (i = 0), i = this.getStoryNotSaveReadPos(i), this.jumpToIndex(i + 1);
		for (var a = 0; a < t.IndentStack.length; a++) {
			var n = t.IndentStack[a],
				s = n.split("|"),
				o = parseInt(s[0]);
			switch (o) {
			case 0:
				s.shift();
				var r = new org_event.IFInfo(0);
				r.loadData(s, 0), this.indentStack.push(r);
				break;
			case 1:
				s.shift();
				var h = new org_event.LoopInfo(0, 0);
				h.loadData(s, 0), this.indentStack.push(h);
				break;
			case 2:
				s.shift();
				var l = new BranchInfo(0, null);
				l.loadData(s, 0), this.indentStack.push(l)
			}
		}
		if (0 != t.IsHaveSub && t.SubStory) 1 == t.IsHaveSub && t.SubStory && (this.pause(), this.subStory = new e, this.subStory && (this.subStory.parentLine = this), this.subStory.depth = this.depth + 1, this.subStory.restore(t.SubStory));
		else {
			if (this.pos >= this.story.length) return void this.runEvent();
			if (251 == this.story.events[this.pos].Code) {
				if (this.pos > 0 && 218 == this.story.events[this.pos - 1].Code && 0 == this.story.events[this.pos - 1].Argv[0]) return void this.runEvent();
				this.eventFinish()
			} else this.runEvent()
		}
	}, e.prototype.restore = function(t) {
		var e = Math.floor(t.StoryId);
		this.jumpStoryCallBack(e, this.loadStoryComplete, t, this)
	}, e.prototype.substoryRunEvent = function() {}, e.prototype.runEvent = function() {
		this.story && this.pos < this.story.length ? this.makeEvent() : this.storyEnd()
	}, e.prototype.isFinish = function() {
		return this.isEnd
	}, e.prototype.auxFetchBranchinfo = function() {
		for (var t = null;;) {
			if (this.indentStack.length <= 0) {
				t = null;
				break
			}
			if (t = this.indentStack.pop(), null == t || t instanceof BranchInfo) break
		}
		return this.endLogic = t, t
	}, e.prototype.auxFetchIfinfo = function() {
		for (var t = null;;) {
			if (this.indentStack.length <= 0) {
				t = null;
				break
			}
			if (t = this.indentStack.pop(), null == t || t instanceof org_event.IFInfo) break
		}
		return this.endLogic = t, t
	}, e.prototype.auxFetchLoopInfo = function() {
		for (var t = null;;) {
			if (this.indentStack.length <= 0) {
				t = null;
				break
			}
			if (t = this.indentStack.pop(), null == t || t instanceof org_event.LoopInfo) break
		}
		return this.endLogic = t, t
	}, e.prototype.playWmodTypeVoice = function(t, e) {
		void 0 === e && (e = ""), t && ("wmod" == GloableData.getInstance().wmodUseType ? this.playWmodVoice(t) : "group" == GloableData.getInstance().wmodUseType && this.playGourpBin(t, e))
	}, e.prototype.playGourpBin = function(t, e) {
		if (GloableData.getInstance().wmodGroup) {
			var i = "";
			e || (e = "旁白");
			var a = GloableData.getInstance().wmodStoryGroup.getValue(e);
			if (a) {
				var n = a.eventList.getValue(t);
				if (n) {
					var s = GloableData.getInstance().wmodGroup.getValue(e);
					if (s) {
						var o = GloableData.getInstance().wmodList.getValue(s);
						if (o) {
							var r = o.resList.getValue(n.name.toLowerCase());
							i = r.url, 0 == r.isUpDone && (r.isUpDone = 1, OrgWeb.getInstance().upTrafficFileNum(r.fileSize, 1, GloableData.getInstance().groupID, s)), mgr.AudioMgr.instance.play(audio.ChannelEnum.vo, i, 100)
						}
					}
				}
			}
			GloableData.getInstance().wmodPlayUrl = i
		}
	}, e.prototype.playWmodVoice = function(t) {
		var e = "";
		if (GloableData.getInstance().wmodStory) {
			var i = GloableData.getInstance().wmodStory.eventList.getValue(t);
			if (i) {
				var a = GloableData.getInstance().wmodList.fristValue();
				e = a.resList.getValue(i.name.toLowerCase()).url, mgr.AudioMgr.instance.play(audio.ChannelEnum.vo, e, 100)
			}
		}
		GloableData.getInstance().wmodPlayUrl = e
	}, e.prototype.makeEvent = function(t) {
		if (void 0 === t && (t = null), this.currentShowEvent && (this.currentShowEvent = null), null !== t) this.currentEvent = t;
		else {
			var e = this.story.events[this.pos];
			this.currentLinks = e.links, this.currentEvent = this.story.events[this.pos]
		}
		switch (GloableData.preloader && GloableData.preloader.jpHandler(this.pos), this.eventRunFinish = !1, this.currentEvent.Code) {
		case 100:
			this.currentShowEvent = new org_event.TextEvent(this.currentEvent, this);
			var i = this.currentShowEvent.data.Argv[18],
				a = this.currentShowEvent.data.Argv[0];
			return this.playWmodTypeVoice(i, a), UIManager.getInstance().textLifeLineLayer.visible = !0, void(1 == UIManager.getInstance().isShowTextStyle ? UIManager.getInstance().textLifeLine.updateItem(this.currentShowEvent, this) : (UIManager.getInstance().msgIndex = this.currentShowEvent.msgIndex, UIManager.getInstance().message[this.currentShowEvent.msgIndex].loadTextResource(this.currentShowEvent)));
		case 101:
			return EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LONG_DOWN_CANCEL_BY_BRANCH)), this.currentShowEvent = new org_event.TextDifEvent(this.currentEvent, this), void UIManager.getInstance().textDif.showDifUI(this.currentShowEvent);
		case 1010:
			return EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LONG_DOWN_CANCEL_BY_BRANCH)), this.currentShowEvent = new org_event.TextDifEXEvent(this.currentEvent, this), void(this.currentShowEvent.choiceShowNum > 0 ? (this.currentShowEvent.advancedMode || (this.currentShowEvent.code = 101), UIManager.getInstance().textDif.showDifUI(this.currentShowEvent)) : this.currentShowEvent.finish(GloableStaticData.NO_OPTION));
		case 1011:
			EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LONG_DOWN_CANCEL_BY_BRANCH));
			var n = new org_event.TextDifEX2Event(this.currentEvent, this);
			return void(n.choiceShowNum > 0 ? UIManager.getInstance().textDif.showDifUI(n) : n.finish(GloableStaticData.NO_OPTION));
		case 102:
			return void(this.currentShowEvent = new org_event.TextEndEvent(this.currentEvent, this));
		case 103:
			return void(this.currentShowEvent = new org_event.AutoPlayEvent(this.currentEvent, this));
		case 104:
			return void(this.currentShowEvent = new org_event.QuickPlayEvent(this.currentEvent, this));
		case 107:
			return void(this.currentShowEvent = new org_event.NotesEvent(this.currentEvent, this));
		case 108:
			return void(this.currentShowEvent = new org_event.TextChoiceEvent(this.currentEvent, this));
		case 109:
			return void(this.currentShowEvent = new org_event.DisposeTextEvent(this.currentEvent, this));
		case 112:
			return this.currentShowEvent = new org_event.DFloatButtonEvent(this.currentEvent, this), this.currentShowEvent.isShow ? UIManager.getInstance().sfloatLayer.showFloatUI() : UIManager.getInstance().sfloatLayer.hideFloatUI(), void this.currentShowEvent.finish();
		case 150:
			return this.currentShowEvent = new org_event.RefreshUIEvent(this.currentEvent, this), UIManager.getInstance().gameAdvanceUILayer.refreshUI(), UIManager.getInstance().sfloatLayer.refreshUI(), void this.currentShowEvent.finish();
		case 151:
			return this.currentShowEvent = new org_event.BackGameEvent(this.currentEvent, this), 1 == SFloatButtonUI.floatStatus && UIManager.getInstance().sfloatLayer.showFloatUI(), this.killSelfEventLine(), GloableData.getInstance().CUIFromIndex = -1, view.SCustomUI.F_Index = -1, void UIManager.getInstance().closeAllView(!0);
		case 200:
			return void(this.currentShowEvent = new org_event.IFEvent(this.currentEvent, this));
		case 201:
			return void(this.currentShowEvent = new org_event.IFEndEvent(this.currentEvent, this));
		case 202:
			return void(this.currentShowEvent = new org_event.LoopEvent(this.currentEvent, this));
		case 203:
			return void(this.currentShowEvent = new org_event.LoopAboveStartEvent(this.currentEvent, this));
		case 204:
			return EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LONG_DOWN_CANCEL_BY_BRANCH)), this.currentShowEvent = new org_event.ButtonDifEvent(this.currentEvent, this), void UIManager.getInstance().textDif.updatePicChoice(this.currentShowEvent);
		case 205:
			return void(this.currentShowEvent = new org_event.ButtonDifEndEvent(this.currentEvent, this));
		case 206:
			return EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LONG_DOWN_CANCEL_BY_BRANCH)), void(this.currentShowEvent = new org_event.JumpStoryEvent(this.currentEvent, this));
		case 207:
			return void(this.currentShowEvent = new org_event.VarEvent(this.currentEvent, this));
		case 208:
			return void this.gameOver();
		case 209:
			return void(this.currentShowEvent = new org_event.LoopBreakEvent(this.currentEvent, this));
		case 210:
			this.currentShowEvent = new org_event.WaitEvent(this.currentEvent, this), TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_WAITE_ID);
			var s = new GameTimeData;
			return s.delay = this.currentShowEvent.time * GloableStaticData.GAME_RUN_TIME, s.type = 2, s.repeatCount = 1, s.thisArg = this.currentShowEvent, s.callBack = this.currentShowEvent.finish, s.id = GloableStaticData.TIME_WAITE_ID, s.runDelay = 0, void TimeManager.getInstance().addTime(s);
		case 211:
			return void(this.currentShowEvent = new org_event.IfChoiceEvent(this.currentEvent, this));
		case 212:
			return void(this.currentShowEvent = new org_event.ButtonDifChooseEvent(this.currentEvent, this));
		case 213:
			return void(this.currentShowEvent = new org_event.VarExEvent(this.currentEvent, this));
		case 214:
			if (UIManager.getInstance().cancleLongDown(), this.currentShowEvent = new org_event.CallMenuEvent(this.currentEvent, this), view.SCustomUI.getInstance().needShowSendFlower) {
				view.SCustomUI.getInstance().needShowSendFlower = !1;
				var o = GetQueryString("isCgMenu");
				o = o ? "false" != o && 0 != o : !0, !GloableData.getInstance().gameInfo.isPc && o && (OrgWeb.getInstance().showPaypanel(), this !== GloableData.getInstance().currentLine && this.killSelfEventLine(), view.SCustomUI.getInstance().showUI(view.SCustomUI.F_Index))
			}
			return;
		case 215:
			return void(this.currentShowEvent = new org_event.StringEvent(this.currentEvent, this));
		case 216:
			return void(this.currentShowEvent = new org_event.NewAdvDataEvent(this.currentEvent, this));
		case 217:
			return void(this.currentShowEvent = new org_event.IFExEvent(this.currentEvent, this));
		case 218:
			return void(this.currentShowEvent = new org_event.MustSaveReadEvent(this.currentEvent, this));
		case 219:
			return this.currentShowEvent = new org_event.LifeLineEvent(this.currentEvent, this), 1 == UIManager.getInstance().isShowTextStyle && (UIManager.getInstance().createLifeLine(this.currentShowEvent), UIManager.getInstance().hideAllTextMessage(), this.currentShowEvent.finish()), void(0 == UIManager.getInstance().isShowTextStyle && (UIManager.getInstance().disposeLifeLine(), this.currentShowEvent.finish()));
		case 220:
			return void(this.currentShowEvent = new org_event.ChatPatternEvent(this.currentEvent, this));
		case 221:
			return void(this.currentShowEvent = new org_event.ChatSentEvent(this.currentEvent, this));
		case 251:
			return void(this.currentShowEvent = new org_event.CallSubStoryEvent(this.currentEvent, this));
		case 252:
			return void(this.currentShowEvent = new org_event.HPLockEvent(this.currentEvent, this));
		case 253:
			return UIManager.getInstance().orgWebFreeLayer.getFreeTime(), void(this.currentShowEvent = new org_event.StoryLockEvent(this.currentEvent, this));
		case 3001:
			return void(this.currentShowEvent = new org_event.StringExEvent(this.currentEvent, this));
		case 301:
			return this.currentShowEvent = new org_event.CWeatherEvent(this.currentEvent, this), UIManager.getInstance().effectsLayer.startWeather(this.currentShowEvent.type), void this.currentShowEvent.finish();
		case 302:
			return TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_SHAKE_ID), this.currentShowEvent = new org_event.ShakeEvent(this.currentEvent, this), UIManager.getInstance().setShakeEvent(this.currentShowEvent), void this.currentShowEvent.finish();
		case 303:
			return this.currentShowEvent = new org_event.FlashEvent(this.currentEvent, this), UIManager.getInstance().effectsLayer.setFlash(this.currentShowEvent.time, this.currentShowEvent.color), void this.currentShowEvent.finish();
		case 307:
			return void(this.currentShowEvent = new org_event.BGMAddEvent(this.currentEvent, this));
		case 308:
			return void(this.currentShowEvent = new org_event.CGAddEvent(this.currentEvent, this));
		case 309:
			return void(this.currentShowEvent = new org_event.AddCollectEvent(this.currentEvent, this));
		case 400:
			return this.currentShowEvent = new org_event.ShowPicEvent(this.currentEvent, this), void UIManager.getInstance().backgroundLayer.addImage(this.currentShowEvent);
		case 401:
			return this.currentShowEvent = new org_event.DisposePicEvent(this.currentEvent, this), void UIManager.getInstance().backgroundLayer.hideImage(this.currentShowEvent);
		case 402:
			return this.currentShowEvent = new org_event.MovePicEvent(this.currentEvent, this), void UIManager.getInstance().backgroundLayer.moveImage(this.currentShowEvent);
		case 404:
			return this.currentShowEvent = new org_event.RotatePicEvent(this.currentEvent, this), void UIManager.getInstance().backgroundLayer.rotationImage(this.currentShowEvent);
		case 405:
			return void(this.currentShowEvent = new org_event.PreLoadPic(this.currentEvent, this));
		case 406:
			var r = "Graphics/" + this.currentEvent.Argv[1] + "x";
			if (GloableData.getInstance().hasFileItem(r)) {
				this.currentShowEvent = new org_event.ShowActPicEvent(this.currentEvent, this);
				var h = new actImage.ActionImageUI(this.currentShowEvent);
				h.initSelf(), UIManager.getInstance().backgroundLayer.addActImage(h)
			} else this.currentShowEvent = new org_event.ShowFrameImgEvent(this.currentEvent, this), this.currentShowEvent.showPicEvent ? UIManager.getInstance().backgroundLayer.addImage(this.currentShowEvent.showPicEvent) : this.eventRunFinish = !0;
			return;
		case 4061:
			"Graphics/" + this.currentEvent.Argv[1];
			return this.currentShowEvent = new org_event.ShowFrameImgEvent(this.currentEvent, this), void(this.currentShowEvent.showPicEvent ? UIManager.getInstance().backgroundLayer.addImage(this.currentShowEvent.showPicEvent) : this.eventRunFinish = !0);
		case 4062:
			var l = "Graphics/" + this.currentEvent.Argv[1];
			if (GloableData.getInstance().hasFileItem(l)) {
				this.currentShowEvent = new org_event.ShowOAF2Event(this.currentEvent, this);
				var c = new oaf2.ActionImageOaf(this.currentShowEvent);
				c.initSelf(), UIManager.getInstance().backgroundLayer.addOAF2ActImage(c)
			} else this.currentShowEvent = new org_event.ShowFrameImgEvent(this.currentEvent, this), this.currentShowEvent.showPicEvent ? UIManager.getInstance().backgroundLayer.addImage(this.currentShowEvent.showPicEvent) : this.eventRunFinish = !0;
			return;
		case 501:
			var g = new org_event.StartBGMEvent(this.currentEvent, this);
			return mgr.AudioMgr.instance.exe(this.currentEvent), void g.finish();
		case 502:
			var u = new org_event.StartSEEvent(this.currentEvent, this);
			return mgr.AudioMgr.instance.exe(this.currentEvent), void u.finish();
		case 503:
			var p = new org_event.StartVoiceEvent(this.currentEvent, this);
			return mgr.AudioMgr.instance.exe(this.currentEvent), void p.finish();
		case 504:
			var d = new org_event.StartBGSEvent(this.currentEvent, this);
			return mgr.AudioMgr.instance.exe(this.currentEvent), void d.finish();
		case 505:
			var m = new org_event.FadeBGMEvent(this.currentEvent, this);
			return mgr.AudioMgr.instance.exe(this.currentEvent), void m.finish();
		case 506:
			var v = new org_event.StopSEEvent(this.currentEvent, this);
			return mgr.AudioMgr.instance.exe(this.currentEvent), void v.finish();
		case 507:
			var f = new org_event.StopVoiceEvent(this.currentEvent, this);
			return mgr.AudioMgr.instance.exe(this.currentEvent), void f.finish();
		case 508:
			var I = new org_event.FadeBGSEvent(this.currentEvent, this);
			return mgr.AudioMgr.instance.exe(this.currentEvent), void I.finish();
		case 600:
			return this.currentShowEvent = new org_event.StartVideoEvent(this.currentEvent, this), ORGVideoMgr.video.isClear || ORGVideoMgr.video.clear(), void ORGVideoMgr.video.VedioManager.play(this.currentShowEvent);
		case 601:
			return this.currentShowEvent = new org_event.OperationVideoEvent(this.currentEvent, this), void ORGVideoMgr.video.VedioManager.controller(this.currentShowEvent);
		default:
			return this.eventRunFinish = !0, null
		}
	}, e.prototype.storyEnd = function(t) {
		if (void 0 === t && (t = !1), this.runNumber = 0, this === GloableData.getInstance().iMain) {
			if (this.killSelfEventLine(), SFloatButtonUI.floatStatus = 0, GloableData.getInstance().isCollect || mgr.AudioMgr.instance.stop(), TimeManager.getInstance().removeAll(), view.SCustomUI.F_Index = -1, GloableData.getInstance().iMain.pos = -1, UIManager.getInstance().dispose(), Laya.stage.addChild(UIManager.getInstance()), Laya.timer.clear(this, this.runEvent), GloableData.getInstance().isCollectSave || GloableData.getInstance().dGameSystem.initData(), GloableData.getInstance().gameInfo.isFirstHp = !0, GloableData.getInstance().clearMallButItemNumber(), GloableData.getInstance().isCollect) return GloableData.getInstance().isCollect = !1, void GloableData.getInstance().restoreCollectData();
			t || (GloableData.getInstance().gameMainData.System.SkipTitle ? GloableData.getInstance().iMain.jumpStoryCallBack(GloableData.getInstance().gameMainData.System.StartStoryId) : UIManager.getInstance().showView(new view.TitleUI, view.TitleUIMediator.NAME))
		} else this.killSelfEventLine(), this.parentLine && (this.parentLine.subStory && (this.parentLine.subStory = null), this.parentLine.storyId > 0 && (GloableData.getInstance().currentLine = this.parentLine), this.parentLine.resume())
	}, e.prototype.cleanRunKey = function() {
		clearTimeout(this.runKey)
	}, e.prototype.killSelfEventLine = function() {
		this.cleanRunKey(), this.subStory && (this.subStory.killSelfEventLine(), this.subStory = null), this.eventRunFinish = !1, this.isCheck = !1, this.runNumber = 0, this.story = null, this.isPause = !0, this.isEnd = !0, this.indentStack = [], this.endLogic = null, this.lastIndex = 0
	}, e.prototype.pause = function() {
		this.cleanRunKey(), this.isPause = !0, this.subStory && this.subStory.pause()
	}, e.prototype.resume = function() {
		if (this.subStory) return void this.subStory.resume();
		window.c = new data.DChapter(this.story), this.eventRunFinish = !1, this.isPause = !1;
		var t = 0;
		GloableData.getInstance().currentLine && GloableData.getInstance().currentLine.currentEvent && (t = GloableData.getInstance().currentLine.currentEvent.Code), GloableData.getInstance().autoPlay ? 253 === t || 200 === t || 252 === t ? this.runEvent() : 100 !== t && 221 !== t && 204 !== t && 101 !== t && 1010 !== t && 1011 !== t && this.eventFinish() : 253 === t || 200 === t || 252 === t ? this.runEvent() : 100 !== t && 221 !== t && 204 !== t && 101 !== t && 1010 !== t && 1011 !== t && this.eventFinish(), 100 == t && (UIManager.getInstance().currentTalkUI.visible || this.eventFinish()), this.remuseRunKey()
	}, e.prototype.gameOver = function(t) {
		void 0 === t && (t = !0), UIManager.getInstance().isSCUIShow = !1, view.SCustomUI.F_Index = -1, SFloatButtonUI.floatStatus = 0, GloableData.getInstance().iMain && GloableData.getInstance().iMain.killSelfEventLine(), GloableData.getInstance().currentLine && GloableData.getInstance().currentLine.killSelfEventLine(), TimeManager.getInstance().removeAll(), t && mgr.AudioMgr.instance.stop(), GloableData.getInstance().dGameSystem.initData(), UIManager.getInstance().dispose(), ORG.reloader(), GloableData.getInstance().iMain = new e, Laya.stage.addChild(UIManager.getInstance()), OrgWeb.getInstance().getIsUnaudited() && (UIManager.getInstance().unView = new view.UnauditedTextView, Laya.stage.addChild(UIManager.getInstance().unView)), GloableData.getInstance().gameInfo.isFirstHp = !0, GloableData.getInstance().clearMallButItemNumber(), t && (GloableData.getInstance().gameMainData.System.SkipTitle ? GloableData.getInstance().iMain.jumpStoryCallBack(GloableData.getInstance().gameMainData.System.StartStoryId) : UIManager.getInstance().showView(new view.TitleUI, view.TitleUIMediator.NAME))
	}, e.prototype.startStory = function(t) {
		this._id = t, this.story = null, TimeManager.getInstance().pauseTime();
		var e = GloableData.getInstance().gameMainData.getStory(t);
		e ? (this.subStory = null, this.storyName = e.Name, this.storyId = e.ID, this.story = e, window.c = new data.DChapter(this.story), this.pos = -1, this.indentStack.length = 0, this.isEnd = !1, this.isPause = !1, this.eventRunFinish = !1, this.remuseRunKey(), this.completeRun(t)) : EventCenter.addEventListener(GameEventConstant.LOAD_STORY_ITEM_COMPLETE, this, this.loadComplete)
	}, e.prototype.completeRunEvent = function(t) {
		GloableData.preloader && GloableData.preloader.jsHandler(t), TimeManager.getInstance().resumeTime(), "undefined" != typeof this.callBack && this.callBack ? (this.callBack.call(this.thisObject, this.callBackArgv), this.callBack = null) : this.eventFinish()
	}, e.prototype.completeRun = function(t) {
		if (t > 0 && (GloableData.getInstance().currentLine = this, "group" == GloableData.getInstance().wmodUseType)) {
			if (this.story.length > 0) {
				GloableData.getInstance().wmodStoryGroup || (GloableData.getInstance().wmodStoryGroup = new Dictionary);
				var e = (new Dictionary, this.story.events.concat());
				return void this.getWmodByEvents(e, t)
			}
			return void this.completeRunEvent(t)
		}
		this.completeRunEvent(t)
	}, e.prototype.callStory = function(t) {
		if (GloableData.getInstance().wmodUseType) {
			if ("wmod" == GloableData.getInstance().wmodUseType) {
				var e = "gamemod_" + t + ".bin",
					i = GloableData.getInstance().wmodList.fristValue();
				if (i) {
					var a = i.resList.getValue(e);
					if (a) return void this.startLoadWmod(a.url, t)
				}
				return void this.startStory(t)
			}
			"group" == GloableData.getInstance().wmodUseType
		}
		this.startStory(t)
	}, e.prototype.getWmodByEvents = function(t, e) {
		var i = this;
		if (t.length <= 0) return void this.completeRunEvent(e);
		var a = t.shift();
		if (a && 100 == a.Code) {
			var n = a.Argv[0];
			n || (n = "旁白");
			var s = GloableData.getInstance().wmodGroup.getValue(n);
			if (s) {
				var o = GloableData.getInstance().wmodList.getValue(s),
					r = "gamemod_" + e + ".bin";
				if (!GloableData.getInstance().wmodStoryGroup.getValue(n) && o && o.resList.getValue(r)) {
					var h = o.resList.getValue(r).url;
					return void ORG.loader.load(h, OHandler.create(this, function(a) {
						var s = new GameByte(a),
							o = new data.DWmodStory(s);
						GloableData.getInstance().wmodStoryGroup.add(n, o), i.getWmodByEvents(t, e)
					}), OHandler.create(this, null, null, !1), OLoader.BUFFER, 0, !1)
				}
			}
		}
		this.getWmodByEvents(t, e)
	}, e.prototype.startLoadWmod = function(t, e) {
		var i = this;
		ORG.loader.load(t, OHandler.create(this, function(t) {
			var a = new GameByte(t),
				n = new data.DWmodStory(a);
			GloableData.getInstance().wmodStory = n, i.startStory(e)
		}), OHandler.create(this, null, null, !1), OLoader.BUFFER, 0, !1)
	}, e.prototype.loadComplete = function(t) {
		t.ID == this._id && (EventCenter.removeEventListener(GameEventConstant.LOAD_STORY_ITEM_COMPLETE, this, this.loadComplete), this.subStory = null, this.storyName = t.Name, this.storyId = t.ID, this.story = t, window.c = new data.DChapter(this.story), this.pos = -1, this.indentStack.length = 0, this.isEnd = !1, this.isPause = !1, this.eventRunFinish = !1, this.remuseRunKey(), this.runNumber = 0, this.completeRun(t.ID))
	}, e.prototype.jumpStory = function(t, e) {
		void 0 === e && (e = 0), t instanceof Object ? (this.pos = -1, this.indentStack.length = 0, this.isEnd = !1, this.isPause = !1, this.story = t, window.c = new data.DChapter(this.story), this.eventRunFinish = !1, TimeManager.getInstance().resumeTime(), this.remuseRunKey(), this.eventFinish()) : this.callStory(t)
	}, e.prototype.jumpToIndex = function(t) {
		this.pos = t - 1, this.pos < 0 && (this.pos = 0), this.pos >= this.story.length && (this.isEnd = !0)
	}, e.prototype.remuseRunKey = function() {
		this.cleanRunKey(), this.runKey = setTimeout(this.check.bind(this), GloableStaticData.GAME_RUN_TIME)
	}, e.prototype.jumpStoryCallBack = function(t, e, i, a) {
		void 0 === e && (e = null), void 0 === i && (i = null), void 0 === a && (a = null), t instanceof Object ? (this.pos = -1, this.indentStack.length = 0, this.isEnd = !1, this.story = t, this.isPause = !1, this.eventRunFinish = !1, TimeManager.getInstance().resumeTime(), this.remuseRunKey(), this.eventFinish()) : (this.callBack = e, this.callBackArgv = i, this.thisObject = a, this.callStory(t))
	}, e.prototype.auxFetchLoopinfo = function() {
		for (var t = null;;) {
			if (this.indentStack.length <= 0) {
				t = null;
				break
			}
			if (t = this.indentStack.pop(), null == t || t instanceof org_event.LoopInfo) break
		}
		return this.endLogic = t, t
	}, e.prototype.endInter = function() {}, e.prototype.loadData = function(t) {
		function i() {
			var i = t[n + 1],
				a = parseInt(i);
			o.story[a] && 251 == o.story[a].Code && (a += 1), this.jumpToIndex(a);
			var s = t[n + 2],
				r = parseInt(s);
			0 != r && (this.subStory = new e, this.subStory.depth = o.depth + 1, this.subStory.loadData(t)), this.indentStack.length = 0;
			var h = 3 * o.arrDepth + 3;
			if (0 != this.arrDepth) {
				for (var l = h, c = 0; c < parseInt(this.arrDepth) - parseInt(this.depth); c++) {
					var g = l;
					l += 1;
					for (var u = 0; u < parseInt(t[g]); u++) l += 1, 0 == parseInt(t[l - 1]) ? l += 1 : 1 == parseInt(t[l - 1]) ? l += 2 : 2 == parseInt(t[l - 1]) && (l = l + parseInt(t[l]) + 2)
				}
				h = l
			}
			var p = parseInt(t[h]);
			h += 1;
			for (var c = 0; p > c; c++) {
				var d = t[h];
				h += 1;
				var m = parseInt(d);
				if (0 == m) {
					var v = new org_event.IFInfo(0);
					h = v.loadData(t, h), o.indentStack.push(v)
				} else if (1 == m) {
					var f = new org_event.LoopInfo(0, 0);
					h = f.loadData(t, h), o.indentStack.push(f)
				} else if (2 == m) {
					var I = new BranchInfo(0, null);
					h = I.loadData(t, h), o.indentStack.push(I)
				}
			}
		}
		for (var a = 0; a < t.length; ++a) if (0 == parseInt(t[a]) && (a + 1) % 3 == 0) {
			this.arrDepth = (a - 2) / 3;
			break
		}
		var n = 3 * this.depth,
			s = t[n + 0],
			o = (parseInt(s), this);
		this.jumpStoryCallBack(parseInt(s), function() {
			i()
		})
	}, e
}(OEventDispatcher), BranchInfo = function() {
	function t(t, e) {
		this.recordFig = 0, this.finishIndex = t, this.choiceIndex = e
	}
	return t.prototype.jump = function(t) {
		return this.choiceIndex[t]
	}, t.prototype.saveData = function(t) {
		var e = !0;
		if (e) {
			var i = "2|";
			i += this.choiceIndex.length + "|";
			for (var a = 0; a < this.choiceIndex.length; ++a) i += this.choiceIndex[a] + "|";
			return i += this.finishIndex + "|"
		}
		var n = "2|";
		t.push(n);
		var s = this.choiceIndex.length + "|";
		t.push(s);
		for (var a = 0; a < this.choiceIndex.length; ++a) {
			var o = this.choiceIndex[a] + "|";
			t.push(o)
		}
		var r = this.finishIndex + "|";
		t.push(r)
	}, t.prototype.loadData = function(t, e) {
		this.recordFig = e;
		var i = t[this.recordFig];
		this.recordFig += 1;
		var a = parseInt(i);
		this.choiceIndex = new Array(a);
		for (var n = 0; a > n; ++n) {
			var s = t[this.recordFig];
			this.recordFig += 1;
			var o = parseInt(s);
			this.choiceIndex[n] = o
		}
		var r = t[this.recordFig];
		this.recordFig += 1;
		var h = parseInt(r);
		return this.finishIndex = h, this.recordFig
	}, t
}(), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), LightFreeProxy = function(t) {
	function e() {
		var i = t.call(this, e.NAME) || this;
		return i.getStatusCallBack = null, i
	}
	return __extends(e, t), e.prototype.getLightFreeStatus = function(t) {
		void 0 === t && (t = null), this.getStatusCallBack = t;
		var e = HttpURL.Ajax_Url.GET_LIGHT_STATUS,
			i = {
				gindex: GloableData.getInstance().gameInfo.gIndex,
				token: OrgWeb.getInstance().getABoxToken()
			};
		AjaxManager.getInstance().sendGetAjaxJSONP(e, this.rcvLightStatus, this, null, null, i)
	}, e.prototype.rcvLightStatus = function(t) {
		if (1 == t.status) {
			if (1 == t.data.type) {
				var e = md5("" + t.data.expire_time + ("" + GloableData.getInstance().gameInfo.gIndex)),
					i = md5(OrgWeb.getInstance().getUid() + e);
				GloableData.getInstance().msg_free = t.data.head_msg, i == t.data.md5 ? (GloableData.getInstance().isFreeLimit = !0, GloableData.getInstance().isFreeTime = parseInt(t.data.expire_time)) : (GloableData.getInstance().isFreeLimit = !1, GloableData.getInstance().isFreeTime = 0)
			}
			3 == t.data.type && (GloableData.getInstance().isLightVIP = !0, GloableData.getInstance().msg_lightVip = t.data.head_msg), 2 == t.data.type && (GloableData.getInstance().isLightDay = !0, GloableData.getInstance().msg_lightDay = t.data.head_msg), this.getStatusCallBack && this.getStatusCallBack()
		}
	}, e.NAME = "LightFreeProxy", e
}(Proxy), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), MallProxy = function(t) {
	function e() {
		var i = t.call(this, e.NAME) || this;
		return i.sendTime = 0, EventCenter.addEventListener(HttpURL.Ajax_Url.GET_MALL_BUY_ITEM_ORDER, i, i.createOrderComplete), EventCenter.addEventListener(HttpURL.Ajax_Url.GET_MALL_ITEM_LIST_BY_USER, i, i.getItemListComplete), EventCenter.addEventListener(HttpURL.Ajax_Url.GET_MALL_ITEM_INFO_BY_ID, i, i.rcvItemInfo), EventCenter.addEventListener(HttpURL.Ajax_Url.GET_USER_FLOWER, i, i.rcvGameFlower), "undefined" != typeof window.pmode ? i.pmode = parseInt(window.pmode) : i.pmode = 0, i
	}
	return __extends(e, t), e.prototype.sendObj = function(t, e) {
		void 0 === e && (e = 1);
		var i;
		return "WEB" !== OrgWeb.getInstance().getOrgPlat() ? (i = "Wap", "ANDROID" == OrgWeb.getInstance().getOrgPlat() ? "undefined" != typeof window.org_box && (i = "App") : "IOS" == OrgWeb.getInstance().getOrgPlat() && (i = "iOS App")) : i = "Pc", "IOS" == OrgWeb.getInstance().getOrgPlat() ? {
			gindex: GloableData.getInstance().gameInfo.gIndex,
			goods_id: t,
			buy_num: e,
			plat_id: GloableData.getInstance().isORGnew ? 1 : 0,
			open_id: GloableData.getInstance().isORGnew ? window.commonPlayer.userInfos.open_id : "",
			uid: GloableData.getInstance().isORGnew ? encodeURIComponent(window.commonPlayer.userInfos.code) : window.commonPlayer ? window.commonPlayer.userInfos.uid : "",
			channel_id: GloableData.getInstance().isORGnew ? window.commonPlayer.channel_id : "",
			channel_type: GloableData.getInstance().isORGnew ? window.commonPlayer.channel_type : "",
			device: i,
			engine: "H5",
			pmode: this.pmode,
			token: OrgWeb.getInstance().getABoxToken(),
			ios_cur_ver: window.iOSinfo.iosVer
		} : {
			gindex: GloableData.getInstance().gameInfo.gIndex,
			goods_id: t,
			buy_num: e,
			plat_id: GloableData.getInstance().isORGnew ? 1 : 0,
			open_id: GloableData.getInstance().isORGnew ? window.commonPlayer.userInfos.open_id : "",
			uid: GloableData.getInstance().isORGnew ? encodeURIComponent(window.commonPlayer.userInfos.code) : window.commonPlayer ? window.commonPlayer.userInfos.uid : "",
			channel_id: GloableData.getInstance().isORGnew ? window.commonPlayer.channel_id : "",
			channel_type: GloableData.getInstance().isORGnew ? window.commonPlayer.channel_type : "",
			device: i,
			engine: "H5",
			pmode: this.pmode,
			token: OrgWeb.getInstance().getABoxToken()
		}
	}, e.prototype.sendCreateOrder = function(t, e, i) {
		if (void 0 === i && (i = "v1"), GloableData.getInstance().gameInfo.isPc) return void Tips.tip("工具预览不支持剧情锁。");
		var a;
		a = HttpURL.Ajax_Url.GET_MALL_BUY_ITEM_ORDER_V2;
		var n = this.sendObj(t, e);
		GloableData.getInstance().isORGnew ? (UIManager.getInstance().maskSprite.update("支付中，请稍后..."), AjaxManager.getInstance().sendGetAjaxJSONP(a, this.rcvOrderJSONP, this, this.rcvOrderError, this, n)) : window.commonPlayer.loginStatus ? (UIManager.getInstance().maskSprite.update("支付中，请稍后..."), AjaxManager.getInstance().sendGetAjaxJSONP(a, this.rcvOrderJSONP, this, this.rcvOrderError, this, n)) : window.commonPlayer.login.midLogin(function(t) {
			t && (UIManager.getInstance().maskSprite.update("支付中，请稍后..."), AjaxManager.getInstance().sendGetAjaxJSONP(a, this.rcvOrderJSONP, this, this.rcvOrderError, this, n))
		})
	}, e.prototype.rcvOrderError = function() {
		if (UIManager.getInstance().maskSprite.hide(), UIManager.getInstance().hasVeiw(view.GameMallMediator.NAME)) {
			var t = new HPLockErrorMessageView(null, GloableStaticData.BUY_ITEM_ERROR);
			UIManager.getInstance().showView(t, "HPLockErrorMessageView")
		}
	}, e.prototype.rcvOrderJSONP = function(t) {
		this.createOrderComplete({
			data: t
		}), console.log(JSON.stringify(t))
	}, e.prototype.createOrderComplete = function(t) {
		if (OrgWeb.getInstance().updateUserInfoCoin(), GloableData.getInstance().isORGnew) {
			if (1 == t.data.status) {
				var e = t.data.data,
					i = GloableData.getInstance().gameMallBin.getItemDataById(e.goods_id),
					a = {
						goods_name: i.itemName,
						price: i.itemPrice,
						uid: window.commonPlayer.userInfos.uid,
						code: window.commonPlayer.userInfos.code,
						game_id: parseInt(window.commonPlayer.userInfos.gindex),
						goods_id: e.goods_id,
						goods_num: e.buy_num,
						channel_id: parseInt(window.commonPlayer.channel_id),
						channel_type: window.commonPlayer.userInfos.channel_type,
						open_id: window.commonPlayer.userInfos.open_id,
						ext: window.commonPlayer.userInfos.open_id + "_" + t.data.data.order_id + "_" + this.pmode,
						device_id: "1",
						ip_addr: "111",
						isVrtical: GloableData.getInstance().gameInfo.gGameHeight > GloableData.getInstance().gameInfo.gGameWidth,
						third_sign: window.commonPlayer.userInfos.third_sign || ""
					};
				window.parent.postMessage(a, "*")
			} else if (1 !== t.data.status) {
				Tips.tip(t.data.msg), console.log(t.data.msg);
				var n = new FailMessageUI;
				n.update(t.data.msg), UIManager.getInstance().addChild(n), UIManager.getInstance().maskSprite.hide()
			}
		} else {
			if (1 == t.data.status) {
				var e = t.data.data;
				GloableData.getInstance().flowerMallHua -= parseInt(GloableData.getInstance().gameMallBin.getItemDataById(parseInt(e.goods_id)).itemPrice + ""), GloableData.getInstance().flowerMallHua < 0 && (GloableData.getInstance().flowerMallHua = 0);
				var s = GloableData.getInstance().getItemById(e.goods_id),
					o = e.buy_num;
				s && (o += s.max), this.userItem(e.goods_id, o), this.resultEvent && (this.resultEvent = null), this.resultEvent = new GameEvent(GameEventConstant.MALL_BUY_ITEM_RESULT, t.data.status), EventCenter.dispatchEvent(this.resultEvent), UIManager.getInstance().hasVeiw("GameMallMediator") || Tips.tip("解锁成功。", "#00FF00")
			} else {
				Tips.tip(t.data.msg), console.log(t.data.msg);
				var n = new FailMessageUI;
				n.update(t.data.msg), UIManager.getInstance().addChild(n)
			}
			UIManager.getInstance().maskSprite.hide(), UIManager.getInstance().hasVeiw("MallLockView") && UIManager.getInstance().closeView("MallLockView", !0)
		}
	}, e.prototype.userItem = function(t, e, i) {
		void 0 === i && (i = !0);
		var a = GloableData.getInstance().gameMallBin.getItemDataById(t);
		if (a && a.itemType == GloableStaticData.MALL_VAR_TYPE) {
			var n = GloableData.getInstance().getItemById(a.itemId);
			if (n && !a.isRepeat && n.count >= n.max) return
		}
		if (!a || 2 != a.itemStatus) if (a.itemType == GloableStaticData.MALL_STORY_TYPE) i ? GloableData.getInstance().addMallBuyItem(parseInt(a.itemId + ""), parseInt(e + ""), parseInt(e + "")) : GloableData.getInstance().userItem(parseInt(a.itemId + "")), this.updateEvent && (this.updateEvent = null), this.updateEvent = new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, a.itemId), EventCenter.dispatchEvent(this.updateEvent);
		else if (a.itemType == GloableStaticData.MALL_VAR_TYPE) {
			if (i) {
				var s = GloableData.getInstance().getItemById(parseInt(a.itemId + "")),
					o = e;
				s && (o += s.max), GloableData.getInstance().addMallBuyItem(parseInt(a.itemId + ""), parseInt(o + ""), parseInt(e + ""))
			}
			for (var r in a.itemAttributes) if (2 != a.itemStatus) {
				var h = a.itemAttributes[r],
					l = GloableData.getInstance().dGameSystem.vars.getVar(h.arrributeId),
					c = h.operator,
					g = h.varValue;
				switch (c) {
				case 0:
					l = g;
					break;
				case 1:
					l += g;
					break;
				case 2:
					l -= g;
					break;
				case 3:
					l *= g;
					break;
				case 4:
					l /= g;
					break;
				case 5:
					l %= g
				}
				GloableData.getInstance().dGameSystem.vars.setVar(h.arrributeId, l)
			}
			GloableData.getInstance().userItem(parseInt(a.itemId + "")), this.updateEvent && (this.updateEvent = null), this.updateEvent = new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, a.itemId), EventCenter.dispatchEvent(this.updateEvent)
		} else if (a.itemType == GloableStaticData.MALL_GIFT_TYPE) {
			i ? GloableData.getInstance().addMallBuyItem(parseInt(a.itemId + ""), parseInt(e + ""), parseInt(e + "")) : GloableData.getInstance().userItem(parseInt(a.itemId + "")), this.updateEvent && (this.updateEvent = null), this.updateEvent = new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, a.itemId), EventCenter.dispatchEvent(this.updateEvent);
			var u = a.itemAttribute.split(",");
			for (var p in u) {
				var d = 1;
				if (i) {
					var m = GloableData.getInstance().gameMallBin.getItemDataById(parseInt(u[p]));
					if (m.isRepeat) {
						var v = GloableData.getInstance().getItemById(parseInt(u[p]));
						v && (d += v.max)
					}
				}
				this.userItem(parseInt(u[p]), d, i)
			}
		}
	}, e.prototype.getUserBuyAllItem = function() {
		AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GET_MALL_ITEM_LIST_BY_USER, this.rcvItemListJSONP, this, this.rcvItemListError, this, this.sendObj(""))
	}, e.prototype.rcvItemListError = function() {
		if (UIManager.getInstance().hasVeiw(view.GameMallMediator.NAME)) {
			var t = new HPLockErrorMessageView(null, GloableStaticData.REP_MALL_DATA);
			UIManager.getInstance().showView(t, "HPLockErrorMessageView")
		}
	}, e.prototype.rcvItemListJSONP = function(t) {
		this.getItemListComplete({
			data: t
		})
	}, e.prototype.getItemListComplete = function(t) {
		if (1 == t.data.status) if (t.data.data.length > 0) {
			for (var e in GloableData.getInstance().mallBuyItem.keys()) {
				var i = GloableData.getInstance().mallBuyItem.keys()[e];
				this.isExistItem(t, i) || GloableData.getInstance().mallBuyItem.remove(i)
			}
			for (var a in t.data.data) {
				var n = t.data.data[a],
					s = (GloableData.getInstance().getItemById(n.goods_id), 0);
				GloableData.getInstance().addMallBuyItem(parseInt(n.goods_id), parseInt(n.using_num), s)
			}
		} else GloableData.getInstance().mallBuyItem.clean();
		else GloableData.getInstance().mallBuyItem.clean(), console.log(ErrorMessage.getInstance().getErrorStringByCode(t.data.status));
		EventCenter.dispatchEvent(new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, GloableStaticData.UPDATE_MALL_ALL_ITEM))
	}, e.prototype.isExistItem = function(t, e) {
		if (t.data && t.data.data && t.data.data.length && t.data.data.length > 0) for (var i = t.data.data, a = 0; a < i.length; a++) if (i[a].goods_id == e) return !0;
		return !1
	}, e.prototype.getBuyItemInfo = function(t) {
		var e = this;
		if (UIManager.getInstance().maskSprite.update("支付中，请稍后..."), this.sendTime >= 45e3) {
			clearTimeout(this.timeKey), this.sendTime = 0, UIManager.getInstance().maskSprite.hide();
			var i = new FailMessageUI;
			return i.update("支付超时，请刷新游戏。"), void UIManager.getInstance().addChild(i)
		}
		this.sendTime += 5e3, console.log("查询商品状态"), AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GET_MALL_ITEM_INFO_BY_ID, this.rcvItemInfoJSONP, this, null, this, this.sendObj(t)), this.timeKey = setTimeout(function(t) {
			e.getBuyItemInfo(t)
		}, 5e3, parseInt(t + ""))
	}, e.prototype.rcvItemInfoJSONP = function(t) {
		this.rcvItemInfo({
			data: t
		}), console.log(JSON.stringify(t))
	}, e.prototype.rcvItemInfo = function(t) {
		if (1 == t.data.status) {
			var e = t.data.data[0];
			if (e) {
				var i = GloableData.getInstance().getItemById(e.goods_id);
				i && e.using_num !== i.max ? (UIManager.getInstance().maskSprite.hide(), this.userItem(e.goods_id, e.using_num), this.resultEvent && (this.resultEvent = null), this.resultEvent = new GameEvent(GameEventConstant.MALL_BUY_ITEM_RESULT, 1), EventCenter.dispatchEvent(this.updateEvent), this.updateEvent && (this.updateEvent = null), this.updateEvent = new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, e.itemId), EventCenter.dispatchEvent(this.updateEvent), clearTimeout(this.timeKey), UIManager.getInstance().hasVeiw("GameMallMediator") || Tips.tip("解锁成功。", "#00FF00"), UIManager.getInstance().hasVeiw("MallLockView") && UIManager.getInstance().closeView("MallLockView", !0)) : i || (this.userItem(e.goods_id, e.using_num), this.resultEvent && (this.resultEvent = null), this.resultEvent = new GameEvent(GameEventConstant.MALL_BUY_ITEM_RESULT, 1), EventCenter.dispatchEvent(this.updateEvent), this.updateEvent && (this.updateEvent = null), this.updateEvent = new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, e.goods_id), EventCenter.dispatchEvent(this.updateEvent), clearTimeout(this.timeKey), UIManager.getInstance().maskSprite.hide(), UIManager.getInstance().hasVeiw("GameMallMediator") || Tips.tip("解锁成功。", "#00FF00"), UIManager.getInstance().hasVeiw("MallLockView") && UIManager.getInstance().closeView("MallLockView", !0))
			}
		} else {
			UIManager.getInstance().maskSprite.hide(), Tips.tip(t.data.msg);
			var a = new FailMessageUI;
			a.update(t.data.msg), UIManager.getInstance().addChild(a), console.log(ErrorMessage.getInstance().getErrorStringByCode(t.data.status))
		}
	}, e.prototype.getGameFlower = function() {
		GloableData.getInstance().isORGnew || AjaxManager.getInstance().sendGetAjaxJSONP(HttpURL.Ajax_Url.GET_USER_FLOWER, this.rcvGameFlowerJSONP, this, null, this, this.sendObj(""))
	}, e.prototype.rcvGameFlowerJSONP = function(t) {
		this.rcvGameFlower({
			data: t
		}), console.log(JSON.stringify(t))
	}, e.prototype.rcvGameFlower = function(t) {
		if (1 == t.data.status) try {
			GloableData.getInstance().flowerMallHua = isNaN(Math.floor(t.data.data.coin_count / 100)) ? 0 : Math.floor(t.data.data.coin_count / 100), this.updateEvent && (this.updateEvent = null), this.updateEvent = new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, GloableStaticData.UPDATE_MALL_FLOWER), EventCenter.dispatchEvent(this.updateEvent)
		} catch (e) {
			console.error("接口获取新版商城鲜花数错误！"), console.error(e)
		}
	}, e.NAME = "", e
}(Proxy), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), View = laya.ui.View, Dialog = laya.ui.Dialog, ui;
!
function(t) {
	var e;
	!
	function(e) {
		var i = function(e) {
				function i() {
					return e.call(this) || this
				}
				return __extends(i, e), i.prototype.createChildren = function() {
					e.prototype.createChildren.call(this), this.createView(t.test.TestPageUI.uiView)
				}, i.uiView = {
					type: "View",
					child: [{
						props: {
							x: 0,
							y: 0,
							skin: "comp/bg.png",
							sizeGrid: "30,4,4,4",
							width: 600,
							height: 400
						},
						type: "Image"
					}, {
						props: {
							x: 41,
							y: 56,
							skin: "comp/button.png",
							label: "点我赋值",
							width: 150,
							height: 37,
							sizeGrid: "4,4,4,4",
							"var": "btn"
						},
						type: "Button"
					}, {
						props: {
							x: 401,
							y: 56,
							skin: "comp/clip_num.png",
							clipX: 10,
							"var": "clip"
						},
						type: "Clip"
					}, {
						props: {
							x: 220,
							y: 143,
							skin: "comp/combobox.png",
							labels: "select1,select2,selecte3",
							selectedIndex: 1,
							sizeGrid: "4,20,4,4",
							width: 200,
							height: 23,
							"var": "combobox"
						},
						type: "ComboBox"
					}, {
						props: {
							x: 220,
							y: 96,
							skin: "comp/tab.png",
							labels: "tab1,tab2,tab3",
							"var": "tab"
						},
						type: "Tab"
					}, {
						props: {
							x: 259,
							y: 223,
							skin: "comp/vscroll.png",
							height: 150
						},
						type: "VScrollBar"
					}, {
						props: {
							x: 224,
							y: 223,
							skin: "comp/vslider.png",
							height: 150
						},
						type: "VSlider"
					}, {
						type: "List",
						child: [{
							type: "Box",
							child: [{
								props: {
									skin: "comp/label.png",
									text: "this is a list",
									x: 26,
									y: 5,
									width: 78,
									height: 20,
									fontSize: 14,
									name: "label"
								},
								type: "Label"
							}, {
								props: {
									x: 0,
									y: 2,
									skin: "comp/clip_num.png",
									clipX: 10,
									name: "clip"
								},
								type: "Clip"
							}],
							props: {
								name: "render",
								x: 0,
								y: 0,
								width: 112,
								height: 30
							}
						}],
						props: {
							x: 452,
							y: 68,
							width: 128,
							height: 299,
							vScrollBarSkin: "comp/vscroll.png",
							repeatX: 1,
							"var": "list"
						}
					}, {
						props: {
							x: 563,
							y: 4,
							skin: "comp/btn_close.png",
							name: "close"
						},
						type: "Button"
					}, {
						props: {
							x: 41,
							y: 112,
							skin: "comp/button.png",
							label: "点我赋值",
							width: 150,
							height: 66,
							sizeGrid: "4,4,4,4",
							labelSize: 30,
							labelBold: !0,
							"var": "btn2"
						},
						type: "Button"
					}, {
						props: {
							x: 220,
							y: 188,
							skin: "comp/checkbox.png",
							label: "checkBox1",
							"var": "check"
						},
						type: "CheckBox"
					}, {
						props: {
							x: 220,
							y: 61,
							skin: "comp/radiogroup.png",
							labels: "radio1,radio2,radio3",
							"var": "radio"
						},
						type: "RadioGroup"
					}, {
						type: "Panel",
						child: [{
							props: {
								skin: "comp/image.png"
							},
							type: "Image"
						}],
						props: {
							x: 299,
							y: 223,
							width: 127,
							height: 150,
							vScrollBarSkin: "comp/vscroll.png"
						}
					}, {
						props: {
							x: 326,
							y: 188,
							skin: "comp/checkbox.png",
							label: "checkBox2",
							labelColors: "#ff0000"
						},
						type: "CheckBox"
					}, {
						type: "Box",
						child: [{
							props: {
								y: 70,
								skin: "comp/progress.png",
								width: 150,
								height: 14,
								sizeGrid: "4,4,4,4",
								name: "progress"
							},
							type: "ProgressBar"
						}, {
							props: {
								y: 103,
								skin: "comp/label.png",
								text: "This is a Label",
								width: 137,
								height: 26,
								fontSize: 20,
								name: "label"
							},
							type: "Label"
						}, {
							props: {
								y: 148,
								skin: "comp/textinput.png",
								text: "textinput",
								width: 150,
								name: "input"
							},
							type: "TextInput"
						}, {
							props: {
								skin: "comp/hslider.png",
								width: 150,
								name: "slider"
							},
							type: "HSlider"
						}, {
							props: {
								y: 34,
								skin: "comp/hscroll.png",
								width: 150,
								name: "scroll"
							},
							type: "HScrollBar"
						}],
						props: {
							x: 41,
							y: 197,
							"var": "box"
						}
					}],
					props: {
						width: 600,
						height: 400
					}
				}, i
			}(View);
		e.TestPageUI = i
	}(e = t.test || (t.test = {}))
}(ui || (ui = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), Annular = function(t) {
	function e(e, i, a, n, s) {
		var o = t.call(this) || this;
		return o.centerPoint = {
			x: 0,
			y: 0
		}, o.radius = 0, o.radius2 = 0, o.distance = 0, o.color = 0, o.spriteList = [], o.centerPoint.x = e, o.centerPoint.y = i, o.radius = a, o.radius2 = n, o.distance = n - a, o.color = s, o.createMaskRound(), o
	}
	return __extends(e, t), e.prototype.createMaskRound = function() {
		var t = new OSprite;
		t.x = this.centerPoint.x, t.y = this.centerPoint.y, this.addChild(t);
		var e = new OSprite;
		t.addChild(e), this.spriteList.push(e);
		var i = new OSprite;
		i.graphics.drawCircle(this.radius2, this.radius2, this.radius2, this.color, this.color, 1), i.size(this.radius2, this.radius2), e.addChild(i), t.pivotX = i.width / 2, t.pivotY = i.height / 2, e.pivotX = i.width / 2, e.pivotY = i.height / 2, t.x += t.pivotX, t.y += t.pivotY, e.x += e.pivotX, e.y += e.pivotY;
		var a = new OSprite;
		a.graphics.drawRect(0, 0, i.width / 2, i.height, "#00FF00", "#00FF00", 1), e.addChild(a), e.size(this.radius2 / 2, this.radius2), t.width = e.width, t.height = e.height;
		var n = new OSprite;
		n.setBounds(new laya.maths.Rectangle(t.width / 2, 0, t.width / 2, t.height)), t.mask = n, e.x = e.width / 2, e.y = e.height / 2, e.rotation = -180;
		var s = new OSprite;
		s.x = this.centerPoint.x, s.y = this.centerPoint.y, this.addChild(s);
		var o = new OSprite;
		s.addChild(o), this.spriteList.push(o), o.rotation = -180;
		var r = new OSprite;
		r.graphics.drawCircle(this.radius2, this.radius2, this.radius2, this.color, this.color, 1), r.size(this.radius2, this.radius2), o.addChild(r), s.pivotX = r.width / 2, s.pivotY = r.height / 2, o.pivotX = r.width / 2, o.pivotY = r.height / 2, s.x += s.pivotX, s.y += s.pivotY, o.x += o.pivotX, o.y += o.pivotY;
		var h = new OSprite;
		h.graphics.drawRect(r.width / 2, 0, r.width / 2, r.height, "#00FF00", "#00FF00", 1), o.addChild(h), o.size(r.width, r.height), s.width = o.width, s.height = o.height;
		var l = new OSprite;
		l.setBounds(new laya.maths.Rectangle(0, 0, s.width / 2, s.height)), s.mask = l, o.x = o.width / 2, o.y = o.height / 2;
		var c = new OSprite;
		c.x = this.centerPoint.x, c.y = this.centerPoint.y, c.graphics.drawCircle(this.radius2, this.radius2, this.radius2, "#999999", "#999999", 1), c.size(this.radius2, this.radius2), this.addChild(c), c.pivotX = c.width / 2, c.pivotY = c.height / 2, c.x += c.pivotX, c.y += c.pivotY;
		var g = new OSprite;
		g.x = this.centerPoint.x, g.y = this.centerPoint.y, g.graphics.drawCircle(this.radius, this.radius, this.radius, "#999999", "#999999", 1), g.size(this.radius, this.radius), this.addChild(g), g.pivotX = g.width / 2, g.pivotY = g.width / 2, g.x += c.pivotX, g.y += c.pivotY
	}, e.prototype.setPercent = function(t) {
		0 >= t || t > 100 || (50 >= t ? this.spriteList[0].rotation += 3.6 * t : (this.spriteList[0].rotation += 180, this.spriteList[1].rotation += 3.6 * (t - 50)))
	}, e.prototype.setPercentWithAnimation = function(t, e) {
		if (!(0 >= t || t > 100)) {
			var i = e / 360;
			if (50 >= t) {
				var a = 3.6 * t;
				laya.utils.Tween.to(this.spriteList[0], {
					rotation: a - 180
				}, a * i)
			} else {
				var n = this,
					a = 180,
					s = new laya.utils.Handler(this.spriteList[0], function() {
						var e = 3.6 * (t - 50);
						laya.utils.Tween.to(n.spriteList[1], {
							rotation: e - 180
						}, e * i)
					});
				laya.utils.Tween.to(this.spriteList[0], {
					rotation: a - 180
				}, a * i, null, s)
			}
		}
	}, e
}(OSprite), Dictionary = function() {
	function t() {
		this._keys = [], this._values = []
	}
	return t.prototype.add = function(t, e) {
		this[t] = e;
		var i = this._keys.indexOf(t); - 1 === i ? (this._keys.push(t), this._values.push(e)) : (this._keys[i] = t, this._values[i] = e)
	}, t.prototype.remove = function(t) {
		var e = this._keys.indexOf(t, 0);
		this._keys.splice(e, 1), this._values.splice(e, 1), delete this[t]
	}, t.prototype.clean = function() {
		var t, e = this._keys.length;
		for (t = 0; e > t; t++) {
			var i = this._keys[t];
			delete this[i]
		}
		this._keys = [], this._values = []
	}, t.prototype.keys = function() {
		return this._keys
	}, t.prototype.values = function() {
		return this._values
	}, t.prototype.containsKey = function(t) {
		return "undefined" != typeof this[t]
	}, t.prototype.toLookup = function() {
		return this
	}, t.prototype.getValue = function(t) {
		return this[t + ""]
	}, t.prototype.fristValue = function() {
		return this._keys[0] ? this[this._keys[0] + ""] : null
	}, Object.defineProperty(t.prototype, "length", {
		get: function() {
			return this._keys.length
		},
		enumerable: !0,
		configurable: !0
	}), t
}(), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), utils;
!
function(t) {
	var e = function() {
			function t(t) {
				this.arr = t, this.idx = -1
			}
			return t.prototype.next = function() {
				return this.idx < this.arr.length - 1 ? this.arr[++this.idx] : null
			}, t.prototype.pre = function() {
				return this.idx < 0 && (this.idx = 0), 0 != this.idx ? this.arr[--this.idx] : null
			}, t.prototype.reset = function(t) {
				return void 0 === t && (t = -1), t < this.arr.length && t > -2 ? this.idx = t : t >= this.arr.length ? this.idx = this.arr.length - 1 : this.idx = -1, this.idx
			}, t
		}();
	t.Iterator = e;
	var i = function(t) {
			function e(e) {
				return t.call(this, e) || this
			}
			return __extends(e, t), e.prototype.next = function() {
				return this.idx < this.arr.length - 1 ? this.arr[++this.idx] : this.arr[this.idx = 0]
			}, e.prototype.pre = function() {
				return this.idx < 0 && (this.idx = 0), 0 != this.idx ? this.arr[--this.idx] : this.arr[this.idx = this.arr.length - 1]
			}, e
		}(e);
	t.LoopIterator = i
}(utils || (utils = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGGraphicsButton = function(t) {
	function e(e, i, a, n, s) {
		void 0 === n && (n = "#ffffff"), void 0 === s && (s = 26);
		var o = t.call(this) || this;
		return o.data_1 = e, o.data_2 = i, o.label = a, o.labelColor = n, o.textSize = s, o.init(), o
	}
	return __extends(e, t), e.prototype.getTxt = function() {
		return this.txt
	}, e.prototype.init = function() {
		this.data_1 && (this.image_1 = ORGGraphics.getInstance().getRound(this.data_1.size.w, this.data_1.size.h, this.data_1.round, {
			fillStyle: this.data_1.color
		}), this.addChild(this.image_1)), this.data_2 && (this.image_2 = ORGGraphics.getInstance().getRound(this.data_2.size.w, this.data_2.size.h, this.data_2.round, {
			fillStyle: this.data_2.color
		}), this.addChild(this.image_2)), this.image_1 && (this.image_1.visible = !0), this.image_2 && (this.image_2.visible = !1), this.txt = utils.getOText(), this.txt.fontSize = this.textSize, this.txt.color = this.labelColor, this.txt.text = this.label, this.addChild(this.txt), this.setImagePos()
	}, e.prototype.setImagePos = function() {
		this.image_1 && (this.width < this.image_1.width || this.height < this.image_1.height) && this.size(this.image_1.width, this.image_1.height), this.image_2 && (this.width < this.image_2.width || this.height < this.image_2.height) && this.size(this.image_2.width, this.image_2.height), this.image_1 && (this.image_1.x = this.width - this.image_1.width >> 1, this.image_1.y = this.height - this.image_1.height >> 1), this.image_2 && (this.image_2.x = this.width - this.image_2.width >> 1, this.image_2.y = this.height - this.image_2.height >> 1), this.txt.x = this.width - this.txt.width >> 1, this.txt.y = this.height - this.txt.height >> 1;
		var t = GloableData.getInstance().getFontDiffy(this.txt.font, this.txt.fontSize);
		this.txt.y -= t
	}, e.prototype.dispose = function() {
		this.removeAllChild()
	}, e
}(OSprite), ORGGraphicsButtonData = function() {
	function t(t, e, i) {
		this.size = {
			w: 0,
			h: 0
		}, this.color = "", this.round = 0, this.size = t, this.color = e, this.round = i
	}
	return t
}(), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGPanel = function(t) {
	function e(e) {
		var i = t.call(this) || this;
		return i._vScroll = !1, i._hScroll = !1, i.vSpace = 0, i.hSpace = 0, i._isDown = !1, i.isMax = !1, i.isMin = !1, i.itemSprite = new OSprite, i.itemSprite.scrollRect = new ORectangle(e.x, e.y, e.width, e.height), i.items = [], i.size(e.width, e.height), i.addChild(i.itemSprite), i.addEvent(), i
	}
	return __extends(e, t), e.prototype.addEvent = function() {
		EventManager.addEventListener(this, OEvent.MOUSE_DOWN, this.mouseDown, this), EventManager.addEventListener(this, OEvent.MOUSE_MOVE, this.mouseMove, this), EventManager.addEventListener(this, OEvent.MOUSE_UP, this.mouseUp, this), EventManager.addEventListener(this, OEvent.MOUSE_OUT, this.mouseUp, this), EventManager.addEventListener(this, OEvent.BLUR, this.mouseUp, this)
	}, e.prototype.removeEvent = function() {
		EventManager.removeEventListener(this, OEvent.MOUSE_DOWN, this.mouseDown, this), EventManager.removeEventListener(this, OEvent.MOUSE_MOVE, this.mouseMove, this), EventManager.removeEventListener(this, OEvent.MOUSE_UP, this.mouseUp, this), EventManager.removeEventListener(this, OEvent.MOUSE_OUT, this.mouseUp, this), EventManager.removeEventListener(this, OEvent.BLUR, this.mouseUp, this)
	}, e.prototype.mouseDown = function(t) {
		this._isDown = !0, this.prevX = t.stageX, this.prevY = t.stageY
	}, e.prototype.mouseMove = function(t) {
		if (this._isDown) {
			var e = t.stageX,
				i = t.stageY,
				a = this.getItemHeight();
			this._vScroll && a.h > this.height && this.itemSprite.scrollRect.y > -200 && a.h - this.height + 200 > this.itemSprite.scrollRect.y && (this.itemSprite.scrollRect.y += this.prevY - i), this._hScroll && a.w > this.width && this.itemSprite.scrollRect.x > -200 && a.w - this.width + 200 > this.itemSprite.scrollRect.x && (this.itemSprite.scrollRect.x += this.prevX - e), this.prevX = e, this.prevY = i
		}
	}, e.prototype.mouseUp = function(t) {
		this.prevX = 0, this.prevY = 0, this._isDown && (this._hScroll && this.getItemHeight().w > this.width && this.startTween(this.isMin_Max()), this._vScroll && this.getItemHeight().h > this.height && this.startTween(this.isMin_Max())), this._isDown = !1
	}, Object.defineProperty(e.prototype, "isVScroll", {
		set: function(t) {
			this._vScroll = t, this._vScroll ? this._hScroll = !1 : this._hScroll = !0
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.addItem = function(t) {
		this.items.push(t), this.itemSprite.addChild(t)
	}, e.prototype.getItemHeight = function() {
		var t = 0,
			e = 0;
		console.log("itemNum:", this.items.length);
		for (var i = 0; i < this.items.length; i++) this.items[i] && (t += this.items[i]._height, e += this.items[i]._width);
		return {
			w: e,
			h: t
		}
	}, Object.defineProperty(e.prototype, "value", {
		set: function(t) {
			var e = {
				x: 0,
				y: 0
			},
				i = this.getItemHeight();
			0 >= t ? (this._vScroll && (e.y = 0), this._hScroll && (e.x = 0)) : 1 > t ? (this._vScroll && (e.y = i.h * t), this._hScroll && (e.x = i.w * t)) : (this._vScroll && i.h > this.height && (e.y = i.h - this.height), this._hScroll && i.w > this.width && (e.x = i.w - this.width)), this.startTween(e)
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.isMin_Max = function() {
		this.isMax = !1, this.isMin = !1;
		var t = {
			x: this.itemSprite.scrollRect.x,
			y: this.itemSprite.scrollRect.y
		},
			e = this.getItemHeight();
		return this._vScroll && (this.itemSprite.scrollRect.y >= e.h - this.height + 200 && (this.itemSprite.scrollRect.y = e.h - this.height + 200, t.y = e.h - this.height), this.itemSprite.scrollRect.y <= -200 && (this.itemSprite.scrollRect.y = -200, t.y = 0)), this._hScroll && (this.itemSprite.scrollRect.x >= e.w - this.width + 200 && (this.itemSprite.scrollRect.x = e.w - this.width + 200, t.x = e.w - this.width), this.itemSprite.scrollRect.x <= -200 && (this.itemSprite.scrollRect.x = -200, t.x = 0)), t
	}, e.prototype.startTween = function(t) {
		var e = this;
		OTween.to(this.itemSprite.scrollRect, {
			x: t.x,
			y: t.y
		}, 200, null, OHandler.create(this.itemSprite, function() {
			OTween.clearTween(e.scrollRect)
		}), 0, !0, !0)
	}, e.prototype.dispose = function() {
		for (var t = 0; t < this.items.length; t++) this.items[t] && this.items[t].dispose();
		this.removeEvent(), this.removeChildren()
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), oaf2;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this) || this;
				return a.actionItems = [], a.frameChangeX = 0, a.frameChangeY = 0, a.frameChangeAlpha = 0, a.frameChangeScaleX = 0, a.frameChangeScaleY = 0, a.frameChangeRotation = 0, a.moveFrame = 0, a.rotationFrame = 0, a.scaleFrame = 0, a.selfInitX = 0, a.selfInitY = 0, a.selfInitAlpha = 0, a.selfInitScaleX = 0, a.selfInitScaleY = 0, a.selfInitRotation = 0, a.isPause = !1, a.isRotation = !1, a.isMove = !1, a.isScale = !1, a.totalRotationFrame = 0, a.rotationPivotType = 0, a.runKey = 0, a.mirror = !1, a.isLoadComplete = !1, a.loadFilePx = NaN, a.loadFilePy = NaN, a.fileDataUrl = "", a.isMirror = !1, a.oaf2Event = e, a.showActionView = new OSprite, a.addChild(a.showActionView), a.oafData = i, a.init(), a.size(GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight), a
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "selfAlpha", {
				set: function(t) {
					this.alpha = t;
					for (var e = 0; e < this.actionItems.length; e++) {
						var i = this.actionItems[e];
						1 > t && i.actionData.isSupport && (i.visible = !1), t >= 1 && i.actionData.isSupport && (i.visible = !0)
					}
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.init = function() {
				this.isLoadComplete = !1, this.x = this.oaf2Event.x, this.y = this.oaf2Event.y, this.selfAlpha = this.oaf2Event.alpha, this.scaleX = this.oaf2Event.zoom_x, this.scaleY = this.oaf2Event.zoom_y, this.oafData ? this.loadImages() : GloableData.getInstance().hasFileItem(this.oaf2Event.path) ? (this.fileDataUrl = GloableData.getInstance().getFileListItemURL(this.oaf2Event.path), console.log("OAF2.0：" + this.fileDataUrl), ORG.loader.load(this.fileDataUrl, OHandler.create(this, this.loadDataComplete), null, "arraybuffer")) : (this.isLoadComplete = !0, console.log("没有图片地址！：OAF2.0"))
			}, e.prototype.loadDataComplete = function(t) {
				console.log("OAF2.0：加載文件完成", t);
				var e = new GameByte(t);
				e.endian = OByteArray.LITTLE_ENDIAN, this.oafData = new data.OAF2Data(e, this.oaf2Event), this.loadImages()
			}, e.prototype.loadImages = function() {
				this.urlGroup = [];
				for (var t = 0; t < this.oafData.imageResourcePath.length; t++) {
					var e = GloableData.getInstance().getFileListItemURL(this.oafData.imageResourcePath[t]); - 1 == this.urlGroup.indexOf(e) && this.urlGroup.push(e)
				}
				console.log(this.oafData.imageResourcePath), console.log(this.urlGroup), "" != this.oafData.bgPath && this.urlGroup.push(GloableData.getInstance().getFileListItemURL(this.oafData.bgPath)), ORG.loader.load(this.urlGroup, OHandler.create(this, this.showAction), null, OLoader.IMAGE)
			}, e.prototype.showAction = function() {
				"" != this.oafData.bgPath && (this.bgImage = new ImageComponent(""), this.bgImage.updateURL(this.oafData.bgPath), this.bgImage.alpha = this.oafData.bgOpacity, this.bgImage.image.width = this.oafData.bgW, this.bgImage.image.height = this.oafData.bgH, this.bgImage.image.anchorX = .5, this.bgImage.image.anchorY = .5, this.bgImage.image.x = .5 * this.bgImage.image.width, this.bgImage.image.y = .5 * this.bgImage.image.height, this.bgImage.x = this.oafData.bgX, this.bgImage.y = this.oafData.bgY, 1 == this.oafData.bgMirror && (this.bgImage.scaleY = -1, this.bgImage.y += this.bgImage.height), 2 == this.oafData.bgMirror && (this.bgImage.scaleX = -1, this.bgImage.x += this.bgImage.width), 3 == this.oafData.bgMirror && (this.bgImage.scaleX = -1, this.bgImage.scaleY = -1, this.bgImage.y += this.bgImage.height, this.bgImage.x += this.bgImage.width), this.bgImage.image.rotation = this.oafData.bgRotaion, this.showActionView.addChild(this.bgImage));
				for (var t = 0; t < this.oafData.actionsCount; t++) {
					var e = this.oafData.actionsItems[t];
					if (e) {
						e.actionType = this.getActionItemTypeByIndex(e.actionIndex);
						var a = new i(e);
						a.talkName = this.oaf2Event.advanceActionData[0][0], this.actionItems.push(a), this.showActionView.addChild(a), a.gotoAndStop(0), this.alpha < 1 && e.isSupport && (console.log("不显示"), a.visible = !1)
					}
				}
				this.startMirror(), this.startAct(), this.isLoadComplete = !0, this.oaf2Event.finish()
			}, e.prototype.setMirror = function() {
				!this.isMirror && this.mirror && this.scaleX >= 0 && this.oafData && (this.isMirror = !0, this.scaleX = -this.scaleX, this.x += this.oafData.maxSize.w * Math.abs(this.scaleX))
			}, e.prototype.startMirror = function() {
				this.oaf2Event.mirror ? (this.mirror = !0, this.isMirror || (this.isMirror = !0, this.scaleX = -this.scaleX, this.x += this.oafData.maxSize.w * Math.abs(this.scaleX), this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType && (this.showActionView.pivotX = this.oafData.maxSize.w - this.showActionView.pivotX, this.showActionView.x = this.showActionView.pivotX), this.isRotation ? this.showActionView.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation : this.showActionView.rotation = -this.showActionView.rotation)) : (this.mirror = !1, this.isMirror && (this.isMirror = !1, this.scaleX = Math.abs(this.scaleX), this.x -= this.oafData.maxSize.w * Math.abs(this.scaleX), this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType && (this.showActionView.pivotX = this.oafData.maxSize.w - this.showActionView.pivotX, this.showActionView.x = this.showActionView.pivotX), this.isRotation ? this.showActionView.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation : this.showActionView.rotation = -this.showActionView.rotation)), isNaN(this.loadFilePx) || isNaN(this.loadFilePy) || (0 !== this.rotationPivotType ? (this.showActionView.pivotX = this.mirror ? this.oafData.maxSize.w - this.loadFilePx : this.loadFilePx, this.showActionView.pivotY = this.loadFilePx) : (this.showActionView.pivotX = this.oafData.maxSize.w / 2, this.showActionView.pivotY = this.oafData.maxSize.h / 2), this.showActionView.x = this.showActionView.pivotX, this.showActionView.y = this.showActionView.pivotY, this.loadFilePx = NaN, this.loadFilePy = NaN), this.initSelf()
			}, e.prototype.run = function(t, e) {
				void 0 === t && (t = 1), void 0 === e && (e = "");
				for (var i in this.actionItems) {
					var a = this.actionItems[i];
					2 == t && "" !== a.talkName ? a.talkName === e && (a.play(), a.actRun(t)) : (a.play(), a.actRun(t))
				}
			}, e.prototype.play = function() {
				for (var t in this.actionItems) {
					var e = this.actionItems[t];
					e.play()
				}
				this.startAct()
			}, e.prototype.stop = function() {
				for (var t in this.actionItems) {
					var e = this.actionItems[t];
					e.stop()
				}
				this.timeData && TimeManager.getInstance().removeTime(this.timeData)
			}, e.prototype.startAct = function() {
				this.timeData && TimeManager.getInstance().removeTime(this.timeData), this.timeData || (this.timeData = new GameTimeData), this.timeData.callBack = this.run, this.timeData.delay = GloableStaticData.GAME_RUN_TIME, this.timeData.thisArg = this, this.timeData.isRemove = !1, TimeManager.getInstance().addTime(this.timeData)
			}, e.prototype.stopTalkAct = function(t, e) {
				void 0 === t && (t = 1), void 0 === e && (e = "");
				for (var i in this.actionItems) {
					var a = this.actionItems[i];
					2 == a.actionData.actionType && ("" !== a.talkName ? a.talkName == e && a.playToEnd() : a.playToEnd())
				}
			}, e.prototype.getActionItemTypeByIndex = function(t) {
				for (var e = 0; e < this.oaf2Event.actionData.length; e++) if (this.oaf2Event.actionData[e].actIndex == t) return this.oaf2Event.actionData[e].actType;
				return -1
			}, e.prototype.updateTween = function() {
				this.moveFrame < 0 && this.rotationFrame < 0 && this.scaleFrame < 0 || this.isPause || (this.isMove && (this.moveFrame > 0 ? (this.moveFrame -= 1, this.selfInitX += this.frameChangeX, this.selfInitY += this.frameChangeY, this.selfInitAlpha += this.frameChangeAlpha, this.x = this.selfInitX, this.y = this.selfInitY, this.selfAlpha = this.selfInitAlpha) : (this.x = this.selfInitX, this.y = this.selfInitY, this.selfAlpha = this.selfInitAlpha, this.cleanMoveTweenArgv())), this.isRotation && (this.rotationFrame > 0 ? (this.rotationFrame -= 1, this.selfInitRotation += this.frameChangeRotation, this.showActionView.rotation = this.selfInitRotation) : (this.showActionView.rotation = this.selfInitRotation, this.cleanRotationTweenArgv())), this.isScale && (this.scaleFrame > 0 ? (this.scaleFrame -= 1, this.selfInitScaleX += this.frameChangeScaleX, this.selfInitScaleY += this.frameChangeScaleY, this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY) : (this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY, this.cleanScaleTweenArgv())))
			}, e.prototype.initSelf = function() {
				this.selfInitX = this.x, this.selfInitY = this.y, this.selfInitAlpha = this.alpha, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY, this.selfInitRotation = this.showActionView.rotation
			}, e.prototype.completeScale = function() {
				this.selfInitScaleX += this.scaleFrame * this.frameChangeScaleX, this.selfInitScaleY += this.scaleFrame * this.frameChangeScaleY, this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY
			}, e.prototype.cleanScaleTweenArgv = function() {
				this.scaleFrame = 0, this.isScale = !1, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY
			}, e.prototype.completeMove = function() {
				this.selfInitX += this.moveFrame * this.frameChangeX, this.selfInitY += this.moveFrame * this.frameChangeY, this.selfInitAlpha += this.moveFrame * this.frameChangeAlpha, this.x = this.selfInitX, this.y = this.selfInitY, this.selfAlpha = this.selfInitAlpha
			}, e.prototype.cleanMoveTweenArgv = function() {
				this.isMove = !1, this.moveFrame = 0, this.selfInitX = this.x, this.selfInitY = this.y, this.selfInitAlpha = this.alpha, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY
			}, e.prototype.completeRotation = function() {
				this.selfInitRotation = (this.isMirror ? Math.abs(this.selfInitRotation) : this.selfInitRotation) + this.rotationFrame * Math.abs(this.frameChangeRotation), this.showActionView.rotation = this.selfInitRotation
			}, e.prototype.cleanRotationTweenArgv = function() {
				this.isRotation = !1, this.rotationFrame = 0, this.selfInitRotation = this.showActionView.rotation
			}, e.prototype.complete = function() {
				this.completeMove(), this.completeRotation(), this.completeScale()
			}, e.prototype.pause = function() {
				this.isPause = !0
			}, e.prototype.resume = function() {
				(this.isMove || this.isRotation || this.isScale) && (this.isPause = !1)
			}, e.prototype.startRotation = function(t, e) {
				if (this.cleanRotationTweenArgv(), GloableData.getInstance().quickRun) {
					if (this.showActionView.rotation = e, this.cleanRotationTweenArgv(), t.loop) {
						var i = this.showActionView.rotation + t.endRotate;
						this.startRotation(t, i)
					}
					this.isRotation = !1
				} else this.totalRotationFrame = t.frames, this.rotationFrame = t.frames, this.frameChangeRotation = (e - this.showActionView.rotation) / t.frames, this.mirror && (this.frameChangeRotation = -this.frameChangeRotation), this.isRotation = !0
			}, e.prototype.startMove = function(t) {
				this.cleanMoveTweenArgv(), this.cleanScaleTweenArgv(), t.mirror ? (this.isMirror || (this.isMirror = !0, this.scaleX = -this.scaleX, this.x += this.oafData.maxSize.w * Math.abs(this.scaleX), this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType && (this.showActionView.pivotX = this.showActionView.pivotX + this.oafData.maxSize.w * Math.abs(this.scaleX), this.showActionView.x = this.showActionView.pivotX), this.showActionView.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation), t.zoom_x = -t.zoom_x, t.endx += this.width * Math.abs(t.zoom_x)) : this.isMirror && (this.isMirror = !1, this.scaleX = Math.abs(this.scaleX), this.x -= this.oafData.maxSize.w * Math.abs(this.scaleX), this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType && (this.showActionView.pivotX = this.showActionView.pivotX - this.oafData.maxSize.w * Math.abs(this.scaleX), this.showActionView.x = this.showActionView.pivotX), this.showActionView.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation), 0 == t.frames || GloableData.getInstance().quickRun ? (this.x = t.endx, this.y = t.endy, this.selfAlpha = t.endAlpha, this.scaleX = t.zoom_x, this.scaleY = t.zoom_y, this.cleanMoveTweenArgv(), this.cleanScaleTweenArgv()) : (this.initSelf(), this.moveFrame = this.scaleFrame = t.frames, this.frameChangeX = (t.endx - this.x) / t.frames, this.frameChangeY = (t.endy - this.y) / t.frames, this.frameChangeAlpha = (t.endAlpha - this.alpha) / t.frames, this.frameChangeScaleX = (t.zoom_x - this.scaleX) / t.frames, this.frameChangeScaleY = (t.zoom_y - this.scaleY) / t.frames, this.isMove = !0, this.isScale = !0)
			}, e.prototype.getRect = function() {
				return this.isMirror ? {
					x: this.x - this.width,
					y: this.y,
					width: this.width,
					height: this.height
				} : {
					x: this.x,
					y: this.y,
					width: this.width,
					height: this.height
				}
			}, e.prototype.dispose = function() {
				ORG.loader.clearUnLoaded(), this.timeData && TimeManager.getInstance().removeTime(this.timeData);
				for (var t in this.actionItems) this.showActionView.removeChild(this.actionItems[t]), this.actionItems[t].dispose();
				this.bgImage && (this.showActionView.removeChild(this.bgImage), this.bgImage.dispose()), this.showActionView.removeAllChild(), this.removeAllChild(), this.parent && this.parent.removeChild(this), this.oafData && (this.oafData = null), this.destroy(!0)
			}, e
		}(OSprite);
	t.ActionImageOaf = e;
	var i = function(t) {
			function e(e) {
				var i = t.call(this) || this;
				return i.frameIndex = 0, i.totalFrame = 0, i.isPause = !1, i.oldTalkName = "null", i.actionData = e, i.totalFrame = i.actionData.actionFrameData.length, i.currentFrame = new a, i.addChild(i.currentFrame), i
			}
			return __extends(e, t), e.prototype.play = function() {
				this.isPause = !1
			}, e.prototype.run = function(t) {
				return void 0 === t && (t = !0), t ? void(this.isPause || this.update()) : void this.update()
			}, e.prototype.playToEnd = function() {
				"null" == this.oldTalkName && (this.oldActType = this.actionData.actionType, this.oldTalkName = this.talkName, this.actionData.actionType = 1, this.talkName = ""), this._playToEnd = !0, this.run(!0)
			}, e.prototype.actRun = function(t) {
				1 == t && 2 != this.actionData.actionType ? this.run(!0) : 1 != t && 2 == this.actionData.actionType && this.run(!1)
			}, e.prototype.gotoAndStop = function(t) {
				void 0 === t && (t = 0), this.frameIndex = t, this.update()
			}, e.prototype.stop = function() {
				this.isPause = !0
			}, e.prototype.update = function() {
				this.currentFrame.init(this.actionData.actionFrameData[this.frameIndex]), this.frameIndex++, this.frameIndex >= this.totalFrame && (0 == this.actionData.actionType ? (this.frameIndex = this.totalFrame - 1, this.stop()) : 1 != this.actionData.actionType && 2 != this.actionData.actionType || (this._playToEnd ? (this._playToEnd = !1, this.frameIndex = this.totalFrame - 1, this.actionData.actionType = this.oldActType, this.talkName = this.oldTalkName, this.oldActType = -1, this.oldTalkName = "null", this.stop()) : this.frameIndex = 0))
			}, e.prototype.dispose = function() {
				this.currentFrame && this.currentFrame.dispose(), this.removeAllChild(), this.parent && this.parent.removeChild(this)
			}, e
		}(OSprite);
	t.ActionItem = i;
	var a = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.frameImages = new Dictionary, e.maxZIndex = -1, e
			}
			return __extends(e, t), e.prototype.init = function(t) {
				this.frameData = t, this.maxZIndex = -1, this.hideAllImage();
				for (var e = 0; e < this.frameData.resourceItemNumber; e++) {
					var i = this.frameData.resourceItems[e],
						a = this.frameImages.getValue(i.materialzindex);
					a ? (a.visible = !0, this.updateImage(a, i)) : (a = this.createImage(i), a.visible = !0), this.maxZIndex < a.zIndex && (this.maxZIndex = a.zIndex), this.frameImages.add(a.zIndex, a)
				}
				this.showImage()
			}, e.prototype.hideAllImage = function() {
				for (var t = this.frameImages._keys, e = 0; e < t.length; e++) this.frameImages.getValue(t[e]).visible = !1
			}, e.prototype.showImage = function() {
				for (var t = 0; t <= this.maxZIndex; t++) {
					var e = this.frameImages.getValue(t);
					e && e.visible && this.addChild(e)
				}
			}, e.prototype.updateImage = function(t, e) {
				t.initPostion(), t.updateURL(e.materialPath, -1, e.materialOpacity / 255, null, null, null, new OPoint(e.materialX, e.materialY)), t.alpha = e.materialOpacity / 255, t.image.anchorX = .5, t.image.anchorY = .5, t.image.width = e.materialW, t.image.height = e.materialH, t.image.x = .5 * t.image.width, t.image.y = .5 * t.image.height, t.zIndex = e.materialzindex, t.image.scaleX = 1, t.image.scaleY = 1, 1 == e.materialMirror && (t.image.scaleY = -1), 2 == e.materialMirror && (t.image.scaleX = -1), 3 == e.materialMirror && (t.image.scaleX = -1, t.image.scaleY = -1), t.image.rotation = e.materialRotate
			}, e.prototype.createImage = function(t) {
				var e = new ImageComponent(t.materialPath, -1, t.materialOpacity / 255, null, null, null, !1, new OPoint(t.materialX, t.materialY));
				return e.alpha = t.materialOpacity / 255, e.image.anchorX = .5, e.image.anchorY = .5, e.image.width = t.materialW, e.image.height = t.materialH, e.image.x = .5 * e.image.width, e.image.y = .5 * e.image.height, e.zIndex = t.materialzindex, 1 == t.materialMirror && (e.image.scaleY = -1), 2 == t.materialMirror && (e.image.scaleX = -1), 3 == t.materialMirror && (e.image.scaleX = -1, e.image.scaleY = -1), e.image.rotation = t.materialRotate, e
			}, e.prototype.dispose = function() {
				for (var t = this.frameImages._keys, e = 0; e < t.length; e++) {
					var i = this.frameImages.getValue(t[e]);
					i.clean(!0, !0)
				}
				this.removeChildren(), this.frameImages.clean(), this.frameData = null
			}, e
		}(OSprite);
	t.ActionFrame = a
}(oaf2 || (oaf2 = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), actImage;
!
function(t) {
	var e = function(e) {
			function i(t) {
				var i = e.call(this) || this;
				return i.isRotation = !1, i.isMove = !1, i.isScale = !1, i.totalRotationFrame = 0, i.rotationPivotType = 0, i.loadFilePx = NaN, i.loadFilePy = NaN, i.frameChangeX = 0, i.frameChangeY = 0, i.frameChangeAlpha = 0, i.frameChangeScaleX = 0, i.frameChangeScaleY = 0, i.frameChangeRotation = 0, i.moveFrame = 0, i.rotationFrame = 0, i.scaleFrame = 0, i.selfInitX = 0, i.selfInitY = 0, i.selfInitAlpha = 0, i.selfInitScaleX = 0, i.selfInitScaleY = 0, i.selfInitRotation = 0, i.isPause = !1, i.isMirror = !1, i.mirror = !1, i.eventData = t, i.showSp = new OSprite, i.showSp.rotation = 0, i.showSp.x = 0, i.showSp.y = 0, i.addChild(i.showSp), i.animations = [], i.init(), i
			}
			return __extends(i, e), i.prototype.update = function(t) {
				this.eventData = t, this.init()
			}, i.prototype.init = function() {
				if (this.x = this.eventData.x, this.y = this.eventData.y, this.alpha = this.eventData.alpha, this.scaleX = this.eventData.zoom_x, this.scaleY = this.eventData.zoom_y, GloableData.getInstance().hasFileItem(this.eventData.path)) {
					EventCenter.addEventListener(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imageComplte);
					var t = GloableData.getInstance().getFileListItemURL(this.eventData.path);
					ORG.loader.load(t, OHandler.create(this, this.loadDataComplete), null, "arraybuffer")
				} else console.log("没有图片地址！：406")
			}, i.prototype.imageComplte = function(t, e) {
				this.bg && t == this.bg.url && e.id === this.bg.id && (EventCenter.removeEventListener(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imageComplte), this.eventData && this.eventData.mirror && !this.isMirror && (this.mirror = this.eventData.mirror, this.scaleX = -this.scaleX, this.x += this.bg.width, this.isMirror = !0, this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType ? this.showSp.pivotX = this.showSp.pivotX + this.bg.width * Math.abs(this.scaleX) : (this.showSp.pivotX = this.bg.width / 2, this.showSp.pivotY = this.bg.height / 2), this.showSp.x = this.showSp.pivotX, this.showSp.y = this.showSp.pivotY, this.showSp.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation), isNaN(this.loadFilePx) || isNaN(this.loadFilePy) || (0 !== this.rotationPivotType ? (this.showSp.pivotX = this.mirror ? this.bg.width - this.loadFilePx : this.loadFilePx, this.showSp.pivotY = this.loadFilePx) : (this.showSp.pivotX = this.bg.width / 2, this.showSp.pivotY = this.bg.height / 2), this.showSp.x = this.showSp.pivotX, this.showSp.y = this.showSp.pivotY, this.loadFilePx = NaN, this.loadFilePy = NaN), GloableData.getInstance().setGamePic(this.eventData.bgId, this), this.eventData.finish())
			}, i.prototype.setMirror = function() {
				!this.isMirror && this.mirror && this.scaleX >= 0 && this.bg && (this.isMirror = !0, this.scaleX = -parseFloat(this.bg.scaleX + ""), this.x += this.bg.width * Math.abs(this.bg.scaleX))
			}, i.prototype.loadDataComplete = function(e) {
				try {
					var i = GloableData.getInstance().getFileListItemURL(this.eventData.path);
					EventCenter.removeOnceEventListener(i, this, this.loadDataComplete);
					var a = new GameByte(e);
					if (a.endian = OByteArray.LITTLE_ENDIAN, this.imageData = new data.DAnimateData(a), this.imageData && !this.imageData.isFullAnimate) return void this.eventData.finish();
					var n = GloableData.getInstance().getGamePic(this.eventData.bgId);
					console.log("-------------" + this.eventData.bgId), n && (n instanceof t.ActionImageUI && n.stop(), n.dispose()), this.bg = new ImageComponent(""), this.bg.updateURL(HttpURL.getResourceURL(this.imageData.bgmd5, !0), this.eventData.bgId, 1, null, null, null, null), this.showSp.addChild(this.bg), this.loadImages()
				} catch (s) {}
			}, i.prototype.loadImages = function() {
				for (var e = this.eventData.actionData.length, i = 0; e > i; i++) {
					var a = this.imageData.partsContent[this.eventData.actionData[i].actIndex],
						n = new t.AnimationImage;
					n.images = [], n.actID = this.eventData.actionData[i].actIndex, n.actionData = this.eventData.actionData[i], n.curretFrame = 0, n.runFrame = 0, n.actData = a.actCount, n.talkName = this.eventData.advanceActionData[0][0], console.log("_________名称：" + n.talkName);
					for (var s = 0; s < a.actCount.length; s++) {
						var o = this.imageData.md5Content[a.actCount[s].frameDataIndex],
							r = new ImageComponent(HttpURL.getResourceURL(o, !0));
						n.images[s] = r
					}
					n.endIndex = n.images.length - 1, n.gotoAndStop(0), this.animations.push(n), this.showSp.addChild(n)
				}
				this.startAct()
			}, i.prototype.startAct = function() {
				this.timeData && TimeManager.getInstance().removeTime(this.timeData), this.timeData || (this.timeData = new GameTimeData), this.timeData.callBack = this.run, this.timeData.delay = GloableStaticData.GAME_RUN_TIME, this.timeData.thisArg = this, this.timeData.isRemove = !1, TimeManager.getInstance().addTime(this.timeData)
			}, i.prototype.run = function(t, e) {
				void 0 === t && (t = 1), void 0 === e && (e = "");
				try {
					if (this.imageData && this.imageData.isFullAnimate) for (var i in this.animations) {
						var a = this.animations[i];
						2 == t && "" !== a.talkName ? a.talkName === e && (a.play(), a.actRun(t)) : (a.play(), a.actRun(t))
					}
				} catch (n) {
					console.error(n)
				}
			}, i.prototype.play = function() {
				for (var t in this.animations) {
					var e = this.animations[t];
					e.play()
				}
				this.startAct()
			}, i.prototype.stopActImage = function(t, e) {
				void 0 === t && (t = 1), void 0 === e && (e = "");
				for (var i in this.animations) {
					var a = this.animations[i];
					a.actionData.actType == t && a.talkName == e && a.playToEnd()
				}
			}, i.prototype.scaleImage = function(t, e, i) {
				this.cleanScaleTweenArgv(), this.scaleFrame = i, this.frameChangeScaleX = (t - this.scaleX) / this.moveFrame, this.frameChangeScaleY = (e - this.scaleY) / this.moveFrame, this.isScale = !0
			}, i.prototype.moveImage = function(t, e, i) {
				this.cleanMoveTweenArgv(), this.moveFrame = i, this.frameChangeX = (t - this.x) / this.moveFrame, this.frameChangeY = (e - this.y) / this.moveFrame, this.isMove = !0
			}, i.prototype.updateTween = function() {
				this.moveFrame < 0 && this.rotationFrame < 0 && this.scaleFrame < 0 || this.isPause || (this.isMove && (this.moveFrame > 0 ? (this.moveFrame -= 1, this.selfInitX += this.frameChangeX, this.selfInitY += this.frameChangeY, this.selfInitAlpha += this.frameChangeAlpha, this.x = this.selfInitX, this.y = this.selfInitY, this.alpha = this.selfInitAlpha) : (this.x = this.selfInitX, this.y = this.selfInitY, this.alpha = this.selfInitAlpha, this.cleanMoveTweenArgv())), this.isRotation && (this.rotationFrame > 0 ? (this.rotationFrame -= 1, this.selfInitRotation += this.frameChangeRotation, this.showSp.rotation = this.selfInitRotation) : (this.showSp.rotation = this.selfInitRotation, this.cleanRotationTweenArgv())), this.isScale && (this.scaleFrame > 0 ? (this.scaleFrame -= 1, this.selfInitScaleX += this.frameChangeScaleX, this.selfInitScaleY += this.frameChangeScaleY, this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY) : (this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY, this.cleanScaleTweenArgv())))
			}, i.prototype.initSelf = function() {
				this.selfInitX = this.x, this.selfInitY = this.y, this.selfInitAlpha = this.alpha, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY, this.selfInitRotation = this.showSp.rotation
			}, i.prototype.completeScale = function() {
				this.selfInitScaleX += this.scaleFrame * this.frameChangeScaleX, this.selfInitScaleY += this.scaleFrame * this.frameChangeScaleY, this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY
			}, i.prototype.cleanScaleTweenArgv = function() {
				this.scaleFrame = 0, this.isScale = !1, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY
			}, i.prototype.completeMove = function() {
				this.selfInitX += this.moveFrame * this.frameChangeX, this.selfInitY += this.moveFrame * this.frameChangeY, this.selfInitAlpha += this.moveFrame * this.frameChangeAlpha, this.x = this.selfInitX, this.y = this.selfInitY, this.alpha = this.selfInitAlpha
			}, i.prototype.cleanMoveTweenArgv = function() {
				this.isMove = !1, this.moveFrame = 0, this.selfInitX = this.x, this.selfInitY = this.y, this.selfInitAlpha = this.alpha, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY
			}, i.prototype.completeRotation = function() {
				this.selfInitRotation = (this.isMirror ? Math.abs(this.selfInitRotation) : this.selfInitRotation) + this.rotationFrame * Math.abs(this.frameChangeRotation), this.showSp.rotation = this.selfInitRotation
			}, i.prototype.cleanRotationTweenArgv = function() {
				this.isRotation = !1, this.rotationFrame = 0, this.selfInitRotation = this.showSp.rotation
			}, i.prototype.complete = function() {
				this.completeMove(), this.completeRotation(), this.completeScale()
			}, i.prototype.pause = function() {
				this.isPause = !0
			}, i.prototype.resume = function() {
				(this.isMove || this.isRotation || this.isScale) && (this.isPause = !1)
			}, i.prototype.stop = function() {
				for (var t in this.animations) {
					var e = this.animations[t];
					e.stop()
				}
				this.timeData && TimeManager.getInstance().removeTime(this.timeData)
			}, i.prototype.dispose = function() {
				for (EventCenter.removeEventListener(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imageComplte), this.timeData && TimeManager.getInstance().removeTime(this.timeData); this.animations && this.animations.length > 0;) {
					var t = this.animations.shift();
					t.dispose(), this.showSp.removeChild(t)
				}
				this.showSp.removeAllChild(), this.removeAllChild(), this.parent && this.parent.removeChild(this), this.destroy(!0)
			}, i.prototype.startRotation = function(t, e) {
				if (this.cleanRotationTweenArgv(), GloableData.getInstance().quickRun) {
					if (this.showSp.rotation = e, this.cleanRotationTweenArgv(), t.loop) {
						var i = this.showSp.rotation + t.endRotate;
						this.startRotation(t, i)
					}
					this.isRotation = !1
				} else this.totalRotationFrame = t.frames, this.rotationFrame = t.frames, this.frameChangeRotation = (e - this.showSp.rotation) / t.frames, this.mirror && (this.frameChangeRotation = -this.frameChangeRotation), this.isRotation = !0
			}, i.prototype.startMove = function(t) {
				this.cleanMoveTweenArgv(), this.cleanScaleTweenArgv(), t.mirror ? (this.isMirror || (this.isMirror = !0, this.scaleX = -this.scaleX, this.x += this.width * Math.abs(this.scaleX), this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType && (this.showSp.pivotX = this.bg.width - this.showSp.pivotX, this.showSp.x = this.showSp.pivotX), this.isRotation ? this.showSp.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation : this.showSp.rotation = -this.showSp.rotation), t.zoom_x = -t.zoom_x, t.endx += this.width * Math.abs(t.zoom_x)) : this.isMirror && (this.isMirror = !1, this.scaleX = Math.abs(this.scaleX), this.x -= this.width * Math.abs(this.scaleX), this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType && (this.showSp.pivotX = this.bg.width - this.showSp.pivotX, this.showSp.x = this.showSp.pivotX), this.isRotation ? this.showSp.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation : this.showSp.rotation = -this.showSp.rotation), t.endx += this.pivotX, t.endy += this.pivotY, 0 == t.frames || GloableData.getInstance().quickRun ? (this.x = t.endx, this.y = t.endy, this.alpha = t.endAlpha, this.scaleX = t.zoom_x, this.scaleY = t.zoom_y, this.cleanMoveTweenArgv(), this.cleanScaleTweenArgv()) : (this.initSelf(), this.moveFrame = this.scaleFrame = t.frames, this.frameChangeX = (t.endx - this.x) / t.frames, this.frameChangeY = (t.endy - this.y) / t.frames, this.frameChangeAlpha = (t.endAlpha - this.alpha) / t.frames, this.frameChangeScaleX = (t.zoom_x - this.scaleX) / t.frames, this.frameChangeScaleY = (t.zoom_y - this.scaleY) / t.frames, this.isMove = !0, this.isScale = !0)
			}, i.prototype.getRect = function() {
				return this.mirror ? {
					x: this.x - this.width,
					y: this.y,
					width: this.width,
					height: this.height
				} : {
					x: this.x,
					y: this.y,
					width: this.width,
					height: this.height
				}
			}, i
		}(OSprite);
	t.ActionImageUI = e
}(actImage || (actImage = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), actImage;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e._playToEnd = !1, e.oldTalkName = "null", e
			}
			return __extends(e, t), e.prototype.gotoAndStop = function(t) {
				void 0 === t && (t = 0);
				var e = this.images[this.curretFrame];
				this.removeChild(e);
				var i = this.images[t];
				this.addChild(i), this.curretFrame = t
			}, e.prototype.playToEnd = function() {
				"null" == this.oldTalkName && (this.oldActType = this.actionData.actType, this.oldTalkName = this.talkName, this.actionData.actType = 1, this.talkName = ""), this._playToEnd = !0, this.run(!0)
			}, e.prototype.run = function(t) {
				if (void 0 === t && (t = !0), !t) {
					if (this.runFrame >= this.actData[this.curretFrame].frameTime / this.actData.length) {
						var e = this.images[this.curretFrame];
						this.removeChild(e), this.curretFrame++, this.curretFrame >= this.images.length && (1 == this.actionData.actType || 2 == this.actionData.actType ? this.curretFrame = 0 : 0 == this.actionData.actType && (this.curretFrame = this.endIndex, this.stop()));
						var i = this.images[this.curretFrame];
						this.addChild(i), this.runFrame = 0
					}
					return void this.runFrame++
				}
				if (!this.isPause) if (this.runFrame >= this.actData[this.curretFrame].frameTime) {
					var e = this.images[this.curretFrame];
					this.removeChild(e), this.curretFrame++, this.curretFrame >= this.images.length && (1 == this.actionData.actType || 2 == this.actionData.actType ? this._playToEnd ? (this._playToEnd = !1, this.curretFrame = this.endIndex, this.actionData.actType = this.oldActType, this.talkName = this.oldTalkName, this.oldActType = -1, this.oldTalkName = "null", this.stop()) : this.curretFrame = 0 : 0 == this.actionData.actType && (this.curretFrame = this.endIndex, this.stop()));
					var i = this.images[this.curretFrame];
					this.addChild(i), this.runFrame = 0
				} else this.runFrame++
			}, e.prototype.play = function() {
				this.isPause = !1
			}, e.prototype.actRun = function(t) {
				1 == t && 2 != this.actionData.actType ? this.run(!0) : 1 != t && 2 == this.actionData.actType && this.run(!1)
			}, e.prototype.stop = function() {
				this.isPause = !0
			}, e.prototype.dispose = function() {
				for (; this.images.length > 0;) {
					var t = this.images.shift();
					t.dispose(!0), t.parent && t.parent.removeChild(t)
				}
				this.removeAllChild()
			}, e
		}(OSprite);
	t.AnimationImage = e
}(actImage || (actImage = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), chat;
!
function(t) {
	var e = function(e) {
			function i() {
				var t = e.call(this) || this;
				return t.openFlg = 0, t.saveFlg = 0, t.startX = 0, t.startY = 0, t.clientW = 0, t.clientH = 0, t.index = 0, t.ChatUIItem = [], t.oldChatUIItemNum = 0, t.ChatShow = !1, t.oldMsgShow = !1, t.zIndex = 1, t.contentHeight = 0, t.previItemHeight = 0, t.level = 0, t.bShow = !1, t.isOldItem = !1, t.hasOldItem = !1, t.waitTOclick = !1, t.LeftRrightspace = 10, t.loadDataFinish = !1, t.loadDataIng = !1, t.quickKey = -1, t.quickFinish = !1, t.isLoadChatComplete = !0, t.isLoadChatFirstSetValue = !1, t
			}
			return __extends(i, e), i.prototype.addChatItem = function(e) {
				this.parent && this.parent.setChildIndex(this, this.parent.numChildren - 1), this.sentEventData = e;
				var i = new t.ChatUIItem;
				i.index = this.ChatUIItem.length, i.eventData = e.data.Argv, i.addVal(this), this.ChatUIItem.push(i), this.ChatShow ? (this.chatBox.visible || (this.chatBox.visible = !0, this.visible = !0), i.drawView(this), this.chatBox.addChild(i), GloableData.getInstance().quickRun ? this.quickKey = setTimeout(this.quickFinishFn.bind(this), 83) : this.quickFinish = !1) : this.localFinish()
			}, i.prototype.longUpdate = function() {
				this.sentEventData && 221 == GloableData.getInstance().currentLine.currentEvent.Code && GloableData.getInstance().quickRun && (this.quickFinish || (this.quickFinish = !0, this.quickKey = setTimeout(this.quickFinishFn.bind(this), 83)))
			}, i.prototype.quickFinishFn = function() {
				this.waitTOclick = !1, clearTimeout(this.quickKey), this.sentEventData.finish()
			}, i.prototype.localFinish = function() {
				this.sentEventData && 221 == this.sentEventData.mainLine.currentEvent.Code && (clearTimeout(this.quickKey), this.waitTOclick = !1, this.sentEventData.finish())
			}, i.prototype.initFinish = function() {
				if (this.curEvent) {
					if (GloableData.getInstance().currentLine.currentEvent.Code != this.curEvent.code) return;
					clearTimeout(this.quickKey), this.curEvent.finish()
				}
			}, i.prototype.initChat = function(t) {
				this.curEvent = t, this.eventData = t.data.Argv, parseInt(this.eventData[5]) <= 300 ? this.LeftRrightspace = 5 : parseInt(this.eventData[5]) > 300 && parseInt(this.eventData[5]) <= 400 ? this.LeftRrightspace = 8 : this.LeftRrightspace = 10, this.index = parseInt(this.eventData[0]) - 1, this.openFlg = parseInt(this.eventData[1]), this.saveFlg = parseInt(this.eventData[2]), this.startX = parseInt(this.eventData[3]) + this.LeftRrightspace, this.startY = parseInt(this.eventData[4]), this.clientW = parseInt(this.eventData[5]) - 2 * this.LeftRrightspace, this.clientH = parseInt(this.eventData[6]), this.ChatShow = 1 == this.openFlg, this.oldMsgShow = 1 == this.saveFlg, this.updateChat(), EventCenter.removeEventListener(GameEventConstant.LONG_DOWN_EVENT, this, this.longUpdate), EventCenter.addEventListener(GameEventConstant.LONG_DOWN_EVENT, this, this.longUpdate)
			}, i.prototype.updateChat = function() {
				this.ChatShow && this.oldMsgShow && (this.ChatUIItem.length > 0 ? (this.disposeItem(!1), this.chatBox ? this.changePanelVal() : this.createPanel(), this.hasOldItem = !0, this.oldChatUIItemNum = this.ChatUIItem.length, this.drawOldItem(), this.visible = this.chatBox.visible = !0) : (this.createPanel(), this.initFinish())), this.ChatShow && !this.oldMsgShow && (this.ChatUIItem.length > 0 && this.disposeAllChild(), UIManager.getInstance().chat.closeVOice(!0, this.index), this.createPanel(), this.initFinish()), !this.ChatShow && this.oldMsgShow && (EventCenter.removeEventListener(GameEventConstant.LONG_DOWN_EVENT, this, this.longUpdate), clearTimeout(this.quickKey), this.visible = !1, UIManager.getInstance().chat.resumeQuick(), UIManager.getInstance().chat.closeVOice(!0, this.index), this.disposeItem(!1), this.initFinish()), this.ChatShow || this.oldMsgShow || (EventCenter.removeEventListener(GameEventConstant.LONG_DOWN_EVENT, this, this.longUpdate), clearTimeout(this.quickKey), this.visible = !1, UIManager.getInstance().chat.resumeQuick(), UIManager.getInstance().chat.closeVOice(!0, this.index), this.disposeAllChild(), this.initFinish())
			}, i.prototype.drawOldItem = function() {
				if (this.loadDataIng) if (this.hasOldItem) if (this.oldChatUIItemNum > 0 && this.ChatUIItem.length > 0) {
					this.oldChatUIItemNum--;
					var t = this.ChatUIItem.length - this.oldChatUIItemNum - 1;
					this.ChatUIItem[t].drawView(this)
				} else this.loadDataIng = !0, this.loadDataFinish = !0, this.oldChatUIItemNum = 0, this.hasOldItem = !1, this.waitTOclick = !0, this.initFinish(), this.localFinish();
				else this.loadDataFinish = !0;
				else if (this.hasOldItem) if (this.oldChatUIItemNum > 0 && this.ChatUIItem.length > 0) {
					this.oldChatUIItemNum--;
					var t = this.ChatUIItem.length - this.oldChatUIItemNum - 1;
					this.ChatUIItem[t].drawView(this)
				} else this.initFinish(), this.oldChatUIItemNum = 0, this.hasOldItem = !1, this.waitTOclick = !0;
				else this.waitTOclick = !0
			}, i.prototype.conductLevel = function() {
				var t = 0,
					e = !1;
				this.bShow || (e = !0);
				for (var i = this.level, a = UIManager.getInstance().chat.chatList, n = 0; n < a.length; n++) a[n] && (a[n].bShow ? (t++, a[n].level > i && !e && (a[n].level--, a[n].level < 0 && (a[n].level = 0), UIManager.getInstance().chat.setChildIndex(a[n], a[n].level))) : a[n].level = 0);
				e ? this.level = t : this.level = t - 1, this.level >= 4 && (this.level = 4), UIManager.getInstance().chat.setChildIndex(this, this.level)
			}, i.prototype.createPanel = function() {
				this.size(this.clientW, this.clientH), this.x = this.startX, this.y = this.startY, this.chatBox = new OPanel, this.chatBox.width = this.clientW, this.chatBox.height = this.clientH, this.chatBox.vScrollBarSkin = "", this.chatBox.vScrollBar.hide = !0, this.chatBox.vScrollBar.min = 1, this.chatBox.vScrollBar.value = 0, this.chatBox.visible = !1, this.visible = !1, this.contentHeight = 0, this.previItemHeight = 4, this.addChild(this.chatBox)
			}, i.prototype.changePanelVal = function() {
				this.size(this.clientW, this.clientH), this.x = this.startX, this.y = this.startY, this.chatBox && (this.chatBox.width = this.clientW), this.chatBox && (this.chatBox.height = this.clientH), this.chatBox && (this.chatBox.vScrollBarSkin = ""), this.chatBox && (this.chatBox.vScrollBar.min = 1), this.chatBox && (this.chatBox.vScrollBar.value = 0), this.contentHeight = 0, this.previItemHeight = 0, this.chatBox && (this.chatBox.visible = !1), this.visible = !1
			}, i.prototype.disposeAllChild = function() {
				this.disposeItem(), this.ChatUIItem = [], this.chatBox && (this.chatBox && this.chatBox.destroy(!0), this.removeChild(this.chatBox), this.chatBox = null)
			}, i.prototype.disposeItem = function(t) {
				void 0 === t && (t = !0);
				for (var e = 0; e < this.ChatUIItem.length; e++) this.ChatUIItem[e].dispose(t);
				this.contentHeight = 0, this.previItemHeight = 0, this.chatBox && (this.chatBox.vScrollBar.max = 0), this.chatBox && (this.chatBox.vScrollBar.value = 0)
			}, i.prototype.clearChatUI = function() {
				this.openFlg = 0, this.saveFlg = 0, this.startX = 0, this.startY = 0, this.clientW = 0, this.clientH = 0, this.index = 0, this.ChatUIItem = [], this.eventData = null, this.ChatShow = !1, this.oldMsgShow = !1
			}, i.prototype.onLoop = function() {}, i.prototype.toScroll = function(t, e, i, a) {
				this.contentHeight = this.previItemHeight + e, this.chatBox.vScrollBar.max = this.contentHeight, this.chatScrollTween && (this.chatScrollTween.complete(), this.chatScrollTween.recover(), this.chatScrollTween = null), a && (this.isLoadChatFirstSetValue ? (this.isLoadChatFirstSetValue = !1, this.chatBox.vScrollBar.value = this.contentHeight, this.visible = !0) : this.chatScrollTween = OTween.to(this.chatBox.vScrollBar, {
					value: this.contentHeight
				}, 1e3, null, null, 0, !1, !0)), this.previItemHeight = this.contentHeight, this.drawOldItem(), this.chatBox.addChild(this.ChatUIItem[i.index]), this.waitTOclick = !0
			}, i.prototype.clickUI = function(t) {
				t.stopPropagation(), UIManager.getInstance().off(OEvent.CLICK, this, this.clickUI), this.localFinish()
			}, i.prototype.savedata = function() {
				var t, e = GloableData.getInstance().currentLine.currentEvent;
				e && 221 == e.Code && (t = e.Argv[0] - 1);
				var i = {
					level: this.level,
					height: this.clientH,
					visible: this.ChatShow,
					y: this.startY,
					width: this.clientW + 2 * this.LeftRrightspace,
					x: this.startX - this.LeftRrightspace
				};
				if (i.data = [], this.ChatUIItem.length > 0) if (this.index == parseInt(t)) for (var a = 0; a < this.ChatUIItem.length - 1; a++) i.data.push(this.ChatUIItem[a].saveDate());
				else for (var a = 0; a < this.ChatUIItem.length; a++) i.data.push(this.ChatUIItem[a].saveDate());
				return i
			}, i.prototype.loadData = function(e, i) {
				this.visible = !1, this.isLoadChatComplete = !1, this.isLoadChatFirstSetValue = !0, this.disposeAllChild(), parseInt(e.width) <= 300 ? this.LeftRrightspace = 5 : parseInt(e.width) > 300 && parseInt(e.width) <= 400 ? this.LeftRrightspace = 8 : this.LeftRrightspace = 10, this.index = i, this.level = e.level, this.clientH = e.height, this.clientW = e.width - 2 * this.LeftRrightspace, this.startX = e.x + this.LeftRrightspace, this.startY = e.y, this.ChatShow = e.visible;
				for (var a = e.data, n = 0; n < a.length; n++) {
					var s = new t.ChatUIItem;
					s.index = this.ChatUIItem.length, s.isOldItem = !0, s.loadData(this, a[n]), this.ChatUIItem.push(s)
				}
				this.oldMsgShow = !0, this.ChatShow && this.oldMsgShow ? this.ChatUIItem.length > 0 ? (this.disposeItem(!1), this.loadDataFinish = !1, this.chatBox ? this.changePanelVal() : this.createPanel(), this.ChatShow ? this.chatBox.visible = !0 : (this.chatBox.visible = !1, this.visible = !1), this.hasOldItem = !0, this.loadDataIng = !0, this.oldChatUIItemNum = this.ChatUIItem.length, this.drawOldItem()) : (this.createPanel(), this.loadDataFinish = !0, this.isLoadChatComplete = !0, this.loadDataIng = !1, this.waitTOclick = !0) : (this.loadDataFinish = !0, this.isLoadChatComplete = !0, this.loadDataIng = !1, this.waitTOclick = !0)
			}, i
		}(OSprite);
	t.ChatUI = e
}(chat || (chat = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), chat;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.parentIndex = 0, e.index = 0, e.MsgPosition = 1, e.height = 0, e.MsgType = 1, e.MsgNameTitle = "", e.MsgNameHeight = 12, e.MsgNameFontSize = 12, e.hasNameFlg = !1, e.MsgNameSpace = 12, e.MsgHeadPath = "", e.MsgHeadLength = 0, e.hasHeadFlg = !1, e.MsgHeadSpace = 10, e.MsgSpace = 10, e.MsgTextArr = [], e.MsgTextStr = "", e.MsgTextFontSize = 12, e.MsgTextMaxW = 0, e.MsgTextMaxH = 0, e.MsgTextTBSpace = 8, e.MsgTextLRSpace = 10, e.MsgTextLineHeight = 10, e.MsgTriangleSpace = 6, e.CompaHeight = 0, e.MsgPicStr = "", e.MsgPicMaxW = 0, e.MsgVoiceStr = "", e.MsgVoiceLeng = 0, e.MsgVoiceIconSize = 18, e.MsgSize = 0, e.eventData = [], e.MsgMaxW = 0, e.MsgMaxH = 0, e.txtHeight = 0, e.txtWidth = 0, e.bShow = !1, e.isOldItem = !1, e.strEdge = [], e.NewCharfont = new utils.CharFontUtil, e
			}
			return __extends(e, t), e.prototype.addVal = function(t) {
				this.parentIndex = parseInt(this.eventData[0]) - 1, this.MsgPosition = parseInt(this.eventData[1]), this.backgroundPath = this.eventData[2], this.MsgType = parseInt(this.eventData[3]), this.MsgNameTitle = this.eventData[4], this.MsgHeadPath = this.eventData[5], this.MsgContent = this.eventData[6], this.MsgSize = this.eventData[7], this.voiceIconPath = this.eventData[10]
			}, e.prototype.drawView = function(t) {
				switch (this.parentChat = t, this.parentChat.conductLevel(), this.bShow = !0, this.parentChat.bShow = !0, this.parentW = this.parentChat.clientW, this.parentH = this.parentChat.clientH, this.getResolution(), UIManager.getInstance().chat.chatFontSpace = GloableData.getInstance().getFontDiffy("微软雅黑", this.MsgTextFontSize), this.hasHead(), this.getMaxPicW(), this.drawHead(), this.drawName(), this.MsgType) {
				case 1:
					this.drawMsgTextBox();
					break;
				case 2:
					this.MsgPicStr = this.MsgContent, this.drawPicView();
					break;
				case 3:
					this.MsgVoiceStr = this.MsgContent, this.drawVoiceView()
				}
				this.cacheAsBitmap = !0
			}, e.prototype.getResolution = function() {
				this.parentW <= 290 ? (this.MsgHeadLength = 32, this.MsgTextLineHeight = 4, this.MsgTextTBSpace = 8, this.MsgTextLRSpace = 10, this.MsgTextFontSize = 16, this.MsgNameSpace = 12, this.MsgNameFontSize = 12, this.MsgVoiceIconSize = 16, this.msgTextBgScale = .5, this.MsgTriangleSpace = 5, this.strEdge = ["28", "4", "14", "14"], 2 == this.MsgPosition && (this.MsgTextLineHeight = 2, this.MsgTextTBSpace = 4, this.MsgTextLRSpace = 8, this.MsgTextFontSize = 12, this.MsgNameSpace = 0, this.strEdge = ["4", "4", "4", "4"]), this.MsgSpace = 5) : 290 < this.parentW && this.parentW <= 380 ? (this.MsgHeadLength = 48, this.MsgTextLineHeight = 6, this.MsgTextTBSpace = 12, this.MsgTextLRSpace = 16, this.MsgTextFontSize = 20, this.MsgNameSpace = 16, this.MsgNameFontSize = 16, this.MsgVoiceIconSize = 20, this.msgTextBgScale = .8, this.MsgTriangleSpace = 8, this.strEdge = ["28", "4", "14", "14"], 2 == this.MsgPosition && (this.MsgTextLineHeight = 4, this.MsgTextTBSpace = 6, this.MsgTextLRSpace = 12, this.MsgTextFontSize = 16, this.MsgNameSpace = 0, this.strEdge = ["4", "4", "4", "4"]), this.MsgSpace = 8) : (this.MsgHeadLength = 64, this.MsgTextLineHeight = 8, this.MsgTextTBSpace = 16, this.MsgTextLRSpace = 20, this.MsgTextFontSize = 24, this.MsgNameSpace = 18, this.MsgNameFontSize = 18, this.MsgVoiceIconSize = 24, this.msgTextBgScale = 1, this.MsgTriangleSpace = 10, this.strEdge = ["36", "4", "14", "14"], 2 == this.MsgPosition && (this.MsgTextLineHeight = 8, this.MsgTextTBSpace = 8, this.MsgTextLRSpace = 16, this.MsgTextFontSize = 18, this.MsgNameSpace = 0, this.strEdge = ["4", "4", "4", "4"]), this.MsgSpace = 10), this.MsgMaxW = this.parentW - 2 * this.MsgHeadLength - 2 * this.MsgSpace, this.MsgMaxH = this.parentH - 2 * this.MsgNameFontSize
			}, e.prototype.hasHead = function() {
				return 2 == this.MsgPosition ? (this.hasHeadFlg = !1, void(this.MsgMaxW = this.parentW - 2 * this.MsgHeadLength - 2 * this.MsgSpace)) : this.MsgHeadPath.length <= 0 ? (this.hasHeadFlg = !1, this.MsgMaxW = this.parentW, void(this.MsgHeadLength = 0)) : void(this.hasHeadFlg = !0)
			}, e.prototype.getMaxPicW = function() {
				this.parentW <= 290 ? this.MsgPicMaxW = this.parentW - 2 * this.MsgHeadLength - 2 * this.MsgSpace : 290 < this.parentW && this.parentW <= 384 ? this.MsgPicMaxW = this.parentW / 2 - this.MsgHeadLength - this.MsgSpace : this.MsgPicMaxW = 200
			}, e.prototype.setHeight = function(t) {
				try {
					this.height = t.height + this.MsgNameSpace + this.MsgNameFontSize + this.MsgTextLineHeight, this.height < this.MsgHeadLength && (this.height = this.MsgHeadLength)
				} catch (e) {}
				this.y = this.parentChat.previItemHeight;
				var i = !1;
				0 == this.parentChat.oldChatUIItemNum && (i = !0), this.parentChat.toScroll(this.y, this.height, this, i)
			}, e.prototype.drawHead = function() {
				if (2 == this.MsgPosition) return void(this.hasHeadFlg = !1);
				if (this.MsgHeadPath.length <= 0) return this.hasHeadFlg = !1, void(this.MsgHeadSpace = 0);
				this.MsgHead = new OSprite, this.MsgHead.width = this.MsgHeadLength, this.MsgHead.height = this.MsgHeadLength, this.MsgHead.visible = !0, this.hasHeadFlg = !0, this.MsgHeadSpace = this.MsgSpace, this.MsgHeadBg = new ImageComponent, this.MsgHeadBg.x = 0, this.MsgHeadBg.y = 0;
				var t = PreLoader.headIconShifter + this.MsgHeadPath;
				"" == t ? this.MsgPicBgComplete() : (this.MsgHeadBg.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.MsgHeadBgComplete), this.MsgHeadBg.update(t)), 1 == this.MsgPosition ? this.MsgHead.x = 0 : 2 == this.MsgPosition ? this.MsgHead.visible = !1 : this.MsgHead.x = this.parentW - this.MsgHeadLength, this.MsgHead.graphics.drawRect(0, 0, this.MsgHeadLength, this.MsgHeadLength, "#ffffff");
			}, e.prototype.MsgHeadBgComplete = function() {
				this.MsgHeadBg.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.MsgHeadBgComplete);
				var t = this.getScaleBigPic(this.MsgHeadBg, this.MsgHeadLength, this.MsgHeadLength);
				this.MsgHeadBg.sizeImage(parseInt(t.w), parseInt(t.h)), this.MsgHeadBg.x = (this.MsgHeadLength - t.w) / 2, this.MsgHeadBg.y = (this.MsgHeadLength - t.h) / 2, this.MsgHead.addChild(this.MsgHeadBg)
			}, e.prototype.drawName = function() {
				if (2 == this.MsgPosition) return this.hasNameFlg = !1, this.MsgNameHeight = 0, void(this.MsgNameSpace = 0);
				this.MsgName = new OText, this.MsgName.leading = 1, this.MsgName.wordWrap = !1, this.MsgName.fontSize = this.MsgNameFontSize, this.MsgName.valign = "top", this.MsgName.color = "#666666", this.hasNameFlg = !0;
				var t = (this.MsgName.textWidth, this.parentW - this.MsgHeadLength - this.MsgHeadSpace),
					e = Math.floor(t / this.MsgNameFontSize);
				if (this.MsgNameTitle.length > e) {
					var i = this.MsgNameTitle.substring(0, e - 3);
					i += "…", this.MsgName.text = i
				} else this.MsgName.text = this.MsgNameTitle;
				this.MsgMaxH = this.parentH - this.MsgName.textHeight, 1 == this.MsgPosition ? this.MsgName.x = this.MsgHeadLength + this.getSpace() + this.MsgTriangleSpace : 3 == this.MsgPosition && (this.MsgName.x = this.parentW - this.MsgName.textWidth - (this.MsgHeadLength + this.getSpace() + this.MsgTriangleSpace)), this.MsgName.y = -UIManager.getInstance().chat.chatFontSpace, this.MsgNameHeight = this.MsgName.textHeight + 3
			}, e.prototype.addHeadName = function() {
				this.hasNameFlg && this.addChild(this.MsgName), this.hasHeadFlg && this.addChild(this.MsgHead)
			}, e.prototype.drawMsgTextBox = function() {
				this.MsgTextBox = new OSprite, this.MsgTextBox.y = this.MsgNameSpace + this.MsgTextLineHeight, this.MsgTextBox.x = this.MsgHeadLength + this.MsgHeadSpace, this.MsgTextBox.width = this.MsgMaxW, this.MsgText = new OText, this.getStrText(), this.MsgText.fontSize = this.MsgTextFontSize, this.MsgText.color = "#070707", this.MsgText.valign = "middle";
				var t = GloableData.getInstance().getFileListItemURL(PreLoader.uiShifter + this.backgroundPath);
				Laya.loader.load(t, laya.utils.Handler.create(this, this.msgTextBgComplete), null, laya.net.Loader.IMAGE, 0, !0)
			}, e.prototype.getStrText = function() {
				this.MsgTextMaxW = 0, this.MsgTextMaxH = 0;
				var t = this.MsgTextFontSize,
					e = StringUtil.getCharText(this.MsgContent, "#070707", this.MsgTextFontSize);
				1 == this.MsgPosition ? this.MsgText.width = this.MsgMaxW - 2 * this.MsgTextLRSpace - 2 * this.MsgTriangleSpace : 2 == this.MsgPosition ? this.MsgText.width = this.MsgMaxW - 2 * this.MsgTextLRSpace : this.MsgText.width = this.MsgMaxW - 2 * this.MsgTextLRSpace - 2 * this.MsgTriangleSpace;
				for (var i = e.configs.length, a = [], n = 0; n < e.texts.length; n++) a.push(e.texts[n]);
				this.NewCharfont.texts = e.texts, this.NewCharfont.message = e.message;
				for (var n = 0; i > n; n++) {
					var s = e.configs[n],
						o = s.textNum,
						r = a.splice(0, o);
					this.getNewCharfont(s, r)
				}
				for (var h = this.NewCharfont.configs.length, l = 0, c = 0, n = 0; h > n; n++) {
					for (var g = this.NewCharfont.configs.shift(), u = new OSprite, o = g.textNum; o > 0;) {
						o--;
						var p = this.NewCharfont.texts.shift();
						p.x = l, p.y = c, l += p.width, u.addChild(p)
					}
					u.width = l, g.newline && (c += t + this.MsgTextLineHeight, l = 0), u.height = c + GloableData.getInstance().getFontReHeight("微软雅黑", this.MsgTextFontSize), this.MsgTextMaxW <= u.width && (this.MsgTextMaxW = u.width), this.MsgTextMaxH = u.height, this.MsgText.width = u.width, this.MsgText.height = u.height, this.MsgText.addChild(u)
				}
			}, e.prototype.getNewCharfont = function(t, e) {
				for (var i = this, a = 0, n = t.textNum, s = t.textNum, o = 0, r = function() {
						var r = s - n,
							l = e[r];
						a += l.width, a > h.MsgText.width ? h.findAbc(l._childs[0]._text, function(s) {
							if (s) for (var h = !1, c = 0; !h;) if (c++, c >= o) {
								h = !0;
								var g = new utils.FontConfig;
								g.textNum = o, g.newline = !0, t.textNum = n, i.NewCharfont.configs.push(g), a = l.width, o = 0, n--, o++
							} else {
								var u = e[r - c];
								i.findAbc(u._childs[0]._text, function(e) {
									if (e);
									else {
										h = !0, n = n + c - 1;
										var s = new utils.FontConfig;
										s.textNum = o + 1 - c, s.newline = !0, t.textNum = n, i.NewCharfont.configs.push(s), a = 0, o = 0
									}
								})
							} else {
								var g = new utils.FontConfig;
								g.textNum = o, g.newline = !0, t.textNum = n, i.NewCharfont.configs.push(g), a = l.width, o = 0, n--, o++
							}
						}) : (n--, o++)
					}, h = this; n > 0;) r();
				this.NewCharfont.configs.push(t)
			}, e.prototype.findAbc = function(t, e) {
				var i = /^[A-Za-z]*$/;
				i.test(t) ? e && e(!0) : e && e(!1)
			}, e.prototype.msgTextBgComplete = function(t) {
				this.msgTextBg = new OImage, this.msgTextBg.source = t, this.msgTextBg.scale(this.msgTextBgScale, this.msgTextBgScale);
				var e = this.getSudoku(this.msgTextBg, "0", this.msgTextBgScale);
				this.msgTextBg.setGrid(e), this.addChild(this.MsgTextBox);
				var i, a;
				1 == this.MsgPosition ? (this.MsgTextBox.x = this.MsgHeadLength + this.getSpace(), this.MsgText.x = this.MsgTextLRSpace + this.MsgTriangleSpace, this.MsgText.width = this.MsgTextMaxW, i = this.MsgTextMaxW + 2 * this.MsgTextLRSpace + this.MsgTriangleSpace) : 2 == this.MsgPosition ? (this.MsgText.x = this.MsgTextLRSpace, i = this.MsgTextMaxW + 2 * this.MsgTextLRSpace, this.MsgTextBox.x = (this.parentW - this.MsgTextMaxW - 2 * this.MsgTextLRSpace) / 2) : (this.MsgText.x = this.MsgTextLRSpace, this.MsgText.width = this.MsgTextMaxW, i = this.MsgTextMaxW + 2 * this.MsgTextLRSpace + this.MsgTriangleSpace, this.MsgTextBox.x = this.parentW - this.MsgHeadLength - this.getSpace() - (this.MsgTextMaxW + 2 * this.MsgTextLRSpace + this.MsgTriangleSpace)), a = this.MsgTextMaxH + 2 * this.MsgTextTBSpace, i < this.msgTextBg.width, a < this.msgTextBg.height, this.msgTextBg.size(Math.ceil(i / this.msgTextBgScale), Math.ceil(a / this.msgTextBgScale)), this.MsgTextBox.height = a, this.addHeadName(), this.MsgTextBox.addChild(this.msgTextBg), this.MsgTextBox.addChild(this.MsgText), this.setHeight(this.MsgTextBox), this.MsgText.y = (this.MsgTextBox.height - this.MsgText.height) / 2 - UIManager.getInstance().chat.chatFontSpace
			}, e.prototype.drawPicView = function() {
				this.MsgPic = new OSprite, this.MsgPic.y = this.MsgNameSpace + this.MsgTextLineHeight, this.MsgPicBg = new ImageComponent(""), this.MsgPicBg.x = 0;
				var t = PreLoader.ChatShifter + this.MsgPicStr;
				"" == t ? (this.MsgPicBg.update(t), this.MsgPicBgComplete()) : (this.MsgPicBg.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.MsgPicBgComplete), this.MsgPicBg.update(t))
			}, e.prototype.MsgPicBgComplete = function() {
				var t = (this.MsgPicBg.width, this.MsgPicBg.height, this.getScaleBigPic(this.MsgPicBg, this.MsgPicMaxW, this.MsgMaxH - 2 * this.MsgTextFontSize));
				this.MsgPicBg.sizeImage(t.w, t.h), this.MsgPic.size(this.MsgPicBg.width, this.MsgPicBg.height);
				var e = ORGGraphics.getInstance().getRound(this.MsgPicBg.width, this.MsgPicBg.height, 10, {
					fillStyle: "#ebecee"
				});
				this.MsgPic.mask = e, this.MsgPic.mask.width = GloableData.getInstance().gameInfo.gGameWidth, this.MsgPic.mask.height = GloableData.getInstance().gameInfo.gGameHeight, 1 == this.MsgPosition ? this.MsgPic.x = this.MsgHeadLength + this.getSpace() + this.MsgTriangleSpace : 2 == this.MsgPosition ? this.MsgPic.x = (this.parentW - this.MsgPicBg.width - 2 * this.MsgSpace) / 2 : this.MsgPic.x = this.parentW - this.MsgHeadLength - this.getSpace() - this.MsgPicBg.width - this.MsgTriangleSpace, this.addHeadName(), this.MsgPic.addChild(this.MsgPicBg), this.addChild(this.MsgPic), this.setHeight(this.MsgPic)
			}, e.prototype.picClick = function(t) {
				t.stopPropagation(), this.MsgBigPicBox = new OSprite, this.MsgBigPicBox.x = 0, this.MsgBigPicBox.y = 0, this.MsgBigPicBox.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), this.MsgBigPicbg = new OSprite, this.MsgBigPicbg.alpha = .6, this.MsgBigPicbg.graphics.drawRect(0, 0, GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight, "#000000", null, null), this.MsgBigPic = new ImageComponent, this.MsgBigPic.x = 0, this.MsgBigPic.y = 0;
				var e = PreLoader.ChatShifter + this.MsgPicStr;
				"" == e ? (this.MsgBigPic.update(e), this.MsgBigPicComplete()) : (this.MsgBigPic.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.MsgBigPicComplete), this.MsgBigPic.update(e))
			}, e.prototype.MsgBigPicComplete = function() {
				var t = this.getScaleBigPic(this.MsgBigPic, GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight);
				this.MsgBigPic.sizeImage(parseInt(t.w), parseInt(t.h)), this.MsgBigPic.x = (GloableData.getInstance().gameInfo.gGameWidth - this.MsgBigPic.width) / 2, this.MsgBigPic.y = (GloableData.getInstance().gameInfo.gGameHeight - this.MsgBigPic.height) / 2, this.MsgBigPicBox.addChild(this.MsgBigPicbg), this.MsgBigPicBox.addChild(this.MsgBigPic), Laya.stage.addChild(this.MsgBigPicBox), this.MsgBigPicBox.on(OEvent.CLICK, this, this.removeBigPic)
			}, e.prototype.removeBigPic = function() {
				this.MsgBigPicBox.removeAll(), this.MsgBigPicBox.off(OEvent.CLICK, this, this.removeBigPic), UIManager.getInstance().chat.openMsg()
			}, e.prototype.getScalePic = function() {
				if (this.MsgPicBg.width >= this.MsgPicBg.height && this.MsgPicBg.width > this.MsgPicMaxW) {
					var t = this.MsgPicMaxW * this.MsgPicBg.height / this.MsgPicBg.width;
					return void this.MsgPicBg.size(this.MsgPicMaxW, t)
				}
				if (this.MsgPicBg.width <= this.MsgPicBg.height && this.MsgPicBg.height > this.MsgMaxH) {
					var e = this.MsgPicMaxW * this.MsgPicBg.width / this.MsgPicBg.height;
					return void this.MsgPicBg.size(e, this.MsgPicMaxW)
				}
			}, e.prototype.getScaleBigPic = function(t, e, i) {
				void 0 === e && (e = 0), void 0 === i && (i = 0);
				var a = {},
					n = 0,
					s = 0;
				return t.width > e ? (s = e, n = e * t.height / t.width) : (s = t.width, n = t.height), n > i && (s = i * s / n, n = i), a = {
					w: s,
					h: n
				}
			}, e.prototype.drawVoiceView = function() {
				this.MsgVoice = new OSprite, this.MsgVoice.y = this.MsgNameSpace + this.MsgTextLineHeight, this.MsgVoiceIcon = new OImage, 1 == this.MsgPosition ? this.voiceIconPath = GloableData.getInstance().serverPath + "res/chat/left-24.png" : 2 == this.MsgPosition ? this.voiceIconPath = "" : this.voiceIconPath = GloableData.getInstance().serverPath + "res/chat/right-24.png", this.MsgVoiceIcon.skin = this.voiceIconPath, this.MsgVoiceIcon.size(this.MsgVoiceIconSize, this.MsgVoiceIconSize);
				var t = GloableData.getInstance().getFileListItemURL(PreLoader.uiShifter + this.backgroundPath);
				Laya.loader.load(t, laya.utils.Handler.create(this, this.MsgVoiceBgComplete), null, laya.net.Loader.IMAGE, 0, !0)
			}, e.prototype.MsgVoiceBgComplete = function(t) {
				this.MsgVoiceBg = new OImage, this.MsgVoiceBg.source = t, this.MsgVoiceBg.scale(this.msgTextBgScale, this.msgTextBgScale);
				var e = this.getSudoku(this.MsgVoiceBg, "0", this.msgTextBgScale);
				this.MsgVoiceBg.setGrid(e), this.addChild(this.MsgTextBox);
				var i = this.MsgSize,
					a = 1 + i / 10 + (i % 10 == 0 ? 0 : 1),
					n = a * this.MsgTextFontSize + 2 * this.MsgTextLRSpace,
					s = 7 * this.MsgTextFontSize;
				n > s && (n = s), n < this.MsgVoiceBg.width && (n = this.MsgVoiceBg.width);
				var o = 2 * this.MsgTextTBSpace + this.MsgTextFontSize;
				if (o < this.MsgVoiceBg.height && (o = this.MsgVoiceBg.height), this.MsgVoiceBg.size(n / this.msgTextBgScale, o), this.MsgVoiceIcon.y = (this.MsgVoiceBg.height * this.msgTextBgScale - this.MsgVoiceIconSize) / 2, this.MsgVoice.width = n, this.MsgVoice.height = this.MsgVoiceBg.height, 1 == this.MsgPosition) this.MsgVoiceIcon.x = this.MsgSpace + this.MsgTextLRSpace, this.MsgVoice.x = this.MsgHeadLength + this.getSpace();
				else {
					if (2 == this.MsgPosition) return;
					this.MsgVoiceIcon.x = this.MsgVoice.width - this.MsgVoiceIconSize - this.MsgSpace - this.MsgTextLRSpace, this.MsgVoice.x = this.parentW - this.MsgHeadLength - this.getSpace() - this.MsgVoice.width
				}
				this.addHeadName(), this.MsgVoice.addChild(this.MsgVoiceBg), this.MsgVoice.addChild(this.MsgVoiceIcon), this.addChild(this.MsgVoice), this.setHeight(this.MsgVoice)
			}, e.prototype.VoiceClick = function(t) {
				t && t.stopPropagation(), UIManager.getInstance().chat.curVoice = "" + this.parentChat.index + "_" + this.index;
				var e = "audio/voice/" + this.MsgContent,
					i = GloableData.getInstance().getFileListItemURL(e);
				i.indexOf("http") < 0 && (i = location.protocol + i), mgr.AudioMgr.instance.play(audio.ChannelEnum.vo, i, 100)
			}, e.prototype.getSpace = function() {
				var t;
				return t = this.hasHeadFlg ? this.MsgSpace : 0
			}, e.prototype.getSudoku = function(t, e, i) {
				if (void 0 === t && (t = null), void 0 === e && (e = "0"), void 0 === i && (i = 1), t && t.height <= 32) {
					var a = Math.ceil(t.height / 3 * 2),
						n = Math.ceil(t.width / 5),
						s = Math.ceil(t.width / 5),
						o = Math.ceil(t.height / 5),
						r = "" + a + "," + s + "," + o + "," + n + "," + e;
					return r
				}
				var h = "" + Math.ceil(parseInt(this.strEdge[0]) / i) + "," + Math.ceil(parseInt(this.strEdge[3]) / i) + "," + Math.floor(parseInt(this.strEdge[1]) / i) + "," + Math.floor(parseInt(this.strEdge[2]) / i) + "," + e;
				return h
			}, e.prototype.dispose = function(t) {
				void 0 === t && (t = !0), this.bShow = !1, this.parentChat = null, this.parentW = 0, this.parentH = 0, t && (this.eventData = []), this.height = 0, this.hasNameFlg && (this.MsgName.dispose(), this.hasNameFlg = !1), this.hasHeadFlg && (this.MsgHead.removeAll(), this.hasHeadFlg = !1), this.MsgHeadLength = 0, 1 == this.MsgType && this.MsgTextBox && this.MsgTextBox.removeAll(), this.MsgTextStr = "", 2 == this.MsgType && this.MsgPic && (this.MsgPic.removeAll(), this.MsgPicStr = ""), 3 == this.MsgType && this.MsgVoice && (this.MsgVoice.removeAll(), this.MsgVoiceStr = "", this.MsgVoiceLeng = 0), this.MsgLong = null, this.MsgMaxW = 0, this.MsgMaxH = 0, this.txtHeight = 0, this.txtWidth = 0
			}, e.prototype.saveDate = function() {
				var t = {
					message: "" + this.MsgContent,
					bottomPath: this.backgroundPath,
					name: this.MsgNameTitle,
					layout: "" + this.MsgPosition,
					voiceIconPath: this.voiceIconPath,
					type: "" + this.MsgType,
					facePath: this.MsgHeadPath,
					size: "" + this.MsgSize
				};
				return t
			}, e.prototype.loadData = function(t, e) {
				this.parentChat = t, this.MsgContent = e.message, this.backgroundPath = e.bottomPath, this.MsgNameTitle = e.name, this.MsgPosition = parseInt(e.layout), this.voiceIconPath = e.voiceIconPath, this.MsgType = parseInt(e.type), this.MsgHeadPath = e.facePath, this.MsgSize = e.size
			}, e
		}(OBox);
	t.ChatUIItem = e
}(chat || (chat = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ImageComponent = function(t) {
	function e(e, i, a, n, s, o, r, h, l) {
		void 0 === e && (e = ""), void 0 === i && (i = -1), void 0 === a && (a = 1), void 0 === n && (n = null), void 0 === s && (s = null), void 0 === o && (o = null), void 0 === r && (r = !1), void 0 === h && (h = null), void 0 === l && (l = !1);
		var c = t.call(this) || this;
		return c.pixelHitTest = !1, c.mirror = !1, c.isMirror = !1, c.isMove = !1, c.isRotation = !1, c.totalRotationFrame = 0, c.rotationPivotType = -1, c.frameChangeX = 0, c.frameChangeY = 0, c.frameChangeAlpha = 0, c.frameChangeScaleX = 0, c.frameChangeScaleY = 0, c.frameChangeRotation = 0, c.moveFrame = 0, c.rotationFrame = 0, c.scaleFrame = 0, c.selfInitX = 0, c.selfInitY = 0, c.selfInitAlpha = 0, c.selfInitScaleX = 0, c.selfInitScaleY = 0, c.selfInitRotation = 0, c.isPause = !0, c.isScale = !1, c.url = e, c.id = i, c.alpha = a, c.callBack = n, c.callArgv = o, c.callBackParent = s, c.mouseEnabled = !0, c.mouseThrough = !0, c.pixelHitTest = r, c.mirror = l, c.tag = null, h && (c.x = h.x, c.y = h.y), c.init(), c.initSelf(), c
	}
	return __extends(e, t), e.prototype.setMirror = function() {
		!this.isMirror && this.scaleX >= 0 && (this.isMirror = !0, this.scaleX = -parseFloat(this.scaleX + ""), this.x += this.width * Math.abs(this.scaleX))
	}, e.prototype.getURL = function(t) {
		return t ? t.indexOf("//") > -1 ? t : GloableData.getInstance().getFileListItemURL(t) : this.url.indexOf("//") > -1 ? this.url : GloableData.getInstance().getFileListItemURL(this.url)
	}, e.prototype.updateURL = function(t, e, i, a, n, s, o, r) {
		return void 0 === e && (e = -1), void 0 === i && (i = 1), void 0 === a && (a = null), void 0 === n && (n = null), void 0 === s && (s = null), void 0 === o && (o = null), void 0 === r && (r = !1), this.url = t, "" === this.getURL() ? (this.image.source = null, this.event(GameEventConstant.LOAD_IMAGE_COMPLETE), void EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_IMAGE_COMPLETE, [this.url, this]))) : (this.id = e, this.alpha = i, this.callBack = a, this.callArgv = s, this.callBackParent = n, o && (this.x = o.x, this.y = o.y), void(this.image ? this.setTexture() : this.init()))
	}, e.prototype.sizeDouble = function(t, e) {
		return {
			w: t,
			h: e
		}
	}, e.prototype.setTexture = function() {
		var t = ORG.loader.getRes(this.getURL());
		if (t) {
			if (this.image.source = t, GloableData.getInstance().getFileItem(this.url)) {
				var e = GloableData.getInstance().getFileItem(this.url).obj;
				if (e && -1 !== e.h && -1 !== e.w) {
					var i = this.sizeDouble(e.w, e.h);
					this.image.size(i.w, i.h)
				} else {
					var i = this.sizeDouble(t.width, t.height);
					this.image.size(i.w, i.h)
				}
			} else {
				var i = this.sizeDouble(t.width, t.height);
				this.image.size(i.w, i.h)
			}
			this.needClean(), this.oldUrl = this.url, this.size(this.image.width, this.image.height), this.event(GameEventConstant.LOAD_IMAGE_COMPLETE), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_IMAGE_COMPLETE, [this.url, this]))
		} else ORG.loader.load(this.getURL(), OHandler.create(this, this.loadComplete, [this.url]), null, OLoader.IMAGE, 0)
	}, e.prototype.init = function() {
		return this.image = new OImage, this.image.mouseEnabled = !0, this.image.mouseThrough = !0, this.addChild(this.image), null != this.onClick && this.image.on(Laya.Event.CLICK, this, this.onClick), "" === this.getURL() ? (this.event(GameEventConstant.LOAD_IMAGE_COMPLETE), void EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_IMAGE_COMPLETE, [this.url, this]))) : void("" !== this.url && this.setTexture())
	}, e.prototype.loadComplete = function(t) {
		if (t == this.url) {
			var e = ORG.loader.getRes(this.getURL());
			if (e) if (this.image.source = e, GloableData.getInstance().getFileItem(this.url)) {
				var i = GloableData.getInstance().getFileItem(this.url).obj;
				if (i && -1 !== i.h && -1 !== i.w) {
					var a = this.sizeDouble(i.w, i.h);
					this.image.size(a.w, a.h)
				} else {
					var a = this.sizeDouble(e.width, e.height);
					this.image.size(a.w, a.h)
				}
			} else {
				var a = this.sizeDouble(e.width, e.height);
				this.image.size(a.w, a.h)
			}
			this.needClean(), this.oldUrl = this.url, this.size(this.image.width, this.image.height), this.event(GameEventConstant.LOAD_IMAGE_COMPLETE), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_IMAGE_COMPLETE, [this.url, this]))
		}
	}, e.prototype.onClick = function() {
		this.callBack && this.callBackParent && this.callBack.call(this.callBackParent, this.callArgv)
	}, e.prototype.dispose = function(t) {
		void 0 === t && (t = !1), this.off(Laya.Event.CLICK, this, this.onClick), this.clean(!0, t), this.removeChildren()
	}, e.prototype.getBitmap = function() {
		return this.image.source
	}, e.prototype.getRect = function() {
		return this.mirror ? {
			x: this.x - this.width,
			y: this.y,
			width: this.width,
			height: this.height
		} : {
			x: this.x,
			y: this.y,
			width: this.width,
			height: this.height
		}
	}, e.prototype.needClean = function() {
		this.oldUrl !== this.url
	}, e.prototype.initPostion = function() {
		this.image.pivotX = this.image.pivotY = this.pivotX = this.pivotY = 0, this.image.x = this.image.y = this.x = this.y = 0, this.image.rotation = 0, this.cleanMoveTweenArgv(), this.cleanRotationTweenArgv(), this.cleanScaleTweenArgv()
	}, e.prototype.clean = function(t, e) {
		void 0 === t && (t = !0), void 0 === e && (e = !1), this.image && (this.image.source = null, this.image.skin = ""), t && this.initPostion(), this.url = ""
	}, e.prototype.cleanMoveTween = function() {
		this.moveTween && (this.moveTween && this.moveTween.recover(), this.moveTween && (this.moveTween = null))
	}, e.prototype.cleanRotationTween = function() {
		this.rotationTween && (this.rotationTween && this.rotationTween.recover(), this.rotationTween = null)
	}, e.prototype.pointHasColor = function(t, e) {
		var i = this.image.globalToLocal(new OPoint(t, e)),
			a = this.image.source.getPixels(i.x, i.y, 1, 1);
		return 0 != a[3]
	}, e.prototype.update = function(t, e) {
		return void 0 === e && (e = !1), this.url = t, "" === this.getURL() ? (this.oldUrl = this.url, this.event(GameEventConstant.LOAD_IMAGE_COMPLETE), void EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_IMAGE_COMPLETE, [this.url, this]))) : void this.setTexture()
	}, e.prototype.stopTrans = function() {}, e.prototype.moveImage = function(t, e, i) {
		this.cleanMoveTweenArgv(), this.moveFrame = i, this.frameChangeX = (t - this.x) / this.moveFrame, this.frameChangeY = (e - this.y) / this.moveFrame, this.isMove = !0
	}, e.prototype.stopMove = function() {
		this.cleanMoveTween()
	}, e.prototype.scaleImage = function(t, e, i) {
		this.cleanScaleTweenArgv(), this.scaleFrame = i, this.frameChangeScaleX = (t - this.scaleX) / this.moveFrame, this.frameChangeScaleY = (e - this.scaleY) / this.moveFrame, this.isScale = !0
	}, e.prototype.cleanScaleTween = function() {
		this.scaleTween && (this.scaleTween && this.scaleTween.complete(), this.scaleTween && this.scaleTween.clear(), this.scaleTween && this.scaleTween.recover(), this.scaleTween = null)
	}, e.prototype.stopScale = function() {
		this.scaleTween && (this.scaleTween && this.scaleTween.clear(), this.scaleTween && this.scaleTween.recover(), this.scaleTween = null, this.scaleComplete = !0)
	}, e.prototype.setGrid = function(t) {
		this.image.sizeGrid = t
	}, e.prototype.sizeImage = function(t, e) {
		this.image.size(t, e), this.size(this.image.width, this.image.height)
	}, e.prototype.startMove = function(t) {
		if (this.cleanMoveTweenArgv(), this.cleanScaleTweenArgv(), t.mirror ? (this.isMirror || (this.mirror = !0, this.isMirror = !0, this.scaleX = -this.scaleX, this.x += this.width * Math.abs(this.scaleX), this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType && (this.image.pivotX = this.image.width - this.image.pivotX, this.image.x = this.image.pivotX), this.isRotation ? this.image.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation : this.image.rotation = -this.image.rotation), t.zoom_x = -t.zoom_x, t.endx += this.width * Math.abs(t.zoom_x)) : this.isMirror && (this.mirror = !1, this.isMirror = !1, this.scaleX = Math.abs(this.scaleX), this.x -= this.width * Math.abs(this.scaleX), this.frameChangeRotation = -this.frameChangeRotation, 0 !== this.rotationPivotType && (this.image.pivotX = this.image.width - this.image.pivotX, this.image.x = this.image.pivotX), this.isRotation ? this.image.rotation = (this.totalRotationFrame - this.rotationFrame) * this.frameChangeRotation : this.image.rotation = -this.image.rotation), 0 == t.frames || GloableData.getInstance().quickRun) this.x = t.endx, this.y = t.endy, this.alpha = t.endAlpha, this.scaleX = t.zoom_x, this.scaleY = t.zoom_y, this.cleanMoveTweenArgv(), this.cleanScaleTweenArgv();
		else {
			this.scaleX !== t.zoom_x || this.scaleY !== t.zoom_y, this.initSelf(), this.moveFrame = t.frames, this.scaleFrame = t.frames, this.frameChangeX = (t.endx - this.x) / t.frames, this.frameChangeY = (t.endy - this.y) / t.frames, this.frameChangeAlpha = (t.endAlpha - this.alpha) / t.frames, this.frameChangeScaleX = (t.zoom_x - this.scaleX) / t.frames, this.frameChangeScaleY = (t.zoom_y - this.scaleY) / t.frames, this.isMove = !0, this.isScale = !0
		}
	}, e.prototype.startRotation = function(t, e) {
		if (this.cleanRotationTweenArgv(), GloableData.getInstance().quickRun) {
			if (this.image.rotation = e, this.cleanRotationTweenArgv(), t.loop) {
				var i = this.image.rotation + t.endRotate;
				this.startRotation(t, i)
			}
		} else this.totalRotationFrame = t.frames, this.rotationFrame = t.frames, this.frameChangeRotation = (e - this.image.rotation) / t.frames, this.mirror && (this.frameChangeRotation = -this.frameChangeRotation), this.isRotation = !0, 0 == this.frameChangeRotation && (this.totalRotationFrame = 0, this.rotationFrame = 0, this.frameChangeRotation = 0, this.isRotation = !1)
	}, e.prototype.initSelf = function() {
		this.selfInitX = this.x, this.selfInitY = this.y, this.selfInitAlpha = this.alpha, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY, this.selfInitRotation = this.image.rotation
	}, e.prototype.updateTween = function() {
		this.moveFrame < 0 && this.rotationFrame < 0 && this.scaleFrame < 0 || this.isPause || (this.isMove && (this.moveFrame > 0 ? (this.moveFrame -= 1, this.selfInitX += this.frameChangeX, this.selfInitY += this.frameChangeY, this.selfInitAlpha += this.frameChangeAlpha, this.x = this.selfInitX, this.y = this.selfInitY, this.alpha = this.selfInitAlpha) : (this.x = this.selfInitX, this.y = this.selfInitY, this.alpha = this.selfInitAlpha, this.cleanMoveTweenArgv())), this.isRotation && (this.rotationFrame > 0 ? (this.rotationFrame -= 1, this.selfInitRotation += this.frameChangeRotation, this.image.rotation = this.selfInitRotation) : (this.image.rotation = this.selfInitRotation, this.cleanRotationTweenArgv())), this.isScale && (this.scaleFrame > 0 ? (this.scaleFrame -= 1, this.selfInitScaleX += this.frameChangeScaleX, this.selfInitScaleY += this.frameChangeScaleY, this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY) : (this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY, this.cleanScaleTweenArgv())))
	}, e.prototype.completeScale = function() {
		this.isScale && (this.selfInitScaleX += this.scaleFrame * this.frameChangeScaleX, this.selfInitScaleY += this.scaleFrame * this.frameChangeScaleY, this.scaleX = this.selfInitScaleX, this.scaleY = this.selfInitScaleY, this.isScale = !1), this.cleanScaleTweenArgv()
	}, e.prototype.cleanScaleTweenArgv = function() {
		this.scaleFrame = 0, this.isScale = !1, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY, this.frameChangeScaleX = 0, this.frameChangeScaleY = 0
	}, e.prototype.completeMove = function() {
		this.isMove && (this.selfInitX += this.moveFrame * this.frameChangeX, this.selfInitY += this.moveFrame * this.frameChangeY, this.selfInitAlpha += this.moveFrame * this.frameChangeAlpha, this.x = this.selfInitX, this.y = this.selfInitY, this.alpha = this.selfInitAlpha, this.isMove = !1), this.cleanMoveTweenArgv()
	}, e.prototype.cleanMoveTweenArgv = function() {
		this.isMove = !1, this.moveFrame = 0, this.selfInitX = this.x, this.selfInitY = this.y, this.selfInitAlpha = this.alpha, this.selfInitScaleX = this.scaleX, this.selfInitScaleY = this.scaleY, this.frameChangeAlpha = 0, this.frameChangeX = 0, this.frameChangeY = 0
	}, e.prototype.completeRotation = function() {
		this.isRotation && (this.selfInitRotation = (this.isMirror ? Math.abs(this.selfInitRotation) : this.selfInitRotation) + this.rotationFrame * Math.abs(this.frameChangeRotation), this.image.rotation = this.selfInitRotation, this.isRotation = !1), this.cleanRotationTweenArgv()
	}, e.prototype.cleanRotationTweenArgv = function() {
		this.isRotation = !1, this.rotationFrame = 0, this.selfInitRotation = this.image.rotation, this.frameChangeRotation = 0
	}, e.prototype.complete = function() {
		this.completeMove(), this.completeRotation(), this.completeScale()
	}, e.prototype.pause = function() {
		this.isPause = !0
	}, e.prototype.resume = function() {
		(this.isMove || this.isRotation || this.isScale) && (this.isPause = !1)
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGButton = function(t) {
	function e(e, i, a, n, s) {
		void 0 === n && (n = ""), void 0 === s && (s = !1);
		var o = t.call(this) || this;
		return o.showIndex = -1, o.pixelHitTest = !1, o.drawX = 0, o.drawY = 0, o.type = -1, o.post = null, o.textPos = null, o.isLoadComplete = !1, o.setComplete = !1, o.isVisible = !0, o.size(0, 0), o.visible = !1, o.text = n, o.showIndex = -1, o.toggleOn = s, o.image_1_url = "" == e ? i : e, o.image_2_url = "" == i ? e : i, o.dispatchStr = a, o.tag = null, o.image_1 = new OImage, o.image_2 = new OImage, o.label = utils.getOText(), o.addChild(o.image_1), o.addChild(o.image_2), o.addChild(o.label), "" !== o.image_1_url && "" !== o.image_2_url && o.init(), o.addEvent(), o.mouseEnabled = !0, o.mouseThrough = !0, o.image_1.mouseEnabled = !0, o.image_1.mouseThrough = !0, o.image_2.mouseEnabled = !0, o.image_2.mouseThrough = !0, o
	}
	return __extends(e, t), Object.defineProperty(e.prototype, "image1Path", {
		get: function() {
			return this.image_1_url
		},
		enumerable: !0,
		configurable: !0
	}), Object.defineProperty(e.prototype, "image2Path", {
		get: function() {
			return this.image_2_url
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.getURL = function(t) {
		return GloableData.getInstance().gameInfo.isPc ? t.indexOf(HttpURL.LocalPath) > -1 ? t : GloableData.getInstance().getFileListItemURL(t) : t.indexOf("//") > -1 ? t : GloableData.getInstance().getFileListItemURL(t)
	}, e.prototype.init = function() {
		if (this.image_1_url && ORG.loader.getRes(this.getURL(this.image_1_url))) {
			if (this.image_1.source = ORG.loader.getRes(this.getURL(this.image_1_url)), this.isLoadComplete = !0, GloableData.getInstance().getFileItem(this.image_1_url)) {
				var t = GloableData.getInstance().getFileItem(this.image_1_url).obj;
				t && -1 !== t.h && -1 !== t.w ? this.image_1.size(t.w, t.h) : this.image_1.size(this.image_1.source.width, this.image_1.source.height)
			} else this.image_1.size(this.image_1.source.width, this.image_1.source.height);
			this.addText()
		} else this.image_1_url && ORG.loader.load(this.getURL(this.image_1_url), OHandler.create(this, this.loadImageComplete, [this.image_1_url]), null, OLoader.IMAGE);
		if (this.image_2_url && ORG.loader.getRes(this.getURL(this.image_2_url))) if (this.image_2.source = ORG.loader.getRes(this.getURL(this.image_2_url)), this.isLoadComplete = !0, GloableData.getInstance().getFileItem(this.image_2_url)) {
			var t = GloableData.getInstance().getFileItem(this.image_2_url).obj;
			t && -1 !== t.h && -1 !== t.w ? this.image_2.size(t.w, t.h) : this.image_2.size(this.image_2.source.width, this.image_2.source.height)
		} else this.image_2.size(this.image_2.source.width, this.image_2.source.height);
		else this.image_2_url && ORG.loader.load(this.getURL(this.image_2_url), OHandler.create(this, this.loadImageComplete, [this.image_2_url]), null, OLoader.IMAGE);
		this.toggle = this.toggleOn, this.setSizeAndPos(), this.cacheAsBitmap = !0
	}, e.prototype.addText = function() {
		this.drawX = 0, this.drawY = 0;
		var t = 0;
		this.label.cleanTexts();
		for (var e = StringUtil.getAnalysisText(this.text, GloableData.getInstance().gameMainData.System.FontUiColor.getColorToUint()); e.texts.length > 0;) {
			var i = e.texts.shift();
			i.x = this.drawX, i.y = this.drawY, this.drawX += i.width, t < i.height && (t = i.height), this.label.addtext(i)
		}
		this.label.width = this.drawX, this.label.height = t, this.label.y = this.height - this.label.height >> 1, this.label.x = this.width - this.label.width >> 1
	}, e.prototype.updateButton = function(t, e, i) {
		void 0 === i && (i = ""), "" == t && (this.image_1.source = null), "" == e && (this.image_2.source = null), this.image_1_url == t && this.image_2_url == e || (this.image_1_url = t, this.image_2_url = e, this.text = i, this.init())
	}, e.prototype.addEvent = function() {
		EventManager.addEventListener(this, OEvent.CLICK, this.clickBtn, this), EventManager.addEventListener(this, OEvent.MOUSE_DOWN, this.downBtn, this, ["down"]), OrgWeb.getInstance().getIsPC() && EventManager.addEventListener(this, OEvent.MOUSE_OVER, this.downBtn, this, ["over"]), EventManager.addEventListener(this, OEvent.MOUSE_OUT, this.outBtn, this)
	}, e.prototype.removeEvent = function() {
		EventManager.removeEventListener(this, OEvent.CLICK, this.clickBtn, this), EventManager.removeEventListener(this, OEvent.MOUSE_DOWN, this.downBtn, this), OrgWeb.getInstance().getIsPC() && EventManager.removeEventListener(this, OEvent.MOUSE_OVER, this.downBtn, this), EventManager.removeEventListener(this, OEvent.MOUSE_OUT, this.outBtn, this)
	}, e.prototype.dispose = function() {
		this.image_1 && (this.image_1.dispose(), this.image_1 = null), this.image_2 && (this.image_2.dispose(), this.image_2 = null), this.removeEvent(), this.removeChildren()
	}, Object.defineProperty(e.prototype, "toggle", {
		set: function(t) {
			this.toggleOn = t, t ? (this.image_2.alpha = 1, this.image_1.alpha = 1 / 255) : (this.image_1.alpha = 1, this.image_2.alpha = 1 / 255)
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.downBtn = function(t, e) {
		if ("over" == t) {
			if (GloableData.getInstance().gameMainData.System.SEMove.FileName.name && this.image_1_url != this.image_2_url) {
				var i = "audio/se/" + GloableData.getInstance().gameMainData.System.SEMove.FileName.name;
				mgr.AudioMgr.instance.play(audio.ChannelEnum.fx, i, 100)
			}
		} else if ("down" == t && GloableData.getInstance().gameMainData.System.SEClick.FileName.name) {
			var i = "audio/se/" + GloableData.getInstance().gameMainData.System.SEClick.FileName.name;
			mgr.AudioMgr.instance.play(audio.ChannelEnum.fx, i, 100)
		}
		this.toggleOn ? (this.image_1.alpha = 1, this.image_2.alpha = 1 / 255) : (this.image_1.alpha = 1 / 255, this.image_2.alpha = 1)
	}, e.prototype.outBtn = function() {
		this.toggleOn ? (this.image_1.alpha = 1 / 255, this.image_2.alpha = 1) : (this.image_1.alpha = 1, this.image_2.alpha = 1 / 255)
	}, e.prototype.checkSoucePixel = function(t) {
		if (this.image_1.source) {
			var e = this.image_1.width / this.image_1.source.sourceWidth,
				i = this.image_1.height / this.image_1.source.sourceHeight;
			if (this.image_1.source.getPixels(Math.ceil(t.x / e), Math.ceil(t.y / i), 1, 1)[3] > 0) return !0
		}
		if (this.image_2.source) {
			var e = this.image_2.width / this.image_2.source.sourceWidth,
				i = this.image_2.height / this.image_2.source.sourceHeight;
			if (this.image_2.source.getPixels(Math.ceil(t.x / e), Math.ceil(t.y / i), 1, 1)[3] > 0) return !0
		}
		return !1
	}, e.prototype.clickBtn = function(t) {
		return this.outBtn(), OrgWeb.getInstance().upEffectiveClick(), this.dispatchStr == GameEventConstant.CLICK_TEXT_CHOICE_BUTTON || this.dispatchStr == GameEventConstant.CLICK_SFLOAT_BUTTON ? EventCenter.dispatchEvent(new GameEvent(this.dispatchStr, {
			target: this,
			oevent: t
		})) : EventCenter.dispatchEvent(new GameEvent(this.dispatchStr, this)), !0
	}, e.prototype.loadImageComplete = function(t) {
		if ("" != t) {
			if (t == this.image_1_url && this.image_1 && (this.image_1.source = ORG.loader.getRes(this.getURL(this.image_1_url)), this.isLoadComplete = !0, this.image_1 && this.image_1.source)) if (GloableData.getInstance().getFileItem(this.image_1_url)) {
				var e = GloableData.getInstance().getFileItem(this.image_1_url).obj;
				e && -1 !== e.h && -1 !== e.w ? this.image_1.size(e.w, e.h) : this.image_1.size(this.image_1.source.width, this.image_1.source.height)
			} else this.image_1.size(this.image_1.source.width, this.image_1.source.height);
			if (t == this.image_2_url && this.image_2 && (this.image_2.source = ORG.loader.getRes(this.getURL(this.image_2_url)), this.isLoadComplete = !0, this.image_2 && this.image_2.source)) if (GloableData.getInstance().getFileItem(this.image_2_url)) {
				var e = GloableData.getInstance().getFileItem(this.image_2_url).obj;
				e && -1 !== e.h && -1 !== e.w ? this.image_2.size(e.w, e.h) : this.image_2.size(this.image_2.source.width, this.image_2.source.height)
			} else this.image_2.size(this.image_2.source.width, this.image_2.source.height);
			this.addText(), this.setSizeAndPos()
		}
	}, Object.defineProperty(e.prototype, "postion", {
		set: function(t) {
			this.post = t, (this.image_1 || this.image_2) && (this.setComplete = !0, this.setSizeAndPos())
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.setSizeAndPos = function() {
		try {
			if ("" == this.image_1_url || "" == this.image_2_url) return;
			this.image_1 && (this.width < this.image_1.width || this.height < this.image_1.height) && this.size(this.image_1.width, this.image_1.height), this.image_2 && (this.width < this.image_2.width || this.height < this.image_2.height) && this.size(this.image_2.width, this.image_2.height), null != this.textPos ? (this.label.x = this.textPos.x, this.label.y = this.textPos.y) : (this.label.x = this.image_1.width - this.label.width >> 1, this.label.y = this.image_1.height - this.label.height >> 1);
			var t = -1 == this.showIndex ? this.index : this.showIndex;
			if (this.type == GloableStaticData.BUTTON_TYPE_TEXT_CHOICE) if (null == this.post) {
				var e = this.image_1.height * UIManager.getInstance().textDif.totalNum + (UIManager.getInstance().textDif.totalNum - 1) * UIManager.getInstance().textDif.choiceSpace,
					i = UIManager.getInstance().textDif.totalHeight - e >> 1;
				this.y = i + t * (this.height + UIManager.getInstance().textDif.choiceSpace), this.x = GloableData.getInstance().gameMainData.Headr.GWidth - this.image_1.width >> 1
			} else this.y = parseInt(this.post.y) + t * (this.height + UIManager.getInstance().textDif.choiceSpace), this.x = parseInt(this.post.x);
			else if (this.type == GloableStaticData.BUTTON_TYPE_PIC_CHOICE) this.post && (this.y = parseInt(this.post.y), this.x = parseInt(this.post.x));
			else if (this.type == GloableStaticData.BUTTON_TYPE_TEXT_CHOICE_2) if (null == this.post) {
				var e = this.image_1.height * UIManager.getInstance().textDif.totalNum + (UIManager.getInstance().textDif.totalNum - 1) * UIManager.getInstance().textDif.choiceSpace,
					i = UIManager.getInstance().textDif.totalHeight - e >> 1;
				this.y = i + t * (this.height + UIManager.getInstance().textDif.choiceSpace), this.x = GloableData.getInstance().gameMainData.Headr.GWidth - this.image_1.width >> 1
			} else this.y = parseInt(this.post.y) + t * (this.height + UIManager.getInstance().textDif.choiceSpace), this.x = parseInt(this.post.x);
			else this.type == GloableStaticData.BUTTON_TYPE_TEXT_CHOICE_DIY ? this.post && (this.y = parseInt(this.post.y), this.x = parseInt(this.post.x)) : this.post && (this.y = parseInt(this.post.y), this.x = parseInt(this.post.x));
			this.isLoadComplete && this.setComplete && (this.visible = this.isVisible), 0 !== this.width && 0 !== this.height && this.event(GameEventConstant.LOAD_ORGBUTTON_COMPLETE)
		} catch (a) {}
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGGraphics = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e.getInstance = function() {
		return null == e._instance && (e._instance = new e), e._instance
	}, e.prototype.getRound = function(t, e, i, a, n, s, o, r) {
		void 0 === a && (a = null), void 0 === n && (n = null), void 0 === s && (s = null), void 0 === o && (o = null);
		var h = new OSprite,
			l = new OSprite,
			c = [
				["moveTo", i, 0],
				["lineTo", t - i, 0],
				["arcTo", t, 0, t, i, i],
				["lineTo", t, e - i],
				["arcTo", t, e, t - i, e, i],
				["lineTo", i, e],
				["arcTo", 0, e, 0, e - i, i],
				["lineTo", 0, i],
				["arcTo", 0, 0, i, 0, i]
			];
		return "string" == typeof a && (a = {
			fillStyle: a
		}), r ? l.graphics.drawPath(r.x, r.y, c, a, n) : l.graphics.drawPath(0, 0, c, a, n), l.osize(t, e), h.osize(t, e), s && o && h.addEventLisner(GameEvent.CLICK, s, o), l.cacheAsBitmap = !0, h.addChild(l), h
	}, e.prototype.getTriangle = function(t, e, i, a, n, s, o) {
		void 0 === a && (a = null), void 0 === n && (n = null), void 0 === s && (s = null), void 0 === o && (o = null);
		var r = new OSprite,
			h = new OSprite,
			l = [
				["moveTo", t[0], t[1]],
				["lineTo", e[0], e[1]],
				["lineTo", i[0], i[1]],
				["lineTo", t[0], t[1]],
				["closePath"]
			];
		return h.graphics.drawPath(0, 0, l, a, n), h.cacheAsBitmap = !0, r.addChild(h), r
	}, e.prototype.getRect = function(t, e, i, a, n) {
		void 0 === a && (a = null), void 0 === n && (n = null);
		var s = new OSprite,
			o = new OSprite;
		return o.graphics.drawRect(0, 0, t, e, i.fillStyle, i.lineColor, i.lineWidth), o.osize(t, e), s.osize(t, e), a && n && s.addEventLisner(GameEvent.CLICK, a, n), o.cacheAsBitmap = !0, s.addChild(o), s
	}, e.prototype.getline = function(t, e, i, a, n, s) {
		void 0 === n && (n = 0), void 0 === s && (s = 0);
		var o = new OSprite,
			r = new OSprite;
		return r.graphics.drawLine(n, s, t, e, i, a), r.cacheAsBitmap = !0, o.addChild(r), o
	}, e.prototype.getClose = function(t, e, i, a) {
		void 0 === e && (e = 21), void 0 === i && (i = 21), void 0 === a && (a = "#000000");
		var n = new OSprite,
			s = this.getline(e, i, a, t),
			o = this.getline(e, 0, a, t, 0, i);
		return n.addChild(s), n.addChild(o), n.size(e, i), n
	}, e.prototype.getCircle = function(t, e, i, a, n, s) {
		void 0 === a && (a = ""), void 0 === n && (n = ""), void 0 === s && (s = 1);
		var o = new OSprite,
			r = new OSprite;
		return r.graphics.drawCircle(t, e, i, a, n, s), r.cacheAsBitmap = !0, o.addChild(r), o
	}, e.prototype.dispose = function() {
		e._instance = null
	}, e._instance = null, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGParticle = function(t) {
	function e(e, i) {
		void 0 === e && (e = 50), void 0 === i && (i = "");
		var a = t.call(this) || this;
		if (a.screenHeight = GloableData.getInstance().gameMainData.Headr.GHeight, a.screenWidth = GloableData.getInstance().gameMainData.Headr.GWidth, a.pnum = e, a.particletype = i, a.prefabArr = new Array(e), a.timeData && clearInterval(a.timeData), i == ORGPartShapeType.RAIN) {
			for (var n = 0; e > n; n++) {
				var s = new ORGRainPrefab;
				a.resetResetX(s), a.resetResetY(s), a.addChild(s), a.prefabArr[n] = s
			}
			a.timeData = setInterval(function() {
				a.updateRain()
			}, GloableStaticData.GAME_RUN_TIME)
		} else if (i == ORGPartShapeType.SNOW) {
			for (var n = 0; e > n; n++) {
				var s = new ORGSnowPrefab;
				a.resetResetX(s), a.resetResetY(s), a.addChild(s), a.prefabArr[n] = s
			}
			a.timeData = setInterval(function() {
				a.updateSnow()
			}, GloableStaticData.GAME_RUN_TIME)
		} else if (i == ORGPartShapeType.WIND) {
			for (var n = 0; e > n; n++) {
				var s = new ORGWindPrefab;
				a.resetResetX(s), a.resetResetY(s), a.addChild(s), a.prefabArr[n] = s
			}
			a.timeData = setInterval(function() {
				a.updateWind()
			}, GloableStaticData.GAME_RUN_TIME)
		}
		return a
	}
	return __extends(e, t), e.prototype.resetResetX = function(t) {
		this.particletype != ORGPartShapeType.WIND ? t.x = Math.floor(Math.random() * this.screenWidth + 1) : t.x = Math.floor(Math.random() * this.screenWidth + 1) + 200
	}, e.prototype.resetResetY = function(t) {
		t.y = Math.floor(Math.random() * GloableData.getInstance().gameMainData.Headr.GHeight + 1)
	}, e.prototype.updateRain = function() {
		for (var t = 0; t < this.pnum; t++) {
			var e = this.prefabArr[t];
			e.y += e.speed, e.y > this.screenHeight && (this.resetResetX(e), e.y = -50)
		}
	}, e.prototype.updateSnow = function() {
		for (var t = 0; t < this.pnum; t++) {
			var e = this.prefabArr[t];
			e.y += e.speed, e.x -= 1, e.y > this.screenHeight && (this.resetResetX(e), e.y = -50), e.rotation += e.rotateAngle, e.rotation > 360 && (e.rotation = 0)
		}
	}, e.prototype.updateWind = function() {
		for (var t = 0; t < this.pnum; t++) {
			var e = this.prefabArr[t];
			e.y += e.windSpeed, e.x -= e.windSpeed, e.y > this.screenHeight && (this.resetResetX(e), e.y = -50)
		}
	}, e.prototype.dispose = function() {
		this.removeAllChild(), clearInterval(this.timeData)
	}, e
}(OSprite), ORGPartShapeType = function() {
	function t() {}
	return t.RAIN = "rain", t.SNOW = "snow", t.WIND = "wind", t.NO = "no", t
}(), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGRainPrefab = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.color = "#e3e3e3", e.rainHeight = Math.floor(30 * Math.random() + 10), e.scaleY = 1.1 + e.rainHeight / 10, e.speed = e.rainHeight / 10 * 2 + 15, e.alpha = e.rainHeight / 100 + .3, e.start(), e
	}
	return __extends(e, t), e.prototype.start = function() {
		this.graphics.drawLine(1, 0, 0, this.rainHeight, this.color, 1), this.graphics.drawLine(1, 0, 1, this.rainHeight, this.color, 1), this.graphics.drawLine(1, 0, 2, this.rainHeight, this.color, 1)
	}, e.prototype.end = function() {}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGSlider = function(t) {
	function e(e, i, a, n) {
		void 0 === a && (a = 0), void 0 === n && (n = !0);
		var s = t.call(this) || this;
		return s.shifter = a, s.isListener = n, s.barComplet = !1, s.setInitValue = -1, s.tag = null, s.constructView(e, i), s
	}
	return __extends(e, t), e.prototype.loadComplete = function(t, e) {
		this.barComplet = !0, this.width = this.bar.width, this.height = this.bar.height, this.bar.scrollRect = new laya.maths.Rectangle(0, 0, this.bar.width, this.bar.height), -1 !== this.setInitValue && this.setValue(this.setInitValue)
	}, e.prototype.constructView = function(t, e) {
		this.addChild(new ImageComponent(t)), this.bar = new ImageComponent, this.bar.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.loadComplete), this.bar.updateURL(e), this.addChild(this.bar), this.isListener && (EventManager.addEventListener(this, OEvent.MOUSE_DOWN, this.mdHandler, this), EventManager.addEventListener(this.stage, OEvent.MOUSE_UP, this.muHandler, this), EventManager.addEventListener(this.stage, OEvent.MOUSE_OUT, this.muHandler, this), EventManager.addEventListener(this, OEvent.MOUSE_UP, this.muHandler, this))
	}, e.prototype.mdHandler = function(t) {
		EventManager.addEventListener(this.stage, OEvent.MOUSE_MOVE, this.changeHandler, this), this.changeHandler(t)
	}, e.prototype.muHandler = function(t) {
		t && t.stopPropagation(), EventManager.removeEventListener(this.stage, OEvent.MOUSE_MOVE, this.changeHandler, this)
	}, e.prototype.changeHandler = function(t) {
		t && t.stopPropagation();
		var e, i = this.globalToLocal(new OPoint(t.stageX, t.stageY)).x,
			a = this.bar.x + this.bar.width - this.shifter,
			n = this.bar.x + this.shifter;
		i > n && a > i ? e = (i - this.shifter) / (this.bar.width - this.shifter) : n >= i ? e = 0 : i >= a && (e = 1), this.setValue(e), EventManager.dispatchEvent(this, OEvent.CHANGED, e)
	}, e.prototype.setValue = function(t) {
		t = t > 1 ? 1 : t, t = 0 > t ? 0 : t, this.setInitValue = t, this.barComplet && (this.bar.scrollRect.width = (this.bar.width - this.shifter) * t)
	}, e.prototype.dispose = function() {
		EventManager.removeEventListener(this, OEvent.MOUSE_DOWN, this.mdHandler, this), EventManager.removeEventListener(this.stage, OEvent.MOUSE_UP, this.muHandler, this), EventManager.removeEventListener(this.stage, OEvent.MOUSE_OUT, this.muHandler, this), EventManager.removeEventListener(this, OEvent.MOUSE_UP, this.muHandler, this), EventCenter.removeEventListener(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.loadComplete), this.removeChildren()
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGSnowPrefab = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.color = "white", e.radius = Math.floor(5 * Math.random() + 2), e.speed = e.radius / 2 * 2, e.rotateAngle = e.speed, e.alpha = e.radius / 10 + .1, e.scaleY = .8, e.start(), e
	}
	return __extends(e, t), e.prototype.start = function() {
		this.graphics.drawCircle(this.radius, this.radius, this.radius - 1, this.color)
	}, e.prototype.end = function() {}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGWindPrefab = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.color = "#e3e3e3", e.windSpeed = Math.floor(11 * Math.random() + 4), e.speed = e.windSpeed / 2 + 4, e.scaleX = e.scaleY = e.speed / 10, e.alpha = e.speed / 10 + .2, e.start(), e
	}
	return __extends(e, t), e.prototype.start = function() {
		this.graphics.drawLine(100, 0, 0, 80, this.color, 1)
	}, e.prototype.end = function() {}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), popmsg;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this) || this;
				return a.data = e, a.p = i, a.msgText = null, a.drawX = 0, a.drawY = 0, a.textWidth = 0, a.textLine = 1, a.maxWidth = 0, a.newLine = !1, a.abcNumber = 0, a.conf = a.getProfile(parseInt(e.Argv[11])), a.ass(e), a
			}
			return __extends(e, t), e.prototype.getProfile = function(t) {
				for (var e = mgr.DataMgr.instance.bd.get("popMsg.profiles"), i = 0, a = e; i < a.length; i++) {
					var n = a[i];
					if (n.id == t) return n
				}
				return console.warn("no popmsg profile @id:", t), null
			}, e.prototype.getTextWidth = function() {
				for (var t = 0, e = GloableData.getInstance().getFontReWidth(this.content.font, this.content.fontSize), i = 0; i < this.content.lines.length; i++) {
					var a = this.content.lines[i],
						n = a.length * e;
					n > t && (t = n)
				}
				return t
			}, e.prototype.ass = function(t) {
				switch (this.leftWidth = this.p.width - (this.conf.headPath ? this.conf.headWidth : 0) - this.conf.spaceFaceAndName, this.conf.layoutType) {
				case 1:
					this.conf.name && (this.buildName(), this.nameTF.x = (this.conf.headPath ? this.conf.headWidth : 0) + this.conf.spaceFaceAndName), this.loadHead();
					break;
				case 2:
					this.headReady = !0;
					break;
				case 3:
					this.conf.name && (this.buildName(), this.nameTF.x = this.leftWidth - this.nameTF.width), this.loadHead()
				}
				var e, i;
				switch (parseInt(t.Argv[3])) {
				case 1:
					this.content = new OText, this.maxWidth = this.leftWidth - (this.conf.headPath ? this.conf.headWidth : 0) - this.conf.msgAreaLeftW - this.conf.msgAreaRightW - this.conf.spaceNameAndMsg, this.createMsgText(), this.content.pos(this.conf.msgAreaLeftW, this.conf.msgAreaTopH), this.contentReady = !0, this.bgW = this.content.width + this.conf.msgAreaLeftW + this.conf.msgAreaRightW;
					var a = GloableData.getInstance().getFontReHeight("微软雅黑", this.conf.msgFontSize);
					OrgWeb.getInstance().getIsfireFox() ? (this.content.y += a / 4, this.bgH = this.content.height + this.conf.msgAreaTopH + this.conf.msgAreaBottomH) : this.bgH = this.content.height + this.conf.msgAreaTopH + this.conf.msgAreaBottomH, 2 != this.conf.layoutType ? (i = this.bgH + (this.nameTF ? this.nameTF.height : this.conf.nameFontSize) + this.conf.spaceNameAndMsg, this.height = Math.round(i > this.conf.headHeight ? i : this.conf.headHeight)) : this.height = i = this.bgH, this.loadBG(), GloableData.getInstance().dGameSystem.replay.add(this.content.text);
					break;
				case 2:
					e = GloableData.getInstance().getFileListItemURL(PreLoader.ChatShifter + t.Argv[12]), this.content = new OImage, this.bgReady = !0, i = (this.nameTF ? this.nameTF.height : this.conf.nameFontSize) + this.conf.spaceNameAndMsg + parseInt(t.Argv[14]), this.height = 2 == this.conf.layoutType ? parseInt(t.Argv[14]) : this.conf.headPath ? i > this.conf.headHeight ? i : this.conf.headHeight : i, e ? this.content.loadImage(e, 0, 0, 0, 0, laya.utils.Handler.create(this, this.cCom)) : this.checkReady(2);
					break;
				case 3:
					e = 1 == this.conf.layoutType ? GloableData.getInstance().serverPath + "res/chat/left-24.png" : GloableData.getInstance().serverPath + "res/chat/right-24.png", this.content = new OImage, this.bgW = this.judgeAudioWidth(parseInt(this.data.Argv[7])) + this.conf.msgAreaLeftW + this.conf.msgAreaRightW, this.bgH = this.conf.msgFontSize + this.conf.msgAreaTopH + this.conf.msgAreaBottomH, i = this.bgH + (this.nameTF ? this.nameTF.height : this.conf.nameFontSize) + this.conf.spaceNameAndMsg, this.height = Math.round(i > this.conf.headHeight ? i : this.conf.headHeight), this.content.loadImage(e, 1 == this.conf.layoutType ? this.conf.msgAreaLeftW : this.bgW - this.conf.msgAreaRightW - this.conf.msgFontSize, this.conf.msgAreaTopH, 0, 0, laya.utils.Handler.create(this, this.aIconCom)), this.loadBG()
				}
			}, e.prototype.replaceTxt = function(t) {
				var e = t;
				return e = e.replace(/\\[Ww]\[([0-9]+)]/g, ""), e = e.replace(/\\[Ss]\[([0-9]+)]/g, ""), e = e.replace(/\\\|/g, ""), e = e.replace(/\\\./g, ""), e = e.replace(/\\\>/g, ""), e = e.replace(/\\\=/g, "")
			}, e.prototype.createMsgText = function(t) {
				void 0 === t && (t = 1), this.drawX = 0, this.drawY = 0, this.textWidth = 0, this.textLine = 1, this.msgText = null;
				var e, i = 1 == t;
				if (1 == t) {
					e = this.content;
					var a = this.replaceTxt(this.data.Argv[6]);
					this.msgText = StringUtil.getCharText(a, "#000000", this.conf.msgFontSize)
				} else {
					e = this.nameTF;
					var n = this.conf.name.replace(/\\[n]/gi, "");
					this.msgText = StringUtil.getCharText(n, "#666666", this.conf.nameFontSize)
				}
				for (; this.msgText && this.msgText.configs.length > 0;) {
					var s = this.msgText.configs.shift(),
						o = s.textNum;
					this.showAllTextByConfig(e, s, o, i)
				}
				if (1 == t) {
					this.content.width = this.textWidth;
					var r = GloableData.getInstance().getFontReHeight("微软雅黑", this.conf.msgFontSize);
					this.content.height = this.textLine * r + (this.textLine - 1) * this.conf.lineSpace, this.content.cacheAsBitmap = !0
				} else {
					this.nameTF.width = this.textWidth;
					var r = GloableData.getInstance().getFontReHeight("微软雅黑", this.conf.nameFontSize);
					this.nameTF.height = this.textLine * r + (this.textLine - 1) * this.conf.lineSpace, this.nameTF.cacheAsBitmap = !0
				}
			}, e.prototype.isABCNewLine = function(t) {
				for (var e = /^[A-Za-z]*$/, i = t, a = 0; a < this.msgText.texts.length; a++) {
					var n = this.msgText.texts[a];
					if (console.log(n.getChildAt(0).text), !e.test(n.getChildAt(0).text)) break;
					i += n.width, this.abcNumber += 1
				}
				return i > this.maxWidth ? 0 != t : !1
			}, e.prototype.showAllTextByConfig = function(t, e, i, a) {
				void 0 === a && (a = !0);
				var n = GloableData.getInstance().getFontReHeight("微软雅黑", this.conf.msgFontSize),
					s = !1;
				t == this.nameTF && (s = !0, n = GloableData.getInstance().getFontReHeight("微软雅黑", this.conf.nameFontSize));
				for (var o = 0; i > 0;) {
					i--, !s && 0 == this.abcNumber && this.isABCNewLine(o) && (this.drawY += n + this.conf.lineSpace, this.textLine += 1, this.drawX = 0, this.textWidth < o && (this.textWidth = o), o = 0);
					var r = this.msgText.texts.shift();
					if (s) {
						if (o + r.width > this.maxWidth) {
							r.getChildAt(0).text = "...", r.x = this.drawX, r.y = this.drawY, this.drawX += r.width, o += r.width, t.addtext(r);
							break
						}
					} else o + r.width > this.maxWidth && (this.drawY += n + this.conf.lineSpace, this.textLine += 1, this.drawX = 0, this.textWidth < o && (this.textWidth = o), o = 0);
					r.x = this.drawX, r.y = this.drawY, this.drawX += r.width, o += r.width, t.addtext(r), this.abcNumber > 0 && (this.abcNumber -= 1)
				}
				this.textWidth < o && (this.textWidth = o), e.newline && (this.drawY += n + this.conf.lineSpace, this.textLine += 1, this.drawX = 0)
			}, e.prototype.buildName = function() {
				this.nameTF = new OText, this.maxWidth = this.leftWidth - (this.conf.headPath ? this.conf.headWidth : 0) - this.conf.msgAreaLeftW - this.conf.msgAreaRightW - this.conf.spaceNameAndMsg, this.createMsgText(2), this.nameTF.y = this.conf.nameFontSize > 30 ? -5 : -2
			}, e.prototype.loadBG = function() {
				var t = GloableData.getInstance().getFileListItemURL(PreLoader.uiShifter + this.conf.bgPath);
				this.bg = new laya.ui.Image, this.bg.loadImage(t, 0, 0, 0, 0, laya.utils.Handler.create(this, this.bgCom))
			}, e.prototype.loadHead = function() {
				if (this.conf.headPath) {
					var t = GloableData.getInstance().getFileListItemURL(PreLoader.headIconShifter + this.conf.headPath);
					this.head = new OImage, this.head.loadImage(t, 0, 0, 0, 0, laya.utils.Handler.create(this, this.headCom))
				} else this.checkReady(0), this.conf.headWidth = this.conf.headHeight = 0
			}, e.prototype.bgCom = function(t) {
				return this.p ? (this.bg._bitmap.clear(), this.bg.skin = t.url, this.bg.sizeGrid = this.gridStr(), this.bg.size(this.bgW, this.bgH), this.bg.pos(1 == this.conf.layoutType ? this.conf.headWidth + this.conf.spaceFaceAndMsg : 3 == this.conf.layoutType ? this.leftWidth - this.bg.width : this.p.width - this.bg.width >> 1, 2 == this.conf.layoutType ? 0 : (this.nameTF ? this.nameTF.height : this.conf.nameFontSize) + this.conf.spaceNameAndMsg), 3 == parseInt(this.data.Argv[3]) && (this.bg.name = "content", this.bg.on(laya.events.Event.CLICK, this, this.audioHandler)), void this.checkReady(1)) : "instance is deposed"
			}, e.prototype.headCom = function(t) {
				if (!this.p) return "instance is deposed";
				this.head.pos(1 == this.conf.layoutType ? 0 : this.p.width - this.conf.headWidth, 0);
				var e = t.width > t.height ? t.width : t.height;
				this.head.scale(this.conf.headWidth / e, this.conf.headHeight / e), this.head.size(t.width, t.height), this.conf.uiIndex && (this.head.name = "content", this.head.on(laya.events.Event.CLICK, this, this.headHandler)), this.checkReady(0)
			}, e.prototype.cCom = function(t) {
				this.content.pos(1 == this.conf.layoutType ? this.conf.headWidth + this.conf.spaceFaceAndMsg : 3 == this.conf.layoutType ? this.leftWidth - t.width : this.p.width - t.width >> 1, 2 == this.conf.layoutType ? 0 : (this.nameTF ? this.nameTF.height : this.conf.nameFontSize) + this.conf.spaceNameAndMsg), this.content.size(t.width, t.height), this.content.name = "content", this.content.on(laya.events.Event.CLICK, this, this.picHandler), this.checkReady(2)
			}, e.prototype.aIconCom = function(t) {
				this.content.scale(this.conf.msgFontSize / t.width, this.conf.msgFontSize / t.width), this.checkReady(2)
			}, e.prototype.checkReady = function(t) {
				switch (t) {
				case 0:
					this.headReady = !0;
					break;
				case 1:
					this.bgReady = !0;
					break;
				case 2:
					this.contentReady = !0;
					break;
				case 3:
					this.constructed = !0
				}
				this.headReady && this.bgReady && this.contentReady && this.constructed && (this.tweenIt(), console.log("tween"))
			}, e.prototype.tweenIt = function(t) {
				if (void 0 === t && (t = !0), this.head && this.addChild(this.head), this.nameTF && this.addChild(this.nameTF), this.bg && this.addChild(this.bg), 2 == parseInt(this.data.Argv[3]) ? this.addChild(this.content) : this.bg && this.bg.addChild(this.content), t) {
					var e, i, a;
					switch (this.conf.sendActionType) {
					case -1:
						break;
					case 0:
						this.alpha = 0, e = OTween.to(this, {
							alpha: 75 / 255
						}, 5 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this, {
							alpha: 1
						}, 2 * GloableStaticData.GAME_RUN_TIME, null, null, 5 * GloableStaticData.GAME_RUN_TIME, !0, !0);
						break;
					case 1:
						this.alpha = 0, i = this.x, this.x = 1 == this.conf.layoutType ? -50 : 50, e = OTween.to(this, {
							alpha: 75 / 255,
							x: 1 == this.conf.layoutType ? -10 : 10
						}, 6 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this, {
							alpha: 1,
							x: i
						}, 4 * GloableStaticData.GAME_RUN_TIME, null, null, 6 * GloableStaticData.GAME_RUN_TIME, !0, !0);
						break;
					case 2:
						this.pivotX = 2 == this.conf.layoutType ? this.width >> 1 : 3 == this.conf.layoutType ? this.p.width : this.x, this.x += this.pivotX, this.scale(0, 0), e = OTween.to(this, {
							scaleX: .3,
							scaleY: .3
						}, 8 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this, {
							scaleX: 1,
							scaleY: 1
						}, 2 * GloableStaticData.GAME_RUN_TIME, null, null, 8 * GloableStaticData.GAME_RUN_TIME, !0, !0);
						break;
					case 3:
						this.alpha = 0, a = this.y, this.y = a + 50, e = OTween.to(this, {
							alpha: 75 / 255,
							y: a + 20
						}, 5 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this, {
							alpha: 1,
							y: a
						}, 7 * GloableStaticData.GAME_RUN_TIME, null, null, 5 * GloableStaticData.GAME_RUN_TIME, !0, !0);
						break;
					case 4:
						var n = 2 == this.conf.layoutType ? 0 : 3 == this.conf.layoutType ? 70 : -70;
						this.head && (i = this.head.x, this.head.x += n, e = OTween.to(this.head, {
							alpha: 75 / 255,
							x: n - (2 == this.conf.layoutType ? 0 : 3 == this.conf.layoutType ? 50 : -50)
						}, 3 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this.head, {
							alpha: 1,
							x: i
						}, 9 * GloableStaticData.GAME_RUN_TIME, null, null, 3 * GloableStaticData.GAME_RUN_TIME, !0, !0)), this.nameTF && (i = this.nameTF.x, this.nameTF.x += n, e = OTween.to(this.nameTF, {
							alpha: 75 / 255,
							x: n - (2 == this.conf.layoutType ? 0 : 3 == this.conf.layoutType ? 50 : -50)
						}, 3 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this.nameTF, {
							alpha: 1,
							x: i
						}, 9 * GloableStaticData.GAME_RUN_TIME, null, null, 3 * GloableStaticData.GAME_RUN_TIME, !0, !0)), this.bg ? (i = this.bg.x, this.bg.x -= n, e = OTween.to(this.bg, {
							alpha: 75 / 255,
							x: -n - (2 == this.conf.layoutType ? 0 : 3 == this.conf.layoutType ? 50 : -50)
						}, 3 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this.bg, {
							alpha: 1,
							x: i
						}, 9 * GloableStaticData.GAME_RUN_TIME, null, null, 3 * GloableStaticData.GAME_RUN_TIME, !0, !0)) : this.content && (i = this.content.x, this.content.x -= n, e = OTween.to(this.content, {
							alpha: 75 / 255,
							x: -n - (2 == this.conf.layoutType ? 0 : 3 == this.conf.layoutType ? 50 : -50)
						}, 3 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this.content, {
							alpha: 1,
							x: i
						}, 9 * GloableStaticData.GAME_RUN_TIME, null, null, 3 * GloableStaticData.GAME_RUN_TIME, !0, !0));
						break;
					case 5:
						this.alpha = 0, i = this.x, this.x = 1 == this.conf.layoutType ? -50 : 50, e = OTween.to(this, {
							alpha: 75 / 255,
							x: 1 == this.conf.layoutType ? -10 : 10
						}, 2 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this, {
							alpha: 1,
							x: 1 == this.conf.layoutType ? 20 : -20
						}, 4 * GloableStaticData.GAME_RUN_TIME, null, laya.utils.Handler.create(this, this.appendingTween, [i], !0), 2 * GloableStaticData.GAME_RUN_TIME, !0, !0);
						break;
					case 6:
						this.pivotX = 2 == this.conf.layoutType ? this.width >> 1 : 3 == this.conf.layoutType ? this.p.width : this.x, this.x += this.pivotX, e = OTween.to(this, {
							scaleX: .3,
							scaleY: .3
						}, 2 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0), e = OTween.to(this, {
							scaleX: 1.1,
							scaleY: 1.1
						}, 5 * GloableStaticData.GAME_RUN_TIME, null, laya.utils.Handler.create(this, this.appendingTween2, null, !0), 2 * GloableStaticData.GAME_RUN_TIME, !0, !0)
					}
				}
			}, e.prototype.appendingTween = function(t) {
				OTween.to(this, {
					x: t
				}, 8 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0)
			}, e.prototype.appendingTween2 = function() {
				OTween.to(this, {
					scaleX: 1,
					scaleY: 1
				}, 6 * GloableStaticData.GAME_RUN_TIME, null, null, 0, !0, !0)
			}, e.prototype.headHandler = function(t) {
				"content" == t.target.name && (t.stopPropagation(), this.openCUI())
			}, e.prototype.picHandler = function(t) {
				"content" == t.target.name && (this.data.Argv[6] ? (t.stopPropagation(), this.showPicDetails()) : mgr.DataMgr.instance.bd.get("popMsg.cur").finish())
			}, e.prototype.audioHandler = function(t) {
				"content" == t.target.name && (t.stopPropagation(), this.playVoice(this.data.Argv[6]))
			}, e.prototype.openCUI = function() {
				parseInt(this.conf.uiIndex) >= 0 && (UIManager.getInstance().closeAllView(!1), UIManager.getInstance().cancleLongDown(), GloableData.getInstance().currentLine.pause(), UIManager.getInstance().isSCUIShow = !0, GloableData.getInstance().CUIFromIndex = parseInt(this.conf.uiIndex), UIManager.getInstance().showViewByIndex(parseInt(this.conf.uiIndex), GloableData.getInstance().currentLine))
			}, e.prototype.showPicDetails = function() {
				var t, e, i, a = GloableData.getInstance().getFileListItemURL(PreLoader.ChatShifter + this.data.Argv[6]);
				Laya.stage.addChild(t = new OSprite), t.name = "content", t.autoSize = !0, t.on(laya.events.Event.CLICK, this, this.killDetail), i = new OSprite, i.graphics.drawRect(0, 0, Laya.stage.width, Laya.stage.height, "#000000"), i.alpha = .8, t.addChild(i), e = new laya.ui.Image, e.loadImage(a, 0, 0, 0, 0, laya.utils.Handler.create(this, this.detCom, [e])), t.addChild(e)
			}, e.prototype.detCom = function(t, e) {
				var i = Laya.stage.width,
					a = Laya.stage.height,
					n = 1;
				t.width > i && (n = i / t.width, t.height * n > a && (n = a / t.height)), t.scale(n, n), t.x = Laya.stage.width - e.width * n >> 1, t.y = Laya.stage.height - e.height * n >> 1
			}, e.prototype.killDetail = function(t) {
				t.stopPropagation(), t.target.dispose()
			}, e.prototype.playEfx = function() {
				mgr.AudioMgr.instance.stop(audio.ChannelEnum.fx), "" != this.conf.sePath && mgr.AudioMgr.instance.play(audio.ChannelEnum.fx, "audio/se/" + this.conf.sePath, 100)
			}, e.prototype.playVoice = function(t) {
				"" != t && (mgr.AudioMgr.instance.paused(audio.ChannelEnum.vo) ? (mgr.DataMgr.instance.bd.set("popMsg.curVo", this.index + t), mgr.AudioMgr.instance.play(audio.ChannelEnum.vo, "audio/voice/" + t, 100)) : (mgr.AudioMgr.instance.stop(audio.ChannelEnum.vo), mgr.DataMgr.instance.bd.get("popMsg.curVo") != this.index + t && (mgr.DataMgr.instance.bd.set("popMsg.curVo", t), this.playVoice(t))))
			}, e.prototype.gridStr = function() {
				return this.conf.bgTopH + "," + this.conf.bgRightW + "," + this.conf.bgBottomH + "," + this.conf.bgLeftW + ",0"
			}, e.prototype.judgeAudioWidth = function(t) {
				var e = Math.ceil(t / 10) + 1;
				return (2 > e ? 2 : e > 7 ? 7 : e) * this.conf.msgFontSize
			}, e.prototype.dispose = function() {
				return this.content instanceof OText ? this.content.cleanTexts() : this.content instanceof OImage && this.content.dispose(), this.content = null, delete this.p, t.prototype.dispose.call(this)
			}, e
		}(OSprite);
	t.PopMsgItem = e
}(popmsg || (popmsg = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), popmsg;
!
function(t) {
	var e = function(e) {
			function i(t) {
				var i = e.call(this) || this;
				return i.id = t, i.items = [], i.bd = mgr.DataMgr.instance.bd, i._save = !0, i.curH = 0, i.save = !0, i.name = "popMsg", i
			}
			return __extends(i, e), i.prototype.setMode = function(t) {
				this.id = parseInt(t.data.Argv[0]), this.sX = parseInt(t.data.Argv[3]), this.sY = parseInt(t.data.Argv[4]), this.w = parseInt(t.data.Argv[5]), this.h = parseInt(t.data.Argv[6]), this.info = t.data.Argv[7], this.tp = parseInt(t.data.Argv[8]), this.bp = parseInt(t.data.Argv[9]), this.lp = parseInt(t.data.Argv[10]), this.rp = parseInt(t.data.Argv[11]), this.scale(parseInt(t.data.Argv[13]) / 100, parseInt(t.data.Argv[14]) / 100), this.alpha = parseInt(t.data.Argv[15]) / 255, this.ex1 = t.data.Argv[17], this.ex2 = t.data.Argv[18], this.parent || UIManager.getInstance().backgroundLayer.addPopMsg(this), this.x = this.sX, this.y = this.oriY = this.sY, this.width = this.w, this.height = this.oriHeight = this.h, this.mirror = !1, this.isMirror = !1, this.image.core && (this.clear(), this.image.removeChild(this.image.core), this.image.core.dispose(), delete this.image.core, this.image.dispose(), this.removeChild(this.image), this.image = new OImage, this.addChild(this.image)), this.image.core = new OImage, this.image.addChild(this.image.core), this.image.core.scrollRect = new laya.maths.Rectangle(0, 0, this.w, this.h), this.hitArea = new laya.utils.HitArea, this.hitArea.hit.drawRect(this.x > 0 ? -this.x : 0, this.y > 0 ? -this.y : 0, Laya.stage.width, Laya.stage.height), this.image.size(this.w, this.h), this.save = "1" == t.data.Argv[2], console.log(("1" == t.data.Argv[1] ? "开了" : "关了") + "气泡层" + t.data.Argv[0]), this.show = "1" == t.data.Argv[1], this.initSelf()
			}, i.prototype.addPop = function(t) {
				this.checkIn(this.cEvent = t), this._show ? this.layout(t.data) : (mgr.AudioMgr.instance.stop(audio.ChannelEnum.vo), mgr.AudioMgr.instance.stop(audio.ChannelEnum.fx))
			}, Object.defineProperty(i.prototype, "show", {
				get: function() {
					return this._show
				},
				set: function(t) {
					if (this.visible = this._show = t, t) {
						var e = this.bd.get("popMsg.saved" + this.id);
						if (0 == this.items.length && e && e.length) for (var i = 0, a = e; i < a.length; i++) {
							var n = a[i];
							this.layoutBySnap(n)
						}
					} else this.clear()
				},
				enumerable: !0,
				configurable: !0
			}), Object.defineProperty(i.prototype, "save", {
				set: function(t) {
					t ? null == this.bd.get("popMsg.saved" + this.id) && this.bd.set("popMsg.saved" + this.id, []) : (this.bd.set("popMsg.saved" + this.id, []), this.clear()), this._save = t
				},
				enumerable: !0,
				configurable: !0
			}), i.prototype.checkIn = function(t) {
				this.bd.get("popMsg.saved" + this.id).push(t.data)
			}, i.prototype.layoutBySnap = function(e) {
				var i;
				if (e instanceof data.DEvent) i = e;
				else {
					i = {
						Argv: ["", "", "", e.type, e.message, "", 2 == e.type ? e.largePic : e.message, e.size, "", "", "", e.characterIndex, e.message, "", e.size]
					};
					var a = new data.DEvent(0);
					a.Argv = i.Argv, this.bd.get("popMsg.saved" + this.id).push(a)
				}
				var n = new t.PopMsgItem(i, {
					width: this.width - this.lp - this.rp
				});
				this.items.push(n), n.x = this.lp, n.y = this.curH + n.conf.bubbleOffY, n.tweenIt(!1), this.curH += n.height + n.conf.bubbleOffY, this.curH > this.height && (this.height = this.curH, this.image.core.scrollRect.y = this.height - this.oriHeight, this.hitArea.hit.drawRect(0, 0, Laya.stage.width, Laya.stage.height)), this.image.core.addChild(n)
			}, i.prototype.layout = function(e) {
				var i = new t.PopMsgItem(e, {
					width: this.width - this.lp - this.rp
				});
				if (this.items.push(i), i.index = this.items.length, i.x = this.lp, i.y = this.curH + i.conf.bubbleOffY, i.checkReady(3), this.curH += i.height + i.conf.bubbleOffY, this.curH > this.height) {
					this.height = this.curH;
					OTween.to(this.image.core.scrollRect, {
						y: this.height - this.oriHeight
					}, 500, laya.utils.Ease.expoOut, null, 0, !1, !1)
				}
				i.playEfx(), this.image.core.addChild(i)
			}, i.prototype.clear = function() {
				this.curH = 0;
				for (var t = 0, e = this.items; t < e.length; t++) {
					var i = e[t];
					i.parent && i.parent.removeChild(i), i.dispose()
				}
				this.items = []
			}, i
		}(ImageComponent);
	t.PopMsg = e
}(popmsg || (popmsg = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), textChoice;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.buttons = [], e.choiceSpace = 10, e.totalHeight = -1, e.totalNum = -1, e.runTime = 0, e.size(GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight), e.init(), e
			}
			return __extends(e, t), e.prototype.init = function() {
				var t = GloableData.getInstance().getBtnUrlByIndex(GloableData.getInstance().gameMainData.System.MessageBox.ChoiceButtonIndex);
				this.image_1_url = t[0], this.image_2_ur = t[1], this.visible = !1, EventCenter.addEventListener(GameEventConstant.CLICK_TEXT_CHOICE_BUTTON, this, this.clickBtn)
			}, e.prototype.clickBtn = function(t) {
				UIManager.getInstance().isSCUIShow || view.PaySendUI.showUI || ORGMenuUI.showUI || (t.oevent.stopPropagation(), this.clean(), this.eventData.finish(t.target.index))
			}, e.prototype.showDifUI = function(t) {
				return this.clean(), 101 == t.code ? (this.eventData = t, GloableData.getInstance().cleanCachUrlByArray(this.eventData.btnResource), void ORG.loader.load(this.eventData.btnResource, OHandler.create(this, this.update), null, OLoader.IMAGE)) : 1010 == t.code ? (this.eventData = t, GloableData.getInstance().cleanCachUrlByArray(this.eventData.btnResource), void ORG.loader.load(this.eventData.btnResource, OHandler.create(this, this.updateEx), null, OLoader.IMAGE)) : 1011 == t.code ? (this.eventData = t, GloableData.getInstance().cleanCachUrlByArray(this.eventData.btnResource), void ORG.loader.load(this.eventData.btnResource, OHandler.create(this, this.updateEx2), null, OLoader.IMAGE)) : void 0
			}, e.prototype.update = function() {
				this.visible = !0, UIManager.getInstance().message[UIManager.getInstance().msgIndex].isShow() ? this.totalHeight = GloableData.getInstance().gameMainData.Headr.GHeight - UIManager.getInstance().message[UIManager.getInstance().msgIndex].bgHeight : this.totalHeight = GloableData.getInstance().gameMainData.Headr.GHeight, this.totalNum = this.eventData.data.Argv.length;
				for (var t = 0; t < this.eventData.data.Argv.length; t++) {
					var e = StringUtil.updateMessage(this.eventData.data.Argv[t]),
						i = new ORGButton(this.image_1_url, this.image_2_ur, GameEventConstant.CLICK_TEXT_CHOICE_BUTTON, e);
					i.pixelHitTest = !0, i.type = GloableStaticData.BUTTON_TYPE_TEXT_CHOICE, i.index = t, i.postion = null, this.buttons.push(i), this.addChild(i)
				}
			}, e.prototype.updateEx = function() {
				this.visible = !0, UIManager.getInstance().message[UIManager.getInstance().msgIndex].isShow() ? (console.log("-----" + GloableData.getInstance().gameMainData.Headr.GHeight), console.log("-----" + UIManager.getInstance().message[UIManager.getInstance().msgIndex].bgHeight), this.totalHeight = GloableData.getInstance().gameMainData.Headr.GHeight - UIManager.getInstance().message[UIManager.getInstance().msgIndex].bgHeight) : this.totalHeight = GloableData.getInstance().gameMainData.Headr.GHeight, this.totalNum = this.eventData.choiceShowNum;
				for (var t = 0, e = 0; e < this.eventData.choiceArray.length; e++) if (null != this.eventData.choiceArray[e]) {
					var i = StringUtil.updateMessage(this.eventData.choiceArray[e]),
						a = new ORGButton(this.image_1_url, this.image_2_ur, GameEventConstant.CLICK_TEXT_CHOICE_BUTTON, i);
					a.pixelHitTest = !0, a.type = GloableStaticData.BUTTON_TYPE_TEXT_CHOICE, a.index = e, a.showIndex = t++, this.eventData.isCenter ? a.postion = null : a.postion = this.eventData.pos, this.buttons.push(a), this.addChild(a)
				}
				this.eventData.isShowTimeBar && this.showTimeBar()
			}, e.prototype.updateEx2 = function() {
				this.visible = !0, UIManager.getInstance().message[UIManager.getInstance().msgIndex].isShow() ? (console.log("-----" + GloableData.getInstance().gameMainData.Headr.GHeight), console.log("-----" + UIManager.getInstance().message[UIManager.getInstance().msgIndex].bgHeight), this.totalHeight = GloableData.getInstance().gameMainData.Headr.GHeight - UIManager.getInstance().message[UIManager.getInstance().msgIndex].bgHeight) : this.totalHeight = GloableData.getInstance().gameMainData.Headr.GHeight, this.eventData.isOpenBimg && (this.bg = new ImageComponent(this.eventData.bgImageArgs.path), this.bg.x = this.eventData.bgImageArgs.x, this.bg.y = this.eventData.bgImageArgs.y, this.addChild(this.bg)), this.totalNum = this.eventData.choiceShowNum;
				for (var t = 0, e = 0; e < this.eventData.choiceArray.length; e++) if (null != this.eventData.choiceArray[e]) {
					var i = StringUtil.updateMessage(this.eventData.choiceArray[e]),
						a = void 0,
						n = void 0,
						s = {
							x: 0,
							y: 0
						},
						o = {
							x: 0,
							y: 0
						},
						r = !0,
						h = GloableStaticData.BUTTON_TYPE_TEXT_CHOICE_2;
					if (this.eventData.isDiyeve) {
						var l = this.eventData.argsArray[e].split(","),
							c = parseInt(l[0]),
							g = GloableData.getInstance().gameMainData.System.Buttons[c];
						a = "Graphics/Button/" + g.image1, n = "Graphics/Button/" + g.image2, s.x = parseInt(l[1]), s.y = parseInt(l[2]), "1" !== l[3] && (r = !1, o.x = parseInt(l[4]), o.y = parseInt(l[5])), h = GloableStaticData.BUTTON_TYPE_TEXT_CHOICE_DIY
					} else a = this.image_1_url, n = this.image_2_ur, s = this.eventData.isCenter ? null : this.eventData.pos;
					var u = new ORGButton(a, n, GameEventConstant.CLICK_TEXT_CHOICE_BUTTON, i);
					u.pixelHitTest = !0, u.type = h, u.index = e, u.showIndex = t, r || (u.textPos = o), u.postion = s, this.buttons.push(u), this.addChild(u), t += 1
				}
				this.eventData.isShowTimeBar && this.showTimeBar()
			}, e.prototype.updatePicChoice = function(t) {
				this.clean(), this.visible = !0, this.eventData = t;
				for (var e, i, a = 0; a < t.buttons.length; a++) {
					var n = {
						x: 0,
						y: 0
					},
						s = t.buttons[a],
						o = GloableData.getInstance().gameMainData.System.Buttons[s.index];
					e = "Graphics/Button/" + o.image1, i = "Graphics/Button/" + o.image2, n.x = s.x, n.y = s.y;
					var r = new ORGButton(e, i, GameEventConstant.CLICK_TEXT_CHOICE_BUTTON, "");
					r.pixelHitTest = !0, r.type = GloableStaticData.BUTTON_TYPE_PIC_CHOICE, r.index = a, r.postion = n, this.buttons.push(r), this.addChild(r)
				}
			}, e.prototype.showTimeBar = function() {
				this.timeBar || (this.runTime = 0, this.time = 0, this.timeBar = new ORGSlider(PreLoader.otherShifter + this.eventData.timeBg, PreLoader.otherShifter + this.eventData.timeBar, 0, !1), this.timeBar.mouseEnabled = !1, this.timeBar.setValue(1), this.time = 1 / this.eventData.choiceTimeMax, this.timeBar.x = this.eventData.timeX, this.timeBar.y = this.eventData.timeY, this.addChild(this.timeBar), this.timeData = new GameTimeData, this.timeData.isJump = !1, this.timeData.delay = GloableStaticData.GAME_RUN_TIME, this.timeData.thisArg = this, this.timeData.callBack = this.timeBarUpdate, TimeManager.getInstance().addTime(this.timeData))
			}, e.prototype.timeBarUpdate = function() {
				GloableData.getInstance().currentLine.isPause || (this.runTime += this.time, this.timeBar.setValue(1 - this.runTime), 1 - this.runTime <= 0 && (this.runTime = 0, TimeManager.getInstance().removeTime(this.timeData), this.clean(), this.eventData.choiceTime = 0, this.eventData.finish()))
			}, e.prototype.clean = function() {
				this.removeChildren();
				for (var t in this.buttons) {
					var e = this.buttons[t];
					e.dispose()
				}
				this.bg && (this.bg.dispose(), this.bg.parent && (this.bg.parent.removeChild(this.bg), this.bg = null)), this.timeData && (TimeManager.getInstance().removeTime(this.timeData), this.timeData = null), this.timeBar && (this.timeBar.dispose(), this.timeBar = null), this.buttons = [], this.visible = !1
			}, e.prototype.dispose = function() {
				this.clean(), this.eventData = null, EventCenter.removeEventListener(GameEventConstant.CLICK_TEXT_CHOICE_BUTTON, this, this.clickBtn)
			}, e
		}(OSprite);
	t.TextDifUI = e
}(textChoice || (textChoice = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), lifeline;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.isInit = !1, e
			}
			return __extends(e, t), e.prototype.setData = function(t) {
				this.dataSource = t, this.itemData = this.dataSource.itemData, this.mainLine = this.dataSource.mainLine, this.bgUrl = this.dataSource.bg_url, this.bgGrid = this.dataSource.bgGrid
			}, e.prototype.init = function() {
				this.isInit = !0, this.bgImage = new ImageComponent(""), this.bgImage.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.bgImage.update(this.bgUrl), this.addChild(this.bgImage)
			}, e.prototype.bgComplete = function() {
				this.bgImage.setGrid(this.bgGrid)
			}, e
		}(OBox);
	t.TextLifeLineItem = e
}(lifeline || (lifeline = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), lifeline;
!
function(t) {
	var e = function(e) {
			function i(t) {
				var i = e.call(this) || this;
				return i.listData = [], i.taklIndex = 0, i.talkTalkWidth = 0, i.talkTalkHeight = 0, i.talkTalkX = 0, i.talkTalkY = 0, i.items = [], i.eventData = t, i.mainLine = t.mainLine, i.listData = [], i.init(), i.on(OEvent.CLICK, i, i.clickUI), i
			}
			return __extends(i, e), i.prototype.updateViewArgv = function(t) {
				this.eventData = t, this.mainLine = t.mainLine, this.setArgv(), this.setPanelArgv()
			}, i.prototype.clickUI = function() {
				this.lastItem && !this.lastItem.isFinsh && this.lastItem.isComplete && this.lastItem.finish()
			}, i.prototype.setArgv = function() {
				this.interUser = parseInt(this.eventData.data.Argv[1]), this.defLineBg = "Graphics/UI/" + this.eventData.data.Argv[4], this.data = GloableData.getInstance().gameMainData.System.MessageBox, this.lineSpace = 1.8 * GloableData.getInstance().gameMainData.System.FontSize;
				var t = this.eventData.data.Argv[3].split(",");
				this.talkTalkX = parseInt(t[0]), this.talkTalkY = parseInt(t[1]), this.talkTalkWidth = parseInt(t[2]), this.talkTalkHeight = parseInt(t[3])
			}, i.prototype.setPanelArgv = function() {
				this.itemPanel && (this.itemPanel.isVScroll = !0, this.itemPanel.x = this.talkTalkX, this.itemPanel.y = this.talkTalkY, this.itemPanel.vSpace = this.lineSpace, this.itemPanel.value = 0)
			}, i.prototype.init = function() {
				this.setArgv(), 1 == this.interUser ? (this.itemPanel = new ORGPanel(new ORectangle(0, 0, this.talkTalkWidth, this.talkTalkHeight)), this.addChild(this.itemPanel), this.setPanelArgv()) : UIManager.getInstance().isShowTextStyle = 0
			}, i.prototype.updateItem = function(e, i) {
				var a = new t.TextNewLifeLineItem;
				this.lastItem = a, this.listData.push({
					itemEvent: e,
					mainLine: i,
					bg_url: this.defLineBg,
					bgGrid: this.eventData.data.Argv[5]
				}), a.panel = this.itemPanel;
				var n = null;
				if (e.data.Argv[16]) {
					var s = e.data.Argv[16].split("|"),
						o = s[1].split(",");
					1 == parseInt(o[0]) && (n = {
						x: parseInt(o[1]),
						y: parseInt(o[2])
					})
				}
				n ? (a.x = n.x, a.y = this.getItesHeight() + n.y) : a.y = this.getItesHeight(), this.itemPanel.addItem(a), this.items[this.taklIndex] = a, a.rec = new ORectangle(this.talkTalkX, this.talkTalkY, this.talkTalkWidth, this.talkTalkHeight), a.setData(this.listData[this.taklIndex]), a.init(), this.taklIndex++
			}, i.prototype.itemComplete = function() {
				this.itemPanel.value = 1
			}, i.prototype.updateListItem = function(t, e) {
				var i = {
					itemEvent: t,
					mainLine: e,
					bg_url: this.defLineBg,
					bgGrid: this.eventData.data.Argv[5]
				};
				this.itemList.addItem(i), this.items[this.taklIndex] = i, this.taklIndex++
			}, i.prototype.flushItem = function(t, e) {
				t.isInit ? (t.setData(t.dataSource), t.updateText()) : (t.setData(this.listData[e]), t.init())
			}, i.prototype.getItesHeight = function() {
				var t = 0,
					e = this.items[this.items.length - 1];
				return t = e ? e.y + e.height : 0
			}, i.prototype.dispose = function() {
				this.listData = null;
				for (var t = 0; t < this.items.length; t++) {
					var e = this.items[t];
					EventManager.removeEventListener(e, OEvent.COMPLETE, this.itemComplete, this), e.dispose()
				}
				this.itemPanel.removeChildren(), this.removeChildren(), this.parent && this.parent.removeChild(this)
			}, i.prototype.saveData = function() {
				for (var t = [], e = this.items.length, i = 0; e > i; i++) {
					var a = this.items[i];
					t.push(a.eventData)
				}
				return JSON.stringify(t)
			}, i.prototype.loadData = function(t) {
				for (var e = JSON.parse(t), i = e.length, a = 0; i > a; a++) this.updateItem(e[a], GloableData.getInstance().currentLine)
			}, i.prototype.oldSaveData = function(t) {
				var e = "";
				e += "Argv|", e += this.eventData.data.Code + "|", e += this.eventData.data.Indent + "|", e += "1|", e += this.eventData.data.Argv[1] + "|", e += this.eventData.data.Argv[2] + "|", e += this.eventData.data.Argv[3] + "|", e += this.eventData.data.Argv[4] + "|", e += this.eventData.data.Argv[5] + "|", e += "|";
				for (var i = 0; i < this.taklIndex; i++) this.items[i] && (e += this.getMsgArgv(this.items[i].eventData.data.Argv));
				t.push(encodeURIComponent(e))
			}, i.prototype.getMsgArgv = function(t) {
				for (var e = t.length, i = "", a = 0; e > a; a++) 16 != a && 17 != a || -1 !== t[a].indexOf("|") && (t[a] = t[a].replace(/\|/g, "?")), i += t[a] + "|";
				return i = i.substr(0, i.length)
			}, i.prototype.loadOldData = function(t) {
				for (var e = []; t.length > 0 && !("false" == t[0] || t.length < 18);) {
					for (var i = void 0, a = 0; 18 > a; a++) {
						var n = t.shift();
						16 != a && 17 != a || -1 !== n.indexOf("?") && (n = n.replace(/\?/g, "|")), i.push(n)
					}
					var s = new org_event.TextEvent({
						Argv: i
					}, GloableData.getInstance().currentLine);
					e.push(s)
				}
				for (var o = e.length, r = 0; o > r; r++) this.updateItem(e[r], GloableData.getInstance().currentLine)
			}, i
		}(OSprite);
	t.TextLifeLineUI = e
}(lifeline || (lifeline = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), talk;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.message = [], e.faceBroderComplete = !1, e.faceComplete = !1, e.drawSpeed = 0, e.isClickHide = !1, e.isTextComplete = !1, e.isEventDataComplete = !1, e.oldPicArr = new Array, e.isResave = !1, e.isRoll = !1, e.oldFaceUrl = "", e.faceOfsX = 0, e.msg = "", e.size(GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight), e.init(), e
			}
			return __extends(e, t), e.prototype.hide = function() {
				this.nameSprite && (this.nameSprite.visible = !1), this.talkSprite && (this.talkSprite.visible = !1), this.face && (this.face.visible = !1), this.faceBorder && (this.faceBorder.visible = !1), this.talkText && this.talkText.clean(), this.visible = !1
			}, e.prototype.isShow = function() {
				return this.visible && this.talkSprite.visible
			}, e.prototype.dispose = function() {
				this.off(OEvent.MOUSE_DOWN, this, this.clickUI), this.talkSprite.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.talkSpriteLoadComplete), EventCenter.removeEventListener(GameEventConstant.LONG_DOWN_EVENT, this, this.longUpdate), this.nameSprite && this.nameSprite.dispose(), this.talkSprite && this.talkSprite.dispose(), this.talkText && this.talkText.dispose(), this.removeChildren()
			}, Object.defineProperty(e.prototype, "bgHeight", {
				get: function() {
					return this.talkSprite.height
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.show = function() {
				this.mouseEnabled = !0, this.face && (this.face.visible = !1), this.faceBorder && (this.faceBorder.visible = !1), this.nameSprite && this.nameSprite.show(), this.talkSprite && this.talkSprite.show(), this.talkText && this.talkText.show(), this.visible = !0, this.parent && this.parent.setChildIndex(this, this.parent.numChildren - 1)
			}, e.prototype.textShowComplete = function() {
				return clearTimeout(this.hideTimeKey), EventCenter.removeOnceEventListener(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE, this, this.textShowComplete), this.talkText.skipMessage ? void this.textComplete() : GloableData.getInstance().autoPlay ? void(GloableData.getInstance().quickRun ? this.talkText.pause || (this.hideTimeKey = setTimeout(this.textComplete.bind(this), 30)) : this.talkText.pause || (this.hideTimeKey = setTimeout(this.textComplete.bind(this), 1e3))) : void(GloableData.getInstance().quickRun && (this.talkText.pause || (this.hideTimeKey = setTimeout(this.textComplete.bind(this), 30))))
			}, e.prototype.textComplete = function() {
				this.isClickHide && this.hide(), this.talkText.pause && (this.talkText.pause = !1), clearTimeout(this.hideTimeKey), this.faceOfsX = 0, this.talkText.faceOfsX = 0, this.talkText.tempWidth = 0, this.talkText.tempHeight = 0, this.talkText.skipMessage = !1, this.talkText.talkName = "", this.oldPicData(), this.eventData.finish()
			}, e.prototype.clickUI = function(t) {
				if (this.eventData && 100 == this.eventData.mainLine.currentEvent.Code && !UIManager.getInstance().hasViewShow()) {
					if (!this.talkText.showingText) return;
					if (this.talkText && this.talkText.pause) return void(this.talkText.pause = !1);
					if (this.talkText && this.talkText.isComplete || this.talkText.skipMessage) clearTimeout(this.hideTimeKey), OrgWeb.getInstance().upEffectiveClick(), this.faceOfsX = 0, this.talkText.faceOfsX = 0, this.talkText.tempWidth = 0, this.talkText.tempHeight = 0, this.talkText.skipMessage = !1, this.talkText.isComplete = !1, this.oldPicData(), this.eventData.finish(), UIManager.getInstance().chat.textClick();
					else if (this.talkText && !this.talkText.isComplete) return void this.talkText.showContinueAllText();
					this.isClickHide && this.hide()
				}
			}, e.prototype.oldPicData = function() {
				if (this.isResave) {
					this.isResave = !1;
					for (var t = 3; 22 > t; t++) {
						var e = GloableData.getInstance().gamePictrue.getValue(t);
						e && this.oldPicArr[t] && (e.scaleX = this.oldPicArr[t].scaleX, e.scaleY = this.oldPicArr[t].scaleY, e.x = this.oldPicArr[t].x, e.y = this.oldPicArr[t].y, e.alpha = this.oldPicArr[t].alpha, this.oldPicArr[t] = null)
					}
				}
			}, e.prototype.longUpdate = function() {
				this.visible && this.eventData && this.eventData.mainLine.currentEvent.Code === this.eventData.code && (this.talkText && this.talkText.isComplete || this.talkText.skipMessage) && (this.isClickHide && this.hide(), TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_TALK_ID), clearTimeout(this.hideTimeKey), OrgWeb.getInstance().upEffectiveClick(), this.faceOfsX = 0, this.talkText.faceOfsX = 0, this.talkText.tempWidth = 0, this.talkText.tempHeight = 0, this.talkText.skipMessage = !1, this.talkText.isComplete = !1, this.oldPicData(), this.eventData.finish())
			}, e.prototype.init = function() {
				EventCenter.addEventListener(GameEventConstant.LONG_DOWN_EVENT, this, this.longUpdate), this.on(OEvent.MOUSE_DOWN, this, this.clickUI), this.uiData = GloableData.getInstance().gameMainData.System.MessageBox, this.nameSprite = new i(this.uiData), this.talkSprite = new a(this.uiData), this.nameSprite.visible = !1, this.talkSprite.visible = !1, this.addChild(this.talkSprite), this.talkSprite.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.talkSpriteLoadComplete), this.talkSprite.init(), this.addChild(this.nameSprite)
			}, e.prototype.faceBroderLoadComplete = function() {
				this.faceBorder.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.faceBroderLoadComplete), this.faceBroderComplete = !0, this.setFacePostion(), this.talkText && (this.talkText.faceOfsX = parseInt(this.faceOfsX + ""))
			}, e.prototype.talkSpriteLoadComplete = function(t) {
				if (this.talkSprite.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.talkSpriteLoadComplete), this.talkSprite.x = this.uiData.Talk.backX, this.talkSprite.y = this.uiData.Talk.backY, this.talkSprite.visible = !1, this.nameSprite.x = this.talkSprite.x + this.uiData.Name.backX, this.nameSprite.y = this.talkSprite.y + this.uiData.Name.backY, this.talkText = new n(this.uiData, t.w, t.h), this.addChild(this.talkText), this.face = new ImageComponent, this.face.visible = !1, this.addChild(this.face), this.faceBorder = new ImageComponent(""), this.uiData.faceInMessageBox()) try {
					this.uiData.Talk.FaceBorderImage.IsNil() || (this.faceBorder.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.faceBroderLoadComplete), this.faceBorder.updateURL("Graphics/UI/" + this.uiData.Talk.FaceBorderImage), this.faceBorder.visible = !1, this.addChild(this.faceBorder))
				} catch (e) {}
				this.isTextComplete = !0, this.isEventDataComplete
			}, e.prototype.setHightMessagePosition = function(t, e, i) {
				this.talkSprite.x = parseInt(e), this.talkSprite.y = parseInt(i), null != this.faceBorder && this.faceBorder.getBounds(), this.talkText.x = this.talkSprite.x + this.uiData.Talk.textX, this.talkText.y = this.talkSprite.y + this.uiData.Talk.textY, this.nameSprite.x = this.talkSprite.x + this.uiData.Name.backX, this.nameSprite.y = this.talkSprite.y + this.uiData.Name.backY, null != this.faceBorder && (this.faceBorder.y = this.talkText.y + this.uiData.Talk.FaceBorderY)
			}, e.prototype.setMessagePosition = function(t) {
				switch (this.talkSprite.x = this.uiData.Talk.backX, null != this.faceBorder && this.faceBorder.getBounds(), t) {
				case 0:
					this.talkSprite.y = this.uiData.Talk.backY;
					break;
				case 1:
					this.talkSprite.y = (GloableData.getInstance().gameMainData.Headr.GHeight - this.talkSprite.height) / 2;
					break;
				case 2:
					this.talkSprite.y = GloableData.getInstance().gameMainData.Headr.GHeight - (this.uiData.Talk.backY + this.talkSprite.height)
				}
				this.talkText.x = this.talkSprite.x + this.uiData.Talk.textX, this.talkText.y = this.talkSprite.y + this.uiData.Talk.textY, this.nameSprite.x = this.talkSprite.x + this.uiData.Name.backX, this.nameSprite.y = this.talkSprite.y + this.uiData.Name.backY, null != this.faceBorder && (this.faceBorder.y = this.talkSprite.y + this.uiData.Talk.FaceBorderY)
			}, e.prototype.loadTextResource = function(t) {
				this.talkText && (this.talkText.isComplete = !1);
				var e = [];
				this.eventData = t;
				var i = GloableData.getInstance().getFileListItemURL(this.eventData.taklBgPath),
					a = GloableData.getInstance().getFileListItemURL(this.eventData.facePath),
					n = GloableData.getInstance().getFileListItemURL(this.eventData.faceBorder);
				i && i.length > 0 && e.push(i), a && a.length > 0 && e.push(a), n && n.length > 0 && e.push(n), e.length > 0 ? ORG.loader.load(e, OHandler.create(this, this.flushTextUI), null, OLoader.IMAGE) : this.flushTextUI()
			}, e.prototype.flushTextUI = function() {
				try {
					if (this.visible = !0, this.talkText && (this.talkText.isComplete = !1), this.isEventDataComplete = !0, !this.isTextComplete) return;
					if (this.talkText && this.talkText.clean(), EventCenter.addOnceEventListener(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE, this, this.textShowComplete), this.talkSprite.visible = "1" == this.eventData.data.Argv[7], this.talkText && (this.talkText.visible = this.eventData.data.Argv[2].length > 0), this.nameSprite.visible = this.eventData.data.Argv[0].length > 0, this.nameSprite.bg.visible = this.talkSprite.visible, this.talkSprite.update(this.eventData.taklBgPath), this.eventData.diyText) {
						if (this.oldPicArr = [], this.eventData.talkPerson) if (this.eventData.talkPerson.talkP) {
							this.isResave = !0;
							for (var t = 3; 22 > t; t++) {
								var e = GloableData.getInstance().getGamePic(t);
								if (e) {
									var i = {
										x: 0,
										y: 0,
										scaleX: 1,
										scaleY: 1,
										alpha: 1
									};
									i.x = e.x, i.y = e.y, i.scaleX = e.scaleX, i.scaleY = e.scaleY, i.alpha = e.alpha, this.oldPicArr[t] = i, e.alpha = .8
								}
							}
							var a = GloableData.getInstance().getGamePic(this.eventData.talkPerson.pId);
							if (a) {
								var n = a.x - (1.15 * a.width - a.width) / 2,
									s = a.y - (1.15 * a.height - a.height) / 2;
								a.alpha = 1, a.scaleImage(1.15, 1.15, 5 * GloableStaticData.GAME_RUN_TIME), a.moveImage(n, s, 5 * GloableStaticData.GAME_RUN_TIME)
							}
						} else this.oldPicArr = null;
						else this.oldPicArr = null;
						this.isClickHide = this.eventData.isClickHide, this.eventData.diyPos ? this.setHightMessagePosition(this.eventData.messagePos, this.eventData.diyPos.x, this.eventData.diyPos.y) : 1 == this.eventData.msgIndex ? this.setHightMessagePosition(this.eventData.messagePos, this.uiData.Talk.backX, this.uiData.Talk.backY) : this.setMessagePosition(this.eventData.messagePos)
					} else this.setMessagePosition(this.eventData.messagePos);
					if (this.setDrawSpeed(), this.nameSprite.visible) {
						var o = StringUtil.madeString(this.eventData.data.Argv[0], 0, 100);
						GloableData.getInstance().dGameSystem.replay.add(o);
						var r = new data.OColor(this.eventData.data.Argv[1]).getColorToUint();
						r = this.eventData.data.Argv[1] ? new data.OColor(this.eventData.data.Argv[1]).getColorToUint() : GloableData.getInstance().gameMainData.System.FontTalkColor.getColorToUint(), this.nameSprite.update(o, r), this.nameSprite.isCenter(this.uiData.Name.isCenter)
					} else this.nameSprite.talkName = "";
					if (this.msg = this.eventData.data.Argv[2], GloableData.getInstance().dGameSystem.replay.add(this.msg), GloableData.getInstance().dGameSystem.replay.add(" "), this.setFacePos(this.eventData.data.Argv), this.face.visible) return;
					if (this.talkText && (this.talkText.talkName = this.nameSprite.talkName), this.eventData.talkSpMove && "" != this.eventData.talkSpMove) {
						var e = this.eventData.talkSpMove.split("|");
						0 != parseInt(e[0]) ? (this.isRoll = !0, this.talkText && this.talkText.msgScreenRoll(this.msg, this.eventData.talkSpMove)) : (this.isRoll = !1, this.talkText && this.talkText.stopMove(), this.talkText && this.talkText.updateMsg(this.msg, GloableData.getInstance().gameMainData.System.FontTalkColor.getColorToUint(), this.drawSpeed))
					} else this.isRoll = !1, this.talkText && this.talkText.stopMove(), this.talkText && this.talkText.updateMsg(this.msg, GloableData.getInstance().gameMainData.System.FontTalkColor.getColorToUint(), this.drawSpeed)
				} catch (h) {
					console.log(h)
				}
			}, e.prototype.update = function(t) {
				if (this.mouseEnabled = !0, this.talkText && (this.talkText.isComplete = !1), this.eventData = t, this.isEventDataComplete = !0, this.isTextComplete) {
					this.talkText && this.talkText.clean(), this.talkSprite && this.talkSprite.cleanBG(), EventCenter.addOnceEventListener(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE, this, this.textShowComplete);
					var e = this.cloneObject(t.data.Argv);
					if (this.talkSprite.visible = "1" == t.data.Argv[7], this.talkText && (this.talkText.visible = t.data.Argv[2].length > 0), this.nameSprite.visible = t.data.Argv[0].length > 0, this.nameSprite.bg.visible = this.talkSprite.visible, e[16]) {
						var i = e[16].split("|"),
							a = i[0].split(","),
							n = i[1].split(","),
							s = i[2].split(","),
							o = i[3].split(",");
						if (this.oldPicArr = [], s) if (1 == parseInt(s[0])) {
							this.isResave = !0;
							for (var r = 3; 22 > r; r++) {
								var h = GloableData.getInstance().getGamePic(r);
								if (h) {
									var l = {
										x: 0,
										y: 0,
										scaleX: 1,
										scaleY: 1,
										alpha: 1
									};
									l.x = h.x, l.y = h.y, l.scaleX = h.scaleX, l.scaleY = h.scaleY, l.alpha = h.alpha, this.oldPicArr[r] = l, h.alpha = .8
								}
							}
							var c = GloableData.getInstance().getGamePic(s[1]);
							if (c) {
								var g = c.x - (1.15 * c.width - c.width) / 2,
									u = c.y - (1.15 * c.height - c.height) / 2;
								c.alpha = 1, c.scaleImage(1.15, 1.15, 5 * GloableStaticData.GAME_RUN_TIME), c.moveImage(g, u, 5 * GloableStaticData.GAME_RUN_TIME)
							}
						} else this.oldPicArr = null;
						else this.oldPicArr = null;
						o && (1 == parseInt(o[2]) ? this.isClickHide = !0 : this.isClickHide = !1);
						var p = ("Graphics/UI/" + this.uiData.Talk.backimage).toLowerCase().replace(/\\/g, "/");
						this.talkSprite.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.changeTalkBgSetPostion), 1 == a[0] ? (p = ("Graphics/UI/" + a[1]).toLowerCase().replace(/\\/g, "/"), this.talkSprite.update(p)) : this.talkSprite.update(p), 1 == n[0] ? this.setHightMessagePosition(parseInt(t.data.Argv[5]), n[1], n[2]) : 1 == t.msgIndex ? this.setHightMessagePosition(parseInt(t.data.Argv[5]), this.uiData.Talk.backX, this.uiData.Talk.backY) : this.setMessagePosition(parseInt(t.data.Argv[5]))
					} else {
						var p = ("Graphics/UI/" + this.uiData.Talk.backimage).toLowerCase().replace(/\\/g, "/");
						this.talkSprite.update(p), this.setMessagePosition(parseInt(t.data.Argv[5]))
					}
					if (this.setDrawSpeed(), this.nameSprite.visible) {
						var d = StringUtil.madeString(t.data.Argv[0], 0, 100);
						GloableData.getInstance().dGameSystem.replay.add(d);
						var m = new data.OColor(t.data.Argv[1]).getColorToUint();
						m = t.data.Argv[1] ? new data.OColor(t.data.Argv[1]).getColorToUint() : GloableData.getInstance().gameMainData.System.FontTalkColor.getColorToUint(), this.nameSprite.update(d, m), this.nameSprite.isCenter(this.uiData.Name.isCenter)
					} else this.nameSprite.talkName = "";
					this.msg = e[2], GloableData.getInstance().dGameSystem.replay.add(this.msg), GloableData.getInstance().dGameSystem.replay.add(" "), this.setFacePos(t.data.Argv), this.face.visible || (this.talkText && (this.talkText.talkName = this.nameSprite.talkName), e[17] && 0 != parseInt(e[17]) ? (this.isRoll = !0, this.talkText && this.talkText.msgScreenRoll(e[2], e[17])) : (this.isRoll = !1, this.talkText && this.talkText.stopMove(), this.talkText && this.talkText.updateMsg(e[2], GloableData.getInstance().gameMainData.System.FontTalkColor.getColorToUint(), this.drawSpeed)), e = null)
				}
			}, e.prototype.changeTalkBgSetPostion = function() {
				this.talkSprite.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.changeTalkBgSetPostion);
				var t = this.cloneObject(this.eventData.data.Argv);
				if (t[16]) {
					var e = t[16].split("|"),
						i = e[1].split(",");
					1 == i[0] ? this.setHightMessagePosition(parseInt(this.eventData.data.Argv[5]), i[1], i[2]) : 1 == this.eventData.msgIndex ? this.setHightMessagePosition(parseInt(this.eventData.data.Argv[5]), this.uiData.Talk.backX, this.uiData.Talk.backY) : this.setMessagePosition(parseInt(this.eventData.data.Argv[5]))
				} else this.setMessagePosition(parseInt(this.eventData.data.Argv[5]));
				this.setFacePostion(), t = null
			}, e.prototype.setDrawSpeed = function() {
				var t = parseInt(this.eventData.data.Argv[6]);
				this.drawSpeed = GloableStaticData.GAME_RUN_TIME * GloableStaticData.DRAW_TALK_SPEED[t], GloableData.getInstance().talkSpeedType == GloableStaticData.DRAW_SPEED_TYPE_CENTER && (t = GloableData.getInstance().talkSpeedType, this.drawSpeed = GloableStaticData.GAME_RUN_TIME * GloableStaticData.DRAW_TALK_SPEED[t]), GloableData.getInstance().talkSpeedType == GloableStaticData.DRAW_SPEED_TYPE_FAST && (this.drawSpeed = GloableStaticData.DRAW_TALK_SPEED_TYPE_SHOW_ALL)
			}, e.prototype.setFacePos = function(t) {
				if (this.face.visible = this.talkSprite.visible && t[3].length > 0, null != this.faceBorder && (this.faceBorder.visible = this.face.visible), t[3] && t[3].length > 0) {
					0 == t[3].indexOf("\\") && (t[3] = t[3].replace("\\", ""));
					var e = ("Graphics/Face/" + t[3]).toLowerCase();
					this.oldFaceUrl != e ? (this.faceComplete = !1, this.face.updateURL("", -1, 1, null, null, null), this.face.updateURL(e, -1, 1, null, null, null), this.oldFaceUrl = e) : (this.faceComplete = !1, this.face.updateURL(e, -1, 1, null, null, null)), this.faceLoadComplete()
				}
			}, e.prototype.setFacePostion = function() {
				if (this.faceComplete) {
					if (this.faceBroderComplete) {
						var t = this.faceBorder.width / this.face.width,
							e = this.faceBorder.height / this.face.height,
							i = Math.min(t, e);
						i = i > 1 ? 1 : i, this.face.scale(i, i), this.face.width = Math.floor(this.face.width * i), this.face.height = Math.floor(this.face.height * i)
					}
					if (this.faceOfsX = 0, "0" == this.eventData.data.Argv[4]) switch (this.uiData.FaceStyle) {
					case 0:
						this.faceOfsX = this.face.width, this.face.x = this.talkSprite.x, this.face.y = this.talkSprite.y + this.talkSprite.height - this.face.height;
						break;
					case 1:
						this.faceBorder.x = this.talkSprite.x + this.uiData.Talk.FaceBorderX, this.faceBorder.y = this.talkSprite.y + this.uiData.Talk.FaceBorderY, this.face.x = this.faceBorder.x, this.face.y = this.faceBorder.y + (this.faceBorder.height - this.face.height), this.faceOfsX = 0;
						break;
					case 2:
						this.faceOfsX = 0, this.face.x = this.talkSprite.x, this.face.y = this.talkSprite.y - this.face.height
					} else switch (this.faceOfsX = 0, this.uiData.FaceStyle) {
					case 0:
						this.face.x = this.talkSprite.x + this.talkSprite.width - this.face.width, this.face.y = this.talkSprite.y + this.talkSprite.height - this.face.height;
						break;
					case 1:
						this.faceBorder.x = this.talkSprite.x + this.talkSprite.width - this.faceBorder.width, this.faceBorder.y = this.talkSprite.y + this.uiData.Talk.FaceBorderY, this.face.x = this.faceBorder.x, this.face.y = this.faceBorder.y;
						break;
					case 2:
						this.face.x = this.talkSprite.x + this.talkSprite.width - this.face.width, this.face.y = this.talkSprite.y - this.face.height
					}
				}
			}, e.prototype.faceLoadComplete = function() {
				this.face.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.faceLoadComplete), this.faceComplete = !0, this.setFacePostion(), this.talkText.faceOfsX = parseInt(this.faceOfsX + ""), this.talkText.talkName = this.nameSprite.talkName, this.eventData.data.Argv[17] && 0 != parseInt(this.eventData.data.Argv[17]) ? this.talkText.msgScreenRoll(this.eventData.data.Argv[2], this.eventData.data.Argv[17]) : (this.talkText.stopMove(), this.talkText.updateMsg(this.eventData.data.Argv[2], GloableData.getInstance().gameMainData.System.FontTalkColor.getColorToUint(), this.drawSpeed))
			}, e.prototype.cloneObject = function(t) {
				var e = t.constructor === Array ? [] : {};
				for (var i in t) t.hasOwnProperty(i) && (e[i] = "object" == typeof t[i] ? this.cloneObject(t[i]) : t[i]);
				return e
			}, e
		}(OSprite);
	t.TextMessageUI = e;
	var i = function(t) {
			function e(e) {
				var i = t.call(this) || this;
				return i.path = "", i.talkName = "", i.drawX = 0, i.drawY = 0, i.uiData = e, i.path = "Graphics/UI/" + i.uiData.Name.backimage, i.init(), i
			}
			return __extends(e, t), e.prototype.dispose = function() {
				this.clean(), this.bg.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.removeChildren()
			}, e.prototype.clean = function(t) {
				void 0 === t && (t = !1), this.nameTF.removeChildren(), this.talkName = "", this.visible = !1
			}, e.prototype.show = function() {
				this.visible = !0
			}, e.prototype.init = function() {
				this.bg = new ImageComponent(""), this.addChild(this.bg), this.nameTF = utils.getOText(), this.bg.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.bg.updateURL(this.path), this.nameTF.y = this.bg.height - this.nameTF.height >> 1, this.addChild(this.nameTF), this.bg.visible = !1
			}, e.prototype.isCenter = function(t) {
				this.nameTF.x = 0, this.nameTF.y = 0, t ? (this.nameTF.x = this.bg.width - this.nameTF.width >> 1, this.nameTF.y = this.bg.height - this.nameTF.height >> 1) : (this.nameTF.x = this.uiData.Name.textX, this.nameTF.y = this.uiData.Name.textY)
			}, e.prototype.update = function(t, e) {
				this.drawX = 0, this.drawY = 0, this.talkName != t && (this.nameTF.cleanTexts(), this.addText(t, e), this.talkName = t), this.nameTF.x = this.bg.width - this.nameTF.width >> 1, this.nameTF.y = this.bg.height - this.nameTF.height >> 1
			}, e.prototype.addText = function(t, e) {
				for (var i = StringUtil.getAnalysisText(t, e); i.texts.length > 0;) {
					var a = i.texts.shift();
					a.x = this.drawX, a.y = this.drawY, this.drawX += a.width, this.nameTF.addtext(a);
				}
				this.nameTF.width = this.drawX, this.nameTF.height = GloableData.getInstance().fontBitmapData.maxH
			}, e.prototype.bgComplete = function() {
				this.bg.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.size(this.bg.width, this.bg.height), this.visible = !0;
				try {
					this.nameTF.y = this.bg.height - this.nameTF.height >> 1, this.nameTF.x = this.bg.width - this.nameTF.width >> 1
				} catch (t) {}
			}, e
		}(OSprite);
	t.TextMessageName = i;
	var a = function(t) {
			function e(e) {
				var i = t.call(this) || this;
				return i.uiData = e, i.path = "Graphics/UI/" + i.uiData.Talk.backimage, i
			}
			return __extends(e, t), e.prototype.init = function() {
				this.bg = new ImageComponent("", -1, 1), this.bg.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.bg.updateURL(this.path, -1, 1, null, null, null, null, !0), this.addChild(this.bg), "" == this.path && this.bgComplete()
			}, e.prototype.update = function(t) {
				this.path = t, this.bg ? (this.bg.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.bg.updateURL(this.path, -1, 1, null, null, null, null, !0)) : (this.bg = new ImageComponent(this.path, -1, 1), this.bg.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.bg.updateURL(this.path, -1, 1, null, null, null, null, !0), this.addChild(this.bg))
			}, e.prototype.cleanBG = function() {
				this.bg.clean()
			}, e.prototype.bgComplete = function() {
				this.bg.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.size(this.bg.width, this.bg.height), this.event(GameEventConstant.LOAD_IMAGE_COMPLETE, {
					w: this.bg.width,
					h: this.bg.height
				})
			}, e.prototype.dispose = function() {
				this.bg.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.removeChildren()
			}, e.prototype.clean = function(t) {
				void 0 === t && (t = !1), this.visible = t
			}, e.prototype.show = function() {
				this.visible = !0
			}, e
		}(OSprite);
	t.TextMessageTalk = a;
	var n = function(t) {
			function e(e, i, a) {
				var n = t.call(this) || this;
				return n.messageText = "", n.w = 0, n.h = 0, n.showeInterval = 0, n.drawWait = 0, n.drawSpeed = 0, n.jumpTheMsg = !1, n.pause = !1, n.waitPlayer = !1, n.showIndex = 1, n.textLineDir = 1.5, n.tempWidth = 0, n.tempHeight = 0, n.drawTime = 0, n.isComplete = !1, n.drawX = 0, n.drawY = 0, n.talkName = "", n.txtHeight = 0, n.faceOfsX = 0, n.skipMessage = !1, n.uiData = e, n.w = i - (n.uiData.Talk.textX - n.uiData.Talk.backX), n.h = a - (n.uiData.Talk.textY - n.uiData.Talk.backY), n.init(), n
			}
			return __extends(e, t), e.prototype.init = function() {
				this.textF = new OText, this.textF.size(this.w, this.h), this.textF.fontSize = GloableData.getInstance().gameMainData.System.FontSize, this.textF.font = GloableData.getInstance().gameMainData.System.FontName, this.addChild(this.textF)
			}, e.prototype.clean = function(t) {
				if (void 0 === t && (t = !1), this.timeData && TimeManager.getInstance().removeTimeById(this.timeData), this.drawX = 0, this.drawY = 0, this.textF.cleanTexts(), this.textF.removeChildren(), this.showingText) for (; this.showingText.texts.length > 0;) {
					var e = this.showingText.texts.shift();
					e.dispose(), e = null
				}
				this.showingText = null, this.messageText = "", this.visible = !t, this.isComplete = !1
			}, e.prototype.dispose = function() {
				this.clean(), this.removeChildren()
			}, e.prototype.show = function() {
				this.visible = !0
			}, e.prototype.msgScreenRoll = function(t, e) {
				var i = this,
					a = e.split("|"),
					n = a[0];
				if (1 == n) {
					var s = a[1],
						o = (a[2], a[3], a[4], a[5], a[2].split(",")[0]),
						r = a[2].split(",")[1],
						h = a[3].split(",")[0],
						l = a[3].split(",")[1],
						c = a[4].split(",")[0],
						g = a[4].split(",")[1],
						u = a[5].split(",")[0],
						p = a[5].split(",")[1],
						d = void 0,
						m = void 0,
						v = void 0,
						f = void 0;
					switch (parseInt(o)) {
					case 0:
						d = 0;
						break;
					case 1:
						d = GloableData.getInstance().gameMainData.Headr.GWidth / 2;
						break;
					case 2:
						d = GloableData.getInstance().gameMainData.Headr.GWidth;
						break;
					default:
						d = c
					}
					switch (parseInt(r)) {
					case 0:
						m = 0;
						break;
					case 1:
						m = GloableData.getInstance().gameMainData.Headr.GHeight / 2;
						break;
					case 2:
						m = GloableData.getInstance().gameMainData.Headr.GHeight;
						break;
					default:
						m = g
					}
					switch (parseInt(h)) {
					case 0:
						v = 0;
						break;
					case 1:
						v = GloableData.getInstance().gameMainData.Headr.GWidth / 2;
						break;
					case 2:
						v = GloableData.getInstance().gameMainData.Headr.GWidth;
						break;
					default:
						v = u
					}
					switch (parseInt(l)) {
					case 0:
						f = 0;
						break;
					case 1:
						f = GloableData.getInstance().gameMainData.Headr.GHeight / 2;
						break;
					case 2:
						f = GloableData.getInstance().gameMainData.Headr.GHeight;
						break;
					default:
						f = p
					}
					var I = 0,
						y = 0;
					this.showingText = StringUtil.getAnalysisText(t), this.currentnCofig = this.showingText.configs.shift(), this.currentFontNum = this.currentnCofig.textNum, this.drawWait = this.currentnCofig.waitFrame * GloableStaticData.GAME_RUN_TIME, this.showContinueAllText(), I = this.tempWidth, y = this.tempHeight, 0 >= d || 3 == parseInt(o) ? d -= this.uiData.Talk.textX : d = 1 == parseInt(o) ? d - this.uiData.Talk.textX - I / 2 : d - this.uiData.Talk.textX - I, 0 >= m || 3 == parseInt(r) ? m -= this.uiData.Talk.textY : m = 1 == parseInt(r) ? m - this.uiData.Talk.textY - y / 2 : m - this.uiData.Talk.textY - y, 0 >= v || 3 == parseInt(h) ? v -= this.uiData.Talk.textX : v = 1 == parseInt(h) ? v - this.uiData.Talk.textX - I / 2 : v - this.uiData.Talk.textX - I, 0 >= f || 3 == parseInt(l) ? f -= this.uiData.Talk.textY : f = 1 == parseInt(l) ? f - this.uiData.Talk.textY - y / 2 : f - this.uiData.Talk.textY - y, this.x = d, this.y = m, this.tween = OTween.to(this, {
						x: v,
						y: f
					}, parseInt(s) / 2 * GloableStaticData.GAME_RUN_TIME, null, OHandler.create(this, function() {
						i.isComplete = !0
					}))
				} else this.stopMove()
			}, e.prototype.pauseTween = function() {
				this.tween && this.tween.pause()
			}, e.prototype.resumeTween = function() {
				this.tween && this.tween.resume()
			}, e.prototype.stopMove = function() {
				this.tween && (this.tween.clear(), this.isComplete = !0)
			}, e.prototype.updateMsg = function(t, e, i) {
				this.clean(!1), this.messageText = t, this.showeInterval = i, this.startShowText()
			}, e.prototype.startShowText = function() {
				return this.parent.talkSprite.visible ? this.textF.size(this.w, this.h) : this.textF.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), this.drawX = this.faceOfsX, this.showingText = StringUtil.getAnalysisText(this.messageText), this.showingText.configs.length > 0 ? (this.currentnCofig = this.showingText.configs.shift(), this.currentFontNum = this.currentnCofig.textNum, this.drawWait = 0, this.addText(), void 0) : (TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_TALK_ID), this.isComplete = !0, EventCenter.dispatchEvent(new GameEvent(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE)), void UIManager.getInstance().backgroundLayer.talkCompleteActImage(this.talkName))
			}, e.prototype.showAllText = function() {
				if (TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_TALK_ID), this.currentFontNum > 0 || this.currentnCofig) {
					if (this.showAllTextByConfig(this.currentnCofig, this.currentFontNum), !this.skipMessage && this.currentnCofig && (this.skipMessage = this.currentnCofig.skipMessage), this.drawWait = this.currentnCofig.waitFrame * GloableStaticData.GAME_RUN_TIME, this.currentFontNum = 0, this.drawWait > 0) return this.timeData || (this.timeData = new GameTimeData), this.timeData.delay = this.drawTime, this.timeData.args = [this.showIndex], this.timeData.thisArg = this, this.timeData.callBack = this.showText, this.timeData.id = GloableStaticData.TIME_TALK_ID, TimeManager.getInstance().addTime(this.timeData), void(this.currentnCofig = null);
					if (!this.pause) return this.pause = this.currentnCofig.isWaitPlayer, this.timeData || (this.timeData = new GameTimeData), this.timeData.delay = this.drawTime, this.timeData.args = [this.showIndex], this.timeData.thisArg = this, this.timeData.callBack = this.showText, this.timeData.id = GloableStaticData.TIME_TALK_ID, TimeManager.getInstance().addTime(this.timeData), void(this.currentnCofig = null)
				}
				for (this.currentnCofig = null; this.showingText.configs.length > 0;) {
					this.currentnCofig = this.showingText.configs.shift();
					for (var t = this.currentnCofig.textNum, e = GloableData.getInstance().textLineHeight; t > 0;) {
						t--;
						var i = this.showingText.texts.shift();
						i.x = this.drawX, i.y = this.drawY, this.drawX += i.width, this.textF.addtext(i)
					}
					if (this.currentnCofig.newline && (this.drawY += e, this.drawX = this.faceOfsX), !this.skipMessage && this.currentnCofig && (this.skipMessage = this.currentnCofig.skipMessage), this.drawWait = this.currentnCofig.waitFrame * GloableStaticData.GAME_RUN_TIME, this.drawWait > 0) return this.timeData || (this.timeData = new GameTimeData), this.timeData.delay = this.drawTime, this.timeData.args = [this.showIndex], this.timeData.thisArg = this, this.timeData.callBack = this.showText, this.timeData.id = GloableStaticData.TIME_TALK_ID, void TimeManager.getInstance().addTime(this.timeData);
					if (this.currentnCofig.isWaitPlayer) return this.pause = this.currentnCofig.isWaitPlayer, this.timeData || (this.timeData = new GameTimeData), this.timeData.delay = this.drawTime, this.timeData.args = [this.showIndex], this.timeData.thisArg = this, this.timeData.callBack = this.showText, this.timeData.id = GloableStaticData.TIME_TALK_ID, void TimeManager.getInstance().addTime(this.timeData)
				}
				return this.currentFontNum = 0, this.isComplete = !0, GloableData.getInstance().autoPlay ? (this.timeData = null, this.isComplete = !0, this.faceOfsX = 0, this.isComplete = !0, UIManager.getInstance().backgroundLayer.talkCompleteActImage(this.talkName), void EventCenter.dispatchEvent(new GameEvent(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE))) : void((this.showeInterval == GloableStaticData.DRAW_TALK_SPEED_TYPE_SHOW_ALL || GloableData.getInstance().quickRun) && (this.timeData = null, this.isComplete = !0, this.faceOfsX = 0, TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_TALK_ID), UIManager.getInstance().backgroundLayer.talkCompleteActImage(this.talkName), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE))))
			}, e.prototype.showAllTextByConfig = function(t, e) {
				for (var i = GloableData.getInstance().textLineHeight, a = 0; e > 0;) {
					e--;
					var n = this.showingText.texts.shift();
					n.x = this.drawX, n.y = this.drawY, this.drawX += n.width, a += n.width, this.textF.addtext(n)
				}
				this.tempWidth < a && (this.tempWidth = a), t.newline ? (this.drawY += i, this.tempHeight += i, this.drawX = this.faceOfsX) : this.tempHeight += i
			}, e.prototype.showContinueAllText = function(t) {
				for (void 0 === t && (t = !1), TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_TALK_ID), (this.currentFontNum > 0 || this.currentnCofig) && (t && (this.pause || (this.pause = this.currentnCofig.isWaitPlayer)), this.showAllTextByConfig(this.currentnCofig, this.currentFontNum)); this.showingText && this.showingText.configs.length > 0;) {
					var e = this.showingText.configs.shift();
					t && (this.pause || (this.pause = e.isWaitPlayer));
					var i = e.textNum;
					this.showAllTextByConfig(e, i)
				}
				return this.currentFontNum = 0, this.isComplete = !0, GloableData.getInstance().autoPlay ? (this.isComplete = !0, UIManager.getInstance().backgroundLayer.talkCompleteActImage(this.talkName), void EventCenter.dispatchEvent(new GameEvent(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE))) : void(GloableData.getInstance().quickRun && (TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_TALK_ID), this.timeData = null, this.isComplete = !0, this.faceOfsX = 0, UIManager.getInstance().backgroundLayer.talkCompleteActImage(this.talkName), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE))))
			}, e.prototype.addText = function() {
				TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_TALK_ID), this.drawTime = this.showeInterval, (this.showeInterval == GloableStaticData.DRAW_TALK_SPEED_TYPE_SHOW_ALL || GloableData.getInstance().quickRun) && (this.drawTime = GloableStaticData.GAME_RUN_TIME), this.timeData || (this.timeData = new GameTimeData), this.timeData.delay = this.drawTime, this.timeData.args = [this.showIndex], this.timeData.thisArg = this, this.timeData.callBack = this.showText, this.timeData.id = GloableStaticData.TIME_TALK_ID, TimeManager.getInstance().addTime(this.timeData)
			}, e.prototype.showText = function(t) {
				if (GloableData.getInstance().autoPlay && (this.pause = !1), !this.pause) {
					if (this.drawWait > 0) return void(this.drawWait -= this.drawTime);
					if (!this.skipMessage && this.currentnCofig && (this.skipMessage = this.currentnCofig.skipMessage), this.showeInterval == GloableStaticData.DRAW_TALK_SPEED_TYPE_SHOW_ALL || GloableData.getInstance().quickRun) return this.drawTime = GloableStaticData.GAME_RUN_TIME, this.timeData.delay = this.drawTime, void this.showAllText();
					UIManager.getInstance().backgroundLayer.talkRunActImage(this.talkName);
					var e = GloableData.getInstance().textLineHeight;
					if (this.currentFontNum > 0) {
						this.currentFontNum--;
						var i = this.showingText.texts.shift();
						i.x = this.drawX, i.y = this.drawY, this.drawX += i.width, this.textF.addtext(i), 0 == this.currentFontNum && (this.currentnCofig && (this.drawWait = this.currentnCofig.waitFrame * GloableStaticData.GAME_RUN_TIME, this.pause = this.currentnCofig.isWaitPlayer), this.currentnCofig && this.currentnCofig.newline && (this.drawY += e, this.drawX = this.faceOfsX), this.showingText.configs.length > 0 ? (this.currentnCofig = null, this.currentnCofig = this.showingText.configs.shift(), this.currentFontNum = this.currentnCofig.textNum) : (this.currentnCofig = new utils.FontConfig, this.currentnCofig.textNum = this.showingText.texts.length, this.currentFontNum = this.showingText.texts.length))
					} else this.currentnCofig && (this.drawWait = this.currentnCofig.waitFrame * GloableStaticData.GAME_RUN_TIME, this.pause = this.currentnCofig.isWaitPlayer), this.currentnCofig && this.currentnCofig.newline && (this.drawY += e, this.drawX = this.faceOfsX), this.showingText && this.showingText.configs.length > 0 ? (this.currentnCofig = null, this.currentnCofig = this.showingText.configs.shift(), this.currentFontNum = this.currentnCofig.textNum) : (TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_TALK_ID), this.timeData = null, this.isComplete = !0, this.faceOfsX = 0, UIManager.getInstance().backgroundLayer.talkCompleteActImage(this.talkName), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.TEXT_MESSAGE_PLAY_COMPLETE)))
				}
			}, e
		}(OSprite);
	t.TaklMsg = n
}(talk || (talk = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), lifeline;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.isInit = !1, e.events = [], e.setLocal = [], e.pause = !1, e.drawWait = 0, e.showingText = "", e.isFirst = !0, e.textfText = "", e.drawSpeed = 0, e.jumpTheMsg = !1, e.showIndex = 0, e.faceSpace = 5, e.textX = 0, e.textY = 0, e.textComplete = !1, e.bgShowComplete = !1, e.faceShowComplete = !1, e.drawX = 0, e.drawY = 0, e.txtHeight = 1.8 * GloableData.getInstance().gameMainData.System.FontSize, e.txtWidth = 0, e.isFinsh = !1, e.isComplete = !1, e.textHeight = 0, EventManager.addEventListener(e, OEvent.CLICK, e.clickItem, e), e
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "eventData", {
				get: function() {
					return this.itemData
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.setData = function(t) {
				this.dataSource = t, this.lineSpace = 1.8 * GloableData.getInstance().gameMainData.System.FontSize, this.itemData = this.dataSource.itemEvent, this.mainLine = this.dataSource.mainLine, this.bgUrl = this.dataSource.bg_url, this.bgGrid = this.dataSource.bgGrid;
				var e = this.bgGrid.split(",");
				this.textY = parseInt(e[0]), this.textX = parseInt(e[2]), this._top_margin = parseInt(e[0]), this._bottom_margin = parseInt(e[1]), this._left_margin = parseInt(e[2]), this._right_margin = parseInt(e[3]), this.setEvents()
			}, e.prototype.setEvents = function() {
				if ("" !== this.itemData.data.Argv[3] ? this.faceurl = "Graphics/Face/" + this.itemData.data.Argv[3] : this.faceurl = "", 6 == parseInt(this.itemData.data.Argv[9])) for (var t = this.itemData.data.Argv[10].split("<"), e = 0; e < t.length; e++) {
					for (var i = t[e].split(">"), a = parseInt(i[0]), n = [], s = 1; s < i.length; s++) n.push(i[s]);
					var o = 0,
						r = new data.DEvent1(a, o, n);
					this.events.push(r)
				}
				if (this.itemData.data.Argv[16]) {
					var h = this.itemData.data.Argv[16].split("|"),
						l = h[0].split(",");
					this.setLocal = h[1].split(",");
					h[2].split(","), h[3].split(",");
					1 == l[0] && (this.bgUrl = "Graphics/UI/" + l[1])
				}
			}, e.prototype.init = function() {
				this.isInit = !0, this.textF = utils.getTalkOText(), this.updateText()
			}, e.prototype.faceComplete = function() {
				var t = parseInt(this.itemData.data.Argv[4]);
				this.setLocal && 1 == parseInt(this.setLocal[0]) && parseInt(this.setLocal[1]) > 0 ? (this.x = parseInt(this.setLocal[1]), 0 == t ? (this.faceImage.x = parseInt(this.setLocal[1]), this.bgImage.x = parseInt(this.setLocal[1]) + this.bgImage.width + this.faceSpace) : 1 == t && (this.bgImage.x = parseInt(this.setLocal[1]), this.faceImage.x = parseInt(this.setLocal[1]) + this.bgImage.width + this.faceSpace)) : (this.x = 0, 0 == t ? (this.faceImage.x = 0, this.bgImage.x = this.faceImage.x + this.faceImage.width + this.faceSpace) : 1 == t ? (this.faceImage.x = this.rec.width - this.faceSpace - this.faceImage.width, this.bgImage.x = this.faceImage.x - this.bgImage.width - this.faceSpace) : this.bgImage.x = 0), this.textF.x = this.bgImage.x + this.textX, this.textF.y = this.bgImage.y + this.textY, this.setComplete()
			}, e.prototype.setComplete = function() {
				this.faceImage && this.addChild(this.faceImage), this.bgImage && this.addChild(this.bgImage), this.textF && this.addChild(this.textF), this.drawWait <= 0 && (this.drawWait = 10 * GloableStaticData.GAME_RUN_TIME), this.size(this.bgImage.x + this.bgImage.width, this.bgImage.y + this.bgImage.height), console.log(this.width, this.height, "----------item WH"), this.panel.value = 1, this.timeData = new GameTimeData, this.timeData.delay = GloableStaticData.GAME_RUN_TIME, this.timeData.args = [this.showIndex], this.timeData.thisArg = this, this.timeData.callBack = this.setDrawWait, TimeManager.getInstance().addTime(this.timeData)
			}, e.prototype.clickItem = function() {
				if (this.drawWait <= 0 && (null == this.liftInter || this.liftInter.isFinish())) {
					this.liftInter = null, this.liftInter = new MainEventLine, this.liftInter.isCui = !0;
					var t = new data.DStory(null);
					t.events = this.events, this.liftInter.jumpStory(t)
				}
			}, e.prototype.bgComplete = function() {
				if (this.bgShowComplete = !0, this.drawY >= 0 && this.txtWidth >= 0) {
					this.bgImage.setGrid(this._top_margin + "," + this._right_margin + "," + this._bottom_margin + "," + this._left_margin + ",0");
					var t = this._left_margin + this.txtWidth + this._right_margin,
						e = this._top_margin + this.drawY + this.txtHeight + this._bottom_margin;
					this.bgImage.sizeImage(t, e)
				}
				this.drawFace()
			}, e.prototype.updateText = function() {
				this.textF.removeChildren(), this.messageText = this.itemData.data.Argv[2], this.showText(), this.drawBg()
			}, e.prototype.finish = function() {
				this.drawWait <= 0 && (this.isFinsh = !0, this.timeData && TimeManager.getInstance().removeTime(this.timeData), this.itemData.finish())
			}, e.prototype.showText = function(t) {
				void 0 === t && (t = null), this.txtHeight = 1.5 * GloableData.getInstance().fontBitmapData.maxH;
				for (var e = StringUtil.getAnalysisText(this.messageText); e.configs.length > 0;) {
					var i = e.configs.shift();
					this.drawWait += i.waitFrame * GloableStaticData.GAME_RUN_TIME, this.jumpTheMsg || (this.jumpTheMsg = i.skipMessage);
					for (var a = i.textNum; a > 0;) {
						a--;
						var n = e.texts.shift();
						n.x = this.drawX, n.y = this.drawY, this.drawX += n.width, this.txtWidth < this.drawX && (this.txtWidth = this.drawX), this.textF.addtext(n)
					}
					i.newline && (this.drawY += this.txtHeight, this.drawX = 0)
				}
				this.textComplete = !0
			}, e.prototype.drawBg = function() {
				this.bgImage || (this.bgImage = new ImageComponent(""), this.bgImage.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete)), this.bgImage.visible = this.itemData.data.Argv[2].length > 0, "" != this.bgUrl ? this.bgImage.updateURL(this.bgUrl) : this.drawFace()
			}, e.prototype.drawFace = function() {
				this.faceImage || (this.faceImage = new ImageComponent(""), this.faceImage.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.faceComplete)), "" !== this.faceurl ? this.faceImage.updateURL(this.faceurl) : (this.textF.x = this.bgImage.x + this.textX, this.textF.y = this.bgImage.y + this.textX, this.setComplete())
			}, e.prototype.setDrawWait = function() {
				GloableData.getInstance().quickRun ? this.drawWait -= 2 * GloableStaticData.GAME_RUN_TIME : this.drawWait -= GloableStaticData.GAME_RUN_TIME, this.drawWait <= 0 && (this.isComplete = !0, this.timeData && TimeManager.getInstance().removeTime(this.timeData), this.jumpTheMsg && (this.isFinsh = !0, this.finish()))
			}, e.prototype.dispose = function() {
				this.parent.removeChild(this), EventManager.removeEventListener(this, OEvent.CLICK, this.clickItem, this), this.bgImage.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.bgComplete), this.faceImage.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.faceComplete), this.liftInter && this.liftInter.off(GameEventConstant.ORG_EVENT_FINISH, this.liftInter, this.liftInter.eventFinish), this.liftInter = null, this.events = [], TimeManager.getInstance().removeTime(this.timeData), this.removeChildren()
			}, e
		}(OBox);
	t.TextNewLifeLineItem = e
}(lifeline || (lifeline = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.fondSzie = 14, e.fontColor = "#FFFFFF", e.textAlpha = .6, e.fontFilter = "#000000", e.fontFilterSzie = {
					x: 3,
					y: 1
				}, e.fontFilterAlpha = .4, e.line_1 = "尚未经过审核，请勿传播", e.line_2 = "本作品由player制作", e.line_3 = "用户", e.line_4 = "ID: uid", e.line_5 = "作品", e.line_6 = "ID: guid", e.textWidth = GloableData.getInstance().getFontReWidth("微软雅黑", e.fondSzie), e.init(), e.mouseEnabled = !1, e.mouseThrough = !1, e
			}
			return __extends(e, t), e.prototype.init = function() {
				this.line_2 = this.line_2.replace("player", GloableData.getInstance().gameInfo.author_uname), this.line_4 = this.line_4.replace("uid", OrgWeb.getInstance().getUid() + ""), this.line_6 = this.line_6.replace("guid", GloableData.getInstance().gameInfo.gIndex + ""), this.text_1 = this.createText(this.line_1), this.text_2 = this.createText(this.line_2), this.text_3 = this.createText(this.line_3), this.text_4 = this.createText(this.line_4, 200), this.text_5 = this.createText(this.line_5), this.text_6 = this.createText(this.line_6, 200), this.text_1.x = 0, this.text_2.x = this.text_1.width + 8, this.text_3.x = this.text_2.x + this.text_2.width + 8, this.text_4.x = this.text_3.x, this.text_4.rotation = 90, this.text_4.x += this.textWidth + 2, this.text_4.y = this.text_3.y + this.text_3.height + 3, this.text_5.x = this.text_3.x, this.text_5.y = this.text_4.y + this.text_4.width + 3, this.text_6.x = this.text_3.x, this.text_6.rotation = 90, this.text_6.x += this.textWidth + 2, this.text_6.y = this.text_5.y + this.text_5.height + 3, this.addChild(this.text_1), this.addChild(this.text_2), this.addChild(this.text_3), this.addChild(this.text_4), this.addChild(this.text_5), this.addChild(this.text_6), this.alpha = .5, this.width = this.text_3.x + this.text_3.width;
				var t = 192,
					e = 80,
					i = 60;
				OrgWeb.getInstance().getIsPC() && GloableData.getInstance().isScreenHorizontal() && (t = 150, e = 60, i = 42), this.x = GloableData.getInstance().gameMainData.Headr.GWidth - e + (i - this.width >> 1), this.y = t + 18
			}, e.prototype.createText = function(t, e) {
				var i = this.textWidth;
				e && (i = e);
				var a;
				return a = new OText, a.fontSize = this.fondSzie, a.leading = 0, a.wordWrap = !0, a.stroke = 1, a.strokeColor = "#000000", a.width = i, a.align = "center", a.color = this.fontColor, a.bold = !0, a.x = 0, a.y = 0, a.text = t, e && (a.width = a.textWidth), a
			}, e.prototype.dispose = function() {
				this.removeChildren(), this.parent && this.parent.removeChild(this)
			}, e
		}(OSprite);
	t.UnauditedTextView = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), BackgroundLayer = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.imageList = new Dictionary, e.roationTween = [], e.init(), e.size(GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight), e
	}
	return __extends(e, t), e.prototype.init = function() {
		this.runKey = setTimeout(this.imagesTween.bind(this), GloableStaticData.GAME_RUN_TIME)
	}, e.prototype.imagesTween = function() {
		clearTimeout(this.runKey);
		for (var t in this.imageList._keys) this.imageList.getValue(this.imageList._keys[t]).updateTween();
		this.runKey = setTimeout(this.imagesTween.bind(this), GloableStaticData.GAME_RUN_TIME)
	}, e.prototype.moveImage = function(t) {
		var e = this.imageList[t.picID];
		e || (e = this.imageList.getValue(t.picID)), e ? (e.isPause = !1, e.startMove(t)) : (e = GloableData.getInstance().getGamePic(t.picID), e && (e.isPause = !1, e.startMove(t))), t.finish()
	}, e.prototype.sortImage = function() {
		for (var t = 0; 50 >= t; t++) this.imageList.containsKey(t) && this.addChild(this.imageList.getValue(t))
	}, e.prototype.imageComplte = function(t, e) {
		t.mirror && (t.isMirror = !0, t.scaleX = -parseFloat(t.scaleX), t.x += t.width * Math.abs(t.scaleX)), t.isMirror = t.mirror, t.scaleX < 0 && (t.isMirror = t.mirror = !0), t.visible = !0, GloableData.getInstance().setGamePic(t.id, t), this.imageList.add(t.id, t), this.sortImage(), e.finish()
	}, e.prototype.addActImage = function(t) {
		var e = this.imageList.getValue(t.eventData.bgId);
		e && (e instanceof actImage.ActionImageUI && (e.stop(), e.dispose()), e instanceof oaf2.ActionImageOaf && (e.stop(), e.dispose()), this.imageList.remove(t.eventData.bgId), this.removeChild(e), e.visible = !1, e.dispose(), e = null, GloableData.getInstance().gamePictrue.remove(t.eventData.bgId)), this.imageList.add(t.eventData.bgId, t), this.sortImage()
	}, e.prototype.addOAF2ActImage = function(t) {
		var e = this.imageList.getValue(t.oaf2Event.showId);
		e && (e instanceof actImage.ActionImageUI && (e.stop(), e.dispose()), e instanceof oaf2.ActionImageOaf && (e.stop(), e.dispose()), this.imageList.remove(t.oaf2Event.showId), this.removeChild(e), e.visible = !1, e.dispose(), e = null, GloableData.getInstance().gamePictrue.remove(t.oaf2Event.showId)), this.imageList.add(t.oaf2Event.showId, t), GloableData.getInstance().setGamePic(t.oaf2Event.showId, t), this.sortImage()
	}, e.prototype.addPopMsg = function(t) {
		var e = GloableData.getInstance().getGamePic(t.id) || this.imageList.getValue(t.id);
		e && (this.imageList.remove(t.id), this.removeChild(e)), this.imageList.add(t.id, t), GloableData.getInstance().setGamePic(t.id, t), this.sortImage()
	}, e.prototype.addImage = function(t) {
		this.showImageEvent = t;
		var e = GloableData.getInstance().getGamePic(t.id);
		e || (e = this.imageList.getValue(t.id)), e ? e instanceof actImage.ActionImageUI || e instanceof oaf2.ActionImageOaf ? (e.stop(), e.dispose(), e = new ImageComponent, e.visible = !1, e.mirror = t.mirror, e.scaleX = t.zoom_x, e.scaleY = t.zoom_y, e.alpha = t.alpha, e.initSelf(), e.once(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imageComplte, [e, t]), e.updateURL(t.path, t.id, t.alpha, null, null, null, new OPoint(t.x, t.y))) : e instanceof popmsg.PopMsg ? (e.visible = !1, e.parent && e.parent.removeChild(e), e = new ImageComponent, e.visible = !1, e.initPostion(), e.mirror = t.mirror, e.scaleX = t.zoom_x, e.scaleY = t.zoom_y, e.alpha = t.alpha, e.initSelf(), e.once(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imageComplte, [e, t]), e.updateURL(t.path, t.id, t.alpha, null, null, null, new OPoint(t.x, t.y))) : (e.isPause = !0, e.visible = !1, e.initPostion(), e.mirror = t.mirror, e.scaleX = t.zoom_x, e.scaleY = t.zoom_y, e.alpha = t.alpha, e.initSelf(), e.once(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imageComplte, [e, t]), e.updateURL(t.path, t.id, t.alpha, null, null, null, new OPoint(t.x, t.y))) : (e = new ImageComponent, e.mirror = t.mirror, e.visible = !1, e.scaleX = t.zoom_x, e.scaleY = t.zoom_y, e.alpha = t.alpha, e.initSelf(), e.once(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imageComplte, [e, t]), e.updateURL(t.path, t.id, t.alpha, null, null, null, new OPoint(t.x, t.y)), t.id >= 3)
	}, e.prototype.rotationImage = function(t) {
		this.roationEvent = t;
		var e = GloableData.getInstance().getGamePic(t.id);
		if (e || (e = this.imageList.getValue(t.id)), e) {
			if (e instanceof actImage.ActionImageUI) {
				e.isRotation = !0, e.isPause = !1, e.rotationPivotType = t.type;
				var i = 0 == t.type ? e.bg.width / 2 : t.rotaOriginX,
					a = i;
				0 !== t.type && (a = e.mirror ? e.bg.width - i : i), e.showSp.pivotX = a, e.showSp.pivotY = 0 == t.type ? e.bg.height / 2 : t.rotaOriginY, e.showSp.x = e.showSp.pivotX, e.showSp.y = e.showSp.pivotY
			} else if (e instanceof oaf2.ActionImageOaf) {
				e.isRotation = !0, e.isPause = !1, e.rotationPivotType = t.type;
				var i = 0 == t.type ? e.oafData.maxSize.w / 2 : t.rotaOriginX,
					a = i;
				0 !== t.type && (a = e.mirror ? e.oafData.maxSize.w - i : i), e.showActionView.pivotX = a, e.showActionView.pivotY = 0 == t.type ? e.oafData.maxSize.h / 2 : t.rotaOriginY, e.showActionView.x = e.showActionView.pivotX, e.showActionView.y = e.showActionView.pivotY
			} else if (e instanceof popmsg.PopMsg) {
				e.isRotated = !0, e.isRotation = !0, e.isPause = !1, e.rotationPivotType = t.type;
				var i = 0 == t.type ? e.image.width / 2 : t.rotaOriginX,
					a = i;
				0 !== t.type && (a = e.mirror ? e.image.width - i : i), e.image.pivotX = a, e.image.pivotY = 0 == t.type ? e.image.height / 2 : t.rotaOriginY, e.image.x = e.image.pivotX, e.image.y = e.image.pivotY
			} else {
				e.isRotation = !0, e.isPause = !1, e.rotationPivotType = t.type;
				var i = 0 == t.type ? e.image.width / 2 : t.rotaOriginX,
					a = i;
				0 !== t.type && (a = e.mirror ? e.image.width - i : i);
				var n = 0 == t.type ? e.image.height / 2 : t.rotaOriginY;
				e.image.pivotX = a, e.image.pivotY = n, e.image.x = e.image.pivotX, e.image.y = e.image.pivotY
			}
			e.startRotation(this.roationEvent, this.roationEvent.endRotate)
		}
		t.finish()
	}, e.prototype.hideImage = function(t) {
		var e = GloableData.getInstance().getGamePic(t.id);
		e || (e = this.imageList.getValue(t.id)), e && (e instanceof actImage.ActionImageUI ? (e.stop(), e.dispose()) : e instanceof oaf2.ActionImageOaf ? (e.stop(), e.dispose()) : e instanceof popmsg.PopMsg && e.dispose(!0), this.imageList.remove(t.id), this.removeChild(e), e.visible = !1, e.dispose(!1), e = null, GloableData.getInstance().gamePictrue.remove(t.id)), t.finish()
	}, e.prototype.dispose = function() {
		for (; this.imageList.values().length > 0;) {
			var t = this.imageList.values().shift();
			t instanceof ImageComponent ? (GloableData.getInstance().gamePictrue.remove(t.id), this.removeChild(t), ORG.loader.clearRes(t.url, !0), t.dispose(), t = null) : t instanceof actImage.ActionImageUI ? t.eventData && (GloableData.getInstance().gamePictrue.remove(t.eventData.bgId), t.dispose(), t = null) : t instanceof oaf2.ActionImageOaf && t.oaf2Event && (GloableData.getInstance().gamePictrue.remove(t.oaf2Event.showId), t.dispose(), t = null)
		}
		clearTimeout(this.runKey), this.imageList.clean()
	}, e.prototype.fadeOut = function() {
		for (var t = 0; t < this.imageList.keys().length; t++) {
			var e = this.imageList.keys()[t],
				i = this.imageList.getValue(e);
			i instanceof popmsg.PopMsg ? (i.alpha = 0, GloableData.getInstance().gamePictrue.getValue(i.id).alpha = 0) : i instanceof ImageComponent ? (i.alpha = 0, GloableData.getInstance().gamePictrue.getValue(i.id).alpha = 0) : i instanceof actImage.ActionImageUI ? i.eventData && (i.alpha = 0, GloableData.getInstance().gamePictrue.getValue(i.eventData.bgId) && (GloableData.getInstance().gamePictrue.getValue(i.eventData.bgId).alpha = 0)) : i instanceof oaf2.ActionImageOaf && i.oaf2Event && (i.alpha = 0, GloableData.getInstance().gamePictrue.getValue(i.oaf2Event.showId) && (GloableData.getInstance().gamePictrue.getValue(i.oaf2Event.showId).alpha = 0))
		}
	}, e.prototype.talkRunActImage = function(t) {
		for (var e in this.imageList._keys) {
			var i = this.imageList.getValue(this.imageList._keys[e]);
			i instanceof actImage.ActionImageUI ? i.run(2, t) : i instanceof oaf2.ActionImageOaf && i.run(2, t)
		}
	}, e.prototype.talkCompleteActImage = function(t) {
		for (var e in this.imageList._keys) {
			var i = this.imageList.getValue(this.imageList._keys[e]);
			i instanceof actImage.ActionImageUI && i.stopActImage(2, t), i instanceof oaf2.ActionImageOaf && i.stopTalkAct(2, t)
		}
	}, e.prototype.pauseTween = function() {
		for (var t in this.imageList.values()) {
			var e = this.imageList.values()[t];
			e.pause()
		}
	}, e.prototype.resumeTween = function() {
		for (var t in this.imageList.values()) {
			var e = this.imageList.values()[t];
			e.resume()
		}
	}, e.prototype.completeTween = function() {
		for (var t in this.imageList.values()) {
			var e = this.imageList.values()[t];
			e.complete()
		}
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ChatLayer = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e._chatList = [], e.onTouchX = 0, e.onTouchY = 0, e.chatRestrain = !1, e.pause = !1, e.downLongTime = !1, e.bClick = !1, e.textBClick = !1, e.textEventClick = !1, e.scrollFlg = !1, e.isMoveTime = 0, e.downMouseX = 0, e.downMouseY = 0, e.curVoice = "", e.parIndexVoice = -1, e.childIndexVoice = -1, e.chatFontSpace = 0, e.mouseMove = function() {
			UIManager.getInstance().onTouchDown = !1, "WEB" == OrgWeb.getInstance().getOrgPlat() ? UIManager.getInstance().onTouchDown && UIManager.getInstance().onTouchMove ? (this.isMoveTime++, this.isMoveTime > 3 && (this.scrollFlg = !0)) : (this.isMoveTime = 0, this.scrollFlg = !1) : UIManager.getInstance().onTouchDown && UIManager.getInstance().onTouchMove ? this.scrollFlg = !0 : this.scrollFlg = !1
		}, e.mouseDown = function(t) {
			this.downMouseX = t.stageX, this.downMouseY = t.stageY
		}, e.mouseUp = function(t) {
			if (this.downMouseX != t.stageX || this.downMouseY != t.stageY) {
				var e = Math.abs(this.downMouseX - t.stageX),
					i = Math.abs(this.downMouseY - t.stageY);
				3 >= e && 3 >= i ? this.scrollFlg = !1 : this.scrollFlg = !0
			} else this.scrollFlg = !1
		}, e.textClick = function() {
			this.textEventClick = !0
		}, e.audioMgr = mgr.AudioMgr.instance, e
	}
	return __extends(e, t), e.prototype.getCurrentChatList = function() {
		var t = [];
		for (var e in this._chatList) {
			var i = this._chatList[e];
			i && i.visible && t.push(i)
		}
		return t
	}, Object.defineProperty(e.prototype, "chatList", {
		get: function() {
			return this._chatList
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.getChatList = function(t) {
		return this._chatList[t] || this.addChild(this._chatList[t] = new chat.ChatUI)
	}, e.prototype.addEvent = function(t) {
		this.eventLine = t, this.on(OEvent.CLICK, this, this.clickChatView)
	}, e.prototype.removeEvent = function() {
		this.on(OEvent.CLICK, this, this.clickChatView)
	}, e.prototype.savedata = function() {
		for (var t = {}, e = 0; e < this._chatList.length; e++) this._chatList[e] && (this._chatList[e].ChatShow || this._chatList[e].ChatUIItem.length > 0) && (t["" + e] = this._chatList[e].savedata());
		return t
	}, e.prototype.loadData = function(t, e) {
		var i = this;
		if (!t) return void(e && e());
		var a = [],
			n = [];
		for (var s in t) a.push(t[s]), n.push(s);
		var o = a.length,
			r = a.length;
		if (o > 0 && n.length > 0) var h = 0,
			l = setInterval(function() {
				var t = o - r,
					s = n[t];
				if (r == a.length) {
					var c = a.shift();
					i.getChatList(s).loadData(c, s)
				}
				i.getChatList(s).loadDataFinish && (r--, 0 >= r && (clearInterval(l), e && e())), h++, h >= 1800 && (console.log("三分钟都没下来，则直接回调。让作者回游戏。"), h = 0, clearInterval(l), e && e())
			}, 100);
		else e && e()
	}, e.prototype.getCurVoice = function() {
		if (this.curVoice.length > 0) {
			var t = this.curVoice.split("_");
			t.length > 0 && (this.parIndexVoice = parseInt(t[0]), this.childIndexVoice = parseInt(t[1]))
		}
	}, e.prototype.clickChatView = function(t) {
		if (!UIManager.getInstance().hasViewShow() && !UIManager.getInstance().isSCUIShow && 1 != view.PaySendUI.showUI && 1 != ORGMenuUI.showUI) {
			var e = 0;
			if (!GloableData.getInstance().currentLine || !GloableData.getInstance().currentLine.currentEvent || (e = GloableData.getInstance().currentLine.currentEvent.Code, 1011 != e && 1010 != e && 101 != e && 204 != e)) {
				if (this.onTouchX = UIManager.getInstance().onTouchX, this.onTouchY = UIManager.getInstance().onTouchY, !this.scrollFlg) {
					this.bClick = !1, this.getCurVoice();
					for (var i = 0; i < this._chatList.length; i++) {
						var a = this._chatList[i];
						if (a && a.ChatShow && a.ChatUIItem.length > 0) {
							var n = UIManager.getInstance().currentTalkUI;
							n.face.visible && n.face.hitTestPoint(t.stageX, t.stageY) || n.nameSprite.visible && n.nameSprite.hitTestPoint(t.stageX, t.stageY) || n.talkSprite.visible && n.talkSprite.hitTestPoint(t.stageX, t.stageY) || n.talkText.visible && n.talkText.hitTestPoint(t.stageX, t.stageY) ? this.textBClick = !0 : this.textBClick = !1;
							var s = this.isSelected(a.startX, a.startY, a.clientW, a.clientH);
							if (s && !this.textBClick) for (var o = 0; o < a.ChatUIItem.length; o++) {
								if (2 == a.ChatUIItem[o].MsgType && a.ChatUIItem[o].MsgPic) {
									var r = a.ChatUIItem[o].MsgPic;
									if (this.bClick = this.monitorChat(a, a.ChatUIItem[o], r), this.bClick) return a.ChatUIItem[o].picClick(t), void this.clear()
								}
								if (3 == a.ChatUIItem[o].MsgType && a.ChatUIItem[o].MsgVoice) {
									var h = a.ChatUIItem[o].MsgVoice;
									if (this.bClick = this.monitorChat(a, a.ChatUIItem[o], h), this.bClick) {
										if (a.index == this.parIndexVoice && o == this.childIndexVoice) {
											if (!OrgWeb.getInstance().getPlatForm() && "ANDROID" == OrgWeb.getInstance().getOrgPlat()) {
												if (window.org_box && window.org_box.PlayIngAudio) {
													var l = window.org_box.PlayIngAudio(2);
													l ? this.audioMgr.stop(audio.ChannelEnum.vo) : a.ChatUIItem[o].VoiceClick(t)
												}
												return
											}
											var c = window.channels[audio.ChannelEnum.vo].audioIns.paused;
											c ? a.ChatUIItem[o].VoiceClick(t) : this.audioMgr.stop(audio.ChannelEnum.vo)
										} else a.ChatUIItem[o].VoiceClick(t);
										return void this.clear()
									}
								}
							}
						}
					}
					for (var i = 0; i < this._chatList.length; i++) {
						var g = this._chatList[i];
						if (g && g.ChatShow && g.ChatUIItem.length > 0) {
							if (221 == e && this.textEventClick) return this.textEventClick = !1, void this.clear();
							if (g.waitTOclick && 221 == e && !this.bClick) return g.waitTOclick = !1, g.localFinish(), void this.clear()
						}
					}
				}
				this.clear()
			}
		}
	}, e.prototype.clear = function() {
		this.isMoveTime = 0, this.scrollFlg = !1, this.textEventClick = !1
	}, e.prototype.closeVOice = function(t, e) {
		this.getCurVoice(), t ? this.parIndexVoice == e && this.audioMgr.stop(audio.ChannelEnum.vo) : this.audioMgr.stop(audio.ChannelEnum.vo)
	}, e.prototype.resumeQuick = function() {
		if (this._chatList.length > 0) for (var t = 0; t < this._chatList.length; t++) if (this._chatList[t] && this._chatList[t].visible) return
	}, e.prototype.disposeChatS = function() {
		if (!(this._chatList.length <= 0)) for (var t = !1, e = 0; e < this._chatList.length; e++) {
			var i = this._chatList[e];
			i.visible && (t = !0)
		}
	}, e.prototype.monitorChat = function(t, e, i) {
		var a = !1;
		if (t.contentHeight > t.clientH) {
			var n = t.chatBox.vScrollBar.value,
				s = e.y - n + i.y;
			a = this.isSelected(t.startX + i.x, t.startY + s, i.width, i.height)
		} else {
			var s = e.y + i.y;
			a = this.isSelected(t.startX + i.x, t.startY + s, i.width, i.height)
		}
		return a
	}, e.prototype.openMsg = function() {
		this.chatRestrain = !1
	}, e.prototype.restrainMessge = function() {
		this.chatRestrain = !0
	}, e.prototype.isSelected = function(t, e, i, a) {
		var n = !1;
		return this.onTouchX > t && this.onTouchX < t + i && this.onTouchY > e && this.onTouchY < e + a && (n = !0), n
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), EffectsLayer = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.type = 0, e.shakepower = 0, e.shakespeed = 0, e.shaketime = 0, e.shakeloop = !1, e.shakedirection = 1, e.shaketimenum = 0, e.shake = 0, e.weatherLayer = new WeatherLayer, e.addChild(e.weatherLayer), e
	}
	return __extends(e, t), e.prototype.startWeather = function(t) {
		this.type = t, 0 == this.type ? this.weatherDispose() : 1 == this.type ? this.winding() : 2 == this.type ? this.raining() : 3 == this.type && this.snowing()
	}, e.prototype.raining = function() {
		this.weatherDispose(), this.particle = new ORGParticle(30, ORGPartShapeType.RAIN), this.weatherLayer.addChild(this.particle)
	}, e.prototype.snowing = function() {
		this.weatherDispose(), this.particle = new ORGParticle(40, ORGPartShapeType.SNOW), this.weatherLayer.addChild(this.particle)
	}, e.prototype.winding = function() {
		this.weatherDispose(), this.particle = new ORGParticle(30, ORGPartShapeType.WIND), this.weatherLayer.addChild(this.particle)
	}, e.prototype.weatherDispose = function() {
		this.particle && (this.particle.dispose(), this.weatherLayer.removeChildByNode(this.particle), this.particle = null)
	}, e.prototype.setFlash = function(t, e) {
		this.stopFlash(), this.flashLayer = new OSprite, this.addChild(this.flashLayer), this.flashTime = t, this.flashLayer.graphics.drawRect(0, 0, GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight, e.getColorToUint()), this.flashGameTime = new GameTimeData, this.flashGameTime.isRemove = !1, this.flashGameTime.isJump = !1, this.flashGameTime.delay = GloableStaticData.GAME_RUN_TIME, this.flashGameTime.type = 1, this.flashGameTime.thisArg = this, this.flashGameTime.callBack = this.flashing, TimeManager.getInstance().addTime(this.flashGameTime)
	}, e.prototype.flashing = function() {
		if (this.flashTime <= 0) return void this.stopFlash();
		var t = this.flashTime;
		this.flashLayer.alpha = this.flashLayer.alpha * (t - 1) / t, this.flashTime -= 1
	}, e.prototype.stopFlash = function() {
		this.flashLayer && (this.removeChildByNode(this.flashLayer), this.flashLayer = null), this.flashGameTime && (TimeManager.getInstance().removeTime(this.flashGameTime), this.flashGameTime = null)
	}, e.prototype.setShakeData = function(t, e, i, a) {
		this.shakeGameTime && this.stopShake(), this.shake = 0, this.shakedirection = 1, this.shakepower = t, this.shakespeed = e, this.shakeloop = i, this.shaketime = a, this.setShakeLayerXY(0, 0), this.shakeGameTime = new GameTimeData, this.shakeGameTime.isRemove = !1, this.shakeGameTime.isJump = !1, this.shakeGameTime.id = GloableStaticData.TIME_SHAKE_ID, this.shakeGameTime.delay = GloableStaticData.GAME_RUN_TIME, this.shakeGameTime.type = 1, this.shakeGameTime.thisArg = this, this.shakeGameTime.callBack = this.shaking, TimeManager.getInstance().addTime(this.shakeGameTime)
	}, e.prototype.shaking = function() {
		if (this.shaketime <= 0) return void this.stopShake();
		if (this.shakeloop || this.shaketime--, this.shaketimenum++, this.shaketimenum % 2 == 0) {
			this.shaketimenum = 0;
			var t = this.shakepower * this.shakespeed * this.shakedirection / 5; - 1 != this.shakedirection && this.shakedirection <= 1 && this.shake * (this.shake + t) < 0 ? this.shake = 0 : this.shake += t, this.shake > 2 * this.shakepower && (this.shakedirection -= 1), this.shake < -2 * this.shakepower && (this.shakedirection += 1), this.shakedirection >= 1 && (this.shakedirection -= 1);
			var e = Math.floor(10 * Math.random()),
				i = e % 2 == 0 ? this.shake : -1 * this.shake;
			e = Math.floor(10 * Math.random());
			var a = e % 2 == 0 ? this.shake : -1 * this.shake;
			this.setShakeLayerXY(i, a)
		}
	}, e.prototype.setShakeLayerXY = function(t, e) {
		UIManager.getInstance().backgroundLayer.x = t, UIManager.getInstance().backgroundLayer.y = e
	}, e.prototype.stopShake = function() {
		this.shakeGameTime && TimeManager.getInstance().removeTimeByIdNumber(GloableStaticData.TIME_SHAKE_ID), this.shaketime = 0, this.setShakeLayerXY(0, 0), this.shakeGameTime = null
	}, e.prototype.dispose = function() {
		this.weatherDispose(), this.stopFlash(), this.stopShake()
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), GameAdvanceUILayer = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e.prototype.refreshUI = function() {
		for (var t = this._childs.length, e = 0; t > e; e++) this._childs[e] instanceof view.SCustomUI && this._childs[e].updateControls()
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), GameLoadLayer = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.quickIcon = null, EventCenter.addEventListener(GameEventConstant.SHOW_QUICK_ICON, e, e.showFFIcon), EventCenter.addEventListener(GameEventConstant.LONG_DOWN_CANCEL_BY_MOVINE_EVENT, e, e.hideFFIcon), e
	}
	return __extends(e, t), e.prototype.showFFIcon = function(t) {
		if (!OrgWeb.getInstance().getIsPC() && !this.prevent) {
			(GloableData.getInstance().serverPath || "") + "res/speedfast/";
			this.quickIcon ? this.addChild(this.quickIcon) : (this.quickIcon = new view.QuickIcon, this.addChild(this.quickIcon)), this.quickIcon.callBack = t.callback, this.quickIcon.show()
		}
	}, e.prototype.hideFFIcon = function() {
		this.quickIcon && this.quickIcon.parent && (this.removeChild(this.quickIcon), this.quickIcon.dispose(), this.quickIcon = null)
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), GameSystemUILayer = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.createMenuBtn(), e
	}
	return __extends(e, t), e.prototype.createMenuBtn = function() {
		if (GloableData.getInstance().gameMainData.System.ShowSystemMenu) {
			var t = "game_menu2_web.png",
				e = "game_menu2_web_pitch.png",
				i = 60,
				a = 28;
			OrgWeb.getInstance().getIsPC() && GloableData.getInstance().isScreenHorizontal() ? (t = "game_menu2_web.png", e = "game_menu2_web_pitch.png", i = 60, a = 28) : (t = "game_menu2.png", e = "game_menu2_pitch.png", i = 80, a = 24), this.sysMenu = new OButton([this.createMenuUrl(t), this.createMenuUrl(e)]), this.sysMenu.x = GloableData.getInstance().gameMainData.Headr.GWidth - i, this.sysMenu.y = a, this.sysMenu.click(this, this.openSysMenu), this.addChild(this.sysMenu)
		}
		/* 屏蔽秀贝按钮
		var n;
		if (n = GloableData.getInstance().gameInfo.isPc ? !1 : GetQueryString("isCgMenu"), n = "false" != n && 0 != n, 0 == OrgWeb.getInstance().getPlatForm() && n) {
			var s = "game_menu3_web.png",
				o = "game_menu3_web_pitch.png",
				i = 60,
				a = 98;
			OrgWeb.getInstance().getIsPC() && GloableData.getInstance().isScreenHorizontal() ? (s = "game_menu3_web.png", o = "game_menu3_web_pitch.png", i = 60, a = 98) : (s = "game_menu3.png", o = "game_menu3_pitch.png", i = 80, a = 120), this.orgMenu = new OButton([this.createMenuUrl(s), this.createMenuUrl(o)]), this.orgMenu.y = a, this.orgMenu.x = GloableData.getInstance().gameMainData.Headr.GWidth - i, this.orgMenu.click(this, this.openOrgMenu), this.orgMenu.visible = !0, this.addChild(this.orgMenu)
		}
		*/
	}, e.prototype.setMenuInit = function() {
		OrgWeb.getInstance().getIsPC() && GloableData.getInstance().isScreenHorizontal() ? 
		(this.orgMenu && this.orgMenu.visible && this.orgMenu.showImage(this.createMenuUrl("game_menu3_web.png")), 
		this.sysMenu && this.sysMenu.visible && this.sysMenu.showImage(this.createMenuUrl("game_menu2_web.png"))) : 
		(/* this.orgMenu && this.orgMenu.visible && this.orgMenu.showImage(this.createMenuUrl("game_menu3.png")), */
		this.sysMenu && this.sysMenu.visible && this.sysMenu.showImage(this.createMenuUrl("game_menu2.png")))
	}, e.prototype.setMenuVisible = function(t) {
		return UIManager.getInstance().hasViewShow() ? (this.sysMenu && (this.sysMenu.visible = !1), void(this.orgMenu && (this.orgMenu.visible = !1))) : (this.setMenuInit(), GloableData.getInstance().gameMainData.System.ShowSystemMenu && this.sysMenu && (this.sysMenu.visible = t), void(0 != OrgWeb.getInstance().getPlatForm() || GloableData.getInstance().gameInfo.isPc || this.orgMenu && (this.orgMenu.visible = t)))
	}, e.prototype.clickBtn = function(t) {}, e.prototype.openSysMenu = function(t, e) {
		if (e && e[0] && e[0].stopPropagation(), GloableData.getInstance().gameMainData.System.SEClick.FileName.name) {
			var i = "se/" + GloableData.getInstance().gameMainData.System.SEClick.FileName.name;
			mgr.AudioMgr.instance.play(audio.ChannelEnum.fx, i, 100)
		}
		var a = GloableData.getInstance().gameMainData.System.MenuIndex;
		GloableData.getInstance().currentLine.pause();
		var n = GloableData.getInstance().gameMainData.System.Cuis;
		0 == a && (null == n || n.length <= 0) ? (UIManager.getInstance().showView(new view.SysMenuUI, view.SysMenuUIMediator.NAME), GloableData.getInstance().isShowSysMenu = !0) : 10001 == a ? (UIManager.getInstance().showView(new view.SysMenuUI, view.SysMenuUIMediator.NAME), GloableData.getInstance().isShowSysMenu = !0) : UIManager.getInstance().showViewByIndex(a, null)
	}, e.prototype.openOrgMenu = function(t, e) {
		if (e && e[0] && e[0].stopPropagation(), GloableData.getInstance().gameMainData.System.SEClick.FileName.name) {
			var i = "se/" + GloableData.getInstance().gameMainData.System.SEClick.FileName.name;
			mgr.AudioMgr.instance.play(audio.ChannelEnum.fx, i, 100)
		}
		if (window.mark && window.mark.IOS) {
			var a = !0;
			540 == GloableData.getInstance().gameInfo.gGameWidth && (a = !1);
			var n = a ? 1 : 0;
			return void window.webkit.messageHandlers.show_iOS_orgMenu.postMessage(n)
		}
		GloableData.getInstance().pauseCurrentLine(), ORGMenuUI.getInstance().showUI()
	}, e.prototype.createMenuUrl = function(t) {
		return GloableData.getInstance().serverPath + "res/sysmenu/" + t + "?v=" + playerVer
	}, e.prototype.dispose = function() {
		this.sysMenu && (this.sysMenu.offAll(), this.sysMenu.destroy(!0), this.sysMenu = null), this.orgMenu && (this.orgMenu.offAll(), this.orgMenu.destroy(!0), this.orgMenu = null), ORGMenuUI.getInstance().dispose(), this.removeAllChild()
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), LoadingLayer = function(t) {
	function e() {
		var e = t.call(this) || this;
		return OrgWeb.getInstance().getPlatForm() || "WEB" != OrgWeb.getInstance().getOrgPlat() || GloableData.getInstance().gameInfo.isPc || ADUI.getInstance().init(), e.addChild(e.lb = new view.LoadingBar), e
	}
	return __extends(e, t), e.prototype.dispose = function() {
		this.lb.dispose(), this.destroy(!0)
	}, e.prototype.showLoadingBar = function(t) {
		this.lb.progress = t
	}, e.prototype.loadingComplete = function() {}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), PopMessageLayer = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), SFloatButtonLayer = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), e.mouseThrough = !0, e.mouseEnabled = !0, e
	}
	return __extends(e, t), e.prototype.refreshUI = function() {
		1 == SFloatButtonUI.floatStatus && SFloatButtonUI.getInstance().updateControls()
	}, e.prototype.getPixs = function() {
		return !1
	}, e.prototype.showFloatUI = function() {
		SFloatButtonUI.floatStatus = 1, SFloatButtonUI.getInstance().showUI(), SFloatButtonUI.getInstance().updateControls()
	}, e.prototype.hideFloatUI = function() {
		SFloatButtonUI.floatStatus = 0, SFloatButtonUI.getInstance().hideUI()
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), TextChoiceLayer = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), TextLifeLineLayer = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), UIMaskSprite = function(t) {
	function e(e) {
		void 0 === e && (e = "#000000");
		var i = t.call(this) || this;
		return i.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), i.init(e), i
	}
	return __extends(e, t), e.prototype.init = function(t) {
		this.visible = !1, this.back = new OSprite, this.back.alpha = .5, this.back.graphics.drawRect(0, 0, GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight, t), this.addChild(this.back), this.mouseEnabled = !0, this.text = utils.getOText(), this.text.color = "#FFFFFF", this.text.fontSize = 30, this.addChild(this.text)
	}, e.prototype.update = function(t) {
		void 0 === t && (t = ""), this.text.text = t, this.text.x = GloableData.getInstance().gameInfo.gGameWidth - this.text.width >> 1, this.text.y = GloableData.getInstance().gameInfo.gGameHeight - this.text.height >> 1, this.visible = !0
	}, e.prototype.hide = function() {
		this.visible = !1
	}, e.prototype.dispose = function() {
		this.removeAllChild(), this.parent && this.parent.removeChild(this)
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), WeatherLayer = function(t) {
	function e() {
		return t.call(this) || this
	}
	return __extends(e, t), e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.isInit = !1, e
			}
			return __extends(e, t), e.prototype.setData = function(t, e) {
				this.dataSource = t, this.image_url = this.dataSource.image_url, this.bg_1_url = this.dataSource.bg_1_url, this.bg_2_url = this.dataSource.bg_2_url, this.index = this.dataSource.index, this.msg = this.dataSource.msg, this.soundName = this.dataSource.sound_name, e ? this.bgmData = e : this.bgmData = GloableData.getInstance().gameMainData.System.BGM
			}, e.prototype.init = function() {
				this.isInit = !0, this.bg = new ORGButton(this.bg_1_url, this.bg_2_url, "", ""), this.bg.postion = null, this.bg.index = this.index, this.soundNameTxt = utils.getOText(), this.soundNameTxt.x = this.bgmData.nx, this.soundNameTxt.y = this.bgmData.ny, EventManager.addEventListener(this, OEvent.CLICK, this.clickItem, this), EventManager.addEventListener(this, OEvent.MOUSE_OVER, this.showMsg, this), EventManager.addEventListener(this, OEvent.MOUSE_OUT, this.hideMsg, this), this.addChild(this.bg), this.addChild(this.soundNameTxt), this.flushItem()
			}, e.prototype.clickItem = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_BGM_UI_ITEM, this.index))
			}, e.prototype.flushItem = function() {
				this.setItemValue()
			}, e.prototype.setItemValue = function() {
				this.soundNameTxt.text = this.soundName
			}, e.prototype.update = function(t, e) {
				this.setData(t, e), this.flushItem()
			}, e.prototype.showMsg = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_BGM_UI_ITEM_MSG, this))
			}, e.prototype.hideMsg = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.HIDE_BGM_UI_ITEM_MSG, this))
			}, e.prototype.dispose = function() {
				EventManager.removeEventListener(this, OEvent.MOUSE_OVER, this.showMsg, this), EventManager.removeEventListener(this, OEvent.MOUSE_OUT, this.hideMsg, this), EventManager.removeEventListener(this, OEvent.CLICK, this.clickItem, this), this.removeChildren()
			}, e
		}(OBox);
	t.BGMItem = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t, i, a) {
				void 0 === t && (t = !1), void 0 === i && (i = -1), void 0 === a && (a = null);
				var n = e.call(this, i) || this;
				return n.collectItem = a, n.saveBGMStatus(), n.titleOpen = t, n.listData = [], console.log("BGMUI constructor"), EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, n, n.loadCompelte), UIResouecrLoad.loadBGMUI(), n
			}
			return __extends(i, e), i.prototype.saveBGMStatus = function() {
				this.collectBGM || (this.collectBGM = {}), this.collectBGM.path = window.channels[audio.ChannelEnum.bg].curUrl, this.collectBGM.volume = window.channels[audio.ChannelEnum.bg].oriVol
			}, i.prototype.resumeBGMStatus = function() {
				var t = this.collectItem.closeStatus;
				switch (t) {
				case data.DCloseMusicType.FAST_CHANGE:
					if (this.collectBGM) {
						var e = {
							path: this.collectBGM.path,
							volume: this.collectBGM.volume
						};
						mgr.AudioMgr.instance.play(audio.ChannelEnum.bg, e.path, e.volume)
					}
					break;
				case data.DCloseMusicType.LOOP:
					break;
				case data.DCloseMusicType.OVER_CHANGE:
					this.audioOverData = {
						path: this.collectBGM.path,
						volume: this.collectBGM.volume
					}, mgr.AudioMgr.instance.appendFun(this, this.audioPlayOver)
				}
			}, i.prototype.audioPlayOver = function() {
				mgr.AudioMgr.instance.play(audio.ChannelEnum.bg, this.audioOverData.path, this.audioOverData.volume)
			}, i.prototype.loadCompelte = function(t) {
				try {
					t == UIResouecrLoad.BGMUI_TYPE && (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), console.log("BGMUI init"), this.init())
				} catch (e) {
					console.error(e)
				}
			}, i.prototype.init = function() {
				if (console.log("BGMUI init complete"), this.collectItem ? this.data = this.collectItem.item : this.data = GloableData.getInstance().gameMainData.System.BGM, console.log(this.data), this.titleOpen) {
					var e = GloableData.getInstance().gameMainData.System.Title.logoImage.toString();
					e ? this.titleBg = new ImageComponent("Graphics/UI/" + e) : this.titleBg = new ImageComponent(""), this.addChild(this.titleBg)
				}
				var i = this.data.backimage.toString();
				i ? this.bg = new ImageComponent("Graphics/UI/" + this.data.backimage) : this.bg = new ImageComponent(""), this.addChild(this.bg), this.showStoryPic = new ImageComponent(""), this.showStoryPic.x = this.data.px, this.showStoryPic.y = this.data.py, this.addChild(this.showStoryPic), this.BGMList = new OList, this.BGMList.itemRender = t.BGMItem, this.BGMList.x = this.data.viewport.x, this.BGMList.y = this.data.viewport.y, this.BGMList.width = this.data.viewport.width, this.BGMList.height = this.data.viewport.height, this.BGMList.repeatX = this.data.column, this.BGMList.spaceX = this.data.spanCol, this.BGMList.spaceY = this.data.spanRow, this.BGMList.vScrollBarSkin = "";
				var a = this.data.bgmList.length,
					n = GloableData.getInstance().gameMainData.System.Buttons[this.data.selectButton.index];
				if (this.showImageArr = [], this.collectItem) {
					var s = GloableData.getInstance().getCollectDataById(this.collectItem.unid);
					s && (this.showImageArr = s)
				} else this.showImageArr = GloableData.getInstance().dGameSystem.other.bgm_index;
				for (var o = 0; a > o; ++o) {
					var r = void 0;
					r = this.showImageArr.indexOf(o) >= 0 ? this.data.bgmList[o].name.toLowerCase().replace(/\\/g, "/") : this.data.noName.length > 0 ? this.data.noName.toLowerCase().replace(/\\/g, "/") : "";
					var h = {
						bg_1_url: "Graphics/Button/" + n.image1.name,
						bg_2_url: "Graphics/Button/" + n.image2.name,
						sound_name: r,
						index: o,
						msg: this.data.bgmList[o].message
					};
					this.listData.push(h)
				}
				this.BGMList.array = this.listData, this.addChild(this.BGMList), this.message = utils.getOText(), this.message.x = this.data.mx, this.message.y = this.data.my, this.addChild(this.message), this.message.visible = !1;
				var l = GloableData.getInstance().gameMainData.System.Buttons[this.data.closeButton.index];
				this.closeBtn = new ORGButton("Graphics/Button/" + l.image1, "Graphics/Button/" + l.image2, l.name), this.closeBtn.postion = {
					x: this.data.closeButton.x,
					y: this.data.closeButton.y
				}, this.addChild(this.closeBtn), AppFacade.getInstance().registerMediator(new t.BGMUIMediator(this))
			}, i.prototype.makerBrowseImagePath = function(t) {
				if (t.length <= 0) return "";
				var e = t.lastIndexOf("."),
					i = t.substring(0, e),
					a = t.substring(e);
				return i + "_S" + a
			}, i.prototype.dispose = function() {
				for (var t in this.BGMList.cells) {
					var i = this.BGMList.cells[t];
					i.dispose()
				}
				EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.bg.dispose(), this.showStoryPic && this.showStoryPic.dispose(), this.titleBg && this.titleBg.dispose(), this.closeBtn.dispose(), this.BGMList.removeChildren(), e.prototype.dispose.call(this), this.removeChildren()
			}, i
		}(BaseUI);
	t.BGMUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				var a = t.call(this, e.NAME, i) || this;
				return a.tmp_url = "", a.soundPosition = 0, a.pathUrl = "", a
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				this.view.BGMList.renderHandler = OHandler.create(this, this.renderItem, null, !1), EventManager.addEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onViewRemove = function() {
				this.view.BGMList.renderHandler = null, EventManager.removeEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.SHOW_CG_UI_ITEM, this, this.playSound), EventCenter.addEventListener(GameEventConstant.SHOW_CG_UI_ITEM_MSG, this, this.showImageMsg), EventCenter.addEventListener(GameEventConstant.HIDE_CG_UI_ITEM_MSG, this, this.hideImageMsg)
			}, e.prototype.onEventCenterRemove = function() {
				EventCenter.removeEventListener(GameEventConstant.SHOW_CG_UI_ITEM, this, this.playSound), EventCenter.removeEventListener(GameEventConstant.SHOW_CG_UI_ITEM_MSG, this, this.showImageMsg), EventCenter.removeEventListener(GameEventConstant.HIDE_CG_UI_ITEM_MSG, this, this.hideImageMsg)
			}, e.prototype.showImageMsg = function(t) {
				this.view.showStoryPic.clean(!1), this.view.showImageArr.indexOf(t.index) > -1 && (this.view.message.text = t.msg, this.view.message.visible = this.view.data.showMsg, t.bgmData.bgmList[t.index].picPath.name && (this.view.showStoryPic.visible = !0, this.view.showStoryPic.update("Graphics/System/" + t.bgmData.bgmList[t.index].picPath.name)))
			}, e.prototype.hideImageMsg = function(t) {
				this.view.showStoryPic.visible = !1, this.view.showStoryPic.update(""), this.view.message.text = "", this.view.message.text == t.msg && (this.view.message.visible = !1)
			}, e.prototype.playSound = function(t) {
				this.view.showImageArr.indexOf(t) <= -1 || this.view.data.bgmList[t].bgmPath.toString().length <= 0 || (this.pathUrl = ("Audio/BGM/" + this.view.data.bgmList[t].bgmPath).toLowerCase().replace(/\\/g, "/"), this.pathUrl != this.tmp_url && (this.tmp_url = this.pathUrl, mgr.AudioMgr.instance.play(audio.ChannelEnum.bg, this.tmp_url, 80)))
			}, e.prototype.pauseSound = function() {}, e.prototype.resumeSound = function() {
				mgr.AudioMgr.instance.resume(audio.ChannelEnum.bg)
			}, e.prototype.renderItem = function(t, e) {
				t.isInit ? t.update(this.view.listData[e], this.view.data) : (t.setData(this.view.listData[e], this.view.data), t.init())
			}, e.prototype.closeView = function(t) {
				return t.stopPropagation(), this.view.collectItem ? (this.view.resumeBGMStatus(), UIManager.getInstance().closeView(this.name, !1), void EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_COLLECT_VIEW))) : void(-1 !== this.view.openViewIndex ? UIManager.getInstance().showViewByIndex(this.view.openViewIndex, this.view.eventLine, -1) : UIManager.getInstance().closeView(this.name, !0))
			}, e.NAME = "BGMUIMediator", e
		}(Mediator);
	t.BGMUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(i, a, n) {
				void 0 === i && (i = !1);
				var s = e.call(this) || this;
				return s.shareObj = {
					path: "",
					msg: ""
				}, s.isGameOpen = i, s.evt = a, n ? s.data = n : s.data = GloableData.getInstance().gameMainData.System.CG, s.init(), AppFacade.getInstance().registerMediator(new t.CGShareUIMediator(s)), s
			}
			return __extends(i, e), i.prototype.init = function() {
				var t = 210,
					e = 69,
					i = 150,
					a = 95,
					n = 42;
				if (1280 == GloableData.getInstance().gameInfo.gGameWidth) {
					var s = 1280 / 960;
					t *= s, e *= s, i *= s, a *= s, n *= s
				}
				540 == GloableData.getInstance().gameInfo.gGameWidth && (a = 29);
				var o;
				this.data.cglist[this.evt.index] && (o = this.data.cglist[this.evt.index].cgpath.name);
				var r;
				if (o) {
					r = "Graphics/Background/" + o;
					var h = GloableData.getInstance().getFileListItemURL(r),
						l = h.split("/");
					this.shareObj.path = l[l.length - 1], this.isGameOpen && (this.backBg = new ImageComponent(r), this.addChild(this.backBg))
				}
				this.data.cglist[this.evt.index] ? this.shareObj.msg = this.data.cglist[this.evt.index].message : this.shareObj.msg = "", this.backBottom = ORGGraphics.getInstance().getRect(GloableData.getInstance().gameInfo.gGameWidth + 2, i + 1, {
					fillStyle: "#000000",
					lineColor: "#ffffff",
					lineWidth: 1
				}), this.backBottom.alpha = .65, this.backBottom.y = GloableData.getInstance().gameInfo.gGameHeight - i, this.backBottom.x -= 1, this.addChild(this.backBottom), this.btnBox = new OSprite, this.addChild(this.btnBox);
				var c = ORGGraphics.getInstance().getRound(t, e, 6, "#ececec", null),
					g = ORGGraphics.getInstance().getRound(t, e, 6, "#cdcdcd", null);
				this.btnExit = new OButton([c, g]);
				var u = new OText;
				u.text = "取消", u.color = "#666666", u.fontSize = 23, this.btnExit.setTitle(u);
				var p = ORGGraphics.getInstance().getRound(t, e, 6, "#fead28", null),
					d = ORGGraphics.getInstance().getRound(t, e, 6, "#ef9500", null);
				this.btnShare = new OButton([p, d]);
				var m = new OText;
				m.text = "分享", m.color = "#ffffff", m.fontSize = 23, this.btnShare.setTitle(m), this.btnShare.x = this.btnShare.x + this.btnShare.width + a, this.btnBox.addChild(this.btnShare), this.btnBox.addChild(this.btnExit), this.btnBox.size(this.btnShare.x + this.btnShare.width, this.btnExit.height), this.btnBox.x = GloableData.getInstance().gameInfo.gGameWidth - this.btnBox.width >> 1, this.btnBox.y = GloableData.getInstance().gameInfo.gGameHeight - n - this.btnBox.height
			}, i.prototype.dispose = function() {
				this.btnShare && this.btnShare.dispose(), this.btnExit && this.btnExit.dispose(), this.btnBox && this.btnBox.dispose(), this.backBottom && this.backBottom.dispose(), this.backBg && this.backBg.dispose(!1), this.evt = null, this.data = null
			}, i
		}(BaseUI);
	t.CGShareUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				var a = t.call(this, e.NAME, i) || this;
				return a.closeEvent = new GameEvent(GameEventConstant.CLOSE_CGUI_ITEM_PIC), a
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				this.view.btnShare.on(GameEvent.CLICK, this, this.shareCG), this.view.btnExit.on(GameEvent.CLICK, this, this.exitCG)
			}, e.prototype.shareCG = function(t) {
				try {
					var e = !0;
					540 == GloableData.getInstance().gameInfo.gGameWidth && (e = !1);
					var i = this.view.shareObj.path,
						a = GloableData.getInstance().gameInfo.gName,
						n = GloableData.getInstance().gameInfo.gIndex,
						s = this.view.shareObj.msg;
					"undefined" == typeof window.org_box || window.org_box.ShareCG(e, i, a, n, s)
				} catch (t) {
					Tips.tip("版本不是最新，请更新版本。", "#FFFFFF")
				}
			}, e.prototype.exitCG = function(t) {
				this.view.evt && this.view.evt instanceof org_event.CGAddEvent || EventCenter.dispatchEvent(new GameEvent(GameEventConstant.CLOSE_CGUI_ITEM_PIC)), UIManager.getInstance().closeView(this.name)
			}, e.prototype.onViewRemove = function() {
				this.view.btnShare.offAll(), this.view.btnExit.offAll()
			}, e.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.CLOSE_CGUI_VIEW, this, this.exitCG)
			}, e.prototype.onEventCenterRemove = function() {
				this.closeEvent = null, EventCenter.removeEventListener(GameEventConstant.CLOSE_CGUI_VIEW, this, this.exitCG)
			}, e.NAME = "CGShareUIMediator", e
		}(Mediator);
	t.CGShareUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t, i, a) {
				void 0 === t && (t = !1), void 0 === i && (i = -1), void 0 === a && (a = null);
				var n = e.call(this, i) || this;
				return n.collectData = a, n.titleOpen = t, n.listData = [], EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, n, n.loadCompelte), UIResouecrLoad.loadCGUI(), n
			}
			return __extends(i, e), i.prototype.loadCompelte = function(t) {
				t == UIResouecrLoad.CGUI_TYPE && (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.init())
			}, i.prototype.init = function() {
				if (this.collectData ? this.data = this.collectData : this.data = GloableData.getInstance().gameMainData.System.CG, this.titleOpen) {
					var e = GloableData.getInstance().gameMainData.System.Title.logoImage.toString();
					e ? this.titleBg = new ImageComponent("Graphics/UI/" + e) : this.titleBg = new ImageComponent(""), this.addChild(this.titleBg)
				}
				var i = this.data.backimage.toString();
				i ? this.bg = new ImageComponent("Graphics/UI/" + i) : this.bg = new ImageComponent(""), this.addChild(this.bg);
				var a = this.data.cglist.length;
				this.cgList = new OList, this.cgList.itemRender = t.CGUIItem, this.cgList.x = this.data.viewport.x, this.cgList.y = this.data.viewport.y, this.cgList.width = this.data.viewport.width, this.cgList.height = this.data.viewport.height, this.cgList.repeatX = this.data.column, this.cgList.repeatY = Math.ceil(a / this.data.column), this.cgList.spaceX = this.data.spanCol, this.cgList.spaceY = this.data.spanRow, this.cgList.vScrollBarSkin = "", this.cgList.scrollBar.elasticDistance = 0, this.cgList.scrollBar.elasticBackTime = 0;
				var n = GloableData.getInstance().gameMainData.System.Buttons[this.data.backButton.index];
				if (this.showImageArr = [], this.collectData) {
					var s = GloableData.getInstance().getCollectDataById(this.collectData.unid);
					s && (this.showImageArr = s)
				} else this.showImageArr = GloableData.getInstance().dGameSystem.other.cg_index;
				for (var o = 0; a > o; ++o) {
					var r = void 0,
						h = void 0;
					this.showImageArr.indexOf(o) >= 0 ? (h = this.makerBrowseImagePath(this.data.cglist[o].cgpath + "").toLowerCase().replace(/\\/g, "/"), -1 != h.lastIndexOf("/") && (h = h.substring(h.lastIndexOf("/") + 1, h.length)), r = "Graphics/System/" + h) : this.data.nopic.name.length > 0 ? (h = "" + this.data.nopic.name.toLowerCase().replace(/\\/g, "/"), -1 != h.lastIndexOf("/") && (h = h.substring(h.lastIndexOf("/") + 1, h.length)), r = "Graphics/System/" + h) : r = "";
					var l = {
						bg_1_url: "Graphics/Button/" + n.image1.name,
						bg_2_url: "Graphics/Button/" + n.image2.name,
						image_url: r,
						index: o,
						msg: this.data.cglist[o].message
					};
					this.listData.push(l)
				}
				this.cgList.array = this.listData, this.addChild(this.cgList), this.message = utils.getOText(), this.message.x = this.data.megX, this.message.y = this.data.megY, this.addChild(this.message), this.message.visible = !1;
				var c = GloableData.getInstance().gameMainData.System.Buttons[this.data.closeButton.index];
				this.closeBtn = new ORGButton("Graphics/Button/" + c.image1, "Graphics/Button/" + c.image2, c.name), this.closeBtn.postion = {
					x: this.data.closeButton.x,
					y: this.data.closeButton.y
				}, this.addChild(this.closeBtn), this.bigImage = new ImageComponent(""), this.bigImage.visible = !1, this.addChild(this.bigImage), AppFacade.getInstance().registerMediator(new t.CGUIMediator(this))
			}, i.prototype.makerBrowseImagePath = function(t) {
				if (t.length <= 0) return "";
				var e = t.lastIndexOf("."),
					i = t.substring(0, e),
					a = t.substring(e);
				return i + "_S" + a
			}, i.prototype.dispose = function() {
				for (var t in this.cgList.cells) {
					var i = this.cgList.cells[t];
					i.dispose()
				}
				EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.bigImage.dispose(), this.bg.dispose(), this.titleBg && this.titleBg.dispose(), this.closeBtn.dispose(), this.cgList.removeChildren(), e.prototype.dispose.call(this), this.removeChildren()
			}, i
		}(BaseUI);
	t.CGUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.isInit = !1, e.cgData = GloableData.getInstance().gameMainData.System.CG, e
			}
			return __extends(e, t), e.prototype.setData = function(t) {
				this.dataSource = t, this.image_url = this.dataSource.image_url, this.bg_1_url = this.dataSource.bg_1_url, this.bg_2_url = this.dataSource.bg_2_url, this.index = this.dataSource.index, this.msg = this.dataSource.msg
			}, e.prototype.init = function() {
				this.isInit = !0, this.bg = new ORGButton(this.bg_1_url, this.bg_2_url, "", ""), this.bg.postion = null, this.bg.index = this.index, EventManager.addEventListener(this, OEvent.CLICK, this.clickItem, this), EventManager.addEventListener(this, OEvent.MOUSE_OVER, this.showMsg, this), EventManager.addEventListener(this, OEvent.MOUSE_OUT, this.hideMsg, this), this.addChild(this.bg), this.smPic = new OImage, this.addChild(this.smPic), this.flushItem()
			}, e.prototype.clickItem = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_CG_UI_ITEM, this.index))
			}, e.prototype.flushItem = function() {
				this.setItemValue(), this.setItemPos()
			}, e.prototype.setItemValue = function() {
				"" !== this.image_url && this.smPic.skin !== this.image_url && this.smPic.loadImage(GloableData.getInstance().getFileListItemURL(this.image_url), 0, 0)
			}, e.prototype.setItemPos = function() {
				this.smPic.x = this.cgData.cgx, this.smPic.y = this.cgData.cgy
			}, e.prototype.update = function(t) {
				this.setData(t), this.flushItem()
			}, e.prototype.showMsg = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_CG_UI_ITEM_MSG, this.msg))
			}, e.prototype.clean = function() {
				EventManager.removeEventListener(this, OEvent.MOUSE_OVER, this.showMsg, this), EventManager.removeEventListener(this, OEvent.MOUSE_OUT, this.hideMsg, this), EventManager.removeEventListener(this, OEvent.CLICK, this.clickItem, this), this.removeChildren(), this.bg = null
			}, e.prototype.hideMsg = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.HIDE_CG_UI_ITEM_MSG, this.msg))
			}, e.prototype.dispose = function() {
				EventManager.removeEventListener(this, OEvent.MOUSE_OVER, this.showMsg, this), EventManager.removeEventListener(this, OEvent.MOUSE_OUT, this.hideMsg, this), EventManager.removeEventListener(this, OEvent.CLICK, this.clickItem, this), this.removeChildren()
			}, e
		}(OBox);
	t.CGUIItem = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				return t.call(this, e.NAME, i) || this
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				this.view.cgList.renderHandler = OHandler.create(this, this.renderItem, null, !1), EventManager.addEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onViewRemove = function() {
				this.view.cgList.renderHandler = null, EventManager.removeEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.SHOW_CG_UI_ITEM, this, this.showImage), EventCenter.addEventListener(GameEventConstant.SHOW_CG_UI_ITEM_MSG, this, this.showImageMsg), EventCenter.addEventListener(GameEventConstant.HIDE_CG_UI_ITEM_MSG, this, this.hideImageMsg), EventCenter.addEventListener(GameEventConstant.CLOSE_CGUI_ITEM_PIC, this, this.closeBigImage)
			}, e.prototype.onEventCenterRemove = function() {
				EventCenter.removeEventListener(GameEventConstant.SHOW_CG_UI_ITEM, this, this.showImage), EventCenter.removeEventListener(GameEventConstant.SHOW_CG_UI_ITEM_MSG, this, this.showImageMsg), EventCenter.removeEventListener(GameEventConstant.HIDE_CG_UI_ITEM_MSG, this, this.hideImageMsg), EventCenter.removeEventListener(GameEventConstant.CLOSE_CGUI_ITEM_PIC, this, this.closeBigImage)
			}, e.prototype.showImageMsg = function(t) {
				this.view.message.text = t, this.view.message.visible = this.view.data.showMessage
			}, e.prototype.hideImageMsg = function(t) {
				this.view.message.text == t && (this.view.message.visible = !1)
			}, e.prototype.showCGShare = function(t) {
				"ANDROID" == OrgWeb.getInstance().getOrgPlat() ? UIManager.getInstance().showView(new view.CGShareUI(!1, {
					index: t
				}), view.CGShareUIMediator.NAME) : this.closeBigImage()
			}, e.prototype.closeBigImage = function() {
				this.view.bigImage.visible = !1
			}, e.prototype.showImage = function(t) {
				this.view.showImageArr.indexOf(t) <= -1 || this.view.data.cglist[t].cgpath.toString().length <= 0 || (this.view.bigImage.updateURL("Graphics/Background/" + this.view.data.cglist[t].cgpath.name, -1, 1, this.showCGShare, this, t), this.view.bigImage.visible = !0)
			}, e.prototype.renderItem = function(t, e) {
				t.isInit || (t.clean(), t.setData(this.view.listData[e]), t.init())
			}, e.prototype.closeView = function(t) {
				return t.stopPropagation(), this.view.collectData ? (UIManager.getInstance().closeView(this.name, !1), void EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_COLLECT_VIEW))) : void(-1 !== this.view.openViewIndex ? UIManager.getInstance().showViewByIndex(this.view.openViewIndex, this.view.eventLine, -1) : UIManager.getInstance().closeView(this.name, !0))
			}, e.NAME = "CGUIMediator", e
		}(Mediator);
	t.CGUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function a(t, a) {
				void 0 === t && (t = !0);
				var n = e.call(this) || this;
				return n.imgs = [], n.btns = [], n.isShowUI = t, n.callBack = a, n.sysBtns = GloableData.getInstance().gameMainData.System.Buttons, EventCenter.addEventListener(GameEventConstant.LOAD_COLLECTSYSTEM_COMPLETE, n, n.loadComplete), n.loadM = new i, n
			}
			return __extends(a, e), a.prototype.loadComplete = function(e) {
				EventCenter.removeEventListener(GameEventConstant.LOAD_COLLECTSYSTEM_COMPLETE, this, this.loadComplete), e && (this.data = e, this.loadM.dispose(), this.loadM = null, this.isShowUI ? (this.createBack(), this.createButton(), AppFacade.getInstance().registerMediator(new t.CollectSystemUIMediator(this))) : this.callBack && this.callBack())
			}, a.prototype.createBack = function() {
				if (this.data.backImage.name) {
					var t = "Graphics/UI/" + this.data.backImage.name,
						e = new ImageComponent(t);
					this.addChild(e), this.imgs.push(e)
				}
			}, a.prototype.createButton = function() {
				var t = "Graphics/Button/",
					e = this.data.closeButton;
				if (e) {
					var i = this.sysBtns[e.index],
						a = new ORGButton(t + i.image1, t + i.image2, GameEventConstant.CLICK_COLLECT_BTN);
					a.postion = {
						x: e.x,
						y: e.y
					}, a.index = -1, this.addChild(a), this.btns.push(a)
				}
				for (var n = 0; n < this.data.itemList.length; n++) {
					var s = this.data.itemList[n].button;
					if (s) {
						var i = this.sysBtns[s.index],
							a = new ORGButton(t + i.image1, t + i.image2, GameEventConstant.CLICK_COLLECT_BTN);
						a.index = n, a.postion = {
							x: s.x,
							y: s.y
						}, this.addChild(a), this.btns.push(a)
					}
				}
			}, a.prototype.dispose = function() {
				if (EventCenter.removeEventListener(GameEventConstant.LOAD_COLLECTSYSTEM_COMPLETE, this, this.loadComplete), this.btns) {
					for (var e = 0; e < this.btns.length; e++) this.btns[e].dispose();
					this.btns = null
				}
				if (this.imgs) {
					for (var e = 0; e < this.imgs.length; e++) this.imgs[e].dispose();
					this.imgs = null
				}
				this.data = null, this.sysBtns = null, AppFacade.getInstance().delMediatorByName(t.CollectSystemUIMediator.NAME), UIManager.getInstance().closeView(t.CollectSystemUIMediator.NAME)
			}, a
		}(BaseUI);
	t.CollectSystemUI = e;
	var i = function() {
			function t() {
				this.binPath = "Data/CollectSystem.bin", GloableData.getInstance().hasFileItem(this.binPath) ? this.startLoad() : EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_COLLECTSYSTEM_COMPLETE, this.data))
			}
			return t.prototype.startLoad = function() {
				var t = GloableData.getInstance().getFileListItemURL(this.binPath);
				ORG.loader.load(t, OHandler.create(this, this.loadBinComplete), null, OLoader.BUFFER, 0, !1)
			}, t.prototype.loadBinComplete = function(t) {
				var e = new GameByte(t);
				this.data = new data.DCollect(e), this.startLoadPic()
			}, t.prototype.startLoadPic = function() {
				this.loadCollectComplete()
			}, t.prototype.loadCollectComplete = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOAD_COLLECTSYSTEM_COMPLETE, this.data))
			}, t.prototype.dispose = function() {}, t
		}();
	t.LoadCollectSystem = i
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				return t.call(this, e.NAME, i) || this
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {}, e.prototype.onViewRemove = function() {}, e.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.CLICK_COLLECT_BTN, this, this.clickItem), EventCenter.addEventListener(GameEventConstant.SHOW_COLLECT_VIEW, this, this.showView)
			}, e.prototype.onEventCenterRemove = function() {
				EventCenter.removeEventListener(GameEventConstant.CLICK_COLLECT_BTN, this, this.clickItem), EventCenter.removeEventListener(GameEventConstant.SHOW_COLLECT_VIEW, this, this.showView)
			}, e.prototype.showView = function() {
				this.view.visible = !0
			}, e.prototype.clickItem = function(t) {
				switch (t.index) {
				case -1:
					this.view.dispose();
					break;
				default:
					this.showItemByIndex(t.index)
				}
			}, e.prototype.showItemByIndex = function(t) {
				var e = this.view.data.itemList[t];
				switch (this.view.visible = !1, e.type) {
				case data.DCollectItemType.CG:
					this.showCGByIndex(t);
					break;
				case data.DCollectItemType.BGM:
					this.showBGMByIndex(t);
					break;
				case data.DCollectItemType.STORY:
					this.showStoryByIndex(t)
				}
			}, e.prototype.showCGByIndex = function(t) {
				UIManager.getInstance().showView(new view.CGUI(!1, -1, this.view.data.itemList[t].item), view.CGUIMediator.NAME)
			}, e.prototype.showBGMByIndex = function(t) {
				UIManager.getInstance().showView(new view.BGMUI(!1, -1, this.view.data.itemList[t]), view.BGMUIMediator.NAME)
			}, e.prototype.showStoryByIndex = function(t) {
				UIManager.getInstance().showView(new view.StoryUI(!1, -1, this.view.data.itemList[t].item), view.StoryUIMediator.NAME)
			}, e.NAME = "CollectSystemUIMediator", e
		}(Mediator);
	t.CollectSystemUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), FailMessageUI = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), e.init(), e
	}
	return __extends(e, t), e.prototype.init = function() {
		this.maskBg = new UIMaskSprite, this.addChild(this.maskBg), this.bg = ORGGraphics.getInstance().getRound(390, 300, 6, {
			fillStyle: "#ffffff"
		}), this.bg.x = GloableData.getInstance().gameInfo.gGameWidth - 390 >> 1, this.bg.y = GloableData.getInstance().gameInfo.gGameHeight - 300 >> 1, this.addChild(this.bg), this.icon = new OImage, this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/payfail.png", this.icon.size(72, 72), this.icon.x = GloableData.getInstance().gameInfo.gGameWidth - 72 >> 1, this.icon.y = this.bg.y + 36, this.addChild(this.icon), this.messageText = utils.getOText(), this.messageText.color = "#464749", this.messageText.fontSize = 24, this.messageText.bold = !0, this.messageText.width = 390, this.messageText.align = "center", this.messageText.x = this.bg.x, this.messageText.y = this.icon.y + 72 + 24, this.addChild(this.messageText);
		var t = ORGGraphics.getInstance().getRound(186, 45, 22.5, {
			fillStyle: "#ffac28"
		}),
			e = ORGGraphics.getInstance().getRound(186, 45, 22.5, {
				fillStyle: "#ea9f29"
			});
		this.btn_1 = new OButton([t, e]), this.txt = utils.getOText(), this.txt.fontSize = 26, this.txt.color = "#ffffff", this.txt.text = "好的", this.txt.align = "center", this.btn_1.setTitle(this.txt);
		var i = GloableData.getInstance().getFontReHeight(this.txt.font, this.txt.fontSize);
		this.txt.y = this.btn_1.height - i >> 1, this.btn_1.x = GloableData.getInstance().gameInfo.gGameWidth - 186 >> 1, this.btn_1.y = this.bg.y + 300 - 45 - 35, this.addChild(this.btn_1), this.btn_1.addEventLisner(OEvent.CLICK, this, this.clickBtn)
	}, e.prototype.removeClick = function() {
		this.btn_1.removeEventLisner(OEvent.CLICK, this, this.clickBtn)
	}, e.prototype.click = function(t, e) {
		this.removeClick(), this.btn_1.addEventLisner(OEvent.CLICK, t, e)
	}, e.prototype.update = function(t, e) {
		void 0 === e && (e = "好的"), this.messageText.text = t, this.txt.text = e
	}, e.prototype.closeView = function() {
		try {
			this.btn_1.removeEventLisner(OEvent.CLICK, this, this.clickBtn), this.btn_1.offAll(), this.maskBg.dispose(), this.bg.removeAllChild(), this.btn_1.removeAll(), this.messageText.dispose(), this.icon.dispose(), this.removeAllChild(), UIManager.getInstance().maskSprite.hide(), this.parent && this.parent.removeChild(this)
		} catch (t) {
			console.log(t)
		}
	}, e.prototype.clickBtn = function(t, e) {
		e && e.stopPropagation(), this.closeView()
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(e, i) {
				var a = t.call(this) || this;
				return a.iconArr = [], a.loadComplete = !1, a.loading = !1, a.ani = null, a
			}
			return __extends(e, t), e.prototype.load = function(t, e) {
				this.loading || (this.loading = !0, this.iconPath = t + "speedfast.atlas?v=" + playerVer, Laya.loader.load(this.iconPath, OHandler.create(this, this.createAnimation), null, OLoader.ATLAS))
			}, e.prototype.createAnimation = function(t) {
				return this.ani ? (this.ani.x = -75, this.ani.y = -121, this.ani.index = 0, this.ani.play(0, !1), void this.addChild(this.ani)) : (this.ani = new Laya.Animation, this.ani.x = -75, this.ani.y = -121, this.ani.loadAtlas(this.iconPath), this.ani.interval = 3 * GloableStaticData.GAME_RUN_TIME, this.ani.index = 0, this.ani.on(OEvent.COMPLETE, this, this.animationCOmplete), this.ani.play(0, !1), void this.addChild(this.ani))
			}, e.prototype.animationCOmplete = function() {
				this.ani.play(9, !1)
			}, e.prototype.render = function(e, i, a) {
				this.pos(Laya.stage.mouseX, Laya.stage.mouseY), t.prototype.render.call(this, e, i, a)
			}, e.prototype.reset = function() {
				return this.ani.stop(), this.removeChild(this.ani), this.iconArr = [], this.loadComplete = !1, this.loading = !1, this
			}, e
		}(OSprite);
	t.FFIcon = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return GloableData.getInstance().isScreenHorizontal() ? e.postionObj = {
					round: 8,
					bg: {
						color: "#2e2f31",
						alpha: .9,
						bottom: 30
					},
					text: {
						w: 480,
						x: 24,
						y: 12
					},
					close: {
						x: 24
					}
				} : e.postionObj = {
					round: 8,
					bg: {
						color: "#2e2f31",
						alpha: .9,
						bottom: 42
					},
					text: {
						w: 300,
						x: 24,
						y: 12
					},
					close: {
						x: 24
					}
				}, e.init(), e
			}
			return __extends(e, t), e.prototype.init = function() {
				this.tipsMsg = new OText, this.tipsMsg.color = "#FFFFFF", this.tipsMsg.fontSize = 20, this.tipsMsg.leading = 8, this.tipsMsg.wordWrap = !0, this.tipsMsg.width = this.postionObj.text.w, this.tipsMsg.x = this.postionObj.text.x, this.tipsMsg.y = this.postionObj.text.y;
				var t, e = "";
				GloableData.getInstance().isFreeLimit && (e = GloableData.getInstance().msg_free), GloableData.getInstance().isLightDay && (e = GloableData.getInstance().msg_lightDay), GloableData.getInstance().isLightVIP && (e = GloableData.getInstance().msg_lightVip), t = GloableData.getInstance().isLightVIP || GloableData.getInstance().isLightDay ? e : this.getMallItemName().length > 0 ? e + this.getMallItemName() + "。" : "该作品中没有限免类商品。", this.tipsMsg.text = t;
				var i = this.postionObj.text.w + 80,
					a = this.tipsMsg.height + 24;
				this.bg = ORGGraphics.getInstance().getRound(i, a, this.postionObj.round, {
					fillStyle: this.postionObj.bg.color
				}), this.bg.alpha = this.postionObj.bg.alpha, this.closeBtn = ORGGraphics.getInstance().getClose(2, 16, 16, "#FFFFFF"), this.closeBtn.x = this.tipsMsg.x + this.tipsMsg.width + this.postionObj.close.x, this.closeBtn.y = this.bg.height - 16 >> 1, this.closeBtn.size(30, 30), this.bg.mouseEnabled = !1, this.tipsMsg.mouseEnabled = !1, this.addChild(this.bg), this.addChild(this.tipsMsg), this.addChild(this.closeBtn), this.closeBtn.on(OEvent.CLICK, this, this.closeView), this.x = GloableData.getInstance().gameInfo.gGameWidth - i >> 1, this.y = GloableData.getInstance().gameInfo.gGameHeight - a - this.postionObj.bg.bottom
			}, e.prototype.closeView = function(t) {
				this.closeBtn.off(OEvent.CLICK, this, this.closeView), this.removeAllChild(), this.parent && this.parent.removeChild(this)
			}, e.prototype.getMallItemName = function() {
				for (var t = "", e = GloableData.getInstance().gameMallBin.items, i = 0; i < e.length; i++) {
					var a = e[i];
					2 !== a.itemStatus && a.itemType == GloableStaticData.MALL_STORY_TYPE && (t += "、" + a.itemName)
				}
				return t.substr(1)
			}, e
		}(OSprite);
	t.GameFreeTip = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(e) {
				var i = t.call(this) || this;
				return i.itemData = e, i.x = i.itemData.itemPos.x, i.y = i.itemData.itemPos.y, i.init(), i
			}
			return __extends(e, t), e.prototype.itemPicBgComplete = function() {
				this.itemPicBG.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.itemPicBgComplete), this.itemPicBG.sizeImage(this.itemData.itemPicBGSize.w, this.itemData.itemPicBGSize.h), this.itemPicBG.x = this.itemData.itemPicBGPos.x, this.itemPicBG.y = this.itemData.itemPicBGPos.y, this.itemPic.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.itemPicComplete), this.itemPic.updateURL("Graphics/UI/" + this.itemData.itemPic.toString())
			}, e.prototype.itemPicComplete = function() {
				this.itemPic.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.itemPicBgComplete), this.itemPic.scaleX = this.itemData.itemPicSize.w / this.itemPic.width, this.itemPic.scaleY = this.itemData.itemPicSize.h / this.itemPic.height, this.itemPic.x = this.itemData.itemPicBGPos.x + (this.itemData.itemPicBGSize.w - this.itemPic.width * this.itemPic.scaleX >> 1), this.itemPic.y = this.itemData.itemPicBGPos.y + (this.itemData.itemPicBGSize.h - this.itemPic.height * this.itemPic.scaleY >> 1)
			}, e.prototype.itemBGComplete = function() {
				this.itemBG.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.itemBGComplete), this.itemBG.sizeImage(this.itemData.itemSize.w, this.itemData.itemSize.h)
			}, e.prototype.init = function() {
				this.itemBG = new ImageComponent, this.itemBG.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.itemBGComplete), this.itemBG.updateURL("Graphics/UI/" + this.itemData.itemBgPic.toString()), this.addChild(this.itemPicBG), this.addChild(this.itemBG), this.itemPicBG = new ImageComponent, this.itemPicBG.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.itemPicBgComplete), this.addChild(this.itemPicBG), this.itemPic = new ImageComponent, this.addChild(this.itemPic), this.itemPicBG.updateURL("Graphics/UI/" + this.itemData.itemPicBG.toString());
				var t = GloableData.getInstance().gameMainData.System.Buttons[this.itemData.itemBuyBtn.index];
				this.itemBuyBtn = new ORGButton("Graphics/Button/" + t.image1.toString(), "Graphics/Button/" + t.image2.toString(), GameEventConstant.MALL_SHOW_MESSAGE), this.itemBuyBtn.isVisible = !1, this.itemBuyBtn.postion = null, this.itemBuyBtn.tag = this.itemData, this.itemBuyBtn.x = this.itemData.itemBuyBtn.x, this.itemBuyBtn.y = this.itemData.itemBuyBtn.y, this.addChild(this.itemBuyBtn), this.itemBuyBtn.visible = !1, this.itemDisabledPic = new ImageComponent("Graphics/UI/" + this.itemData.itemDisabled.toString()), this.itemDisabledPic.x = this.itemData.itemBuyBtn.x, this.itemDisabledPic.y = this.itemData.itemBuyBtn.y, this.addChild(this.itemDisabledPic), this.itemDisabledPic.mouseEnabled = !1, this.itemDisabledPic.visible = !1, this.itemEnablePic = new ImageComponent("Graphics/UI/" + this.itemData.itemEnable.toString()), this.itemEnablePic.x = this.itemData.itemBuyBtn.x, this.itemEnablePic.y = this.itemData.itemBuyBtn.y, this.addChild(this.itemEnablePic), this.itemEnablePic.mouseEnabled = !1, this.itemEnablePic.visible = !1, this.flowerIcon = new ImageComponent("Graphics/UI/" + GloableData.getInstance().gameMallBin.flowerPic.toString(), -1, 1, null, null, null, !1, this.itemData.priceFlowerPos), this.flowerIcon.x = this.itemData.priceFlowerPos.x, this.flowerIcon.y = this.itemData.priceFlowerPos.y, this.addChild(this.flowerIcon), this.itemPrice = utils.getOText(), this.itemPrice.font = this.itemData.itemFontName, this.itemPrice.fontSize = 0 == this.itemData.itemPriceFontSize ? 18 : this.itemData.itemPriceFontSize, this.itemPrice.text = this.itemData.itemPrice + " 朵", this.itemPrice.x = this.itemData.itemPricePos.x + 10, this.itemPrice.y = this.itemData.itemPricePos.y, this.addChild(this.itemPrice), this.itemName = utils.getOText(), this.itemName.font = this.itemData.itemFontName, this.itemName.bold = !0, this.itemName.fontSize = 0 == this.itemData.itemNameFontSize ? 18 : this.itemData.itemNameFontSize, this.itemName.text = this.itemData.itemName, this.itemName.x = this.itemData.itemNamePos.x, this.itemName.y = this.itemData.itemNamePos.y, this.addChild(this.itemName), this.update()
			}, e.prototype.dispose = function() {
				this.itemPicBG.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.itemPicBgComplete), this.itemPic.off(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.itemPicComplete), this.itemBG.dispose(), this.itemPic.dispose(), this.itemName.dispose(), this.itemPicBG.dispose(), this.itemBuyBtn.dispose(), this.itemEnablePic.dispose(), this.itemDisabledPic.dispose(), this.removeAllChild(), this.itemBG = null, this.itemPic = null, this.itemName = null, this.itemPicBG = null, this.itemBuyBtn = null, this.itemEnablePic = null, this.itemDisabledPic = null
			}, e.prototype.update = function() {
				var t = GloableData.getInstance().getItemById(this.itemData.itemId);
				2 == this.itemData.itemStatus ? (this.itemBuyBtn.visible = !1, this.itemBuyBtn.mouseEnabled = !1, this.itemDisabledPic.visible = !0, this.itemEnablePic.visible = !1) : t ? t.count < t.max && this.itemData.itemType == GloableStaticData.MALL_VAR_TYPE ? (this.itemBuyBtn.visible = !0, this.itemBuyBtn.isVisible = !0, this.itemBuyBtn.mouseEnabled = !0, this.itemDisabledPic.visible = !1, this.itemEnablePic.visible = !1, this.itemPrice.text = "0 朵") : this.itemData.isRepeat ? (this.itemBuyBtn.visible = !0, this.itemBuyBtn.isVisible = !0, this.itemBuyBtn.mouseEnabled = !0, this.itemDisabledPic.visible = !1, this.itemEnablePic.visible = !1, this.itemPrice.text = this.itemData.itemPrice + " 朵") : (this.itemBuyBtn.visible = !1, this.itemBuyBtn.mouseEnabled = !1, this.itemDisabledPic.visible = !1, this.itemEnablePic.visible = !0, this.itemPrice.text = this.itemData.itemPrice + " 朵") : (this.itemBuyBtn.visible = !0, this.itemBuyBtn.isVisible = !0, this.itemBuyBtn.mouseEnabled = !0, this.itemDisabledPic.visible = !1, this.itemEnablePic.visible = !1, this.itemPrice.text = this.itemData.itemPrice + " 朵")
			}, e
		}(OSprite);
	t.GameMallItem = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				return t.call(this, e.NAME, i) || this
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				EventManager.addEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onViewRemove = function() {
				EventManager.removeEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.MALL_SHOW_MESSAGE, this, this.showItemMessage), EventCenter.addEventListener(GameEventConstant.MALL_REWARD_BUTTON, this, this.rewardAuthor), EventCenter.addEventListener(GameEventConstant.MALL_PAY_BUTTON, this, this.pay), EventCenter.addEventListener(GameEventConstant.UPDATE_MALL_ITEM, this, this.updateItem), EventCenter.addEventListener(GameEventConstant.MALL_BUY_ITEM_RESULT, this, this.showStatusView);
				var t = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
				t.getUserBuyAllItem(), t.getGameFlower()
			}, e.prototype.onEventCenterRemove = function() {
				EventCenter.removeEventListener(GameEventConstant.MALL_SHOW_MESSAGE, this, this.showItemMessage), EventCenter.removeEventListener(GameEventConstant.MALL_REWARD_BUTTON, this, this.rewardAuthor), EventCenter.removeEventListener(GameEventConstant.MALL_PAY_BUTTON, this, this.pay), EventCenter.removeEventListener(GameEventConstant.UPDATE_MALL_ITEM, this, this.updateItem), EventCenter.removeEventListener(GameEventConstant.MALL_BUY_ITEM_RESULT, this, this.showStatusView)
			}, e.prototype.showStatusView = function(t) {
				var e = new MallResultUI;
				e.showStatus(t), UIManager.getInstance().showView(e, "MallResultUI")
			}, e.prototype.closeView = function(t) {
				t.stopPropagation(), UIManager.getInstance().closeView(this.name, !0)
			}, e.prototype.updateItem = function(t) {
				if (t != GloableStaticData.UPDATE_MALL_FLOWER) for (var e = 0; e < this.view.mallItems.length; e++) {
					var i = this.view.mallItems[e];
					if (t == GloableStaticData.UPDATE_MALL_ALL_ITEM) i.update();
					else if (i.itemData.itemId == parseInt(t + "")) {
						i.update();
						break
					}
				}
				GloableData.getInstance().isORGnew || (this.view.flowerText.text = GloableData.getInstance().flowerMallHua + " 朵")
			}, e.prototype.rewardAuthor = function() {
				console.log("打赏作者"), OrgWeb.getInstance().getIsUnaudited() ? Tips.tip("本作品尚未过审，不能赠送鲜花", "#FFFFFF") : OrgWeb.getInstance().showPaypanel()
			}, e.prototype.pay = function() {
				console.log("支付"), OrgWeb.getInstance().getIsUnaudited() ? Tips.tip("本作品尚未过审，不能赠送鲜花", "#FFFFFF") : OrgWeb.getInstance().showPaypanel()
			}, e.prototype.showItemMessage = function(t) {
				if (t.isStatus || 2 != t.tag.status) {
					var e;
					if (!t) return void console.log("空的购买项。。。。");
					e = t.tag, GloableData.getInstance().isORGnew ? UIManager.getInstance().showView(new view.GameMallMessage(e), view.GameMallMessageMediator.NAME) : UIManager.getInstance().showView(new view.GameMallMessage(e), view.GameMallMessageMediator.NAME)
				}
			}, e.NAME = "GameMallMediator", e
		}(Mediator);
	t.GameMallMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t) {
				var i = e.call(this) || this;
				return i.buyItemData = t, 540 == GloableData.getInstance().gameInfo.gGameWidth && 960 == GloableData.getInstance().gameInfo.gGameHeight ? (i.namePos = {
					x: 20,
					y: 320
				}, i.descPos = {
					w: 287,
					h: 102
				}) : 960 == GloableData.getInstance().gameInfo.gGameWidth && 540 == GloableData.getInstance().gameInfo.gGameHeight ? (i.namePos = {
					x: 20,
					y: 160
				}, i.descPos = {
					w: 336,
					h: 74
				}) : 800 == GloableData.getInstance().gameInfo.gGameWidth && 600 == GloableData.getInstance().gameInfo.gGameHeight ? (i.namePos = {
					x: 20,
					y: 185
				}, i.descPos = {
					w: 336,
					h: 74
				}) : 1280 == GloableData.getInstance().gameInfo.gGameWidth && 720 == GloableData.getInstance().gameInfo.gGameHeight && (i.namePos = {
					x: 20,
					y: 252
				}, i.descPos = {
					w: 403,
					h: 74
				}), i.init(), i
			}
			return __extends(i, e), i.prototype.init = function() {
				this.uiData = GloableData.getInstance().gameMallBin, this.bg = new ImageComponent, this.addChild(this.bg), this.itemName = utils.getOText(), this.itemName.fontSize = this.buyItemData.itemNameFontSize, this.itemName.font = this.buyItemData.itemFontName, this.itemName.x = this.namePos.x, this.itemName.y = this.namePos.y, this.itemName.bold = !0, this.itemName.text = this.buyItemData.itemName, this.addChild(this.itemName), this.itemDesc = utils.getOText(), this.itemDesc.fontSize = this.buyItemData.itemPriceFontSize, this.itemDesc.font = this.buyItemData.itemFontName, this.itemDesc.width = this.descPos.w, this.itemDesc.height = this.descPos.h, this.itemDesc.leading = 10, this.itemDesc.y = this.itemName.y + 42, this.itemDesc.wordWrap = !0, this.itemDesc.text = this.buyItemData.itemDesc, this.addChild(this.itemDesc), this.bg.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.setPost), this.bg.updateURL("Graphics/UI/" + this.uiData.buyMessagePic.toString());
				var e = GloableData.getInstance().gameMainData.System.Buttons[this.uiData.confirmBuyBtn.index];
				this.confirmBtn = new ORGButton("Graphics/Button/" + e.image1.toString(), "Graphics/Button/" + e.image2.toString(), GameEventConstant.MALL_BUY_BUTTON), this.confirmBtn.postion = null, this.confirmBtn.x = this.uiData.confirmBuyBtn.x, this.confirmBtn.y = this.uiData.confirmBuyBtn.y, this.addChild(this.confirmBtn);
				var i = GloableData.getInstance().gameMainData.System.Buttons[this.uiData.cancelBuyBtn.index];
				this.cancleBtn = new ORGButton("Graphics/Button/" + i.image1.toString(), "Graphics/Button/" + i.image2.toString(), GameEventConstant.MALL_CANCLE_BUTTON), this.cancleBtn.postion = null, this.cancleBtn.x = this.uiData.cancelBuyBtn.x, this.cancleBtn.y = this.uiData.cancelBuyBtn.y, this.addChild(this.cancleBtn);
				var a = this.buyItemData.itemPrice,
					n = GloableData.getInstance().getItemById(this.buyItemData.itemId);
				n && n.count < n.max && (a = 0), this.priceText = utils.getOText(), this.priceText.fontSize = this.buyItemData.itemPriceFontSize, this.priceText.font = this.buyItemData.itemFontName, this.priceText.x = this.cancleBtn.x + 5, this.priceText.y = this.cancleBtn.y - 50, this.priceText.text = a + "朵", this.flowerIcon = new ImageComponent, this.flowerIcon.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.flowerComplete), this.flowerIcon.x = this.cancleBtn.x, this.flowerIcon.y = this.cancleBtn.y - 50, this.flowerIcon.updateURL("Graphics/UI/" + this.uiData.flowerPic.toString()), this.addChild(this.flowerIcon), this.addChild(this.priceText), AppFacade.getInstance().registerMediator(new t.GameMallMessageMediator(this))
			}, i.prototype.flowerComplete = function() {
				this.priceText.x = this.flowerIcon.x + this.flowerIcon.width + 5
			}, i.prototype.setPost = function() {
				this.bg.scaleX = GloableData.getInstance().gameInfo.gGameWidth / this.bg.width, this.bg.scaleY = GloableData.getInstance().gameInfo.gGameHeight / this.bg.height, this.bg.width = GloableData.getInstance().gameInfo.gGameWidth, this.bg.height = GloableData.getInstance().gameInfo.gGameHeight, this.x = GloableData.getInstance().gameInfo.gGameWidth - this.bg.width >> 1, this.y = GloableData.getInstance().gameInfo.gGameHeight - this.bg.height >> 1, this.itemName.x = this.bg.width - this.itemName.width >> 1, this.itemDesc.x = this.bg.width - this.itemDesc.width >> 1
			}, i.prototype.dispose = function() {
				this.bg.dispose(), this.confirmBtn.dispose(), this.cancleBtn.dispose(), e.prototype.dispose.call(this), this.removeAllChild()
			}, i
		}(BaseUI);
	t.GameMallMessage = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				return t.call(this, e.NAME, i) || this
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				EventManager.addEventListener(this.view.confirmBtn, OEvent.CLICK, this.confirmClick, this), EventManager.addEventListener(this.view.cancleBtn, OEvent.CLICK, this.cancleClick, this)
			}, e.prototype.onViewRemove = function() {
				EventManager.removeEventListener(this.view.confirmBtn, OEvent.CLICK, this.confirmClick, this), EventManager.removeEventListener(this.view.cancleBtn, OEvent.CLICK, this.cancleClick, this)
			}, e.prototype.onEventCenterRegister = function() {}, e.prototype.onEventCenterRemove = function() {}, e.prototype.cancleClick = function(t) {
				t && t.stopPropagation(), UIManager.getInstance().closeView(this.name, !1)
			}, e.prototype.confirmClick = function(t) {
				var e = GloableData.getInstance().getItemById(this.view.buyItemData.itemId);
				if (e && e.count < e.max) {
					var i = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
					return i.userItem(this.view.buyItemData.itemId, 1, !1), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.UPDATE_MALL_ITEM, this.view.buyItemData.itemId)), Tips.tip("购买成功"), void this.cancleClick(t)
				}
				var a = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
				if (GloableData.getInstance().gameInfo.isPc) return a.userItem(this.view.buyItemData.itemId, 1, !0), Tips.tip("购买成功"), void this.cancleClick(t);
				if (GloableData.getInstance().isORGnew) a.sendCreateOrder(this.view.buyItemData.itemId, 1), this.cancleClick(t);
				else if (GloableData.getInstance().flowerMallHua >= this.view.buyItemData.itemPrice) a.sendCreateOrder(this.view.buyItemData.itemId, 1), this.cancleClick(t);
				else try {
					if (OrgWeb.getInstance().getIsClient()) if ("ANDROID" == OrgWeb.getInstance().getOrgPlat()) {
						if ("undefined" == window.org_box) return void OrgWeb.getInstance().showPaypanel();
						if (window.org_box.GetLoginStatus()) try {
							window.org_box.getUserHaveFlower()
						} catch (t) {
							return void OrgWeb.getInstance().showPaypanel()
						}
					} else if ("IOS" == OrgWeb.getInstance().getOrgPlat()) {
						if ("undefined" == typeof window.iOSinfo) return void OrgWeb.getInstance().showPaypanel();
						if ("undefined" == window.iOSinfo.payFlowerNumStr || void 0 == window.iOSinfo.payFlowerNumStr) return void OrgWeb.getInstance().showPaypanel()
					}
					if (window.commonPlayer.loginStatus) {
						var n = new view.GameMallResultMessageView(this.view.buyItemData);
						UIManager.getInstance().showView(n, view.GameMallResultMessageViewMediator.NAME), this.cancleClick(t)
					} else this.cancleClick(t), window.commonPlayer.login.midLogin(function() {})
				} catch (t) {
					console.log(t), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.MALL_BUY_ITEM_RESULT, -1)), this.cancleClick(null)
				}
			}, e.NAME = "GameMallMessageMediator", e
		}(Mediator);
	t.GameMallMessageMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function n(t) {
				var i = e.call(this) || this;
				return i.itemData = t, UIManager.getInstance().maskSprite.update("请稍后..."), OrgWeb.getInstance().updateUserInfoCoin(i.init.bind(i)), i
			}
			return __extends(n, e), n.prototype.init = function() {
				UIManager.getInstance().maskSprite.hide(), this.back = new OSprite, this.back.alpha = .5, this.back.graphics.drawRect(0, 0, GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight, "#000000"), this.addChild(this.back), this.bg = new a, this.bg.x = GloableData.getInstance().gameInfo.gGameWidth - this.bg.width >> 1, this.bg.y = GloableData.getInstance().gameInfo.gGameHeight - this.bg.height >> 1, this.addChild(this.bg);
				var e = new i(15, 15, 0, "", "", 0, "#ffffff", "#ffffff", 2);
				e.isClose = !0;
				var n = new i(15, 15, 0, "", "", 0, "#ffc262", "#ffc262", 2);
				n.isClose = !0;
				var s = new i(15, 15, 0, "", "", 0, "#ff6600", "#ff6600", 2);
				s.isClose = !0, this.closeButton = this.createButton([e, n, s], !1, !1), this.closeButton.x = this.bg.x + this.bg.width - 25, this.closeButton.y = this.bg.y + 10, this.closeButton.size(50, 50), this.addChild(this.closeButton);
				var o, r = this.itemData.itemPrice - GloableData.getInstance().flowerMallHua,
					h = OrgWeb.getInstance().getHaveFlower();
				h >= r ? (o = "确认购买", this.isEnough = !0) : (o = "鲜花充值", this.isEnough = !1), this.message = this.createViewMessage("购买还需消耗", r + " 朵", "账户当前可用", h + " 朵", this.isEnough), this.message.x = GloableData.getInstance().gameInfo.gGameWidth - this.message.width >> 1, this.message.y = this.bg.y + 84, this.addChild(this.message);
				var l = new i(120, 36, 6, "#ffac28", "取消", 17, "#ffffff", "#ffac28", 1),
					c = new i(120, 36, 6, "#ffc262", "取消", 17, "#ffffff", "#ffc262", 1),
					g = new i(120, 36, 6, "#ff6600", "取消", 17, "#ffffff", "#ff6600", 1);
				this.cancleButton = this.createButton([l, c, g], !0), this.cancleButton.x = this.bg.x + 35, this.cancleButton.y = this.bg.y + this.bg.height - 40, this.addChild(this.cancleButton);
				var u = new i(120, 36, 6, "#ffffff", o, 17, "#ffac28", "", 0),
					p = new i(120, 36, 6, "#ffffff", o, 17, "#ffc262", "", 0),
					d = new i(120, 36, 6, "#ffffff", o, 17, "#ff6600", "", 0);
				this.confirmButton = this.createButton([u, p, d]), this.confirmButton.x = this.bg.x + this.bg.width - 155, this.confirmButton.y = this.cancleButton.y, this.addChild(this.confirmButton), AppFacade.getInstance().registerMediator(new t.GameMallResultMessageViewMediator(this))
			}, n.prototype.dispose = function() {
				this.bg.dispose(), this.cancleButton.dispose(), this.confirmButton.dispose(), this.closeButton.dispose(), this.removeChildren()
			}, n.prototype.createViewMessage = function(t, e, i, a, n) {
				var s, o, r;
				s = new OSprite, o = new OSprite, r = new OSprite;
				var h = this.createMsgText(t, 18, "#505050");
				h.bold = !0, o.addChild(h);
				var l = new ImageComponent("Graphics/UI/" + GloableData.getInstance().gameMallBin.flowerPic.toString());
				o.addChild(l), n || (e += "，");
				var c = this.createMsgText(e, 18, "#505050");
				c.bold = !0, o.addChild(c), l.x = h.x + h.width + 4, c.x = l.x + 21 + 4;
				var g = c.x + c.width;
				if (!n) {
					var u = this.createMsgText("鲜花不足", 18, "#ff0101");
					u.bold = !0, u.x = c.x + c.width, g += u.width, o.addChild(u)
				}
				var p = this.createMsgText(i, 16, "#9b9b9b");
				r.addChild(p);
				var d = new ImageComponent("Graphics/UI/" + GloableData.getInstance().gameMallBin.flowerPic.toString());
				r.addChild(d);
				var m = this.createMsgText(a, 16, "#9b9b9b");
				r.addChild(m), d.x = p.x + p.width + 4, m.x = d.x + 21 + 4;
				var v = m.x + m.width;
				o.size(g, GloableData.getInstance().getFontReHeight(c.font, c.fontSize)), s.addChild(o), r.y = o.height + 14, r.size(v, GloableData.getInstance().getFontReHeight(p.font, p.fontSize)), s.addChild(r);
				var f = Math.max(o.width, r.width);
				return s.size(f, r.y + r.height), o.x = s.width - o.width >> 1, r.x = s.width - r.width >> 1, s
			}, n.prototype.createMsgText = function(t, e, i) {
				var a = utils.getOText();
				return a.font = "微软雅黑", a.fontSize = e, a.color = i, a.text = t, a
			}, n.prototype.createButton = function(t, e, i) {
				void 0 === e && (e = !1), void 0 === i && (i = !0);
				var a = this.getOrgGraphicsSprite(t[0], e),
					n = this.getOrgGraphicsSprite(t[1], e),
					s = this.getOrgGraphicsSprite(t[2], e),
					o = new OButton([a, n, s], !0, i);
				return o
			}, n.prototype.getOrgGraphicsSprite = function(t, e) {
				var i;
				if (t.isClose) i = ORGGraphics.getInstance().getClose(t.style.lineWidth, t.w, t.h, t.style.fillStyle);
				else {
					i = e ? ORGGraphics.getInstance().getRound(t.w, t.h, t.round, t.style, {
						strokeStyle: t.style.lineColor,
						lineWidth: t.style.lineWidth
					}) : ORGGraphics.getInstance().getRound(t.w, t.h, t.round, t.style);
					var a = this.getText(t.label, t.labelColor, t.labelSize);
					if (a.x = i.width - a.width >> 1, OrgWeb.getInstance().getIsfireFox()) {
						var n = GloableData.getInstance().getFontReHeight(a.font, a.fontSize);
						a.y = i.height - a.height >> 1;
						var s = n - a.height;
						a.y += s / 4, i.addChild(a)
					} else {
						var n = GloableData.getInstance().getFontReHeight(a.font, a.fontSize);
						a.y = i.height - n >> 1
					}
					i.addChild(a)
				}
				return i
			}, n.prototype.getText = function(t, e, i) {
				var a = utils.getOText();
				return a.font = "微软雅黑", a.fontSize = i, a.color = e, a.text = t, a.align = "center", a
			}, n
		}(BaseUI);
	t.GameMallResultMessageView = e;
	var i = function() {
			function t(t, e, i, a, n, s, o, r, h) {
				this.w = 0, this.h = 0, this.round = 0, this.label = "", this.labelSize = 0, this.isClose = !1, this.w = t, this.h = e, this.round = i, this.labelColor = a, this.label = n, this.labelSize = s, this.style = {
					fillStyle: o,
					lineColor: r,
					lineWidth: h
				}
			}
			return t
		}();
	t.ButtonStateData = i;
	var a = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.titleData = {
					w: 345,
					h: 55,
					color: "#ffac28",
					titleText: "购买提示",
					textSize: 22,
					textColor: "#ffffff",
					offsetY: -2
				}, e.bgCenterData = {
					x: 0,
					y: 50,
					w: 345,
					h: 30,
					color: "#ffffff"
				}, e.bgBottomData = {
					x: 0,
					y: 70,
					w: 345,
					h: 150,
					color: "#ffffff"
				}, e.init(), e.size(345, 206), e
			}
			return __extends(e, t), e.prototype.init = function() {
				var t = new ORGGraphicsButtonData(this.titleData, this.titleData.color, 6);
				this.titleSp = new ORGGraphicsButton(t, null, this.titleData.titleText, this.titleData.textColor, this.titleData.textSize), this.titleSp.getTxt().font = "微软雅黑", this.titleSp.getTxt().y += this.titleData.offsetY, this.addChild(this.titleSp), this.bgCenter = ORGGraphics.getInstance().getRect(this.bgCenterData.w, this.bgCenterData.h, {
					fillStyle: this.bgCenterData.color
				}), this.bgCenter.x = this.bgCenterData.x, this.bgCenter.y = this.bgCenterData.y, this.bgBottom = ORGGraphics.getInstance().getRound(this.bgBottomData.w, this.bgBottomData.h, 6, {
					fillStyle: this.bgBottomData.color
				}), this.bgBottom.x = this.bgBottomData.x, this.bgBottom.y = this.bgBottomData.y, this.addChild(this.bgBottom), this.addChild(this.bgCenter)
			}, e.prototype.dispose = function() {
				this.titleSp.dispose(), this.removeChildren()
			}, e
		}(OSprite);
	t.MessageViewBG = a
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				return t.call(this, e.NAME, i) || this
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				this.view.closeButton.on(OEvent.CLICK, this, this.closeVeiw), this.view.confirmButton.on(OEvent.CLICK, this, this.clickConfirm), this.view.confirmButton.on(OEvent.MOUSE_OVER, this, this.overConfirmBtn), this.view.confirmButton.on(OEvent.MOUSE_OUT, this, this.outConfirmBtn), this.view.cancleButton.on(OEvent.CLICK, this, this.clickCancle)
			}, e.prototype.onViewRemove = function() {
				this.view.closeButton.off(OEvent.CLICK, this, this.closeVeiw), this.view.confirmButton.off(OEvent.CLICK, this, this.clickConfirm), this.view.confirmButton.off(OEvent.MOUSE_OVER, this, this.overConfirmBtn), this.view.confirmButton.off(OEvent.MOUSE_OUT, this, this.outConfirmBtn), this.view.cancleButton.off(OEvent.CLICK, this, this.clickCancle)
			}, e.prototype.onEventCenterRegister = function() {}, e.prototype.onEventCenterRemove = function() {}, e.prototype.closeVeiw = function(t) {
				UIManager.getInstance().closeView(this.name, !1)
			}, e.prototype.overConfirmBtn = function(t) {
				OrgWeb.getInstance().getIsPC() && !this.view.isEnough && window.addEventListener("click", mallViewPay, !1)
			}, e.prototype.outConfirmBtn = function(t) {
				window.removeEventListener("click", mallViewPay, !1)
			}, e.prototype.clickConfirm = function(t) {
				if (this.view.isEnough) {
					var e = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
					e.sendCreateOrder(this.view.itemData.itemId, 1, "v2")
				} else OrgWeb.getInstance().getIsPC() || (OrgWeb.getInstance().getIsClient() ? OrgWeb.getInstance().boxPay() : OrgWeb.getInstance().goToPay());
				UIManager.getInstance().closeView(this.name, !1)
			}, e.prototype.clickCancle = function(t) {
				UIManager.getInstance().closeView(this.name, !1)
			}, e.NAME = "GameMallResultMessageViewMediator", e
		}(Mediator);
	t.GameMallResultMessageViewMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i() {
				var t = e.call(this) || this;
				return t.mallItems = [], EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, t, t.loadCompelte), UIResouecrLoad.loadMallUI(), t
			}
			return __extends(i, e), i.prototype.loadCompelte = function(t) {
				t == UIResouecrLoad.MALLUI_TYPE && (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.init())
			}, i.prototype.init = function() {
				if (this.uiData = GloableData.getInstance().gameMallBin, this.bg = new ImageComponent("Graphics/UI/" + this.uiData.bgPic.toString()), this.addChild(this.bg), this.rightImage = new ImageComponent, this.rightImage.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.rightImageComplete), this.rightImage.updateURL("Graphics/Half/" + this.uiData.rightPic.toString()), this.addChild(this.rightImage), !GloableData.getInstance().isORGnew) {
					this.flowerDescText = utils.getOText(), this.flowerDescText.font = this.uiData.flowerCountFont, this.flowerDescText.fontSize = this.uiData.flowerCountFontSize, this.flowerDescText.text = "剩余鲜花：", this.flowerDescText.x = this.uiData.flowerCountTextPos.x, this.flowerDescText.y = this.uiData.flowerCountTextPos.y, this.addChild(this.flowerDescText), this.flowerIcon = new ImageComponent("Graphics/UI/" + GloableData.getInstance().gameMallBin.flowerPic.toString()), this.flowerIcon.x = this.uiData.flowerPicPos.x, this.flowerIcon.y = this.uiData.flowerPicPos.y, this.addChild(this.flowerIcon), this.flowerText = utils.getOText(), this.flowerText.text = GloableData.getInstance().flowerMallHua + " 朵", this.flowerText.font = this.uiData.flowerCountFont, this.flowerText.fontSize = this.uiData.flowerCountFontSize, this.flowerText.x = this.uiData.flowerCountPos.x, this.flowerText.y = this.uiData.flowerCountPos.y, this.addChild(this.flowerText);
					var e = GloableData.getInstance().gameMainData.System.Buttons[this.uiData.payBtn.index];
					this.payBtn = new ORGButton("Graphics/Button/" + e.image1, "Graphics/Button/" + e.image2, GameEventConstant.MALL_PAY_BUTTON), this.payBtn.postion = null, this.payBtn.x = this.uiData.payBtn.x, this.payBtn.y = this.uiData.payBtn.y, this.addChild(this.payBtn);
					var i = GloableData.getInstance().gameMainData.System.Buttons[this.uiData.rewardAuthorBtn.index];
					this.rewardAuthorBtn = new ORGButton("Graphics/Button/" + i.image1.toString(), "Graphics/Button/" + i.image2.toString(), GameEventConstant.MALL_REWARD_BUTTON), this.rewardAuthorBtn.postion = null, this.rewardAuthorBtn.x = this.uiData.rewardAuthorBtn.x, this.rewardAuthorBtn.y = this.uiData.rewardAuthorBtn.y, this.addChild(this.rewardAuthorBtn)
				}
				for (var a = 0; a < this.uiData.itemNumber; a++) {
					var n = this.uiData.items[a],
						s = new t.GameMallItem(n);
					this.addChild(s), this.mallItems.push(s)
				}
				var o = GloableData.getInstance().gameMainData.System.Buttons[this.uiData.closeBtn.index];
				if (this.closeBtn = new ORGButton("Graphics/Button/" + o.image1.toString(), "Graphics/Button/" + o.image2.toString(), GameEventConstant.MALL_CLOSE_VIEW), this.closeBtn.postion = null, this.closeBtn.x = this.uiData.closeBtn.x, this.closeBtn.y = this.uiData.closeBtn.y, this.addChild(this.closeBtn), GloableData.getInstance().isFreeLimit || GloableData.getInstance().isLightVIP || GloableData.getInstance().isLightDay) {
					var r = new t.GameFreeTip;
					this.addChild(r)
				}
				AppFacade.getInstance().registerMediator(new t.GameMallMediator(this))
			}, i.prototype.rightImageComplete = function() {
				this.rightImage.x = GloableData.getInstance().gameInfo.gGameWidth - this.rightImage.width, this.rightImage.y = GloableData.getInstance().gameInfo.gGameHeight - this.rightImage.height
			}, i.prototype.dispose = function() {
				for (var t = 0; t < this.mallItems.length; t++) {
					var i = this.mallItems[t];
					i.dispose()
				}
				this.bg && this.bg.dispose(), this.rightImage && this.rightImage.dispose(), this.payBtn && this.payBtn.dispose(), this.rewardAuthorBtn && this.rewardAuthorBtn.dispose(), this.closeBtn && this.closeBtn.dispose();
				var a = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
				clearTimeout(a.timeKey), EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), e.prototype.dispose.call(this), this.removeAllChild()
			}, i
		}(BaseUI);
	t.GameMallUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), HPLockErrorMessageView = function(t) {
	function e(e, i, a) {
		void 0 === a && (a = null);
		var n = t.call(this) || this;
		return n.textMsg = "建议存档后检查网络并重试", n.titleMsg = "网络异常", n.loadComplete = !1, n.loadError = !1, n.hpLockEvent = e, n.type = i, n.type == GloableStaticData.REP_MALL_DATA && (n.textMsg = "请检查或打开网络后重试"), n.eventLine = a ? a : e ? e.mainLine : null, n.ver = "?v=" + playerVer, GloableData.getInstance().gameInfo.isPc && (n.ver = ""), n.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), n.postionObj = {
			round: 22.5,
			bg: {
				w: 480,
				h: 320
			},
			textp: {
				w: 220,
				h: 50,
				x: .5,
				y: 22
			},
			closeBtn: {
				x: 42,
				y: 24
			},
			btn_1: {
				x: 39,
				y: 27,
				w: 186,
				h: 45
			},
			btn_2: {
				x: 216,
				y: 0,
				w: 186,
				h: 45
			},
			btn_3: {
				x: 318,
				y: 0,
				w: 138,
				h: 45
			},
			icon: {
				x: .5,
				y: 44,
				w: 80,
				h: 80
			}
		}, ORG.loader.once(OEvent.ERROR, n, n.loadPicError), ORG.loader.load([GloableData.getInstance().serverPath + "res/hpLock/error.png" + n.ver], OHandler.create(n, n.init, ["v"]), null, OLoader.IMAGE), n
	}
	return __extends(e, t), e.prototype.loadPicError = function(t) {
		this.loadError = !0
	}, e.prototype.init = function() {
		this.viewSp = new OSprite, this.back = new OSprite, this.back.alpha = .5, this.back.graphics.drawRect(0, 0, GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight, "#000000"), this.addChild(this.back), this.bg = ORGGraphics.getInstance().getRound(this.postionObj.bg.w, this.postionObj.bg.h, 6, {
			fillStyle: "#ffffff"
		}), this.bg.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.bg.w >> 1, this.bg.y = GloableData.getInstance().gameInfo.gGameHeight - this.postionObj.bg.h >> 1, this.addChild(this.bg);
		var t = 18;
		if (this.icon = new OImage, this.icon.size(this.postionObj.icon.w, this.postionObj.icon.h), this.icon.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.icon.w >> 1, this.icon.y = this.bg.y + this.postionObj.icon.y, this.addChild(this.icon), this.addChild(this.viewSp), this.itemTextTitle = new OText, this.itemTextTitle.leading = 6, this.itemTextTitle.fontSize = 24, this.itemTextTitle.align = "center", this.itemTextTitle.bold = !0, this.itemTextTitle.width = this.bg.width, this.itemTextTitle.color = "#2E2F31", this.itemTextTitle.text = this.titleMsg, this.itemTextTitle.x = GloableData.getInstance().gameInfo.gGameWidth - this.itemTextTitle.width >> 1, this.itemTextTitle.y = 0, this.viewSp.addChild(this.itemTextTitle), this.itemText = new OText, this.itemText.leading = 6, this.itemText.fontSize = t, this.itemText.align = "center", this.itemText.width = this.bg.width, this.itemText.color = "#2E2F31", this.itemText.text = this.textMsg, this.itemText.x = GloableData.getInstance().gameInfo.gGameWidth - this.itemText.width >> 1, this.itemText.y = this.itemTextTitle.y + this.itemTextTitle.textHeight + 14, this.viewSp.addChild(this.itemText), this.closeBtn = ORGGraphics.getInstance().getClose(2), this.closeBtn.x = this.bg.x + this.bg.width - this.postionObj.closeBtn.x, this.closeBtn.y = this.bg.y + this.postionObj.closeBtn.y, this.addChild(this.closeBtn), this.closeBtn.mouseEnabled = !0, this.closeBtn.size(21, 21), this.type == GloableStaticData.REP_MALL_DATA) {
			var e = this.getButton("#ff6600", "#ea6005", "#FFFFFF", "重试", 18);
			this.button_2 = new OButton([e.bg_1, e.bg_2]), this.button_2.size(this.postionObj.btn_2.w, this.postionObj.btn_2.h), this.button_2.setTitle(e.text), this.button_2.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.btn_2.w >> 1, this.button_2.y = this.itemText.y + this.itemText.textHeight + this.postionObj.btn_1.y + this.postionObj.btn_2.y + (this.loadError ? this.postionObj.btn_1.y : 0), this.viewSp.addChild(this.button_2), EventManager.addEventListener(this.button_2, OEvent.CLICK, this.continueView, this)
		} else if (this.type == GloableStaticData.BUY_ITEM_ERROR) {
			var e = this.getButton("#ff6600", "#ea6005", "#FFFFFF", "好的", 18);
			this.button_2 = new OButton([e.bg_1, e.bg_2]), this.button_2.size(this.postionObj.btn_2.w, this.postionObj.btn_2.h), this.button_2.setTitle(e.text), this.button_2.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.btn_2.w >> 1, this.button_2.y = this.itemText.y + this.itemText.textHeight + this.postionObj.btn_1.y + this.postionObj.btn_2.y + (this.loadError ? this.postionObj.btn_1.y : 0), this.viewSp.addChild(this.button_2), EventManager.addEventListener(this.button_2, OEvent.CLICK, this.continueView, this)
		} else if (this.type !== GloableStaticData.REP_MALL_DATA) {
			var i = this.getButton("#ffac28", "#ea9f29", "#FFFFFF", "存档", 18);
			this.button_1 = new OButton([i.bg_1, i.bg_2]), this.button_1.size(this.postionObj.btn_1.w, this.postionObj.btn_1.h), this.button_1.setTitle(i.text), this.button_1.x = this.bg.x + this.postionObj.btn_1.x, this.button_1.y = this.itemText.y + this.itemText.textHeight + this.postionObj.btn_1.y + (this.loadError ? this.postionObj.btn_1.y : 0);
			var e = this.getButton("#ff6600", "#ea6005", "#FFFFFF", "重试", 18);
			this.button_2 = new OButton([e.bg_1, e.bg_2]), this.button_2.size(this.postionObj.btn_2.w, this.postionObj.btn_2.h), this.button_2.setTitle(e.text), this.button_2.x = this.button_1.x + this.postionObj.btn_2.x, this.button_2.y = this.button_1.y + this.postionObj.btn_2.y, this.viewSp.addChild(this.button_1), this.viewSp.addChild(this.button_2), EventManager.addEventListener(this.button_1, OEvent.CLICK, this.openSaveFile, this), EventManager.addEventListener(this.button_2, OEvent.CLICK, this.continueView, this)
		}
		EventManager.addEventListener(this.closeBtn, OEvent.CLICK, this.closeView, this), GloableData.getInstance().isScreenHorizontal() ? this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/error.png" + this.ver : this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/error.png" + this.ver, this.loadError ? this.viewSp.y = this.bg.y + (this.bg.height - this.getViewSpHeight() >> 1) : this.viewSp.y = this.icon.y + this.postionObj.icon.h + this.postionObj.textp.y
	}, e.prototype.getViewSpHeight = function() {
		return this.button_2.y + this.postionObj.btn_2.h
	}, e.prototype.getButton = function(t, e, i, a, n) {
		var s = ORGGraphics.getInstance().getRound(this.postionObj.btn_1.w, this.postionObj.btn_1.h, this.postionObj.round, {
			fillStyle: t
		}),
			o = ORGGraphics.getInstance().getRound(this.postionObj.btn_1.w, this.postionObj.btn_1.h, this.postionObj.round, {
				fillStyle: e
			}),
			r = new OText;
		return r.text = a, r.fontSize = n, r.color = i, r.align = "center", {
			bg_1: s,
			bg_2: o,
			text: r
		}
	}, e.prototype.dispose = function() {
		t.prototype.dispose.call(this), this.type !== GloableStaticData.REP_MALL_DATA ? (EventManager.removeEventListener(this.button_1, OEvent.CLICK, this.openSaveFile, this), EventManager.removeEventListener(this.button_2, OEvent.CLICK, this.continueView, this), EventManager.removeEventListener(this.closeBtn, OEvent.CLICK, this.closeView, this)) : (EventManager.removeEventListener(this.button_2, OEvent.CLICK, this.continueView, this), EventManager.removeEventListener(this.closeBtn, OEvent.CLICK, this.closeView, this)), this.removeAllChild(), this.parent && this.parent.removeChild(this)
	}, e.prototype.closeView = function(t) {
		t.stopPropagation(), UIManager.getInstance().closeView("HPLockErrorMessageView", !1), this.type == GloableStaticData.REP_MALL_DATA ? UIManager.getInstance().closeView(view.GameMallMediator.NAME, !0) : this.eventLine && this.eventLine.gameOver()
	}, e.prototype.openSaveFile = function(t) {
		t.stopPropagation();
		var e = new view.SaveFileUI(!1, !0);
		e.eventLine = this.eventLine, UIManager.getInstance().showView(e, view.SaveFileUIMediator.NAME), UIManager.getInstance().closeView("HPLockErrorMessageView", !1)
	}, e.prototype.continueView = function(t) {
		if (t.stopPropagation(), this.type == GloableStaticData.REP_GET_HP) HPLockProxy.getInstance().getUserHp(this.hpLockEvent.rcvTotalHPShowView.bind(this.hpLockEvent), this.hpLockEvent);
		else if (this.type == GloableStaticData.REP_USE_HP) {
			var e = {
				lock_id: this.hpLockEvent.lock_id,
				token: OrgWeb.getInstance().getABoxToken()
			},
				i = HttpURL.Ajax_Url.GET_SYS_TIME;
			AjaxManager.getInstance().sendGetAjaxJSONP(i, this.hpLockEvent.HPLckSYStimeSuc, this.hpLockEvent, this.hpLockEvent.HPLckSYStimeErr, this.hpLockEvent, e)
		} else if (this.type == GloableStaticData.REP_MALL_DATA && UIManager.getInstance().hasVeiw(view.GameMallMediator.NAME)) {
			UIManager.getInstance().closeView(view.GameMallMediator.NAME, !1);
			var a = new view.GameMallUI;
			UIManager.getInstance().showView(a, view.GameMallMediator.NAME)
		}
		UIManager.getInstance().closeView("HPLockErrorMessageView", !1)
	}, e
}(BaseUI), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), HPLockMessageView = function(t) {
	function e(e, i, a, n) {
		void 0 === n && (n = null);
		var s = t.call(this) || this;
		return s.Hp = e, s.eventLine = n, s.callback = a, s.ver = "?v" + playerVer, GloableData.getInstance().gameInfo.isPc && (s.ver = ""), s.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), GloableData.getInstance().isScreenHorizontal() ? (s.postionObj = {
			round: 22.5,
			bg: {
				w: 540,
				h: 320
			},
			textp: {
				w: 220,
				h: 50,
				x: .5,
				y: 18
			},
			closeBtn: {
				x: 42,
				y: 24
			},
			btn_1: {
				x: 69,
				y: 27,
				w: 186,
				h: 45
			},
			btn_2: {
				x: 216,
				y: 0,
				w: 186,
				h: 45
			},
			btn_3: {
				x: 318,
				y: 0,
				w: 138,
				h: 45
			},
			icon: {
				x: .5,
				y: 42,
				w: 120,
				h: 120
			}
		}, s.textMsg = "继续剧情需要消耗 " + s.Hp + " 点体力。\n您有 " + i + " 点体力值。是否继续？") : (s.postionObj = {
			round: 22.5,
			bg: {
				w: 320,
				h: 540
			},
			textp: {
				w: 220,
				h: 50,
				x: 70,
				y: 18
			},
			closeBtn: {
				x: 42,
				y: 24
			},
			btn_1: {
				x: 49,
				y: 42,
				w: 222,
				h: 45
			},
			btn_2: {
				x: 0,
				y: 63,
				w: 222,
				h: 45
			},
			btn_3: {
				x: 0,
				y: 126,
				w: 222,
				h: 45
			},
			icon: {
				x: .5,
				y: 84,
				w: 120,
				h: 120
			}
		}, s.textMsg = "继续剧情需要消耗 " + s.Hp + " 点体力。\n您有 " + i + " 点体力值。是否继续？"), GloableData.getInstance().isScreenHorizontal() ? ORG.loader.load([GloableData.getInstance().serverPath + "res/hpLock/s_hpbg.png" + s.ver, GloableData.getInstance().serverPath + "res/hpLock/s_hlock_icon.png" + s.ver, GloableData.getInstance().serverPath + "res/hpLock/close.png" + s.ver], OHandler.create(s, s.init, ["v"]), null, OLoader.IMAGE) : ORG.loader.load([GloableData.getInstance().serverPath + "res/hpLock/h_hpbg.png" + s.ver, GloableData.getInstance().serverPath + "res/hpLock/h_hlock_icon.png" + s.ver, GloableData.getInstance().serverPath + "res/hpLock/close.png" + s.ver], OHandler.create(s, s.init, ["h"]), null, OLoader.IMAGE), s
	}
	return __extends(e, t), e.prototype.init = function() {
		this.back = new OSprite, this.back.alpha = .5, this.back.graphics.drawRect(0, 0, GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight, "#000000"), this.addChild(this.back), this.bg = new OImage, GloableData.getInstance().isScreenHorizontal() ? this.bg.skin = GloableData.getInstance().serverPath + "res/hpLock/h_hpbg.png" + this.ver : this.bg.skin = GloableData.getInstance().serverPath + "res/hpLock/s_hpbg.png" + this.ver, this.bg.width = this.postionObj.bg.w, this.bg.height = this.postionObj.bg.h, this.bg.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.bg.w >> 1, this.bg.y = GloableData.getInstance().gameInfo.gGameHeight - this.postionObj.bg.h >> 1, this.addChild(this.bg);
		var t = 18;
		this.icon = new OImage, GloableData.getInstance().isScreenHorizontal() ? this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/h_hlock_icon.png" + this.ver : (this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/s_hlock_icon.png" + this.ver, t = 18), this.icon.size(this.postionObj.icon.w, this.postionObj.icon.h), this.icon.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.icon.w >> 1, this.icon.y = this.bg.y + this.postionObj.icon.y, this.addChild(this.icon), this.itemText = new OText, this.itemText.leading = 6, this.itemText.fontSize = t, this.itemText.align = "center", this.itemText.width = this.bg.width, this.itemText.color = "#2E2F31", this.itemText.text = this.textMsg, this.itemText.x = GloableData.getInstance().gameInfo.gGameWidth - this.itemText.width >> 1, this.itemText.y = this.icon.y + this.postionObj.icon.h + this.postionObj.textp.y, this.addChild(this.itemText), this.closeBtn = new OImage, this.closeBtn.skin = GloableData.getInstance().serverPath + "res/hpLock/close.png", this.closeBtn.x = this.bg.x + this.bg.width - this.postionObj.closeBtn.x, this.closeBtn.y = this.bg.y + this.postionObj.closeBtn.y, this.addChild(this.closeBtn), this.closeBtn.mouseEnabled = !0, this.closeBtn.size(15, 15);
		var e = this.getButton("#ffac28", "#ea9f29", "#FFFFFF", "存档", 18);
		this.button_1 = new OButton([e.bg_1, e.bg_2]), this.button_1.size(this.postionObj.btn_1.w, this.postionObj.btn_1.h), this.button_1.setTitle(e.text), this.button_1.x = this.bg.x + this.postionObj.btn_1.x, this.button_1.y = this.itemText.y + this.itemText.textHeight + this.postionObj.btn_1.y;
		var i = this.getButton("#ff6600", "#ea6005", "#FFFFFF", "继续", 18);
		this.button_2 = new OButton([i.bg_1, i.bg_2]), this.button_2.size(this.postionObj.btn_2.w, this.postionObj.btn_2.h), this.button_2.setTitle(i.text), this.button_2.x = this.button_1.x + this.postionObj.btn_2.x, this.button_2.y = this.button_1.y + this.postionObj.btn_2.y, this.addChild(this.button_1), this.addChild(this.button_2), EventManager.addEventListener(this.button_1, OEvent.CLICK, this.openSaveFile, this), EventManager.addEventListener(this.button_2, OEvent.CLICK, this.continueView, this), EventManager.addEventListener(this.closeBtn, OEvent.CLICK, this.closeView, this)
	}, e.prototype.getButton = function(t, e, i, a, n) {
		var s = ORGGraphics.getInstance().getRound(this.postionObj.btn_1.w, this.postionObj.btn_1.h, this.postionObj.round, {
			fillStyle: t
		}),
			o = ORGGraphics.getInstance().getRound(this.postionObj.btn_1.w, this.postionObj.btn_1.h, this.postionObj.round, {
				fillStyle: e
			}),
			r = new OText;
		return r.text = a, r.fontSize = n, r.color = i, r.align = "center", {
			bg_1: s,
			bg_2: o,
			text: r
		}
	}, e.prototype.dispose = function() {
		t.prototype.dispose.call(this), EventManager.removeEventListener(this.button_1, OEvent.CLICK, this.openSaveFile, this), EventManager.removeEventListener(this.button_2, OEvent.CLICK, this.continueView, this), EventManager.removeEventListener(this.closeBtn, OEvent.CLICK, this.closeView, this), this.removeAllChild(), this.parent && this.parent.removeChild(this)
	}, e.prototype.closeView = function(t) {
		t.stopPropagation(), UIManager.getInstance().closeView("HPLockMessageView", !1), this.eventLine && this.eventLine.gameOver()
	}, e.prototype.openSaveFile = function(t) {
		t.stopPropagation();
		var e = new view.SaveFileUI(!1, !0);
		e.eventLine = this.eventLine, UIManager.getInstance().showView(e, view.SaveFileUIMediator.NAME), UIManager.getInstance().closeView("HPLockMessageView", !1)
	}, e.prototype.continueView = function(t) {
		t.stopPropagation(), GloableData.getInstance().gameInfo.isFirstHp = !1, this.callback && this.callback(), UIManager.getInstance().closeView("HPLockMessageView", !1)
	}, e
}(BaseUI), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), HPLockTip = function(t) {
	function e(e, i) {
		void 0 === i && (i = !1);
		var a = t.call(this) || this;
		return a.tips = "遇到体力锁，消耗体力XX点", a.endScaleX = 1, a.endScaleY = 1, a.isCollect = i, a.tips = e, ORG.loader.load(GloableData.getInstance().serverPath + "res/hpLock/msg_tip_bg.png", OHandler.create(a, a.init), null, OLoader.IMAGE), a
	}
	return __extends(e, t), e.prototype.init = function(t) {
		if (this.bg = new OImage, this.bg.source = ORG.loader.getRes(GloableData.getInstance().serverPath + "res/hpLock/msg_tip_bg.png"), this.bg.anchorX = .5, this.bg.pivotY = 21, this.addChild(this.bg), this.tipText = new OText, this.tipText.width = this.bg.width, this.isCollect) {
			var e = Math.floor(this.bg.width / 3),
				i = Math.floor(this.bg.height / 2) - 1;
			this.bg.setGrid(i + "," + e + "," + i + "," + e + ",0"), 1280 !== GloableData.getInstance().gameInfo.gGameWidth ? this.bg.width = 370 : this.bg.height = 500
		}
		this.tipText.fontSize = 18, this.tipText.color = "#FFFFFF", this.tipText.align = "center", this.tipText.valign = "middle", this.tipText.text = this.tips, this.tipText.y = -3, this.tipText.x = -this.tipText.width >> 1, this.addChild(this.tipText), this.scale(.1, .1), 1280 !== GloableData.getInstance().gameInfo.gGameWidth && (this.endScaleX = .75, this.endScaleY = .75), this.x = GloableData.getInstance().gameInfo.gGameWidth >> 1, this.y = 40, this.tipTween()
	}, e.prototype.tipTween = function() {
		var t = this;
		this.tween && (this.tween.recover(), this.tween = null), this.tween = new OTween, this.tween.to(this, {
			scaleX: this.endScaleX,
			scaleY: this.endScaleY
		}, 500, Laya.Ease.backOut, OHandler.create(this, function() {
			setTimeout(function() {
				t.tween.recover(), t.tween = null, t.dispose()
			}, 500)
		}, null, !0))
	}, e.prototype.dispose = function() {
		this.removeChildren(), this.parent && this.parent.removeChild(this)
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), HPLockView = function(t) {
	function e(e) {
		void 0 === e && (e = null);
		var i = t.call(this) || this;
		return i.warmString = {
			hint1: "购买XX可以解锁体力锁哦~",
			hint2: "每天8点，20点都可以恢复体力哦~",
			hint3: "体力不足！"
		}, i.eventLine = e, GloableData.getInstance().isScreenHorizontal() ? i.postionObj = {
			round: 23,
			bg: {
				w: 540,
				h: 320
			},
			textp: {
				w: 220,
				h: 50,
				x: .5,
				y: 18
			},
			closeBtn: {
				x: 42,
				y: 24
			},
			btn_1: {
				x: 69,
				y: 27,
				w: 186,
				h: 46
			},
			btn_2: {
				x: 216,
				y: 0,
				w: 186,
				h: 46
			},
			icon: {
				x: .5,
				y: 42,
				w: 120,
				h: 120
			}
		} : i.postionObj = {
			round: 22.5,
			bg: {
				w: 320,
				h: 540
			},
			textp: {
				w: 220,
				h: 50,
				x: 70,
				y: 18
			},
			closeBtn: {
				x: 42,
				y: 24
			},
			btn_1: {
				x: 49,
				y: 45,
				w: 222,
				h: 45
			},
			btn_2: {
				x: 0,
				y: 63,
				w: 222,
				h: 45
			},
			icon: {
				x: .5,
				y: 84,
				w: 120,
				h: 120
			}
		}, i.ver = "?v" + playerVer, GloableData.getInstance().gameInfo.isPc && (i.ver = ""), GloableData.getInstance().gameMainData.Headr.GWidth <= GloableData.getInstance().gameMainData.Headr.GHeight && ORG.loader.load([GloableData.getInstance().serverPath + "res/hpLock/s_hpbg.png" + i.ver, GloableData.getInstance().serverPath + "res/hpLock/s_hlock_icon.png" + i.ver, GloableData.getInstance().serverPath + "res/hpLock/close.png" + i.ver], OHandler.create(i, i.init), null, OLoader.IMAGE), GloableData.getInstance().gameMainData.Headr.GWidth >= GloableData.getInstance().gameMainData.Headr.GHeight && ORG.loader.load([GloableData.getInstance().serverPath + "res/hpLock/h_hpbg.png" + i.ver, GloableData.getInstance().serverPath + "res/hpLock/h_hlock_icon.png" + i.ver, GloableData.getInstance().serverPath + "res/hpLock/close.png" + i.ver], OHandler.create(i, i.init), null, OLoader.IMAGE), i
	}
	return __extends(e, t), e.prototype.init = function(t) {
		this.drawView(), EventManager.addEventListener(this.closeBtn, OEvent.CLICK, this.backTitleView, this), EventManager.addEventListener(this.saveBtn, OEvent.CLICK, this.openSaveFile, this), EventManager.addEventListener(this.shopBtn, OEvent.CLICK, this.openMallView, this)
	}, e.prototype.dispose = function() {
		EventManager.removeEventListener(this.closeBtn, OEvent.CLICK, this.backTitleView, this), EventManager.removeEventListener(this.saveBtn, OEvent.CLICK, this.openSaveFile, this), EventManager.removeEventListener(this.shopBtn, OEvent.CLICK, this.openMallView, this)
	}, e.prototype.backTitleView = function(t) {
		t.stopPropagation(), UIManager.getInstance().closeView("HPLockView", !1), this.eventLine && this.eventLine.gameOver()
	}, e.prototype.openSaveFile = function(t) {
		t.stopPropagation();
		var e = new view.SaveFileUI(!1, !0);
		UIManager.getInstance().showView(e, view.SaveFileUIMediator.NAME)
	}, e.prototype.openMallView = function(t) {
		t.stopPropagation();
		var e = new view.GameMallUI;
		UIManager.getInstance().showView(e, view.GameMallMediator.NAME), UIManager.getInstance().showView(e, view.GameMallMediator.NAME), UIManager.getInstance().closeView("HPLockView", !1)
	}, e.prototype.drawView = function() {
		this.back = new OSprite, this.back.alpha = .5, this.back.graphics.drawRect(0, 0, GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight, "#000000"), this.addChild(this.back), this.bg = new OImage, GloableData.getInstance().gameMainData.Headr.GWidth >= GloableData.getInstance().gameMainData.Headr.GHeight ? this.bg.skin = GloableData.getInstance().serverPath + "res/hpLock/h_hpbg.png" + this.ver : this.bg.skin = GloableData.getInstance().serverPath + "res/hpLock/s_hpbg.png" + this.ver, this.bg.width = this.postionObj.bg.w, this.bg.height = this.postionObj.bg.h, this.bg.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.bg.w >> 1, this.bg.y = GloableData.getInstance().gameInfo.gGameHeight - this.postionObj.bg.h >> 1, this.addChild(this.bg), this.icon = new OImage, GloableData.getInstance().isScreenHorizontal() ? this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/h_hlock_icon.png" + this.ver : this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/s_hlock_icon.png" + this.ver, this.icon.size(this.postionObj.icon.w, this.postionObj.icon.h), this.icon.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.icon.w >> 1, this.icon.y = this.bg.y + this.postionObj.icon.y, this.addChild(this.icon), this.closeBtn = new OImage, this.closeBtn.skin = GloableData.getInstance().serverPath + "res/hpLock/close.png" + this.ver, this.closeBtn.x = this.bg.x + this.bg.width - this.postionObj.closeBtn.x, this.closeBtn.y = this.bg.y + this.postionObj.closeBtn.y, this.addChild(this.closeBtn), this.closeBtn.mouseEnabled = !0, this.closeBtn.size(15, 15);
		var t = 18,
			e = GloableData.getInstance().getMallHpItem();
		GloableData.getInstance().hasFileItem("data/mall.bin") && e ? (this.warmString.hint1 = this.warmString.hint1.replace("XX", e.itemName), GloableData.getInstance().gameMainData.Headr.GWidth >= GloableData.getInstance().gameMainData.Headr.GHeight ? this.textMsg = this.warmString.hint3 + this.warmString.hint1 : (this.textMsg = this.warmString.hint3 + "\n" + this.warmString.hint1, t = 18)) : GloableData.getInstance().gameMainData.Headr.GWidth >= GloableData.getInstance().gameMainData.Headr.GHeight ? this.textMsg = this.warmString.hint3 + this.warmString.hint2 : (this.textMsg = this.warmString.hint3 + "\n" + this.warmString.hint2, t = 18), this.itemText = new OText, this.itemText.fontSize = t, this.itemText.leading = 6, this.itemText.align = "center", this.itemText.width = this.bg.width, this.itemText.color = "#2E2F31", this.itemText.text = this.textMsg, this.itemText.x = GloableData.getInstance().gameInfo.gGameWidth - this.itemText.width >> 1, this.itemText.y = this.icon.y + this.postionObj.icon.h + this.postionObj.textp.y, this.addChild(this.itemText);
		var i = this.getButton("#ffac28", "#ea9f29", "#FFFFFF", "存档", 18);
		this.saveBtn = new OButton([i.bg_1, i.bg_2]), this.saveBtn.size(this.postionObj.btn_1.w, this.postionObj.btn_1.h), this.saveBtn.setTitle(i.text), this.saveBtn.x = this.bg.x + this.postionObj.btn_1.x, this.saveBtn.y = this.itemText.y + this.itemText.textHeight + this.postionObj.btn_1.y, this.addChild(this.saveBtn);
		var a = this.getButton("#ff6600", "#ea6005", "#FFFFFF", "前往商城", 18);
		this.shopBtn = new OButton([a.bg_1, a.bg_2]), this.shopBtn.size(this.postionObj.btn_2.w, this.postionObj.btn_2.h), this.shopBtn.setTitle(a.text), this.shopBtn.x = this.saveBtn.x + this.postionObj.btn_2.x, this.shopBtn.y = this.saveBtn.y + this.postionObj.btn_2.y, this.addChild(this.shopBtn), GloableData.getInstance().hasFileItem("data/mall.bin") && e || (this.shopBtn.visible = !1, this.saveBtn.x = this.bg.x + (this.postionObj.bg.w - this.postionObj.btn_1.w >> 1))
	}, e.prototype.getButton = function(t, e, i, a, n) {
		var s = ORGGraphics.getInstance().getRound(this.postionObj.btn_1.w, this.postionObj.btn_1.h, this.postionObj.round, {
			fillStyle: t
		}),
			o = ORGGraphics.getInstance().getRound(this.postionObj.btn_1.w, this.postionObj.btn_1.h, this.postionObj.round, {
				fillStyle: e
			}),
			r = new OText;
		return r.text = a, r.fontSize = n, r.color = i, r.align = "center", {
			bg_1: s,
			bg_2: o,
			text: r
		}
	}, e
}(BaseUI), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), AssEnum;
!
function(t) {
	t[t.bg = 0] = "bg", t[t.pbg = 1] = "pbg", t[t.ph = 2] = "ph", t[t.pf = 3] = "pf"
}(AssEnum || (AssEnum = {}));
var view;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e._progress = 0, e.loadAss(), EventCenter.addEventListener(GameEventConstant.LOADING_BAR_PROGRESS, e, e.setProgress), EventCenter.addEventListener(GameEventConstant.LOADING_BAR_GB_COMPLETE, e, e.setComplete), e
			}
			return __extends(e, t), e.prototype.loadAss = function() {
				this.sw = GloableData.getInstance().gameInfo.gGameWidth, this.sh = GloableData.getInstance().gameInfo.gGameHeight;
				var t = (this.sw > this.sh ? "h_" : "v_") + (this.sw > this.sh ? this.sw : this.sh),
					e = (GloableData.getInstance().serverPath || "") + ("res/loading/" + t);
				this.urlArr = [e + "/bg.jpg", e + "/pbg.png", e + "/ph.png", e + "/pf.png"], Laya.loader.load(this.urlArr, OHandler.create(this, this.completeHandler), null, OLoader.IMAGE, 0, !0, "loadingBar", !1)
			}, e.prototype.completeHandler = function(t) {
				return (this.assComp = t) ? (this.addChild(this.bg = (new OSprite).loadImage(this.urlArr[AssEnum.bg])), this.addChild(this.pbg = (new OSprite).loadImage(this.urlArr[AssEnum.pbg])), this.addChild(this.pf = (new OSprite).loadImage(this.urlArr[AssEnum.pf])), this.addChild(this.ph = (new OSprite).loadImage(this.urlArr[AssEnum.ph])), this.bg.scaleX = this.bg.scaleY = 800 == this.sw ? 1.2 : 1, this.bg.x = (this.sw - this.bg.width * this.bg.scaleX) / 2, this.pbg.x = this.sw - this.pbg.width >> 1, this.pf.x = this.pbg.x + (this.pbg.width - this.pf.width >> 1), this.ph.x = this.pf.x + this.pf.width - this.ph.width, this.pbg.y = this.sw > this.sh ? this.sw <= 960 ? 450 : 600 : this.sh <= 960 ? 798 : 840, this.pf.y = this.pbg.y + (this.pbg.height - this.pf.height >> 1), this.ph.y = this.pf.y + (this.pf.height - this.ph.height >> 1), this.addChild(this.tf = new OText), this.tf.x = this.sw - this.tf.width >> 1, this.tf.y = this.sw > this.sh ? this.sw <= 960 ? 482 : 900 : this.sh <= 960 ? 830 : 852, this.tf.color = "#D0D0D0", this.tf.fontSize = OrgWeb.getInstance().getIsPC() ? 12 : 16, this.pf.mask = new OSprite, this.pf.mask.graphics.drawRect(0, 0, this.pf.width, this.pf.height, "#D0D0D0"), this.progress = this._progress, void(this.ready && this.setComplete())) : console.log("loadingBar assets error")
			}, e.prototype.setComplete = function() {
				this.assComp ? (
					this.pbg.visible = this.pf.visible = this.ph.visible = !1, this.tf.y = this.pbg.y, 
					this.tf.text = "点击任意位置进入", 
					this.tf.fontSize = OrgWeb.getInstance().getIsPC() ? 16 : 20, 
					this.tf.x = this.sw - this.tf.width >> 1, 
					this.mouseEnabled = !0, !ADUI.getInstance().isVip ? this.intoGame() : Laya.stage.on(laya.events.Event.CLICK, this, this.intoGame)
				) : this.ready = !0
			}, e.prototype.setProgress = function(t, e) {
				this._progress = e + t, this.assComp && (this.progress = this._progress)
			}, e.prototype.intoGame = function(t) {
				void 0 === t && (t = null), t && ADUI.getInstance().adLoading || 
				t && "adView" == t.target.name && "" != ADUI.getInstance().adurl || 
				(this.dispose(), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOADING_BAR_COMPLETE)))
			}, e.prototype.dispose = function() {
				this.removeChildren(), Laya.stage.off(laya.events.Event.CLICK, this, this.intoGame), EventCenter.removeEventListener(GameEventConstant.LOADING_BAR_PROGRESS, this, this.setProgress), EventCenter.removeEventListener(GameEventConstant.LOADING_BAR_GB_COMPLETE, this, this.setProgress), Laya.loader.clearResByGroup("loadingBar")
			}, Object.defineProperty(e.prototype, "progress", {
				set: function(t) {
					t > 1 && (t = 1), this.tf.text = parseInt((100 * t).toString()) + "%", this.pf.mask.x = t * this.pf.width - this.pf.width, this.ph.alpha = .06 > t || t > .98 ? 0 : 1, this.ph.x = this.pf.x + this.pf.width * t - this.ph.width + (t > .96 ? 4 : 14), this.tf.x = this.sw - this.tf.width >> 1
				},
				enumerable: !0,
				configurable: !0
			}), e
		}(OSprite);
	t.LoadingBar = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), MallLockView = function(t) {
	function e(e, i) {
		void 0 === i && (i = null);
		var a = t.call(this) || this;
		return a.itemId = e, a.eventLine = i, a.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), GloableData.getInstance().isScreenHorizontal() ? (a.postionObj = {
			round: 23,
			bg: {
				w: 540,
				h: 320
			},
			textp: {
				w: 220,
				h: 50,
				x: .5,
				y: 18
			},
			closeBtn: {
				x: 42,
				y: 24
			},
			btn_1: {
				x: 69,
				y: 27,
				w: 186,
				h: 46
			},
			btn_2: {
				x: 216,
				y: 0,
				w: 186,
				h: 46
			},
			icon: {
				x: .5,
				y: 42,
				w: 120,
				h: 120
			}
		}, a.textMsg = "遇到剧情锁, 需要购买" + GloableData.getInstance().gameMallBin.getItemDataById(a.itemId).itemName) : (a.postionObj = {
			round: 22.5,
			bg: {
				w: 320,
				h: 540
			},
			textp: {
				w: 220,
				h: 50,
				x: 70,
				y: 18
			},
			closeBtn: {
				x: 42,
				y: 24
			},
			btn_1: {
				x: 49,
				y: 45,
				w: 222,
				h: 45
			},
			btn_2: {
				x: 0,
				y: 63,
				w: 222,
				h: 45
			},
			icon: {
				x: .5,
				y: 84,
				w: 120,
				h: 120
			}
		}, a.textMsg = "遇到剧情锁\n 需要购买" + GloableData.getInstance().gameMallBin.getItemDataById(a.itemId).itemName), a.ver = "?v" + playerVer, GloableData.getInstance().gameInfo.isPc && (a.ver = ""), GloableData.getInstance().isScreenHorizontal() ? ORG.loader.load([GloableData.getInstance().serverPath + "res/hpLock/h_hpbg.png" + a.ver, GloableData.getInstance().serverPath + "res/hpLock/h_slock_icon.png" + a.ver, GloableData.getInstance().serverPath + "res/hpLock/close.png" + a.ver], OHandler.create(a, a.init, ["h"]), null, OLoader.IMAGE) : ORG.loader.load([GloableData.getInstance().serverPath + "res/hpLock/s_hpbg.png" + a.ver, GloableData.getInstance().serverPath + "res/hpLock/s_slock_icon.png" + a.ver, GloableData.getInstance().serverPath + "res/hpLock/close.png"], OHandler.create(a, a.init, ["v"]), null, OLoader.IMAGE), a
	}
	return __extends(e, t), e.prototype.init = function() {
		this.back = new OSprite, this.back.alpha = .5, this.back.graphics.drawRect(0, 0, GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight, "#000000"), this.addChild(this.back), this.bg = new OImage, GloableData.getInstance().isScreenHorizontal() ? this.bg.skin = GloableData.getInstance().serverPath + "res/hpLock/h_hpbg.png" + this.ver : this.bg.skin = GloableData.getInstance().serverPath + "res/hpLock/s_hpbg.png" + this.ver, this.bg.width = this.postionObj.bg.w, this.bg.height = this.postionObj.bg.h, this.bg.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.bg.w >> 1, this.bg.y = GloableData.getInstance().gameInfo.gGameHeight - this.postionObj.bg.h >> 1, this.addChild(this.bg);
		var t = 18;
		this.icon = new OImage, GloableData.getInstance().isScreenHorizontal() ? this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/h_slock_icon.png" + this.ver : (this.icon.skin = GloableData.getInstance().serverPath + "res/hpLock/s_slock_icon.png" + this.ver, t = 18), this.icon.size(this.postionObj.icon.w, this.postionObj.icon.h), this.icon.x = GloableData.getInstance().gameInfo.gGameWidth - this.postionObj.icon.w >> 1, this.icon.y = this.bg.y + this.postionObj.icon.y, this.addChild(this.icon), this.itemText = new OText, this.itemText.leading = 6, this.itemText.fontSize = t, this.itemText.align = "center", this.itemText.width = this.bg.width, this.itemText.color = "#2E2F31", this.itemText.text = this.textMsg, this.itemText.x = GloableData.getInstance().gameInfo.gGameWidth - this.itemText.width >> 1, this.itemText.y = this.icon.y + this.postionObj.icon.h + this.postionObj.textp.y, this.addChild(this.itemText), this.closeBtn = new OImage, this.closeBtn.skin = GloableData.getInstance().serverPath + "res/hpLock/close.png" + this.ver, this.closeBtn.x = this.bg.x + this.bg.width - this.postionObj.closeBtn.x, this.closeBtn.y = this.bg.y + this.postionObj.closeBtn.y, this.addChild(this.closeBtn), this.closeBtn.mouseEnabled = !0, this.closeBtn.size(15, 15);
		var e = this.getButton("#ffac28", "#ea9f29", "#FFFFFF", "存档", 18);
		this.button_1 = new OButton([e.bg_1, e.bg_2]), this.button_1.size(this.postionObj.btn_1.w, this.postionObj.btn_1.h), this.button_1.setTitle(e.text), this.button_1.x = this.bg.x + this.postionObj.btn_1.x, this.button_1.y = this.itemText.y + this.itemText.textHeight + this.postionObj.btn_1.y;
		var i = this.getButton("#ff6600", "#ea6005", "#FFFFFF", "前往商城", 18);
		this.button_2 = new OButton([i.bg_1, i.bg_2]), this.button_2.size(this.postionObj.btn_2.w, this.postionObj.btn_2.h), this.button_2.setTitle(i.text), this.button_2.x = this.button_1.x + this.postionObj.btn_2.x, this.button_2.y = this.button_1.y + this.postionObj.btn_2.y, this.addChild(this.button_1), this.addChild(this.button_2), EventManager.addEventListener(this.button_1, OEvent.CLICK, this.openSaveFile, this), EventManager.addEventListener(this.button_2, OEvent.CLICK, this.openMallView, this), EventManager.addEventListener(this.closeBtn, OEvent.CLICK, this.closeView, this)
	}, e.prototype.getButton = function(t, e, i, a, n) {
		var s = ORGGraphics.getInstance().getRound(this.postionObj.btn_1.w, this.postionObj.btn_1.h, this.postionObj.round, {
			fillStyle: t
		}),
			o = ORGGraphics.getInstance().getRound(this.postionObj.btn_1.w, this.postionObj.btn_1.h, this.postionObj.round, {
				fillStyle: e
			}),
			r = new OText;
		return r.text = a, r.fontSize = n, r.color = i, r.align = "center", {
			bg_1: s,
			bg_2: o,
			text: r
		}
	}, e.prototype.dispose = function() {
		t.prototype.dispose.call(this), EventManager.removeEventListener(this.button_1, OEvent.CLICK, this.openSaveFile, this), EventManager.removeEventListener(this.button_2, OEvent.CLICK, this.openMallView, this), EventManager.removeEventListener(this.closeBtn, OEvent.CLICK, this.closeView, this), this.removeAllChild(), this.parent && this.parent.removeChild(this)
	}, e.prototype.closeView = function(t) {
		t.stopPropagation(), GloableData.getInstance().iMain.gameOver()
	}, e.prototype.openSaveFile = function(t) {
		t.stopPropagation();
		var e = new view.SaveFileUI(!1, !0);
		e.eventLine = this.eventLine, UIManager.getInstance().showView(e, view.SaveFileUIMediator.NAME), UIManager.getInstance().closeView("MallLockView", !1)
	}, e.prototype.openMallView = function(t) {
		t.stopPropagation();
		var e = new view.GameMallUI;
		e.eventLine = this.eventLine, UIManager.getInstance().showView(e, view.GameMallMediator.NAME), UIManager.getInstance().closeView("MallLockView", !1)
	}, e.prototype.buyItem = function(t) {
		t.stopPropagation();
		var e = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
		return GloableData.getInstance().gameInfo.isPc ? (e.userItem(this.itemId, 1, !0), Tips.tip("购买成功"), void UIManager.getInstance().closeView("MallLockView", !0)) : void e.sendCreateOrder(this.itemId, 1)
	}, e
}(BaseUI), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), MallResultUI = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.init(), e
	}
	return __extends(e, t), e.prototype.init = function() {
		this.msg = utils.getOText(), this.msg.fontSize = 30, this.msg.bold = !0, this.msg.text = "请稍后...", this.msg.x = GloableData.getInstance().gameInfo.gGameWidth - this.msg.width >> 1, this.msg.y = GloableData.getInstance().gameInfo.gGameHeight - this.msg.height >> 1, this.addChild(this.msg), EventManager.addEventListener(this, OEvent.CLICK, this.closeView, this)
	}, e.prototype.closeView = function(e) {
		e.stopPropagation(), this.img && this.img.dispose(), t.prototype.dispose.call(this), EventManager.removeEventListener(this, OEvent.CLICK, this.closeView, this), UIManager.getInstance().closeView("MallResultUI", !1)
	}, e.prototype.imgComplete = function() {
		this.img && (this.img.x = GloableData.getInstance().gameInfo.gGameWidth - this.img.width >> 1, this.img.y = GloableData.getInstance().gameInfo.gGameHeight - this.img.height >> 1)
	}, e.prototype.showStatus = function(t) {
		this.img && (this.img.parent && this.img.parent.removeChild(this.img), this.img.dispose()), 1 == t ? (this.img = new ImageComponent, this.img.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imgComplete), this.img.updateURL("Graphics/UI/" + GloableData.getInstance().gameMallBin.buySuccessPic), this.addChild(this.img), this.msg && (this.msg.text = "")) : (this.img = new ImageComponent, this.img.on(GameEventConstant.LOAD_IMAGE_COMPLETE, this, this.imgComplete), this.img.updateURL("Graphics/UI/" + GloableData.getInstance().gameMallBin.buyErrorPic), this.addChild(this.img), this.msg && (this.msg.text = ""))
	}, e
}(BaseUI), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ORGMenuUI = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.btnTagArr = ["collect", "agree", "flowerSend", "more", "comment", "share", "exitGame", "backGame", "Concern"], e.serverPath = "", e.isAdd = !1, e
	}
	return __extends(e, t), e.prototype.init = function() {
		UIManager.getInstance().gameSystemUILayer && UIManager.getInstance().gameSystemUILayer.setMenuInit(), this.serverPath = GloableData.getInstance().serverPath, OrgWeb.getInstance().getGameInfo(this, this.setGameInfo), this.btnArr = new Array, this.size(GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight), this.on(GameEvent.CLICK, this, this.hideUI)
	}, e.getInstance = function() {
		return null == e._instance && (e._instance = new e), e._instance
	}, e.prototype.showUI = function() {
		UIManager.getInstance().maskSprite.update("请稍后..."), this.zOrder = 10, e.showUI = !0, UIManager.getInstance().gameSystemUILayer._childs.indexOf(this) < 0 && (this.init(), this.isAdd = !1), this.isAdd ? UIManager.getInstance().maskSprite.hide() : (UIManager.getInstance().gameSystemUILayer.addChild(this), this.isAdd = !0), this.visible = !0
	}, e.prototype.hideUI = function() {
		this.visible = !1, e.showUI = !1, GloableData.getInstance().resumeCurrentLine(), UIManager.getInstance().gameSystemUILayer && UIManager.getInstance().gameSystemUILayer.setMenuInit()
	}, e.prototype.setGameInfo = function(t) {
		if (t) {
			UIManager.getInstance().maskSprite.hide(), this.gameInfo = t, this.iconPath = t.real_thumb + "!470x270";
			var e = [this.serverPath + "res/orgMenuBtn/btnAgree.png", this.serverPath + "res/orgMenuBtn/btnAgreeOk.png", this.serverPath + "res/orgMenuBtn/btnBack.png", this.serverPath + "res/orgMenuBtn/btnBack1.png", this.serverPath + "res/orgMenuBtn/btnComment.png", this.serverPath + "res/orgMenuBtn/btnComment1.png", this.serverPath + "res/orgMenuBtn/btnConcern.png", this.serverPath + "res/orgMenuBtn/btnConcern1.png", this.serverPath + "res/orgMenuBtn/btnConcernOk.png", this.serverPath + "res/orgMenuBtn/btnConcernOk1.png", this.serverPath + "res/orgMenuBtn/btnExit.png", this.serverPath + "res/orgMenuBtn/btnExit1.png", this.serverPath + "res/orgMenuBtn/btnKeep.png", this.serverPath + "res/orgMenuBtn/btnKeepOk.png", this.serverPath + "res/orgMenuBtn/btnMore.png", this.serverPath + "res/orgMenuBtn/btnSend.png", this.serverPath + "res/orgMenuBtn/btnSend1.png", this.serverPath + "res/orgMenuBtn/btnShare.png", this.serverPath + "res/orgMenuBtn/btnShare1.png", this.serverPath + "res/orgMenuBtn/scroll$bar.png", this.serverPath + "res/orgMenuBtn/btnDown.png", this.serverPath + "res/orgMenuBtn/btnDownV.png", this.serverPath + "res/orgMenuBtn/btnUp.png", this.serverPath + "res/orgMenuBtn/btnUpV.png", this.serverPath + "res/orgMenuBtn/screenFull.png", this.serverPath + "res/orgMenuBtn/screenFull1.png", this.serverPath + "res/orgMenuBtn/screenQuit.png", this.serverPath + "res/orgMenuBtn/screenQuit1.png"];
			UIResouecrLoad.loadArrRes(e, this, this.loadImageComplete, null, !1)
		}
	}, e.prototype.loadImageComplete = function() {
		GloableData.getInstance().gameMainData.Headr.GWidth <= GloableData.getInstance().gameMainData.Headr.GHeight && (this.backwidth = 384, this.backheight = 873, this.vMenu(), this.drawButton("v")), GloableData.getInstance().gameMainData.Headr.GWidth >= GloableData.getInstance().gameMainData.Headr.GHeight && (this.backwidth = 730, this.backheight = 490, this.hMenu(), this.drawButton("h")), this.back.size(this.backwidth, this.backheight), this.back.on(GameEvent.CLICK, this, function(t) {
			t.stopPropagation()
		})
	}, e.prototype.drawGameInitInfo = function(t) {
		var e = new OText;
		e.text = this.gameInfo.gname, e.bold = !0, e.width = 315, e.wordWrap = !0, e.color = "#FFFFFF", e.fontSize = 20, e.leading = 15, this.back.addChild(e);
		var i = new OText;
		i.text = this.gameInfo.author_uname, i.fontSize = 18, i.color = "#FFFFFF", this.back.addChild(i);
		var a = new OPanel;
		this.back.addChild(a);
		var n = new laya.html.dom.HTMLDivElement,
			s = 0;
		s = "v" == t ? 84 : 118, n.innerHTML = "<div style='width:320px;line-height: 30px;font-family: 微软雅黑'><span style='color: #FFFFFF;font-size: 18px;font-weight:bold;'>简介:&nbsp;&nbsp;</span><span style='color: #999b9f;font-size: 18px;'>" + this.gameInfo.description.substring(0, s) + "...</span></div>", a.addChild(n), e.x = this.start_x, i.x = this.start_x + 3, "v" == t ? (e.y = 235, i.y = 290, a.x = this.start_x, a.y = 472, a.height = 160, a.width = 315) : (e.y = 210, i.y = 290, a.x = 375, a.y = 20, a.height = 230, a.width = 320)
	}, e.prototype.vMenu = function() {
		this.start_x = 35, this.back = ORGGraphics.getInstance().getRound(this.backwidth, this.backheight, 10, {
			fillStyle: "#2e2f31"
		}, null), this.back.x = 60, this.back.y = 20;
		var t = ORGGraphics.getInstance().getTriangle([0, 0], [10, 10], [0, 20], {
			fillStyle: "#2e2f31"
		}, null);
		t.x = 729 + this.back.x, t.y = 130 + this.back.y, this.addChild(t), this.addChild(this.back);
		var e = new OSprite;
		e.loadImage(this.iconPath, 0, 0, 315, 180), e.x = this.start_x, e.y = 25, this.back.addChild(e), this.drawGameInitInfo("v")
	}, e.prototype.hMenu = function() {
		this.start_x = 35, this.back = ORGGraphics.getInstance().getRound(this.backwidth, this.backheight, 10, {
			fillStyle: "#2e2f31"
		}, null);
		var t = ORGGraphics.getInstance().getTriangle([0, 0], [10, 10], [0, 20], {
			fillStyle: "#2e2f31"
		}, null);
		800 == GloableData.getInstance().gameInfo.gGameWidth && 600 == GloableData.getInstance().gameInfo.gGameHeight ? (this.back.x = 10, this.back.y = 30, this.back.scaleX = .95, this.back.scaleY = 1, t.x = 692.55 + this.back.x, t.y = 123.5 + this.back.y) : (this.back.x = 135, this.back.y = 20, t.x = 729 + this.back.x, t.y = 130 + this.back.y), this.addChild(t), this.addChild(this.back);
		var e = new OSprite;
		e.loadImage(this.iconPath, 0, 0, 315, 180), e.x = this.start_x, e.y = 25, this.back.addChild(e), this.drawGameInitInfo("h")
	}, e.prototype.drawControlNum = function() {
		e.showUI && (this.txtColl || (this.txtColl = new OText, this.txtColl.fontSize = 20, this.txtColl.color = "#FFFFFF", this.btnArr[0].setTitle(this.txtColl), this.txtColl.x = 65, this.txtColl.y = 16), this.btnArr[0].setText = OrgWeb.getInstance().getGameCollectNum().toString(), 1 == OrgWeb.getInstance().getGameCollectState() ? this.btnArr[0].updateURL([this.serverPath + "res/orgMenuBtn/btnKeepOk.png", this.serverPath + "res/orgMenuBtn/btnKeepOk.png"]) : this.btnArr[0].updateURL([this.serverPath + "res/orgMenuBtn/btnKeep.png", this.serverPath + "res/orgMenuBtn/btnKeep.png"]), this.txtThu || (this.txtThu = new OText, this.txtThu.fontSize = 20, this.txtThu.color = "#FFFFFF", this.btnArr[1].setTitle(this.txtThu), this.txtThu.x = 65, this.txtThu.y = 16), this.btnArr[1].setText = OrgWeb.getInstance().getGameThumbsNum().toString(), 1 == OrgWeb.getInstance().getGameThumbsState() ? this.btnArr[1].updateURL([this.serverPath + "res/orgMenuBtn/btnAgreeOk.png"]) : this.btnArr[1].updateURL([this.serverPath + "res/orgMenuBtn/btnAgree.png", this.serverPath + "res/orgMenuBtn/btnAgreeOk.png"]), 1 == OrgWeb.getInstance().getGameAttentionState() ? this.btnArr[8].updateURL([this.serverPath + "res/orgMenuBtn/btnConcernOk.png"]) : this.btnArr[8].updateURL([this.serverPath + "res/orgMenuBtn/btnConcern.png"]))
	}, e.prototype.drawButton = function(t) {
		var e = new OButton([this.serverPath + "res/orgMenuBtn/btnKeep.png", this.serverPath + "res/orgMenuBtn/btnKeepOk.png"]);
		e.tag = this.btnTagArr[0], this.btnArr.push(e);
		var i = new OButton([this.serverPath + "res/orgMenuBtn/btnAgree.png", this.serverPath + "res/orgMenuBtn/btnAgreeOk.png"]);
		i.tag = this.btnTagArr[1], this.btnArr.push(i);
		var a = new OButton([this.serverPath + "res/orgMenuBtn/btnSend.png", this.serverPath + "res/orgMenuBtn/btnSend1.png"]);
		a.tag = this.btnTagArr[2], this.btnArr.push(a);
		var n = new OButton(this.serverPath + "res/orgMenuBtn/btnMore.png");
		n.tag = this.btnTagArr[3], this.btnArr.push(n);
		var s = new OButton([this.serverPath + "res/orgMenuBtn/btnComment.png", this.serverPath + "res/orgMenuBtn/btnComment1.png"]);
		s.tag = this.btnTagArr[4], this.btnArr.push(s);
		var o = new OButton([this.serverPath + "res/orgMenuBtn/btnShare.png", this.serverPath + "res/orgMenuBtn/btnShare1.png"]);
		o.tag = this.btnTagArr[5], this.btnArr.push(o);
		var r;
		"WEB" == OrgWeb.getInstance().getOrgPlat() ? (r = new OButton([this.serverPath + "res/orgMenuBtn/screenFull.png", this.serverPath + "res/orgMenuBtn/screenFull1.png"]), r.tag = this.btnTagArr[6]) : (r = new OButton([this.serverPath + "res/orgMenuBtn/btnExit.png", this.serverPath + "res/orgMenuBtn/btnExit1.png"]), r.tag = this.btnTagArr[6]), this.btnArr.push(r);
		var h = new OButton([this.serverPath + "res/orgMenuBtn/btnBack.png", this.serverPath + "res/orgMenuBtn/btnBack1.png"]);
		h.tag = this.btnTagArr[7], this.btnArr.push(h);
		var l = new OButton([this.serverPath + "res/orgMenuBtn/btnConcern.png"]);
		l.tag = this.btnTagArr[8], this.btnArr.push(l), OrgWeb.getInstance().getGameControlInfo(this, this.drawControlNum), this.setButtonConfig(t)
	}, e.prototype.setButtonConfig = function(t) {
		if ("h" == t) for (var e in this.btnArr) {
			switch (this.btnArr[e].tag) {
			case this.btnTagArr[0]:
				this.btnArr[e].x = this.start_x, this.btnArr[e].y = 330, this.btnArr[e].click(this, this.clickCollect);
				break;
			case this.btnTagArr[1]:
				this.btnArr[e].x = 190, this.btnArr[e].y = 330, this.btnArr[e].click(this, this.clickAgree);
				break;
			case this.btnTagArr[2]:
				this.btnArr[e].x = this.start_x, this.btnArr[e].y = 400, this.btnArr[e].click(this, this.clickSend);
				break;
			case this.btnTagArr[3]:
				this.btnArr[e].x = 370, this.btnArr[e].y = 275, this.btnArr[e].click(this, this.clickMore);
				break;
			case this.btnTagArr[4]:
				this.btnArr[e].x = 370, this.btnArr[e].y = 330, this.btnArr[e].click(this, this.clickComment);
				break;
			case this.btnTagArr[5]:
				this.btnArr[e].x = 530, this.btnArr[e].y = 330, this.btnArr[e].click(this, this.clickShare);
				break;
			case this.btnTagArr[6]:
				this.btnArr[e].x = 370, this.btnArr[e].y = 400, this.btnArr[e].click(this, this.clickExit);
				break;
			case this.btnTagArr[7]:
				this.btnArr[e].x = 530, this.btnArr[e].y = 400, this.btnArr[e].click(this, this.clickBack);
				break;
			case this.btnTagArr[8]:
				this.btnArr[e].x = 260, this.btnArr[e].y = 285, this.btnArr[e].click(this, this.clickConcern)
			}
			this.back.addChild(this.btnArr[e])
		} else for (var e in this.btnArr) {
			switch (this.btnArr[e].tag) {
			case this.btnTagArr[0]:
				this.btnArr[e].x = this.start_x, this.btnArr[e].y = 330, this.btnArr[e].click(this, this.clickCollect);
				break;
			case this.btnTagArr[1]:
				this.btnArr[e].x = 190, this.btnArr[e].y = 330, this.btnArr[e].click(this, this.clickAgree);
				break;
			case this.btnTagArr[2]:
				this.btnArr[e].x = this.start_x, this.btnArr[e].y = 400, this.btnArr[e].click(this, this.clickSend);
				break;
			case this.btnTagArr[3]:
				this.btnArr[e].x = this.start_x, this.btnArr[e].y = 650, this.btnArr[e].click(this, this.clickMore);
				break;
			case this.btnTagArr[4]:
				this.btnArr[e].x = this.start_x, this.btnArr[e].y = 715, this.btnArr[e].click(this, this.clickComment);
				break;
			case this.btnTagArr[5]:
				this.btnArr[e].x = 200, this.btnArr[e].y = 715, this.btnArr[e].click(this, this.clickShare);
				break;
			case this.btnTagArr[6]:
				this.btnArr[e].x = this.start_x, this.btnArr[e].y = 785, this.btnArr[e].click(this, this.clickExit);
				break;
			case this.btnTagArr[7]:
				this.btnArr[e].x = 200, this.btnArr[e].y = 785, this.btnArr[e].click(this, this.clickBack);
				break;
			case this.btnTagArr[8]:
				this.btnArr[e].x = 260, this.btnArr[e].y = 285, this.btnArr[e].click(this, this.clickConcern)
			}
			this.back.addChild(this.btnArr[e])
		}
	}, e.prototype.clickCollect = function(t) {
		OrgWeb.getInstance().goCollect(this, this.controlComplete)
	}, e.prototype.clickAgree = function(t) {
		OrgWeb.getInstance().goThumbs(this, this.controlComplete)
	}, e.prototype.clickConcern = function(t) {
		OrgWeb.getInstance().goConcern(this, this.controlComplete)
	}, e.prototype.controlComplete = function(t, e, i) {
		Tips.tip(t, "#FFFFFF"), this.drawControlNum()
	}, e.prototype.clickSend = function(t) {
		OrgWeb.getInstance().getIsUnaudited() ? Tips.tip("本作品尚未过审，不能赠送鲜花", "#FFFFFF") : OrgWeb.getInstance().initSendFlower(this, this.initFlowerCommplete)
	}, e.prototype.initFlowerCommplete = function() {
		OrgWeb.getInstance().getIsUnaudited() ? Tips.tip("本作品尚未过审，不能赠送鲜花", "#FFFFFF") : OrgWeb.getInstance().showPaypanel()
	}, e.prototype.clickMore = function(t) {
		GameUpdateList.getInstance().showUI()
	}, e.prototype.clickComment = function(t) {
		1 != OrgWeb.getInstance().setCommentPos() && GameComment.getInstance().showUI()
	}, e.prototype.clickShare = function(t) {
		OrgWeb.getInstance().goShare()
	}, e.prototype.refreshBtn = function() {
		"WEB" == OrgWeb.getInstance().getOrgPlat() && (OrgWeb.getInstance().getScreenState() ? this.btnArr[6].updateURL([this.serverPath + "res/orgMenuBtn/screenQuit.png", this.serverPath + "res/orgMenuBtn/screenQuit1.png"]) : this.btnArr[6].updateURL([this.serverPath + "res/orgMenuBtn/screenFull.png", this.serverPath + "res/orgMenuBtn/screenFull1.png"]))
	}, e.prototype.clickExit = function(t) {
		this.refreshBtn(), OrgWeb.getInstance().exitOrFullScreen()
	}, e.prototype.clickBack = function(t) {
		e.getInstance().hideUI()
	}, e.prototype.dispose = function() {
		this.txtColl = null, this.txtThu = null, this.isAdd = !1, this.visible = !1, e.showUI = !1, this.removeAllChild()
	}, e.showUI = !1, e
}(OSprite), GameUpdateList = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.btnArr = new Array, e.back = new OSprite, e.init(), e.addChild(e.back), e.size(GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight), e
	}
	return __extends(e, t), e.getInstance = function() {
		return null == e._instance && (e._instance = new e), e._instance
	}, e.prototype.init = function() {
		this.textList = new laya.html.dom.HTMLDivElement, this.pannel = new OPanel, this.pannel.vScrollBarSkin = ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/scroll.png", GloableData.getInstance().gameMainData.Headr.GWidth <= GloableData.getInstance().gameMainData.Headr.GHeight ? (this.back.x = 60, this.back.y = 20, this.pannel.y = 130, this.pannel.x = 30, this.backwidth = 384, this.backheight = 873, this.pannel.size(340, 720), this.vUpList()) : GloableData.getInstance().gameMainData.Headr.GWidth >= GloableData.getInstance().gameMainData.Headr.GWidth && (this.back.x = 135, this.back.y = 20, this.pannel.y = 130, this.pannel.x = 30, this.backwidth = 730, this.backheight = 490, this.pannel.size(680, 320), this.hUpList()), this.pannel.addChild(this.textList), this.back.addChild(this.pannel)
	}, e.prototype.vUpList = function() {
		var t = ORGGraphics.getInstance().getRound(this.backwidth, 120, 10, {
			fillStyle: "#424348"
		}, null),
			e = ORGGraphics.getInstance().getRound(100, 50, 10, {
				fillStyle: "#424348"
			}, null),
			i = new OButton([e, e]),
			a = new OText;
		a.text = "<", a.fontSize = 22, a.color = "#c2c5c9", i.setTitle(a), t.addChild(i), i.click(this, this.hideUI);
		var n = new OText;
		n.text = ORGMenuUI.getInstance().gameInfo.gname, n.fontSize = 22, n.color = "#FFFFFF", t.addChild(n), n.x = (t.width - n.width) / 2, n.y = 17;
		var s = ORGGraphics.getInstance().getTriangle([0, 0], [10, 10], [0, 20], {
			fillStyle: "#2e2f31"
		}, null);
		s.x = 729 + this.back.x, s.y = 130 + this.back.y;
		var o = ORGGraphics.getInstance().getRect(this.backwidth, 773, {
			fillStyle: "#2e2f31"
		}, null);
		o.y = 100;
		var r = ORGGraphics.getInstance().getRound(this.backwidth, 20, 10, {
			fillStyle: "#2e2f31"
		}, null);
		r.y = 862, this.back.addChild(s), this.back.addChild(t), this.back.addChild(o), this.back.addChild(r), this.screen = "v", this.initButton(), this.drawUpdateList()
	}, e.prototype.showUI = function() {
		this.zOrder = 11, UIManager.getInstance().gameSystemUILayer._childs.indexOf(this) < 0 && (this.isAdd = !1), this.isAdd ? this.visible = !0 : (UIManager.getInstance().gameSystemUILayer.addChild(this), this.isAdd = !0)
	}, e.prototype.hideUI = function() {
		this.visible = !1
	}, e.prototype.hUpList = function() {
		var t = ORGGraphics.getInstance().getRound(this.backwidth, 120, 10, {
			fillStyle: "#424348"
		}, null),
			e = ORGGraphics.getInstance().getRound(100, 50, 10, {
				fillStyle: "#424348"
			}, null),
			i = new OButton([e, e]),
			a = new OText;
		a.text = "<", a.fontSize = 22, a.color = "#c2c5c9", i.setTitle(a), t.addChild(i), i.click(this, this.hideUI);
		var n = new OText;
		n.text = ORGMenuUI.getInstance().gameInfo.gname, n.fontSize = 22, n.color = "#FFFFFF", t.addChild(n), n.x = (t.width - n.width) / 2, n.y = 17;
		var s = ORGGraphics.getInstance().getTriangle([0, 0], [10, 10], [0, 20], {
			fillStyle: "#2e2f31"
		}, null);
		s.x = 729 + this.back.x, s.y = 130 + this.back.y, 800 == GloableData.getInstance().gameInfo.gGameWidth && 600 == GloableData.getInstance().gameInfo.gGameHeight ? (this.back.x = 10, this.back.y = 30, this.back.scaleX = .95, this.back.scaleY = 1, s.x = 692.55 + this.back.x, s.y = 123.5 + this.back.y) : (s.x = 729 + this.back.x, s.y = 130 + this.back.y);
		var o = ORGGraphics.getInstance().getRect(this.backwidth, 385, {
			fillStyle: "#2e2f31"
		}, null);
		o.y = 100;
		var r = ORGGraphics.getInstance().getRound(this.backwidth, 20, 10, {
			fillStyle: "#2e2f31"
		}, null);
		r.y = 475, this.back.addChild(s), this.back.addChild(t), this.back.addChild(o), this.back.addChild(r), this.initButton(), this.drawUpdateList()
	}, e.prototype.initButton = function() {
		var t;
		t = new OButton("v" == this.screen ? [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDownV.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUpV.png"] : [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png"]);
		var e = new OText;
		e.text = "作品简介", e.fontSize = 20, e.color = "#c2c5c9", "v" == this.screen ? t.x = 0 : t.x = 100, t.y = 45, t.setTitle(e), t.click(this, this.drawUpdateList), this.back.addChild(t), this.btnArr[0] = t, OrgWeb.getInstance().getGameUpdateList(this, this.drawUpdateButton), OrgWeb.getInstance().getGameOverInfo(this, this.drawGameOverButton)
	}, e.prototype.drawUpdateButton = function(t) {
		if (t && !(t.count <= 0)) {
			var e;
			e = new OButton("v" == this.screen ? [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUpV.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDownV.png"] : [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png"]);
			var i = new OText;
			i.text = "更新日志", i.fontSize = 20, i.color = "#c2c5c9", "v" == this.screen ? e.x = 125 : e.x = 295, e.y = 45, e.tag = t, e.setTitle(i), e.click(this, this.drawGameUpdate), this.back.addChild(e), this.btnArr[1] = e
		}
	}, e.prototype.drawGameOverButton = function(t) {
		if (t) {
			var e;
			e = new OButton("v" == this.screen ? [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUpV.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDownV.png"] : [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png"]);
			var i = new OText;
			i.text = "结束信息", i.fontSize = 20, i.color = "#c2c5c9", "v" == this.screen ? e.x = 245 : e.x = 480, e.y = 45, e.setTitle(i), e.tag = t, e.click(this, this.drawGameOver), this.back.addChild(e), this.btnArr[2] = e
		}
	}, e.prototype.drawGameUpdate = function(t) {
		if (t.tag.records.length > 0) {
			this.setTab(1), this.pannel.scrollTo(0, 0), this.clearPanelMore();
			for (var e = 0; e < t.tag.records.length; e++) this.drawUpdateItem(t.tag.records[e]);
			if (this.textList._childs.length > 0) {
				var i = this.textList._childs[this.textList._childs.length - 1],
					a = i.height + i.y;
				this.textList.size(600, a)
			}
			this.pannel.refresh()
		}
	}, e.prototype.replaceSpaciel = function(t) {
		return t
	}, e.prototype.drawUpdateItem = function(t) {
		try {
			var e = 0;
			if (this.textList._childs.length > 0) {
				var i = this.textList._childs[this.textList._childs.length - 1];
				e = i.height + i.y
			}
			var a = new OSprite;
			a.y = e + 20;
			var n = new laya.html.dom.HTMLDivElement,
				s = new laya.html.dom.HTMLDivElement;
			"v" == this.screen ? n.width = 330 : n.width = 660, n.style.lineHeight = 28, t.content = this.replaceSpaciel(t.content), n.innerHTML = "<span style='line-height:28px;color: #999b9f;font-size: 20px;'>" + t.content + "</span>", s.innerHTML = "<span style='line-height:28px;width:660px;color: #999b9f;font-size: 20px;'>" + t.update_time + "</span>", s.y = n.contextHeight + 10;
			var o = void 0;
			"v" == this.screen ? (s.x = 190, o = ORGGraphics.getInstance().getline(300, 0, "#999b9f", 1)) : (s.x = 550, o = ORGGraphics.getInstance().getline(660, 0, "#999b9f", 1)), o.y = s.y + s.contextHeight + 10, a.addChild(n), a.addChild(s), a.addChild(o), a.height = o.y + 1, this.textList.addChild(a)
		} catch (r) {
			throw new Error(r)
		}
	}, e.prototype.setTab = function(t) {
		var e, i;
		"v" == this.screen ? (e = [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDownV.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUpV.png"], i = [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUpV.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDownV.png"]) : (e = [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png"], i = [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png"]);
		for (var a = 0; a < this.btnArr.length; a++) this.btnArr[a] && (t == a ? this.btnArr[a].updateURL(e) : this.btnArr[a].updateURL(i))
	}, e.prototype.drawGameOver = function(t) {
		this.setTab(2), this.pannel.scrollTo(0, 0), this.clearPanelMore(), "v" == this.screen ? this.textList.width = 300 : this.textList.width = 660, this.textList.style.lineHeight = 28, this.textList.style.fontSize = 20, this.textList.style.color = "#999b9f", this.textList.innerHTML = t.tag, "v" == this.screen ? this.textList.size(330, this.textList.contextHeight) : this.textList.size(600, this.textList.contextHeight), this.pannel.refresh()
	}, e.prototype.drawUpdateList = function() {
		"v" == this.screen ? (this.setTab(0), this.pannel.scrollTo(0, 0), this.clearPanelMore(), this.textList.width = 300, this.textList.style.lineHeight = 28, this.textList.innerHTML = "<span style='line-height:28px;width:300px;color: #999b9f;font-size: 20px;'>" + ORGMenuUI.getInstance().gameInfo.description + "<br/></span>", this.textList.size(300, this.textList.contextHeight), this.pannel.refresh()) : (this.setTab(0), this.pannel.scrollTo(0, 0), this.clearPanelMore(), this.textList.width = 660, this.textList.style.lineHeight = 28, this.textList.innerHTML = "<span style='line-height:28px;width:660px;color: #999b9f;font-size: 20px;'>" + ORGMenuUI.getInstance().gameInfo.description + "<br/></span>", this.textList.size(600, this.textList.contextHeight), this.pannel.refresh())
	}, e.prototype.clearPanelMore = function() {
		this.textList.innerHTML = "", this.textList.removeChildren()
	}, e
}(OSprite), GameComment = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.page = 1, e.limit = 10, e.screen = "", e.back = new OSprite, e.size(GloableData.getInstance().gameMainData.Headr.GWidth, GloableData.getInstance().gameMainData.Headr.GHeight), e.serverPath = GloableData.getInstance().serverPath, e.btnArr = new Array, ORG.loader.load([e.serverPath + "res/orgMenuBtn/commen/angleIcon.png", e.serverPath + "res/orgMenuBtn/commen/flowerIcon.png", e.serverPath + "res/orgMenuBtn/commen/msgComment.png", e.serverPath + "res/orgMenuBtn/commen/msgCommentV.png", e.serverPath + "res/orgMenuBtn/commen/oflowerIcon.png"], OHandler.create(e, e.init)), e.addChild(e.back), e
	}
	return __extends(e, t), e.prototype.init = function() {
		this.textList = new laya.html.dom.HTMLDivElement, this.panel = new OPanel, this.panel.vScrollBarSkin = "", GloableData.getInstance().gameMainData.Headr.GWidth <= GloableData.getInstance().gameMainData.Headr.GHeight && (this.back.x = 60, this.back.y = 20, this.panel.y = 130, this.panel.x = 30, this.backwidth = 384, this.backheight = 873, this.panel.size(340, 720), this.vComment()), GloableData.getInstance().gameMainData.Headr.GWidth >= GloableData.getInstance().gameMainData.Headr.GHeight && (this.panel.y = 130, this.panel.x = 30, this.backwidth = 730, this.backheight = 490, this.panel.size(680, 320), this.hComment()), this.textList.width = this.panel.width, this.panel.on(GameEvent.MOUSE_UP, this, this.panelDrag), this.panel.addChild(this.textList), this.back.addChild(this.panel), this.initButton()
	}, e.prototype.panelDrag = function() {
		var t = 0;
		if (this.textList._childs.length > 0) {
			var e = this.textList._childs[this.textList._childs.length - 1];
			t = e.y + e.height + this.panel.height
		}
		console.log(t, this.panel.vScrollBar.value)
	}, e.prototype.initButton = function() {
		var t = new OButton([ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png"]),
			e = new OText;
		e.text = "作品评论", e.fontSize = 20, e.color = "#c2c5c9", "v" == this.screen ? t.x = 0 : t.x = 100, "v" == this.screen ? t.y = 47 : t.y = 45, t.setTitle(e), t.click(this, this.changeCommon), this.back.addChild(t), this.btnArr[0] = t, OrgWeb.getInstance().getGameComment(this, this.drawComment, 1, 30), OrgWeb.getInstance().getGameFineComment(this, this.drawGameFineBtn, 1, 10)
	}, e.prototype.drawGameFineBtn = function(t) {
		if (console.log(t, "精品评论"), t && !(t.length <= 0)) {
			var e = new OButton([ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png"]),
				i = new OText;
			i.text = "精品评论", i.fontSize = 20, i.color = "#c2c5c9", "v" == this.screen ? e.x = 130 : e.x = 295, "v" == this.screen ? e.y = 47 : e.y = 45, e.tag = t, e.setTitle(i), e.click(this, this.changeFineCommon), this.back.addChild(e), this.btnArr[1] = e
		}
	}, e.prototype.changeCommon = function() {
		this.setTab(0), this.clearPanel(), this.panel.scrollTo(0, 0), OrgWeb.getInstance().getGameComment(this, this.drawComment, 1, 30)
	}, e.prototype.changeFineCommon = function() {
		this.setTab(1), this.clearPanel(), this.panel.scrollTo(0, 0), OrgWeb.getInstance().getGameFineComment(this, this.drawComment, 1, 10)
	}, e.prototype.vComment = function() {
		this.screen = "v";
		var t = ORGGraphics.getInstance().getRound(this.backwidth, this.backheight, 10, {
			fillStyle: "#424348"
		}, null),
			e = ORGGraphics.getInstance().getRound(100, 50, 10, {
				fillStyle: "#424348"
			}, null),
			i = new OButton([e, e]),
			a = new OText;
		a.text = "<", a.fontSize = 22, a.color = "#c2c5c9", i.setTitle(a), i.click(this, this.hideUI), t.addChild(i);
		var n = new OText;
		n.text = ORGMenuUI.getInstance().gameInfo.gname, n.fontSize = 22, n.color = "#FFFFFF", t.addChild(n), n.x = (t.width - n.width) / 2, n.y = 17;
		var s = ORGGraphics.getInstance().getTriangle([0, 0], [10, 10], [0, 20], {
			fillStyle: "#FFFFFF"
		}, null);
		s.x = 729 + this.back.x, s.y = 130 + this.back.y;
		var o = ORGGraphics.getInstance().getRect(this.backwidth, 780, {
			fillStyle: "#FFFFFF"
		}, null);
		o.y = 100;
		var r = ORGGraphics.getInstance().getRound(this.backwidth, 30, 10, {
			fillStyle: "#FFFFFF"
		}, null);
		r.y = 852, this.back.x = 60, this.back.y = 20, this.back.addChild(s), this.back.addChild(t), this.back.addChild(o), this.back.addChild(r)
	}, e.prototype.hComment = function() {
		var t = ORGGraphics.getInstance().getRound(this.backwidth, 120, 10, {
			fillStyle: "#424348"
		}, null),
			e = ORGGraphics.getInstance().getRound(100, 50, 10, {
				fillStyle: "#424348"
			}, null),
			i = new OButton([e, e]),
			a = new OText;
		a.text = "<", a.fontSize = 22, a.color = "#c2c5c9", i.setTitle(a), i.click(this, this.hideUI), t.addChild(i);
		var n = new OText;
		n.text = ORGMenuUI.getInstance().gameInfo.gname, n.fontSize = 22, n.color = "#FFFFFF", t.addChild(n), n.x = (t.width - n.width) / 2, n.y = 17;
		var s = ORGGraphics.getInstance().getTriangle([0, 0], [10, 10], [0, 20], {
			fillStyle: "#FFFFFF"
		}, null);
		s.x = 729 + this.back.x, s.y = 130 + this.back.y;
		var o = ORGGraphics.getInstance().getRect(this.backwidth, 385, {
			fillStyle: "#FFFFFF"
		}, null);
		o.y = 100;
		var r = ORGGraphics.getInstance().getRound(this.backwidth, 20, 10, {
			fillStyle: "#FFFFFF"
		}, null);
		r.y = 475, 800 == GloableData.getInstance().gameInfo.gGameWidth && 600 == GloableData.getInstance().gameInfo.gGameHeight ? (this.back.x = 10, this.back.y = 30, this.back.scaleX = .95, this.back.scaleY = 1, s.x = 692.55 + this.back.x, s.y = 123.5 + this.back.y) : this.back.x = 135, this.back.y = 20, this.addChild(s), this.back.addChild(t), this.back.addChild(o), this.back.addChild(r)
	}, e.prototype.drawComment = function(t) {
		if (UIManager.getInstance().maskSprite.hide(), t) {
			for (var e = 0; e < t.length; e++) this.drawCommentItem(t[e]);
			var i = 0;
			if (this.textList._childs.length > 0) {
				var a = this.textList._childs[this.textList._childs.length - 1];
				i = a.y + a.height
			} else i = 0;
			this.textList.height = i, this.panel.refresh()
		}
	}, e.prototype.drawCommentItem = function(t) {
		void 0 === t && (t = null);
		var e = new OSprite;
		try {
			if (!t) return;
			var i = 0;
			if (this.textList._childs.length > 0) {
				var a = this.textList._childs[this.textList._childs.length - 1];
				i = a.y + a.height
			} else i = 0;
			e.y = i;
			var n = new OSprite,
				s = new OSprite;
			e.addChild(n), e.addChild(s), "v" == this.screen ? s.x = 0 : s.x = 100;
			var o = new OSprite,
				r = HttpURL.POSSPORT_SERVER_URL + "user/avatar?uid=" + t.uid;
			o.loadImage(r, 0, 0, 60, 60);
			var h = new OSprite;
			h.graphics.drawCircle(30, 30, 25, "#FF0000"), "v" == this.screen ? (o.x = 0, o.y = 0) : (o.x = 40, o.y = 23), o.mask = h, n.addChild(o);
			var l = this.serverPath + "res/orgMenuBtn/commen/flowerIcon.png?v=" + playerVer,
				c = this.serverPath + "res/orgMenuBtn/commen/oflowerIcon.png?v=" + playerVer,
				g = '<img style="width: 23px;height:23px;" src="' + l + '"></img>',
				u = '<img style="width: 23px;height:23px;" src="' + c + '"></img>',
				p = new laya.html.dom.HTMLDivElement;
			s.addChild(p);
			var d = "",
				m = "";
			if (t.medal_lists) {
				if (t.medal_lists.system) {
					var v = t.medal_lists.system;
					d = '<img style="width: 23px;height:23px;" src="' + v.small_pic + '"></img>'
				}
				t.medal_lists.game && (m = '<img style="width: 23px;height:23px;" src="' + t.medal_lists.game.small_pic + '"></img>')
			}
			var f = "";
			"v" == this.screen ? (p.width = 220, p.y = 10, p.x = 65, f += t.username + d + m + "<br/>", t.user_level_dsp && (f += "Lv." + t.user_level_dsp), t.give_flower && (f += g + "&nbsp;" + t.give_flower + "&nbsp;&nbsp;"), t.give_wild_flower && (f += u + "&nbsp;" + t.give_wild_flower / 100)) : (p.width = 560, p.y = 20, f += t.username + "&nbsp;&nbsp;&nbsp;" + d + m, t.user_level_dsp && (f += "Lv." + t.user_level_dsp), t.give_flower && (f += g + "&nbsp;" + t.give_flower + "&nbsp;&nbsp;"), t.give_wild_flower && (f += u + "&nbsp;" + t.give_wild_flower / 100)), p.style.fontSize = 18, p.style.color = "#a5a7ab", p.innerHTML = f;
			var I = new OImage;
			"v" == this.screen ? I.skin = this.serverPath + "res/orgMenuBtn/commen/msgCommentV.png?v=" + playerVer : I.skin = this.serverPath + "res/orgMenuBtn/commen/msgComment.png?v=" + playerVer, s.addChild(I);
			var y = new laya.html.dom.HTMLDivElement;
			"v" == this.screen ? y.width = 280 : y.width = 480, y.x = 30, y.style.fontSize = 18, y.style.lineHeight = 23, y.innerHTML = t.comment, I.addChild(y), "v" == this.screen ? I.y = 60 : I.y = p.y + p.contextHeight + 20, "v" == this.screen ? I.sizeGrid = "20,10,5,30,0" : I.sizeGrid = "25,10,5,40,0", I.width = y.width + 50, I.height = y.contextHeight + 40, y.y = (I.height - y.contextHeight) / 2;
			var _ = new OSprite;
			s.addChild(_), _.y = I.y + I.height + 20;
			var w = 0;
			if (t.runtime) {
				var b = new OText;
				b.text = "在线时长：" + t.runtime, b.width = 165, b.fontSize = 16, b.color = "#a5a7ab", w = b.x + b.width, _.addChild(b)
			}
			var S = new OText;
			if ("v" == this.screen) {
				S.text = t.add_time_string.substr(5, t.add_time_string.length);
				var E = new OText;
				E.fontSize = 16, E.color = "#a5a7ab", E.text = "来自" + t.device_type, E.y = 22, _.addChild(E), S.height = 35
			} else S.text = t.add_time_string.substr(5, t.add_time_string.length) + "   来自" + t.device_type;
			S.fontSize = 16, S.color = "#a5a7ab", S.x = w, _.addChild(S), _.height = S.height, s.height = _.y + _.height;
			var x = ORGGraphics.getInstance().getline(600, 0, "#a5a7ab", 1);
			x.alpha = .7, e.addChild(x), x.y = s.y + s.height + 20, "v" == this.screen ? x.x = 0 : x.x = 40, e.height = x.y + 30;
			var M = this.getCommentUserCard(t);
			if (M) {
				var C = ORGGraphics.getInstance().getRect(55, 30, {
					fillStyle: "#ffffff",
					lineColor: "#e3e3e3",
					lineWidth: 1
				}, null);
				e.addChild(C);
				var D = new OText;
				D.text = M, D.fontSize = 18, D.color = "#a5a7ab", C.addChild(D), D.x = (C.width - D.width) / 2, D.y = (C.height - D.height) / 2 - 3, "v" == this.screen ? C.x = 265 : (C.x = 43, C.y = 68)
			}
			this.textList.addChild(e)
		} catch (G) {
			this.textList.addChild(e)
		}
	}, e.prototype.getCommentUserCard = function(t) {
		return 3 == t.author_follow_comment_type ? "助理" : t.super_lv >= 1 ? "编辑" : OrgWeb.getInstance().getAuthorID() == t.uid ? "作者" : ""
	}, e.prototype.setTab = function(t) {
		for (var e = [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png"], i = [ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnUp.png", ORGMenuUI.getInstance().serverPath + "res/orgMenuBtn/btnDown.png"], a = 0; a < this.btnArr.length; a++) this.btnArr[a] && (t == a ? this.btnArr[a].updateURL(e) : this.btnArr[a].updateURL(i))
	}, e.getInstance = function() {
		return null == e._instance && (e._instance = new e), e._instance
	}, e.prototype.showUI = function() {
		UIManager.getInstance().maskSprite.update("请稍后..."), this.zOrder = 11, UIManager.getInstance().gameSystemUILayer._childs.indexOf(this) < 0 && (this.isAdd = !1), this.isAdd ? (UIManager.getInstance().maskSprite.hide(), this.visible = !0) : (UIManager.getInstance().gameSystemUILayer.addChild(this), this.isAdd = !0)
	}, e.prototype.hideUI = function() {
		this.visible = !1
	}, e.prototype.clearPanel = function() {
		this.textList.innerHTML = "", this.textList.removeChildren()
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.isAdd = !1, e.isInit = !1, e.sendnum = 1, e
			}
			return __extends(e, t), e.getInstance = function() {
				return null == e._instance && (e._instance = new e), e._instance
			}, e.prototype.showUI = function() {
				this.zOrder = 11, this.init(), UIManager.getInstance().popMessageLayer._childs.indexOf(this) < 0 && (this.isAdd = !1), this.isAdd ? this.visible = !0 : (UIManager.getInstance().popMessageLayer.addChild(this), this.isAdd = !0), e.showUI = !0
			}, e.prototype.hideUI = function() {
				this.visible = !1, e.showUI = !1
			}, e.prototype.refreshFlowerNum = function() {
				this.init(), OrgWeb.getInstance().getWebUserFlower(this, this.getFlowerOk)
			}, e.prototype.getFlowerOk = function(t) {
				GloableData.getInstance().flowerHua, this.tipText ? (this.tipFlower.text = OrgWeb.getInstance().getHaveFlower() + " 朵鲜花", this.sendFlower.text = "已赠送" + OrgWeb.getInstance().getReWidFlower() + " 朵") : (this.tipText = new OText(!0), this.tipText.text = "您当前还有 ", this.tipText.fontSize = 18, this.tipText.x = 35, this.tipText.y = 25, this.tipFlower = new OText(!0), this.tipFlower.text = OrgWeb.getInstance().getHaveFlower() + " 朵鲜花", this.tipFlower.x = this.tipText.width + this.tipText.x, this.tipFlower.y = this.tipText.y, this.tipFlower.color = "#ffb345", this.tipFlower.fontSize = 18, this.sendFlower = new OText(!0), this.sendFlower.text = "已赠送" + OrgWeb.getInstance().getReWidFlower() + " 朵", this.sendFlower.x = this.tipText.x, this.sendFlower.fontSize = 18, this.sendFlower.color = "#999b9f", this.sendFlower.y = this.tipText.y + 22, this.sendBack.addChild(this.tipText), this.sendBack.addChild(this.tipFlower), this.sendBack.addChild(this.sendFlower))
			}, e.prototype.init = function() {
				if (!this.isInit) {
					this.isInit = !0;
					var t = GloableData.getInstance().gameMainData.Headr.GWidth,
						e = GloableData.getInstance().gameMainData.Headr.GHeight,
						i = ORGGraphics.getInstance().getRect(t, e, {
							fillStyle: "black"
						}, this, this.clickBtn);
					i.tag = "close", i.alpha = .7, this.addChild(i), this.sendBack = ORGGraphics.getInstance().getRound(580, 228, 8, {
						fillStyle: "#F5F6F8"
					}, null, this, this.clickBtn), this.sendBack.tag = "backImg", this.sendBack.x = (t - this.sendBack.width) / 2, this.sendBack.y = (e - this.sendBack.height) / 2, this.addChild(this.sendBack);
					var a = ORGGraphics.getInstance().getRound(110, 54, 4, {
						fillStyle: "#ffac28"
					}),
						n = new OButton([a, a]);
					this.sendBack.addChild(n);
					var s = new OText(!0);
					s.text = "充值", s.fontSize = 20, s.color = "white", n.setTitle(s), s.y = 13, n.x = 434, n.y = 23, n.tag = "充值", n.click(this, this.clickBtn);
					var o = ORGGraphics.getInstance().getRound(110, 54, 4, {
						fillStyle: "#ffac28"
					}),
						r = new OButton([o, o]);
					this.sendBack.addChild(r);
					var h = new OText(!0);
					h.text = "打赏", h.fontSize = 20, h.color = "white", r.setTitle(h), h.y = 13, r.x = 434, r.y = 123, r.tag = "打赏", r.click(this, this.clickBtn), this.tmp_btn({
						x: 38,
						y: 123,
						width: 108,
						height: 54,
						round: 4,
						backStyle: {
							fillStyle: "#ffffff"
						}
					}, {
						text: "x1",
						color: "#000000",
						fontSize: 20,
						x: 60,
						y: 15
					}, this.sendBack, this, this.clickBtn), this.tmp_btn({
						x: 165,
						y: 123,
						width: 108,
						height: 54,
						round: 4,
						backStyle: {
							fillStyle: "#ffffff"
						}
					}, {
						text: "x10",
						color: "#000000",
						fontSize: 20,
						x: 60,
						y: 15
					}, this.sendBack, this, this.clickBtn), this.tmp_btn({
						x: 290,
						y: 123,
						width: 130,
						height: 54,
						round: 4,
						backStyle: {
							fillStyle: "#ffffff"
						}
					}, {
						text: "",
						color: "gray",
						fontSize: 20,
						x: 20,
						y: 15
					}, this.sendBack), this.sendInput = new OTextInput, this.sendInput.x = 300, this.sendInput.y = 123, this.sendInput.fontSize = 20, this.sendInput.oprompt("自定义"), this.sendInput.osize(110, 54), this.sendInput.osettype("number"), this.sendInput.tag = "自定义", this.sendInput.addEventLisner(GameEvent.FOCUS, this, this.clickBtn), this.sendInput.addEventLisner(GameEvent.INPUT, this, this.setValue), this.sendInput.addEventLisner(GameEvent.BLUR, this, this.setValue), this.sendBack.addChild(this.sendInput), this.checkBox = ORGGraphics.getInstance().getRound(110, 56, 5, null, {
						strokeStyle: "#ffac28",
						lineWidth: 2
					}), this.checkBox.x = 38, this.checkBox.y = 123, this.sendBack.addChild(this.checkBox), this.refreshFlowerNum()
				}
			}, e.prototype.setValue = function(t) {
				"" != t.text ? (t.text.indexOf(".") > -1 && (t.text = t.text.replace(".", "")), t.text.indexOf("e") > -1 && (t.text = t.text.replace("e", "")), parseInt(t.text) < 1 && (t.text = 1), this.sendnum = t.text) : this.sendnum = -1
			}, e.prototype.clickBtn = function(t, e) {
				switch (e && e.stopPropagation && e.stopPropagation(), t.tag) {
				case "close":
					this.hideUI();
					break;
				case "x1":
					this.sendnum = 1;
					break;
				case "自定义":
					"" == t.text && (t.text = 1);
					break;
				case "打赏":
					if (Math.ceil(this.sendnum) <= 0) return void Tips.tip("输入数量不正确！", "#FFFFFF");
					if (Math.ceil(this.sendnum) > OrgWeb.getInstance().getHaveFlower()) return void Tips.tip("鲜花数量不足，请充值！", "#FFFFFF");
					OrgWeb.getInstance().sendFlower(this, this.sendFlowerOk, this.sendnum);
					break;
				case "x10":
					this.sendnum = 10;
					break;
				case "充值":
					OrgWeb.getInstance().goToPay()
				}
				"x1" != t.tag && "x10" != t.tag && "自定义" != t.tag || (this.checkBox.y = t.y, "自定义" == t.tag ? (this.checkBox.scaleX = 1.2, this.checkBox.x = t.x - 10) : (this.checkBox.scaleX = 1, this.checkBox.x = t.x))
			}, e.prototype.sendFlowerOk = function(t) {
				Tips.tip("x" + t[0], "red", 1500), this.refreshFlowerNum()
			}, e.prototype.tmp_btn = function(t, e, i, a, n) {
				void 0 === a && (a = null), void 0 === n && (n = null);
				var s = ORGGraphics.getInstance().getRound(t.width, t.height, t.round, t.backStyle, null, a, n);
				i.addChild(s), s.x = t.x, s.y = t.y;
				var o = new OText(!0);
				if ("string" == typeof e) o.text = e, s.tag = e, o.fontSize = 20, o.x = (s.width - o.width) / 2, o.y = (s.height - o.height) / 2, o.color = "white";
				else {
					s.tag = e.text;
					for (var r in e) o[r] = e[r]
				}
				s.addChild(o)
			}, e.showUI = !1, e
		}(BaseUI);
	t.PaySendUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.drawRotation = 12, e.startRotation = -85, e.drawKey = -1, e.isComplete = !1, e.callBack = null, e.loadImageComplete = !1, e.maskUrl = (GloableData.getInstance().serverPath || "") + "res/speedfast/fastbg.png", e.visible = !1, e.drawRotation = 12.000000000023999, e.size(150, 150), e.mouseEnabled = !1, e.mouseThrough = !1, e.init(), e
			}
			return __extends(e, t), e.prototype.init = function() {
				this.showTF = new OText, this.showTF.width = 150, this.showTF.align = "center", this.showTF.text = "快进", this.showTF.fontSize = 24, this.showTF.bold = !0, this.showTF.stroke = 2, this.showTF.strokeColor = "#FFFFFF", this.addChild(this.showTF), this.maskSp = new OImage, ORG.loader.clearRes(this.maskUrl), ORG.loader.load(this.maskUrl, OHandler.create(this, this.loadMaskComplete), null, OLoader.IMAGE)
			}, e.prototype.loadMaskComplete = function() {
				this.loadImageComplete = !0, this.maskSp.source = ORG.loader.getRes(this.maskUrl), this.showSp = new OSprite, this.showSp.graphics.drawPie(75, 75, 75, -90, this.startRotation, "#ffac28"), this.showSp.mask = this.maskSp, this.showSp.y = this.showTF.height + 16, this.addChild(this.showSp)
			}, e.prototype.render = function(e, i, a) {
				this.pos(Laya.stage.mouseX - 75, Laya.stage.mouseY - 115), t.prototype.render.call(this, e, i, a)
			}, e.prototype.startDraw = function() {
				clearTimeout(this.drawKey), this.drawKey = setTimeout(this.drawImage.bind(this), 16.6666666667)
			}, e.prototype.drawImage = function() {
				return this.loadImageComplete ? !this.visible || this.startRotation >= 360 ? void(this.drawKey = setTimeout(this.drawImage.bind(this), 16.6666666667)) : (this.startRotation += this.drawRotation, this.startRotation >= 360 && !this.isComplete && (this.isComplete = !0, this.callBack && this.callBack()), this.showSp.graphics.drawPie(75, 75, 75, -90, this.startRotation, "#ffac28"), void(this.drawKey = setTimeout(this.drawImage.bind(this), 16.6666666667))) : void(this.drawKey = setTimeout(this.drawImage.bind(this), 16.6666666667))
			}, e.prototype.hide = function() {
				clearTimeout(this.drawKey), this.drawRotation = 360 / (500 / GloableStaticData.GAME_RUN_TIME), this.startRotation = -85, this.showSp && this.showSp.graphics.clear(), this.visible = !1
			}, e.prototype.dispose = function() {
				this.hide(), this.removeChildren(), this.callBack = null, this.isComplete = !1, this.loadImageComplete = !1
			}, e.prototype.show = function() {
				this.visible = !0, this.drawRotation = 360 / (500 / GloableStaticData.GAME_RUN_TIME), this.startRotation = -85, this.showSp && this.showSp.graphics.clear(), this.startDraw()
			}, e
		}(OSprite);
	t.QuickIcon = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t) {
				void 0 === t && (t = -1);
				var i = e.call(this, t) || this;
				return EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, i, i.loadCompelte), UIResouecrLoad.loadReplayUI(), i
			}
			return __extends(i, e), i.prototype.loadCompelte = function(t) {
				t == UIResouecrLoad.REPLAYUI_TYPE && (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.init())
			}, i.prototype.init = function() {
				this.showMsgArr || (this.showMsgArr = new Array);
				for (var e = 0; e < UIManager.getInstance().message.length; e++) UIManager.getInstance().message[e] && UIManager.getInstance().message[e].visible && (this.showMsgArr.push(e), UIManager.getInstance().message[e].visible = !1);
				this.data = GloableData.getInstance().gameMainData.System.Replay, this.bg = new ImageComponent("Graphics/UI/" + this.data.backimage), this.addChild(this.bg), this.textF = new OPanel, this.textF.vScrollBarSkin = "", this.textF.width = this.data.viewport.width, this.textF.height = this.data.viewport.height, this.textF.x = this.data.viewport.x, this.textF.y = this.data.viewport.y, this.addChild(this.textF), this.showTextView = new OSprite, this.showTextView.mouseEnabled = !0, this.showTextView.autoSize = !0, this.textF.addChild(this.showTextView);
				var i = GloableData.getInstance().gameMainData.System.Buttons[this.data.closeButton.index];
				this.closeBtn = new ORGButton("Graphics/Button/" + i.image1, "Graphics/Button/" + i.image2, i.name), this.closeBtn.postion = {
					x: this.data.closeButton.x,
					y: this.data.closeButton.y
				}, this.addChild(this.closeBtn), AppFacade.getInstance().registerMediator(new t.ReplayUIMediator(this))
			}, i.prototype.dispose = function() {
				var t = this;
				EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), OTween.to(this, {
					alpha: 0
				}, 5 * GloableStaticData.GAME_RUN_TIME, null, OHandler.create(this, function() {
					OTween.clearTween(t), t.removeChildren();
					for (var i = 0; i < t.showMsgArr.length; i++) UIManager.getInstance().message[t.showMsgArr[i]].visible = !0;
					t.showMsgArr = null, t.showTextView.removeChildren(), e.prototype.dispose.call(t)
				}))
			}, i
		}(BaseUI);
	t.ReplayUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				var a = t.call(this, e.NAME, i) || this;
				return a.prevX = 0, a.prevY = 0, a.drawX = 0, a.drawY = 0, a.textLineDir = 1.5, a.tempWidth = 0, a.tempHeight = 0, a.initData(), a
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				EventManager.addEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onViewRemove = function() {
				EventManager.removeEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onEventCenterRegister = function() {}, e.prototype.onEventCenterRemove = function() {}, e.prototype.testPanel = function() {
				console.log("changePanel")
			}, e.prototype.closeView = function(t) {
				t.stopPropagation(), clearTimeout(this.moveKey), -1 !== this.view.openViewIndex ? UIManager.getInstance().showViewByIndex(this.view.openViewIndex, this.view.eventLine, -1) : UIManager.getInstance().closeView(this.name)
			}, e.prototype.initData = function() {
				var t = this;
				for (this.replayMsg = StringUtil.getAnalysisText(this.makeText(), GloableData.getInstance().gameMainData.System.FontUiColor.getColorToUint()), this.drawX = 0, this.drawY = 0, this.view.showTextView.removeChildren(); this.replayMsg && this.replayMsg.configs.length > 0;) {
					var e = this.replayMsg.configs.shift(),
						i = e.textNum;
					this.showAllTextByConfig(e, i)
				}
				this.view.showTextView.cacheAsBitmap = !0, this.moveKey = setTimeout(function() {
					t.view.textF.scrollTo(0, t.view.textF.vScrollBar.max)
				}, 100)
			}, e.prototype.showAllTextByConfig = function(t, e) {
				for (var i = GloableData.getInstance().fontBitmapData.maxH * this.textLineDir, a = 0; e > 0;) {
					e--;
					var n = this.replayMsg.texts.shift();
					n.x = this.drawX, n.y = this.drawY, this.drawX += n.width, a += n.width, this.view.showTextView.addChild(n)
				}
				this.tempWidth < a && (this.tempWidth = a), t.newline ? (this.drawY += i, this.tempHeight += i, this.drawX = 0) : this.tempHeight += i
			}, e.prototype.makeText = function() {
				var t = GloableData.getInstance().dGameSystem.replay.replay;
				if (t.length <= 0) return "";
				for (var e = "", i = 0; i < t.length; i++) {
					var a = StringUtil.replaceVTX(t[i]),
						n = StringUtil.TextAnalysisNull(a),
						s = 0,
						o = 0;
					o = Math.floor(this.view.data.viewport.width / GloableData.getInstance().fontBitmapData.maxW);
					for (var r = 0; r < n.length; r++) 0 !== r && r % o == 0 ? (e += "\\n", e += n.charAt(s), s++) : (e += n.charAt(s), s++);
					10 !== e.charCodeAt(e.length - 1) && (e += "\\n")
				}
				return e
			}, e.prototype.startScrollText = function(t) {
				this.prevX = this.view.textF.mouseX, this.prevY = this.view.textF.mouseY
			}, e.prototype.finishScrollText = function(t) {}, e.prototype.scrollText = function(t) {}, e.NAME = "ReplayUIMediator", e
		}(Mediator);
	t.ReplayUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t) {
				var i = e.call(this) || this;
				return i.image_Path = GloableData.getInstance().serverPath + "res/cloud/", i.showType = t, i.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), i.init(), i
			}
			return __extends(i, e), i.prototype.init = function() {
				var t = "";
				OrgWeb.getInstance().getIsPC() && GloableData.getInstance().isScreenHorizontal() && (t = "_pc"), this.guide_cloud_url = this.image_Path + GloableData.getInstance().gameInfo.gGameWidth + "_" + GloableData.getInstance().gameInfo.gGameHeight + t + "_cloud.png?v=" + playerVer, this.guide_local_url = this.image_Path + GloableData.getInstance().gameInfo.gGameWidth + "_" + GloableData.getInstance().gameInfo.gGameHeight + t + "_local.png?v=" + playerVer, this.guide_local_login_url = this.image_Path + GloableData.getInstance().gameInfo.gGameWidth + "_" + GloableData.getInstance().gameInfo.gGameHeight + t + "_local_login.png?v=" + playerVer, ORG.loader.on(OEvent.ERROR, this, this.loadError), ORG.loader.load([this.guide_cloud_url, this.guide_local_url, this.guide_local_login_url], OHandler.create(this, this.loadResourceComplete), null, OLoader.IMAGE)
			}, i.prototype.loadError = function(e) {
				ORG.loader.off(OEvent.ERROR, this, this.loadError), ORG.loader.cancelLoadByUrl(this.guide_cloud_url), ORG.loader.cancelLoadByUrl(this.guide_local_login_url), ORG.loader.cancelLoadByUrl(this.guide_local_url), UIManager.getInstance().closeView(t.SaveFileGuideMediator.NAME)
			}, i.prototype.loadResourceComplete = function() {
				this.guide_image_local = new OImage, this.guide_image_local.skin = this.guide_local_url, this.guide_image_cloud = new OImage, this.guide_image_cloud.skin = this.guide_cloud_url, this.guide_image_local_login = new OImage, this.guide_image_local_login.skin = this.guide_local_login_url, this.guide_image_local.mouseThrough = !1, this.guide_image_cloud.mouseThrough = !1, this.guide_image_local_login.mouseThrough = !1, this.guide_image_cloud.visible = !1, this.guide_image_local.visible = !1, this.guide_image_local_login.visible = !1, this.addChild(this.guide_image_cloud), this.addChild(this.guide_image_local), this.addChild(this.guide_image_local_login), this.setImageState(), AppFacade.getInstance().registerMediator(new t.SaveFileGuideMediator(this))
			}, i.prototype.setImageState = function() {
				return this.showType == GloableStaticData.SHOW_SAVE_GUIDE_TYPE_1 ? (this.guide_image_cloud.visible = !0, this.guide_image_local.visible = !1, void(this.guide_image_local_login.visible = !1)) : this.showType == GloableStaticData.SHOW_SAVE_GUIDE_TYPE_2 ? (this.guide_image_cloud.visible = !1, this.guide_image_local_login.visible = !1, void(this.guide_image_local.visible = !0)) : this.showType == GloableStaticData.SHOW_SAVE_GUIDE_TYPE_3 ? (this.guide_image_cloud.visible = !1, this.guide_image_local.visible = !1, void(this.guide_image_local_login.visible = !0)) : void 0
			}, i.prototype.dispose = function() {
				this.guide_image_cloud && this.guide_image_cloud.dispose(), this.guide_image_local && this.guide_image_local.dispose(), this.guide_image_local_login && this.guide_image_local_login.dispose(), this.removeAll()
			}, i
		}(BaseUI);
	t.SaveFileGuide = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				var a = t.call(this, e.NAME, i) || this;
				return a.saveGuidekey = "saveGuide" + GloableData.getInstance().gameMainData.Headr.guid + OrgWeb.getInstance().getUid(), a.firstOpenKey = "saveFileFirstOpen", a
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				this.view.guide_image_cloud.on(OEvent.CLICK, this, this.nextGuid), this.view.guide_image_local.on(OEvent.CLICK, this, this.nextGuid), this.view.guide_image_local_login.on(OEvent.CLICK, this, this.nextGuid)
			}, e.prototype.onViewRemove = function() {
				this.view.guide_image_cloud.off(OEvent.CLICK, this, this.nextGuid), this.view.guide_image_local.off(OEvent.CLICK, this, this.nextGuid), this.view.guide_image_local_login.off(OEvent.CLICK, this, this.nextGuid)
			}, e.prototype.onEventCenterRegister = function() {}, e.prototype.onEventCenterRemove = function() {}, e.prototype.nextGuid = function(t) {
				t.stopPropagation, t.currentTarget == this.view.guide_image_cloud ? ("IOS" == OrgWeb.getInstance().getOrgPlat() ? localStorage.setItem(this.firstOpenKey, "1") : utils.addCookie(this.firstOpenKey, "1"), "IOS" == OrgWeb.getInstance().getOrgPlat() ? localStorage.setItem(this.saveGuidekey, "1") : utils.addCookie(this.saveGuidekey, "1"), UIManager.getInstance().closeView(this.name)) : t.currentTarget == this.view.guide_image_local_login ? ("IOS" == OrgWeb.getInstance().getOrgPlat() ? localStorage.setItem(this.firstOpenKey, "1") : utils.addCookie(this.firstOpenKey, "1"), "IOS" == OrgWeb.getInstance().getOrgPlat() ? localStorage.setItem(this.saveGuidekey, "1") : utils.addCookie(this.saveGuidekey, "1"), UIManager.getInstance().closeView(this.name)) : t.currentTarget == this.view.guide_image_local && (this.view.guide_image_local.visible = !1, this.view.guide_image_cloud.visible = !0)
			}, e.NAME = "SaveFileGuideMediator", e
		}(Mediator);
	t.SaveFileGuideMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t, a, n) {
				void 0 === t && (t = !1), void 0 === a && (a = !1), void 0 === n && (n = -1);
				var s = e.call(this, n) || this;
				return s.isOpenCloud = !1, s.tmpStr = "", s.tagView = null, s.saveGuidekey = "saveGuide" + GloableData.getInstance().gameMainData.Headr.guid + OrgWeb.getInstance().getUid(), s.saveSelectkey = "saveFileSelect" + GloableData.getInstance().gameMainData.Headr.guid + OrgWeb.getInstance().getUid(), s.firstOpenKey = "saveFileFirstOpen", s.titleOpen = t, i.serverPath = GloableData.getInstance().serverPath, s.isSave = a, (GloableData.getInstance().gameInfo.isPc || OrgWeb.getInstance().getIsPC()) && GloableData.getInstance().isScreenHorizontal() ? s.tmpStr = "_web" : s.tmpStr = "", ORG.loader.load([i.serverPath + "res/cloud/cChange" + s.tmpStr + ".png?v=" + playerVer, i.serverPath + "res/cloud/cChange1" + s.tmpStr + ".png?v=" + playerVer, i.serverPath + "res/cloud/lChange" + s.tmpStr + ".png?v=" + playerVer, i.serverPath + "res/cloud/lChange1" + s.tmpStr + ".png?v=" + playerVer, i.serverPath + "res/cloud/mark.png?v=" + playerVer, i.serverPath + "res/sysmenu/req_player_addflowers_0.png?v=" + playerVer], OHandler.create(s, s.imgComplete, ["h"]), null, OLoader.IMAGE), s
			}
			return __extends(i, e), i.prototype.imgComplete = function() {
				EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), UIResouecrLoad.loadSaveFileUI()
			}, i.prototype.loadCompelte = function(e) {
				OrgWeb.getInstance().getLoginStatus() || (GloableData.getInstance().isCloud = !1), e == UIResouecrLoad.SAVEFILEUI_TYPE && (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.init(), this.drawCloudBtn(), GloableData.getInstance().isCloud ? this.setCloudData() : this.refreshUI(), AppFacade.getInstance().registerMediator(new t.SaveFileUIMediator(this)))
			}, i.prototype.drawCloudBtn = function() {
				if (GloableData.getInstance().gameInfo.isPc) return void(GloableData.getInstance().isCloud = !1);
				var e, a = "IOS" == OrgWeb.getInstance().getOrgPlat() ? localStorage.getItem(this.saveGuidekey) : utils.getCookie(this.saveGuidekey),
					n = "IOS" == OrgWeb.getInstance().getOrgPlat() ? localStorage.getItem(this.firstOpenKey) : utils.getCookie(this.firstOpenKey);
				if (utils.localHasSaveData()) {
					if (a && "1" == a) GloableData.getInstance().isOpenSaveFileUI || (OrgWeb.getInstance().getLoginStatus() ? GloableData.getInstance().isCloud = !0 : GloableData.getInstance().isCloud = !1);
					else if (GloableData.getInstance().isOpenSaveFileUI)"IOS" == OrgWeb.getInstance().getOrgPlat() ? localStorage.setItem(this.saveGuidekey, "1") : utils.addCookie(this.saveGuidekey, "1");
					else if (OrgWeb.getInstance().getLoginStatus() ? GloableData.getInstance().isCloud = !0 : GloableData.getInstance().isCloud = !1, GloableData.getInstance().isCloud) {
						e = GloableStaticData.SHOW_SAVE_GUIDE_TYPE_3;
						var s = new t.SaveFileGuide(e);
						UIManager.getInstance().showView(s, t.SaveFileGuideMediator.NAME)
					}
				} else if (n) GloableData.getInstance().isOpenSaveFileUI || (OrgWeb.getInstance().getLoginStatus() ? GloableData.getInstance().isCloud = !0 : GloableData.getInstance().isCloud = !1);
				else {
					GloableData.getInstance().isOpenSaveFileUI = !0, OrgWeb.getInstance().getLoginStatus() ? GloableData.getInstance().isCloud = !0 : GloableData.getInstance().isCloud = !1;
					var s = new t.SaveFileGuide(GloableStaticData.SHOW_SAVE_GUIDE_TYPE_2);
					UIManager.getInstance().showView(s, t.SaveFileGuideMediator.NAME)
				}
				GloableData.getInstance().isOpenSaveFileUI = !0, UIManager.getInstance().orgWebFreeLayer.isFree && (GloableData.getInstance().isCloud = !0), GloableData.getInstance().isCloud ? (this.localBtn = new OButton([i.serverPath + "res/cloud/lChange" + this.tmpStr + ".png?v=" + playerVer]), 
				this.cloudBtn = new OButton([i.serverPath + "res/cloud/cChange1" + this.tmpStr + ".png?v=" + playerVer])) : 
				(this.localBtn = new OButton([i.serverPath + "res/cloud/lChange1" + this.tmpStr + ".png?v=" + playerVer]), 
				this.cloudBtn = new OButton([i.serverPath + "res/cloud/cChange" + this.tmpStr + ".png?v=" + playerVer])), 
				(GloableData.getInstance().gameInfo.isPc || OrgWeb.getInstance().getIsPC()) && GloableData.getInstance().isScreenHorizontal() ? 
				(this.localBtn.x = GloableData.getInstance().gameMainData.Headr.GWidth - 60, this.localBtn.y = 28, this.cloudBtn.x = GloableData.getInstance().gameMainData.Headr.GWidth - 60, this.cloudBtn.y = 98) : 
				(this.localBtn.x = GloableData.getInstance().gameMainData.Headr.GWidth - 80, this.localBtn.y = 24, this.cloudBtn.y = 116, this.cloudBtn.x = GloableData.getInstance().gameMainData.Headr.GWidth - 80), 
				this.localBtn.click(this, this.clickLocal), this.cloudBtn.click(this, this.clickCloud), this.addChild(this.localBtn), 
				this.addChild(this.cloudBtn), 0 != OrgWeb.getInstance().getPlatForm() && 
				(this.localBtn.visible = this.cloudBtn.visible = !1, GloableData.getInstance().isCloud = !1)
			}, i.prototype.changeState = function(t) {
				0 == t ? (this.localBtn.updateURL([i.serverPath + "res/cloud/lChange1" + this.tmpStr + ".png?v=" + playerVer]), this.cloudBtn.updateURL([i.serverPath + "res/cloud/cChange" + this.tmpStr + ".png?v=" + playerVer])) : (this.localBtn.updateURL([i.serverPath + "res/cloud/lChange" + this.tmpStr + ".png?v=" + playerVer]), this.cloudBtn.updateURL([i.serverPath + "res/cloud/cChange1" + this.tmpStr + ".png?v=" + playerVer]))
			}, i.prototype.clickLocal = function() {
				return utils.addCookie(this.saveSelectkey, GloableStaticData.SELECT_SAVE_TYPE_LOCAL), UIManager.getInstance().orgWebFreeLayer.isFree && this.isSave ? void Tips.tip("限免期间只能存储云端哦", "#FFFFFF") : (GloableData.getInstance().isCloud = !1, this.changeState(0), void this.refreshUI())
			}, i.prototype.clickCloud = function() {
				return utils.addCookie(this.saveSelectkey, GloableStaticData.SELECT_SAVE_TYPE_CLOUD), OrgWeb.getInstance().getLoginStatus() ? this.isOpenCloud ? void this.checkComplete() : void CloudProxy.getInstance().checkCloudState(this, this.checkComplete) : (Tips.tip(""), void OrgWeb.getInstance().isLoginStatus())
			}, i.prototype.refreshUI = function() {
				var t = this.itemList.cells;
				for (var e in t) t[e].isInit = !1;
				GloableData.getInstance().initUserName || (GloableData.getInstance().initUserName = OrgWeb.getInstance().getUserInitName()), GloableData.getInstance().loadShot(), this.listData = GloableData.getInstance().saveFileData, this.itemList.array = this.listData, this.itemList.refresh(), this.itemList.scrollTo(0)
			}, i.prototype.setCloudData = function() {
				if (JSON.stringify(CloudProxy.getInstance().cloudData).length <= 2) console.log("去获取服务器的数据"), CloudProxy.getInstance().downSaveData(this, this.downComplete);
				else {
					console.log("使用本地的数据");
					var t = {
						status: 1,
						data: JSON.stringify(CloudProxy.getInstance().cloudData)
					};
					this.downComplete(t)
				}
			}, i.prototype.downComplete = function(t) {
				1 == parseInt(t.status) ? (this.changeState(1), GloableData.getInstance().isCloud = !0, t.data && "" != t.data && (CloudProxy.getInstance().cloudData = JSON.parse(t.data)), JSON.stringify(CloudProxy.getInstance().cloudData).length <= 2 && OrgWeb.getInstance().getIsClient() ? CloudProxy.getInstance().tipsAgain = !0 : CloudProxy.getInstance().tipsAgain = !1, this.refreshUI()) : Tips.tip("获取失败，请重试。", "#FFFFFF")
			}, i.prototype.checkComplete = function(t) {
				this.isOpenCloud ? this.setCloudData() : 1 == parseInt(t.status) ? (this.isOpenCloud = t.data, this.isOpenCloud ? this.setCloudData() : Tips.tip("充值任意金额，即可享用云存档特权。", "#FFFFFF")) : Tips.tip("网络异常。", "#FFFFFF")
			}, i.prototype.init = function() {
				GloableData.getInstance().initUserName || (GloableData.getInstance().initUserName = OrgWeb.getInstance().getUserInitName()), this.data = GloableData.getInstance().gameMainData.System.SaveData, this.titleOpen && (this.titleBG = new ImageComponent("Graphics/UI/" + GloableData.getInstance().gameMainData.System.Title.logoImage), this.addChild(this.titleBG)), this.bg = new ImageComponent("Graphics/UI/" + this.data.backimage), this.addChild(this.bg), this.itemList = new OList, this.itemList.itemRender = t.SaveFileUIItem, this.itemList.width = this.data.viewport.width, this.itemList.height = this.data.viewport.height, this.itemList.spaceX = this.data.spanCol, this.itemList.spaceY = this.data.spanRow, this.itemList.repeatX = this.data.column, this.itemList.repeatY = this.data.max / this.data.column, this.itemList.x = this.data.viewport.x, this.itemList.y = this.data.viewport.y, this.itemList.vScrollBarSkin = "", this.buttons = new Array(this.data.max), GloableData.getInstance().saveDataInit(), this.listData = GloableData.getInstance().saveFileData, this.itemList.array = this.listData, this.addChild(this.itemList);
				var e = GloableData.getInstance().gameMainData.System.Buttons[this.data.closeButton.index];
				this.closeBtn = new ORGButton("Graphics/Button/" + e.image1, "Graphics/Button/" + e.image2, e.name), this.closeBtn.postion = {
					x: this.data.closeButton.x,
					y: this.data.closeButton.y
				}, this.addChild(this.closeBtn)
			}, i.prototype.dispose = function() {
				for (var t in this.itemList.cells) {
					var i = this.itemList.cells[t];
					i.dispose(), i = null
				}
				EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.itemList.removeChildren(), this.itemList = null, UIManager.getInstance().orgWebFreeLayer.showPannel(), this.tagView = null, e.prototype.dispose.call(this), this.removeChildren()
			}, i
		}(BaseUI);
	t.SaveFileUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i() {
				var t = e.call(this) || this;
				t.isInit = !1;
				var i = GloableData.getInstance().gameMainData.System.SaveData.backButton,
					a = GloableData.getInstance().gameMainData.System.Buttons[i.index];
				return t._bg_1_url = "Graphics/Button/" + a.image1.toString(), t._bg_2_url = "Graphics/Button/" + a.image2.toString(), t
			}
			return __extends(i, e), i.prototype.setData = function(t) {
				this.dataSource = t, this._picurl = t ? t.picurl : "", this._itemName = t ? t.name : "", this._date = t ? t.date : 0, this._isfree = t ? t.isfree : 0, this._index = t ? t.index : -1
			}, i.prototype.bgLoadComplete = function() {
				this.bg.off(GameEventConstant.LOAD_ORGBUTTON_COMPLETE, this, this.bgLoadComplete), this.scrollRect = new laya.maths.Rectangle(this.bg.x, this.bg.y, this.bg.width, this.bg.height)
			}, i.prototype.init = function() {
				this.isInit = !0, this.bg = new ORGButton("", "", OEvent.CLICK, ""), this.bg.on(GameEventConstant.LOAD_ORGBUTTON_COMPLETE, this, this.bgLoadComplete), this.bg.updateButton(this._bg_1_url, this._bg_2_url, ""), this.bg.mouseThrough = !1, this.bg.postion = null, this.bg.index = this._index, this.bg.pixelHitTest = !1, EventCenter.addEventListener(OEvent.CLICK, this, this.clickItem), this.addChild(this.bg), this.smPic = new OImage, this.addChild(this.smPic), this.nameTf = utils.getOText(), this.addChild(this.nameTf), this.dateTf = utils.getOText();
				for (var t = StringUtil.getAnalysisText("----/--/--  --:--", GloableData.getInstance().gameMainData.System.FontUiColor.getColorToUint()), e = 0, i = 0; t.texts.length > 0;) {
					var a = t.texts.shift();
					a.x = e, a.y = i, e += a.width, this.dateTf.addtext(a)
				}
				this.addChild(this.dateTf), this.freeTf = new OImage, this.freeTf.texture = null, this.addChild(this.freeTf), this.flushItem()
			}, i.prototype.clickItem = function(t) {
				t.index === this._index && EventCenter.dispatchEvent(new GameEvent(GameEventConstant.CLICK_SAVE_UI_ITEM, this._index))
			}, i.prototype.setItemValue = function() {
				this.nameTf.text = "", this.dateTf.text = "", this.nameTf.cleanTexts(), this.dateTf.cleanTexts();
				for (var e = (GloableData.getInstance().gameMainData.System.FontUiColor.getColorToUint(), StringUtil.getAnalysisText(this._itemName, GloableData.getInstance().gameMainData.System.FontUiColor.getColorToUint())), i = 0, a = 0; e.texts.length > 0;) {
					var n = e.texts.shift();
					n.x = i, n.y = a, i += n.width, this.nameTf.addtext(n)
				}
				var s = "" == utils.getDateByTime(this._date) ? "----/--/-- --:--" : utils.getDateByTime(this._date);
				for (e = StringUtil.getAnalysisText(s, GloableData.getInstance().gameMainData.System.FontUiColor.getColorToUint()), i = 0, a = 0; e.texts.length > 0;) {
					var n = e.texts.shift();
					n.x = i, n.y = a, i += n.width, this.dateTf.addtext(n)
				}
				if (1 == this._isfree ? this.freeTf.texture = ORG.loader.getRes(t.SaveFileUI.serverPath + "res/cloud/mark.png") : this.freeTf.texture = null, "" !== this._picurl && this.smPic.skin !== this._picurl) {
					this.smPic.skin = null, this.smPic.skin = this._picurl;
					var o = Math.floor(GloableData.getInstance().gameMainData.Headr.GWidth * (GloableData.getInstance().gameMainData.System.SaveData.zoom / 100)),
						r = Math.floor(GloableData.getInstance().gameMainData.Headr.GHeight * (GloableData.getInstance().gameMainData.System.SaveData.zoom / 100));
					this.smPic.size(o, r), console.log(this.smPic.width + "----------" + this.smPic.height)
				} else "" == this._picurl && (this.smPic.skin = null)
			}, i.prototype.setItemPos = function() {
				var t = GloableData.getInstance().gameMainData.System.SaveData;
				this.smPic.x = t.picX, this.smPic.y = t.picY, this.freeTf.x = t.picX, this.freeTf.y = t.picY, this.nameTf.x = t.nameX, this.nameTf.y = t.nameY, this.dateTf.x = t.dateX, this.dateTf.y = t.dateY, this.dateTf.visible = t.showDate, this.nameTf.visible = t.showMapName, this.smPic.visible = t.showMinPic
			}, i.prototype.flushItem = function() {
				this.setItemPos(), this.setItemValue()
			}, i.prototype.update = function(t) {
				this.dataSource = t, this._picurl = this.dataSource ? this.dataSource.picurl : "", this._itemName = this.dataSource ? this.dataSource.name : "", this._isfree = this.dataSource ? this.dataSource.isfree : "", this._date = this.dataSource ? parseInt(this.dataSource.date) : 0, this._index = this.dataSource ? this.dataSource.index : -1, this.flushItem()
			}, i.prototype.clean = function() {
				this.bg && this.bg.off(GameEventConstant.LOAD_ORGBUTTON_COMPLETE, this, this.bgLoadComplete), EventCenter.removeEventListener(OEvent.CLICK, this, this.clickItem), this.removeChildren(), this.freeTf = null, this.smPic = null, this.bg = null
			}, i.prototype.dispose = function() {
				this.bg && this.bg.off(GameEventConstant.LOAD_ORGBUTTON_COMPLETE, this, this.bgLoadComplete), EventCenter.removeEventListener(OEvent.CLICK, this, this.clickItem), this.removeChildren(), this.smPic && this.smPic.dispose(), this.bg && this.bg.dispose(), this.freeTf && this.freeTf.dispose(), this.smPic = null, this.bg = null
			}, i
		}(OBox);
	t.SaveFileUIItem = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				var a = t.call(this, e.NAME, i) || this;
				return a.saveIndex = -1, a
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				this.view.itemList.renderHandler = OHandler.create(this, this.renderItem, null, !1), EventManager.addEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onViewRemove = function() {
				this.view.itemList.selectHandler = null, this.view.itemList.renderHandler = null, EventManager.removeEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.CLICK_SAVE_UI_ITEM, this, this.onSelect), EventCenter.addEventListener(GameEventConstant.CLOSE_SAVE_GUIDE, this, this.showBtnState)
			}, e.prototype.onEventCenterRemove = function() {
				EventCenter.removeEventListener(GameEventConstant.CLICK_SAVE_UI_ITEM, this, this.onSelect), EventCenter.removeEventListener(GameEventConstant.CLOSE_SAVE_GUIDE, this, this.showBtnState)
			}, e.prototype.showBtnState = function(t) {
				t.parameter == GloableStaticData.SHOW_SAVE_GUIDE_TYPE_1 && this.view.clickLocal(), t.parameter == GloableStaticData.SHOW_SAVE_GUIDE_TYPE_2 && (OrgWeb.getInstance().getLoginStatus() ? GloableData.getInstance().isCloud = !0 : GloableData.getInstance().isCloud = !1, this.view.clickCloud())
			}, e.prototype.closeView = function(t) {
				t.stopPropagation(), -1 !== this.view.openViewIndex ? UIManager.getInstance().showViewByIndex(this.view.openViewIndex, this.view.eventLine, -1) : UIManager.getInstance().closeView(this.name)
			}, e.prototype.onSelect = function(t) {
				try {
					if ("WEB" == OrgWeb.getInstance().getOrgPlat() && 
					!GloableData.getInstance().gameInfo.isPc && 
					GloableData.getInstance().initUserId && 
					0 != GloableData.getInstance().initUserId && 
					GloableData.getInstance().initUserId !== OrgWeb.getInstance().getUid()) 
					return void Tips.tip("这个游戏进度是" + GloableData.getInstance().initUserName + "的", "#FFFFFF");
					if (GloableData.getInstance().isCollect) {
						var e = new HPLockTip("正在剧情鉴赏中，无法进行存读档操作。", !0);
						return void UIManager.getInstance().popMessageLayer.addChild(e)
					}
					if (this.view.isSave) {
						var i = this.view.itemList.getCell(t);
						GloableData.getInstance().checkAllowSave(t) && 
						(GloableData.getInstance().snap(t), GloableData.getInstance().getSaveSpriteData(t, i, this))
					} else 
						GloableData.getInstance().restore(t)
				} catch (a) {
					console.log(a), a.stack.indexOf("QuotaExceededError") > -1 ? Tips.tip("本地档位空间不足，请在云端存储。", "#FFFFFF") : Tips.tip("数据异常。", "#FFFFFF")
				}
			}, e.prototype.renderItem = function(t, e) {
				t.isInit || (t.clean(), t.setData(this.view.listData[e]), t.init())
			}, e.NAME = "SaveFileUIMediator", e
		}(Mediator);
	t.SaveFileUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i() {
				var t = e.call(this) || this;
				return t.needShowSendFlower = !1, t.isAdd = !1, t.lineHeight = 0, t.isRunEvent = !0, t.bg = new UIMaskSprite, t.bg.alpha = 0, t.bg.mouseEnabled = !0, t.addChild(t.bg), t.lineHeight = Math.ceil(GloableData.getInstance().textLineHeight / 1.5), t
			}
			return __extends(i, e), i.prototype.showUI = function(e) {
				UIManager.getInstance().cancleLongDown(), this.dispose(), EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), AppFacade.getInstance().registerMediator(new t.SCustomUIMediator(this)), null != e && (i.F_Index = e), this.FIndex = i.F_Index, UIManager.getInstance().hasVeiw(t.SCustomUIMediator.NAME) && (this.isAdd = !1), this.isAdd || UIManager.getInstance().showView(this, t.SCustomUIMediator.NAME, !0), this.visible = !0, this.initBefore()
			}, i.prototype.closeView = function(e) {
				e.type == OEvent.KEY_DOWN && 27 !== e.keyCode || (this.dispose(), 1 == SFloatButtonUI.floatStatus && UIManager.getInstance().sfloatLayer.showFloatUI(), UIManager.getInstance().closeAllView(!0), GloableData.getInstance().CUIFromIndex = -1, t.SCustomUI.F_Index = -1)
			}, i.prototype.hideUI = function() {
				this.dispose(), this.visible = !1, UIManager.getInstance().closeView(t.SCustomUIMediator.NAME)
			}, i.getInstance = function() {
				return null == i._instance && (i._instance = new i), i._instance
			}, i.prototype.initBefore = function() {
				UIManager.getInstance().gameSystemUILayer.setMenuVisible(!1), UIManager.getInstance().isSCUIShow = !0, this._btn_url = "Graphics/Button/", this._sp_url = "Graphics/Other/", this.onloadInterComplete = !1, this.loadingInterComplete = !1, this.data = GloableData.getInstance().gameMainData.System.Cuis[this.FIndex], this.onloadInter = new MainEventLine;
				var t = new data.DStory;
				t.events = this.data.loadEvent, this.onloadInter.isCui = !0, this.onloadInter.jumpStory(t), this.controlsArr = new Array, this.viewButtons = new Array, this.timeData || (this.timeData = new GameTimeData), this.timeData.delay = GloableStaticData.GAME_RUN_TIME, this.timeData.type = 1, this.timeData.repeatCount = 1, this.timeData.thisArg = this, this.timeData.callBack = this.isEventComplete, this.timeData.id = GloableStaticData.TIME_SCUI_ID, TimeManager.getInstance().addTime(this.timeData)
			}, i.prototype.isEventComplete = function() {
				try {
					if (this.onloadInter.isEnd && !this.onloadInterComplete) {
						TimeManager.getInstance().removeTime(this.timeData), UIResouecrLoad.loadCustomUI(this.FIndex), this.onloadInterComplete = !0;
						var t = new data.DStory;
						t.events = this.data.afterEvent, this.loadingInter = new MainEventLine, this.loadingInter.jumpStory(t)
					}
				} catch (e) {
					this.timeData && TimeManager.getInstance().removeTime(this.timeData)
				}
			}, i.prototype.loadCompelte = function(t) {
				t.type == UIResouecrLoad.COUSTOMUI_TYPE && t.index == this.FIndex && (this.init(), this.data.isMouseExit && this.on(OEvent.RIGHT_CLICK, this, this.closeView), this.data.isKeyExit && Laya.stage.on(OEvent.KEY_DOWN, this, this.closeView))
			}, i.prototype.init = function() {
				for (var t = 0; t < this.data.controls.length; t++) {
					var e = this.data.controls[t];
					this.loadControls(e)
				}
			}, i.prototype.loadControls = function(t) {
				var e, i, a = null;
				switch (t.type) {
				case 0:
					var n = t.isUserIndex ? GloableData.getInstance().dGameSystem.vars.getVar(t.index) - 1 : t.index; - 1 == n && (n = 0), n >= GloableData.getInstance().gameMainData.System.Buttons.length && (n = 0);
					var s = GloableData.getInstance().gameMainData.System.Buttons[n],
						o = "",
						r = "";
					s.image1 && s.image1.name && (o = this._btn_url + s.image1), s.image2 && s.image2.name && (r = this._btn_url + s.image2), a = new ORGButton(o, r, GameEventConstant.CLICK_SCUI_BUTTON), a.pixelHitTest = !0, a.visible = !0, a.index = t.index, a.postion = this.getControlPoint(t), this.addChild(a);
					break;
				case 1:
					var h = 0,
						l = 0,
						c = 0;
					a = utils.getOText(), a.color = t.color.getColorToUint();
					var g = this.lineHeight;
					if (e = GloableData.getInstance().dGameSystem.dGameString.getVar(t.index), a.message = e, "" !== e) for (var u = StringUtil.getAnalysisText(e, t.color.getColorToUint()); u.configs.length > 0;) {
						for (var p = u.configs.shift(), d = p.textNum; d > 0;) {
							d--;
							var m = u.texts.shift();
							m.color = t.color.getColorToUint(), m.x = h, m.y = l, h += m.width, a.addtext(m), h > c && (c = h)
						}
						p.newline && (l += g, h = 0)
					} else "" == e && a.cleanTexts();
					a.width = c, a.height = l + g, i = this.getControlPoint(t), a.x = i.x, a.y = i.y, this.addChild(a);
					break;
				case 2:
					a = utils.getOText();
					var v = t.isUserIndex;
					v && t.image1.length <= 0 && (v = !1);
					var f = GloableData.getInstance().getFileListItemURL("Graphics/Other/" + t.image1);
					if (v && f) {
						a.bitmapText = GloableData.getInstance().dGameSystem.vars.getVar(t.index) + "";
						var I = StringUtil.getVarBitmapFont(GloableData.getInstance().dGameSystem.vars.getVar(t.index) + "", ORG.loader.getRes(f), null);
						a.addChild(I)
					} else a.text = GloableData.getInstance().dGameSystem.vars.getVar(t.index), a.color = t.color.getColorToUint(), a.fontSize = GloableData.getInstance().gameMainData.System.FontSize;
					i = this.getControlPoint(t), a.x = i.x, a.y = i.y, a.visible = !0, this.addChild(a);
					break;
				case 3:
					a = new ImageComponent, a.pixelHitTest = !1, e = t.isUserString ? GloableData.getInstance().dGameSystem.dGameString.getVar(t.stringIndex) : t.image1, e = e.replace(/\\/g, "/"), e = e.replace(/\/\//g, "/");
					var y = this._sp_url + e;
					y = y.replace(/\\/g, "/"), y = y.replace(/\/\//g, "/"), e.length > 0 && a.updateURL(y, -1, 1, this.clickImage, this), i = this.getControlPoint(t), a.mouseEnabled = !1, a.x = i.x, a.y = i.y, this.addChild(a);
					break;
				case 4:
					t.image1 = t.image1.replace("/", ""), t.image2 = t.image2.replace("/", ""), a = new ORGSlider(this._sp_url + t.image1, this._sp_url + t.image2, 0, !1), i = this.getControlPoint(t), a.x = i.x, a.y = i.y;
					var _ = GloableData.getInstance().dGameSystem.vars.getVar(t.index),
						w = GloableData.getInstance().dGameSystem.vars.getVar(t.maxIndex);
					0 == w && (w = 1), a.setValue(_ / w), this.addChild(a)
				}
				a && (a.tag = t, this.controlsArr.push(a))
			}, i.prototype.clickImage = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.NO_CLICK_BTUTTON))
			}, i.prototype.updateControls = function() {
				for (var t in this.controlsArr) {
					var e = this.controlsArr[t],
						i = e.tag;
					if (e instanceof ORGButton) {
						var a = i.isUserIndex ? GloableData.getInstance().dGameSystem.vars.getVar(i.index) - 1 : i.index; - 1 == a && (a = 0), a >= GloableData.getInstance().gameMainData.System.Buttons.length && (a = 0);
						var n = GloableData.getInstance().gameMainData.System.Buttons[a],
							s = "",
							o = "";
						n.image1 && n.image1.name && (s = this._btn_url + n.image1), n.image2 && n.image2.name && (o = this._btn_url + n.image2), e.image1Path == s && e.image2Path == o || e.updateButton(s, o), e.visible = !0, e.index = i.index, e.postion = this.getControlPoint(i)
					} else if (e instanceof ImageComponent) {
						var r = i.isUserString ? GloableData.getInstance().dGameSystem.dGameString.getVar(i.stringIndex) : i.image1,
							h = this._sp_url + r;
						h = h.replace(/\\/g, "/"), h = h.replace(/\/\//g, "/"), h != e.url && (r.length > 0 ? e.updateURL(h, -1, 1, this.clickImage, this) : e.updateURL("", -1, 1, this.clickImage, this));
						var l = this.getControlPoint(i);
						e.x = l.x, e.y = l.y
					} else if (e instanceof OText) {
						if (1 == i.type) {
							var c = 0,
								g = 0,
								u = 0,
								p = this.lineHeight,
								r = GloableData.getInstance().dGameSystem.dGameString.getVar(i.index);
							if (e.message != r || e.color != i.color.getColorToUint()) {
								if (e.message = r, "" !== r) {
									var d = StringUtil.getAnalysisText(r, i.color.getColorToUint());
									e.color = i.color.getColorToUint();
									for (var m = new Array; d.configs.length > 0;) {
										for (var v = d.configs.shift(), f = v.textNum; f > 0;) {
											f--;
											var I = d.texts.shift();
											I.color = i.color.getColorToUint(), I.x = c, I.y = g, c += I.width, c > u && (u = c), m.push(I)
										}
										v.newline && (g += p, c = 0)
									}
									e.updateText(m)
								} else "" == r && e.cleanTexts();
								e.width = u, e.height = g + p
							}
							var l = this.getControlPoint(i);
							e.x = l.x, e.y = l.y
						} else if (2 == i.type) {
							var y = i.isUserIndex;
							y && i.image1.length <= 0 && (y = !1);
							var _ = GloableData.getInstance().getFileListItemURL("Graphics/Other/" + i.image1);
							if (y && _) {
								if (e.bitmapText != GloableData.getInstance().dGameSystem.vars.getVar(i.index)) {
									e.removeChildren(), e.bitmapText = GloableData.getInstance().dGameSystem.vars.getVar(i.index) + "";
									var w = StringUtil.getVarBitmapFont(GloableData.getInstance().dGameSystem.vars.getVar(i.index) + "", ORG.loader.getRes(_), null);
									e.addChild(w)
								}
							} else e.text == GloableData.getInstance().dGameSystem.vars.getVar(i.index) && e.color === i.color.getColorToUint() || (e.text = GloableData.getInstance().dGameSystem.vars.getVar(i.index), e.color = i.color.getColorToUint());
							var l = this.getControlPoint(i);
							e.x = l.x, e.y = l.y
						}
					} else if (e instanceof ORGSlider) {
						var b = GloableData.getInstance().dGameSystem.vars.getVar(i.index),
							S = GloableData.getInstance().dGameSystem.vars.getVar(i.maxIndex);
						0 == S && (S = 1), e.setValue(b / S);
						var l = this.getControlPoint(i);
						e.x = l.x, e.y = l.y
					}
				}
			}, i.prototype.getControlPoint = function(t) {
				var e = t.isUserVar ? GloableData.getInstance().dGameSystem.vars.getVar(t.x) : t.x,
					i = t.isUserVar ? GloableData.getInstance().dGameSystem.vars.getVar(t.y) : t.y;
				return {
					x: e,
					y: i
				}
			}, i.prototype.clean = function() {
				if (this.controlsArr) for (; this.controlsArr.length > 0;) {
					var t = this.controlsArr.shift();
					t.dispose()
				}
				this.removeAllChild()
			}, i.prototype.reloadUI = function() {
				this.dispose(), this.initBefore()
			}, i.prototype.dispose = function() {
				this.onloadInterComplete = !1, this.loadingInterComplete = !1, this.timeData && TimeManager.getInstance().removeTime(this.timeData), AppFacade.getInstance().delMediatorByName(t.SCustomUIMediator.NAME), EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.off(OEvent.RIGHT_CLICK, this, this.closeView), Laya.stage.off(OEvent.KEY_DOWN, this, this.closeView), this.clean(), this.loadingInter && (this.loadingInter.killSelfEventLine(), this.loadingInter = null), this.onloadInter && (this.onloadInter.killSelfEventLine(), this.onloadInter = null), this.buttonInter && (this.buttonInter.killSelfEventLine(), this.buttonInter = null)
			}, i.F_Index = -1, i
		}(BaseUI);
	t.SCustomUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				return t.call(this, e.NAME, i) || this
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				EventManager.addEventListener(this.view, OEvent.CLICK, this.stopEvent, this)
			}, e.prototype.onViewRemove = function() {
				EventManager.removeEventListener(this.view, OEvent.CLICK, this.stopEvent, this)
			}, e.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.CLICK_SCUI_BUTTON, this, this.onSelect)
			}, e.prototype.onEventCenterRemove = function() {
				EventCenter.removeEventListener(GameEventConstant.CLICK_SCUI_BUTTON, this, this.onSelect)
			}, e.prototype.stopEvent = function(t) {
				t.stopPropagation()
			}, e.prototype.onSelect = function(t) {
				if ((!this.view.buttonInter || this.view.buttonInter.isEnd) && t.tag && t.tag.event.length > 0) {
					var e = new data.DStory(null);
					e.events = t.tag.event;
					for (var i = 0; i < e.events.length; i++) 107 == e.events[i].Code && e.events[i].Argv[0].indexOf("call_pay") > -1 && (this.view.needShowSendFlower = !0);
					this.view.buttonInter ? (this.view.needShowSendFlower = !1, this.view.buttonInter.killSelfEventLine(), this.view.buttonInter = new MainEventLine) : this.view.buttonInter = new MainEventLine, this.view.buttonInter.jumpStory(e)
				}
			}, e.NAME = "SCustomUI", e
		}(Mediator);
	t.SCustomUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t) {
				void 0 === t && (t = -1);
				var i = e.call(this, t) || this;
				return EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, i, i.loadCompelte), UIResouecrLoad.loadSettingUI(), i
			}
			return __extends(i, e), i.prototype.loadCompelte = function(t) {
				t == UIResouecrLoad.SETUI_TYPE && (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.init())
			}, i.prototype.init = function() {
				this.data = GloableData.getInstance().gameMainData.System.Setting, this.layout()
			}, i.prototype.layout = function() {
				this.addChild(new ImageComponent(PreLoader.uiShifter + this.data.backimage.name)), this.data.ShowBGM && (this.bgmSD = new ORGSlider(PreLoader.uiShifter + this.data.barNone.name, PreLoader.uiShifter + this.data.barMove.name), this.bgmSD.x = this.data.BgmX, this.bgmSD.y = this.data.BgmY, this.addChild(this.bgmSD)), this.data.ShowBGM && (this.seSD = new ORGSlider(PreLoader.uiShifter + this.data.barNone.name, PreLoader.uiShifter + this.data.barMove.name), this.seSD.x = this.data.SeX, this.seSD.y = this.data.SeY, this.addChild(this.seSD)), this.data.ShowVoice && (this.voiceSD = new ORGSlider(PreLoader.uiShifter + this.data.barNone.name, PreLoader.uiShifter + this.data.barMove.name), this.voiceSD.x = this.data.VoiceX, this.voiceSD.y = this.data.VoiceY, this.addChild(this.voiceSD)), AppFacade.getInstance().registerMediator(new t.SettingUIMediator(this))
			}, i.prototype.initButton = function() {
				this.data.ShowFull && (this.winBtn = this.btnFac(this.data.winButton, 1, !0), this.fullBtn = this.btnFac(this.data.fullButton, 2, !1)), this.data.ShowAuto && (this.autoOnBtn = this.btnFac(this.data.AutoOn, 3, !GloableData.getInstance().autoPlay), this.autoOFFBtn = this.btnFac(this.data.AutoOff, 4, GloableData.getInstance().autoPlay)), this.data.ShowTitle && (this.titleBtn = this.btnFac(this.data.TitleButton, 5)), this.data.closeButton && (this.closeBtn = this.btnFac(this.data.closeButton, 6))
			}, i.prototype.btnFac = function(t, e, i) {
				void 0 === e && (e = 0), void 0 === i && (i = !1);
				var a = GloableData.getInstance().gameMainData.System.Buttons[t.index];
				if (!a.image1.IsNil() && !a.image2.IsNil()) {
					var n = new ORGButton("Graphics/Button/" + a.image1, "Graphics/Button/" + a.image2, GameEventConstant.CLICK_SETTING_VIEW_BUTTON, "", i);
					return n.postion = {
						x: t.x,
						y: t.y
					}, n.index = GloableStaticData["TITLE_BUTTON_TYPE_" + e], this.addChild(n), n
				}
			}, i.prototype.setSlider = function(t, e) {
				switch (t) {
				case 1:
					this.data.ShowBGM && this.bgmSD.setValue(e);
					break;
				case 2:
					this.data.ShowSE && this.seSD.setValue(e);
					break;
				case 3:
					this.data.ShowVoice && this.voiceSD.setValue(e)
				}
			}, i.prototype.switchFullScreen = function(t) {
				this.data.ShowFull && (this.winBtn && (this.winBtn.toggle = t, this.winBtn.mouseEnabled = t), this.fullBtn && (this.fullBtn.toggle = !t, this.fullBtn.mouseEnabled = !t))
			}, i.prototype.switchAutoPlay = function(t) {
				this.data.ShowAuto && (this.autoOnBtn && (this.autoOnBtn.toggle = !t, this.autoOnBtn.mouseEnabled = !t), this.autoOFFBtn && (this.autoOFFBtn.toggle = t, this.autoOFFBtn.mouseEnabled = t))
			}, i.prototype.dispose = function() {
				this.bgmSD && (this.bgmSD.dispose(), this.bgmSD = null), this.data.ShowFull && this.fullBtn && this.winBtn && (this.fullBtn.dispose(), this.winBtn.dispose(), this.fullBtn = null, this.winBtn = null), this.seSD && (this.seSD.dispose(), this.seSD = null), this.voiceSD && (this.voiceSD.dispose(), this.voiceSD = null), this.titleBtn && (this.titleBtn.dispose(), this.titleBtn = null), this.fullBtn && (this.fullBtn.dispose(), this.fullBtn = null), this.data.ShowAuto && this.autoOnBtn && this.autoOFFBtn && (this.autoOFFBtn.dispose(), this.autoOnBtn.dispose(), this.autoOnBtn = null, this.autoOFFBtn = null), this.closeBtn && (this.closeBtn.dispose(), this.closeBtn = null), e.prototype.dispose.call(this), this.removeAllChild()
			}, i
		}(BaseUI);
	t.SettingUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				var a = t.call(this, e.NAME, i) || this;
				return a.data = GloableData.getInstance().gameMainData.System, a
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				this.view.initButton(), this.view.winBtn && EventManager.addEventListener(this.view.winBtn, OEvent.CLICK, this.setScreenWin, this), this.view.fullBtn && EventManager.addEventListener(this.view.fullBtn, OEvent.CLICK, this.setScreenFull, this), this.view.autoOnBtn && EventManager.addEventListener(this.view.autoOnBtn, OEvent.CLICK, this.setAutoOn, this), this.view.autoOFFBtn && EventManager.addEventListener(this.view.autoOFFBtn, OEvent.CLICK, this.setAutoOff, this), this.view.titleBtn && EventManager.addEventListener(this.view.titleBtn, OEvent.CLICK, this.backTitle, this), this.view.closeBtn && EventManager.addEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this), this.view.bgmSD && EventManager.addEventListener(this.view.bgmSD, OEvent.CHANGED, this.onBGMChange, this), this.view.seSD && EventManager.addEventListener(this.view.seSD, OEvent.CHANGED, this.onSEChange, this), this.view.voiceSD && EventManager.addEventListener(this.view.voiceSD, OEvent.CHANGED, this.onVoiceChange, this), this.setSliderValue()
			}, e.prototype.onViewRemove = function() {
				this.view.winBtn && EventManager.removeEventListener(this.view.winBtn, OEvent.CLICK, this.setScreenWin, this), this.view.fullBtn && EventManager.removeEventListener(this.view.fullBtn, OEvent.CLICK, this.setScreenFull, this), this.view.autoOnBtn && EventManager.removeEventListener(this.view.autoOnBtn, OEvent.CLICK, this.setAutoOn, this), this.view.autoOFFBtn && EventManager.removeEventListener(this.view.autoOFFBtn, OEvent.CLICK, this.setAutoOff, this), this.view.titleBtn && EventManager.removeEventListener(this.view.titleBtn, OEvent.CLICK, this.backTitle, this), this.view.closeBtn && EventManager.removeEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this), this.view.bgmSD && EventManager.removeEventListener(this.view.bgmSD, OEvent.CHANGED, this.onBGMChange, this), this.view.seSD && EventManager.removeEventListener(this.view.seSD, OEvent.CHANGED, this.onSEChange, this), this.view.voiceSD && EventManager.removeEventListener(this.view.voiceSD, OEvent.CHANGED, this.onVoiceChange, this)
			}, e.prototype.onEventCenterRegister = function() {}, e.prototype.onEventCenterRemove = function() {}, e.prototype.stopEvent = function(t) {
				t.stopPropagation()
			}, e.prototype.onBGMChange = function(t) {
				mgr.AudioMgr.instance.sysVolume(audio.ChannelEnum.bg, t)
			}, e.prototype.onSEChange = function(t) {
				mgr.AudioMgr.instance.sysVolume(audio.ChannelEnum.fx, t), mgr.AudioMgr.instance.sysVolume(audio.ChannelEnum.bfx, t)
			}, e.prototype.onVoiceChange = function(t) {
				mgr.AudioMgr.instance.sysVolume(audio.ChannelEnum.vo, t)
			}, e.prototype.setSliderValue = function() {
				this.view.switchFullScreen(OrgWeb.getInstance().getScreenState()), this.view.switchAutoPlay(GloableData.getInstance().autoPlay), this.view.setSlider(1, window.channels[0].sysVol), this.view.setSlider(2, window.channels[1].sysVol), this.view.setSlider(3, window.channels[3].sysVol)
			}, e.prototype.setScreenWin = function(t) {
				this.view.switchFullScreen(!1), OrgWeb.getInstance().exitOrFullScreen(!0)
			}, e.prototype.setScreenFull = function(t) {
				this.view.switchFullScreen(!0), OrgWeb.getInstance().exitOrFullScreen(!0)
			}, e.prototype.setAutoOn = function(t) {
				this.view.switchAutoPlay(!0), GloableData.getInstance().autoPlay = !0
			}, e.prototype.setAutoOff = function(t) {
				this.view.switchAutoPlay(!1), GloableData.getInstance().autoPlay = !1
			}, e.prototype.backTitle = function(t) {
				t.stopPropagation(), UIManager.getInstance().closeView(this.name), GloableData.getInstance().iMain.gameOver()
			}, e.prototype.closeView = function(t) {
				t.stopPropagation(), -1 !== this.view.openViewIndex ? UIManager.getInstance().showViewByIndex(this.view.openViewIndex, this.view.eventLine, -1) : UIManager.getInstance().closeView(this.name)
			}, e.NAME = "settingUIMediator", e
		}(Mediator);
	t.SettingUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), SFloatButtonUI = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.controlsArr = [], e.isAdd = !1, e.lineHeight = 0, e._btn_url = "Graphics/Button/", e._sp_url = "Graphics/Other/", e.data = GloableData.getInstance().gameMainData.DFloatButton, e.mouseEnabled = !0, e.mouseThrough = !0, e.init(), EventManager.addEventListener(e, OEvent.CLICK, e.stopEvent, e), EventManager.addEventListener(e, OEvent.MOUSE_DOWN, e.stopEvent, e), EventCenter.addEventListener(GameEventConstant.CLICK_SFLOAT_BUTTON, e, e.click), e.lineHeight = Math.ceil(GloableData.getInstance().textLineHeight / 1.5), e
	}
	return __extends(e, t), e.prototype.stopEvent = function(t) {
		t.stopPropagation()
	}, e.prototype.init = function() {
		if (this.data) for (var t = 0; t < this.data.length; t++) for (var e = this.data[t], i = 0; i < e.items.length; i++) this.loadControls(e.items[i], e)
	}, e.getInstance = function() {
		return null == e._instance && (e._instance = new e), e._instance
	}, e.prototype.showUI = function() {
		this.data && (e.floatStatus = 1, UIManager.getInstance().sfloatLayer._childs.indexOf(this) < 0 && (this.isAdd = !1), this.isAdd || (UIManager.getInstance().sfloatLayer.addChild(this), this.isAdd = !0), this.visible = !0)
	}, e.prototype.hideUI = function() {
		this.data && (this.visible = !1)
	}, e.prototype.loadControls = function(t, e) {
		var i, a, n = null;
		switch (t.type) {
		case 0:
			if (i = t.isUserString ? GloableData.getInstance().dGameSystem.dGameString.getVar(t.indexOfStr) : t.image, n = new ORGButton("", "", GameEventConstant.CLICK_SFLOAT_BUTTON), i.length > 0) {
				var s = this._sp_url + i;
				s = s.replace(/\\/g, "/"), s = s.replace(/\/\//g, "/"), n.updateButton(s, s)
			}
			a = this.getControlPoint(t, e), n.postion = a, this.addChild(n);
			break;
		case 1:
			var o = 0,
				r = 0,
				h = 0;
			n = utils.getOText(), n.color = t.color.getColorToUint();
			var l = this.lineHeight;
			i = GloableData.getInstance().dGameSystem.dGameString.getVar(t.stringIndex), n.message = i;
			for (var c = StringUtil.getAnalysisText(i, t.color.getColorToUint()); c.configs.length > 0;) {
				for (var g = c.configs.shift(), u = g.textNum; u > 0;) {
					u--;
					var p = c.texts.shift();
					p.x = o, p.y = r, o += p.width, o > h && (h = o), n.addtext(p)
				}
				g.newline && (r += l, o = 0)
			}
			n.width = h, n.height = r + l, a = this.getControlPoint(t, e), n.x = a.x, n.y = a.y, this.addChild(n);
			break;
		case 2:
			n = utils.getOText(), n.text = GloableData.getInstance().dGameSystem.vars.getVar(t.varIndex), n.color = t.color.getColorToUint(), n.fontSize = GloableData.getInstance().gameMainData.System.FontSize, a = this.getControlPoint(t, e), n.x = a.x, n.y = a.y, n.visible = !0, this.addChild(n)
		}
		n && (n.tag = t, this.controlsArr.push({
			control: n,
			dfloat: e
		}))
	}, e.prototype.click = function(t) {
		t.oevent && t.oevent.stopPropagation(), this.getPixItem(t.target)
	}, e.prototype.getPixItem = function(t) {
		if (1 == e.floatStatus && !UIManager.getInstance().hasViewShow()) for (var i = this.controlsArr.length - 1; i >= 0; i--) {
			var a = this.controlsArr[i].control;
			if (a === t) {
				this.runClickLine(this.controlsArr[i].dfloat);
				break
			}
		}
		return !1
	}, e.prototype.updateControls = function() {
		for (var t in this.controlsArr) {
			var e = this.controlsArr[t].control,
				i = this.controlsArr[t].dfloat,
				a = e.tag;
			if (e instanceof ORGButton) {
				var n = a.isUserString ? GloableData.getInstance().dGameSystem.dGameString.getVar(a.indexOfStr) : a.image;
				if (n.length > 0) {
					var s = this._sp_url + n;
					s = s.replace(/\\/g, "/"), s = s.replace(/\/\//g, "/"), e.image1Path != s && e.updateButton(s, s)
				} else e.updateButton("", "");
				var o = this.getControlPoint(a, i);
				e.postion = o
			} else if (e instanceof OText) if (1 == a.type) {
				var r = 0,
					h = 0,
					l = 0,
					c = this.lineHeight,
					n = GloableData.getInstance().dGameSystem.dGameString.getVar(a.stringIndex);
				if (e.message != n || e.color != a.color.getColor()) {
					e.message = n;
					for (var g = StringUtil.getAnalysisText(n, a.color.getColorToUint()), u = new Array; g.configs.length > 0;) {
						for (var p = g.configs.shift(), d = p.textNum; d > 0;) {
							d--;
							var m = g.texts.shift();
							m.x = r, m.y = h, r += m.width, r > l && (l = r), u.push(m)
						}
						p.newline && (h += c, r = 0)
					}
					e.width = l, e.height = h + c, e.updateText(u), e.color = a.color.getColor()
				}
				var o = this.getControlPoint(a, i);
				e.x = o.x, e.y = o.y
			} else if (2 == a.type) {
				e.text != GloableData.getInstance().dGameSystem.vars.getVar(a.varIndex) && (e.text = GloableData.getInstance().dGameSystem.vars.getVar(a.varIndex)), e.color = a.color.getColor();
				var o = this.getControlPoint(a, i);
				e.x = o.x, e.y = o.y
			}
		}
	}, e.prototype.runClickLine = function(t) {
		if (t.event.length > 0) {
			var e = new data.DStory(null);
			e.events = t.event, GloableData.getInstance().pauseCurrentLine();
			var i = new MainEventLine;
			i.parentLine = GloableData.getInstance().currentLine, i.jumpStory(e)
		}
	}, e.prototype.getControlPoint = function(t, e) {
		var i = t.x,
			a = t.y;
		return {
			x: i + e.x,
			y: a + e.y
		}
	}, e.floatStatus = 0, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e() {
				var e = t.call(this) || this;
				return e.isInit = !1, e.storyData = null, e
			}
			return __extends(e, t), e.prototype.setData = function(t) {
				this.dataSource = t, this.itemData = this.dataSource.data, this.image_url = this.dataSource.image_url, this.bg_1_url = this.dataSource.bg_1_url, this.bg_2_url = this.dataSource.bg_2_url, this.index = this.dataSource.index, this.soundName = this.dataSource.sound_name
			}, e.prototype.init = function(t) {
				this.storyData = t, this.isInit = !0, this.bg = new ORGButton(this.bg_1_url, this.bg_2_url, "", ""), this.bg.postion = null, this.bg.index = this.index, this.soundNameTxt = utils.getOText(), this.soundNameTxt.x = this.storyData.nx, this.soundNameTxt.y = this.storyData.ny, EventManager.addEventListener(this, OEvent.CLICK, this.clickItem, this), EventManager.addEventListener(this, OEvent.MOUSE_OVER, this.showMsg, this), EventManager.addEventListener(this, OEvent.MOUSE_OUT, this.hideMsg, this), this.addChild(this.bg), this.addChild(this.soundNameTxt), this.flushItem()
			}, e.prototype.clickItem = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_BGM_UI_ITEM, this.index))
			}, e.prototype.flushItem = function() {
				this.setItemValue()
			}, e.prototype.setItemValue = function() {
				this.soundNameTxt.text = this.soundName
			}, e.prototype.update = function(t) {
				this.setData(t), this.flushItem()
			}, e.prototype.showMsg = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_BGM_UI_ITEM_MSG, this))
			}, e.prototype.hideMsg = function() {
				EventCenter.dispatchEvent(new GameEvent(GameEventConstant.HIDE_CG_UI_ITEM_MSG, this))
			}, e.prototype.dispose = function() {
				EventManager.removeEventListener(this, OEvent.MOUSE_OVER, this.showMsg, this), EventManager.removeEventListener(this, OEvent.MOUSE_OUT, this.hideMsg, this), EventManager.removeEventListener(this, OEvent.CLICK, this.clickItem, this), this.removeChildren()
			}, e
		}(OBox);
	t.StoryItem = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t, i, a) {
				void 0 === t && (t = !1), void 0 === i && (i = -1), void 0 === a && (a = null);
				var n = e.call(this, i) || this;
				return n.titleOpen = t, n.listData = [], n.data = a, EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, n, n.loadCompelte), UIResouecrLoad.loadStoryUI(a), n
			}
			return __extends(i, e), i.prototype.loadCompelte = function(t) {
				t == UIResouecrLoad.BGMUI_TYPE && (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.init())
			}, i.prototype.init = function() {
				this.data.backImage.name && (this.bg = new ImageComponent("Graphics/UI/" + this.data.backImage.name), this.addChild(this.bg)), this.showStoryPic = new ImageComponent(""), this.showStoryPic.x = this.data.px, this.showStoryPic.y = this.data.py, this.addChild(this.showStoryPic), this.BGMList = new OList, this.BGMList.itemRender = t.StoryItem, this.BGMList.x = this.data.viewport.x, this.BGMList.y = this.data.viewport.y, this.BGMList.width = this.data.viewport.width, this.BGMList.height = this.data.viewport.height, this.BGMList.repeatX = this.data.column, this.BGMList.spaceX = this.data.spanCol, this.BGMList.spaceY = this.data.spanRow, this.BGMList.vScrollBarSkin = "";
				var e = this.data.storyList.length,
					i = GloableData.getInstance().gameMainData.System.Buttons[this.data.selectButton.index];
				if (this.showImageArr = [], this.data) {
					var a = GloableData.getInstance().getCollectDataById(this.data.unid);
					a && (this.showImageArr = a)
				}
				for (var n = 0; e > n; ++n) {
					var s = this.data.noName;
					this.showImageArr.indexOf(n) > -1 && (s = this.data.storyList[n].name);
					var o = {
						bg_1_url: "Graphics/Button/" + i.image1.name,
						bg_2_url: "Graphics/Button/" + i.image2.name,
						sound_name: s,
						index: n,
						data: this.data.storyList[n]
					};
					this.listData.push(o)
				}
				this.BGMList.array = this.listData, this.addChild(this.BGMList), this.message = utils.getOText(), this.message.x = this.data.mx, this.message.y = this.data.my, this.addChild(this.message), this.message.visible = !1;
				var r = GloableData.getInstance().gameMainData.System.Buttons[this.data.closeButton.index];
				this.closeBtn = new ORGButton("Graphics/Button/" + r.image1, "Graphics/Button/" + r.image2, r.name), this.closeBtn.postion = {
					x: this.data.closeButton.x,
					y: this.data.closeButton.y
				}, this.addChild(this.closeBtn), AppFacade.getInstance().registerMediator(new t.StoryUIMediator(this))
			}, i.prototype.makerBrowseImagePath = function(t) {
				if (t.length <= 0) return "";
				var e = t.lastIndexOf("."),
					i = t.substring(0, e),
					a = t.substring(e);
				return i + "_S" + a
			}, i.prototype.dispose = function() {
				for (var t in this.BGMList.cells) {
					var i = this.BGMList.cells[t];
					i.dispose()
				}
				EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.bg && this.bg.dispose(), this.closeBtn && this.closeBtn.dispose(), this.BGMList.removeChildren(), this.showStoryPic && this.showStoryPic.dispose(), e.prototype.dispose.call(this), this.removeChildren()
			}, i
		}(BaseUI);
	t.StoryUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(t) {
			function e(i) {
				var a = t.call(this, e.NAME, i) || this;
				return a.tmp_url = "", a.pathUrl = "", a
			}
			return __extends(e, t), Object.defineProperty(e.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), e.prototype.onViewRegister = function() {
				this.view.BGMList.renderHandler = OHandler.create(this, this.renderItem, null, !1), EventManager.addEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onViewRemove = function() {
				this.view.BGMList.renderHandler = null, EventManager.removeEventListener(this.view.closeBtn, OEvent.CLICK, this.closeView, this)
			}, e.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.SHOW_CG_UI_ITEM, this, this.jumpStory), EventCenter.addEventListener(GameEventConstant.SHOW_CG_UI_ITEM_MSG, this, this.showImageMsg), EventCenter.addEventListener(GameEventConstant.HIDE_CG_UI_ITEM_MSG, this, this.hideImageMsg)
			}, e.prototype.onEventCenterRemove = function() {
				EventCenter.removeEventListener(GameEventConstant.SHOW_CG_UI_ITEM, this, this.jumpStory), EventCenter.removeEventListener(GameEventConstant.SHOW_CG_UI_ITEM_MSG, this, this.showImageMsg), EventCenter.removeEventListener(GameEventConstant.HIDE_CG_UI_ITEM_MSG, this, this.hideImageMsg)
			}, e.prototype.showImageMsg = function(t) {
				this.view.showStoryPic.clean(!1), this.view.message.text = "", this.view.showImageArr.indexOf(t.index) > -1 && (this.view.message.text = t.itemData.message, this.view.message.visible = this.view.data.showMsg, t.itemData.picPath.name && (this.view.showStoryPic.visible = !0, this.view.showStoryPic.update("Graphics/System/" + t.itemData.picPath.name)))
			}, e.prototype.jumpStory = function(t) {
				if (this.view.showImageArr.indexOf(t) > -1) {
					var e = this.view.data.storyList[t].remainData,
						i = this.view.data.storyList[t].storyID;
					if (i > 0) {
						if (GloableData.getInstance().isCollect) {
							var a = new HPLockTip("正在剧情鉴赏中，无法观看其它剧情。", !0);
							return void UIManager.getInstance().popMessageLayer.addChild(a)
						}
						UIManager.getInstance().closeView(view.CollectSystemUIMediator.NAME), GloableData.getInstance().setCollectSaveData(e), GloableData.getInstance().iMain.gameOver(!1), GloableData.getInstance().iMain.jumpStory(i)
					}
				}
			}, e.prototype.hideImageMsg = function(t) {
				this.view.message.text = "", this.view.message.text == t && (this.view.message.visible = !1), this.view.showStoryPic.visible = !1, this.view.showStoryPic.update("")
			}, e.prototype.renderItem = function(t, e) {
				t.isInit ? t.update(this.view.listData[e]) : (t.setData(this.view.listData[e]), t.init(this.view.data))
			}, e.prototype.closeView = function(t) {
				t.stopPropagation(), UIManager.getInstance().closeView(this.name, !1), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.SHOW_COLLECT_VIEW))
			}, e.NAME = "StoryUIMediator", e
		}(Mediator);
	t.StoryUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t) {
				void 0 === t && (t = -1);
				var i = e.call(this, t) || this;
				return EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, i, i.loadCompelte), UIResouecrLoad.loadSysMenuUI(), i
			}
			return __extends(i, e), i.prototype.loadCompelte = function(t) {
				t == UIResouecrLoad.SYSMENUUI_TYPE && this.init()
			}, i.prototype.init = function() {
				this.buttons = new Array, this.types = ["Save", "Load", "Replay", "Auto", "System", "Back"], this.data = GloableData.getInstance().gameMainData.System.GameMenu, this.createBack(), this.createButton()
			}, i.prototype.createBack = function() {
				this.backImage = new ImageComponent, "" != this.data.backImage.name && this.backImage.updateURL("Graphics/UI/" + this.data.backImage.name), this.addChild(this.backImage)
			}, i.prototype.createButton = function() {
				for (var e = 0; e < this.types.length; e++) {
					var i = GloableData.getInstance().gameMainData.System.Buttons[this.data.buttons[e].index];
					if ("" != i.image1.name || "" != i.image2.name) {
						var a = "Graphics/Button/" + i.image1.name,
							n = "Graphics/Button/" + i.image2.name,
							s = new ORGButton(a, n, GameEventConstant.CLICK_SYSTEM_MENU_BUTTON, "");
						s.index = e, this[this.types[e] + "Btn"] = s, this.addChild(s), s.postion = {
							x: this.data.buttons[e].x,
							y: this.data.buttons[e].y
						}, this.buttons.push(s)
					}
				}
				UIManager.getInstance().isSCUIShow = !0, AppFacade.getInstance().registerMediator(new t.SysMenuUIMediator(this))
			}, i.prototype.dispose = function() {
				if (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.buttons) for (; this.buttons.length > 0;) {
					var t = this.buttons.shift();
					t.dispose()
				}
				e.prototype.dispose.call(this), this.removeAllChild()
			}, i
		}(BaseUI);
	t.SysMenuUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t) {
				return e.call(this, i.NAME, t) || this
			}
			return __extends(i, e), Object.defineProperty(i.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), i.prototype.onViewRegister = function() {
				this.view.SaveBtn && EventManager.addEventListener(this.view.SaveBtn, OEvent.CLICK, this.openSaveWindow, this), this.view.LoadBtn && EventManager.addEventListener(this.view.LoadBtn, OEvent.CLICK, this.openSaveWindow, this), this.view.ReplayBtn && EventManager.addEventListener(this.view.ReplayBtn, OEvent.CLICK, this.openReplayWindow, this), this.view.AutoBtn && EventManager.addEventListener(this.view.AutoBtn, OEvent.CLICK, this.setAutoMessage, this), this.view.SystemBtn && EventManager.addEventListener(this.view.SystemBtn, OEvent.CLICK, this.openSetWindow, this), this.view.BackBtn && EventManager.addEventListener(this.view.BackBtn, OEvent.CLICK, this.backGame, this)
			}, i.prototype.onViewRemove = function() {
				this.view.SaveBtn && EventManager.removeEventListener(this.view.SaveBtn, OEvent.CLICK, this.openSaveWindow, this), this.view.LoadBtn && EventManager.removeEventListener(this.view.LoadBtn, OEvent.CLICK, this.openSaveWindow, this), this.view.ReplayBtn && EventManager.removeEventListener(this.view.ReplayBtn, OEvent.CLICK, this.openReplayWindow, this), this.view.AutoBtn && EventManager.removeEventListener(this.view.AutoBtn, OEvent.CLICK, this.setAutoMessage, this), this.view.SystemBtn && EventManager.removeEventListener(this.view.SystemBtn, OEvent.CLICK, this.openSetWindow, this), this.view.BackBtn && EventManager.removeEventListener(this.view.BackBtn, OEvent.CLICK, this.backGame, this)
			}, i.prototype.onEventCenterRegister = function() {}, i.prototype.onEventCenterRemove = function() {}, i.prototype.openSaveWindow = function(e) {
				var i = !1;
				e.currentTarget === this.view.SaveBtn && (i = !0), e.stopPropagation(), console.log("openSaveWindow", i), this.view.visible = !1, UIManager.getInstance().showView(new t.SaveFileUI(!1, i, GloableStaticData.VIEW_INDEX_MENU), t.SaveFileUIMediator.NAME)
			}, i.prototype.openReplayWindow = function(e) {
				e.stopPropagation(), console.log("openReplayWindow"), this.view.visible = !1, UIManager.getInstance().showView(new t.ReplayUI(GloableStaticData.VIEW_INDEX_MENU), t.ReplayUIMediator.NAME)
			}, i.prototype.setAutoMessage = function(e) {
				e.stopPropagation(), console.log("setAutoMessage"), GloableData.getInstance().autoPlay ? GloableData.getInstance().autoPlay = !1 : GloableData.getInstance().autoPlay = !0, GloableData.getInstance().isShowSysMenu = !1, UIManager.getInstance().closeView(t.SysMenuUIMediator.NAME), EventCenter.dispatchEvent(new GameEvent(GameEventConstant.AUTO_PLAY))
			}, i.prototype.openSetWindow = function(e) {
				e.stopPropagation(), console.log("openSetWindow"), this.view.visible = !1, UIManager.getInstance().showView(new t.SettingUI(GloableStaticData.VIEW_INDEX_MENU), t.SettingUIMediator.NAME)
			}, i.prototype.backGame = function(t) {
				t.stopPropagation(), GloableData.getInstance().isShowSysMenu = !1, UIManager.getInstance().closeAllView(!0)
			}, i.NAME = "SysMenuUI", i
		}(Mediator);
	t.SysMenuUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i() {
				var t = e.call(this) || this;
				return EventCenter.addEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, t, t.loadCompelte), UIResouecrLoad.loadTitleUI(), t
			}
			return __extends(i, e), i.prototype.loadCompelte = function(t) {
				t == UIResouecrLoad.TITLEUI_TYPE && (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte), this.init())
			}, i.prototype.init = function() {
				this.buttons = [], this.titleData = GloableData.getInstance().gameMainData.System.Title;
				var t;
				t = GloableData.getInstance().gameInfo.isPc ? this.getPcUrl() + "/res/logo/" + GloableData.getInstance().gameMainData.Headr.GWidth + "x" + GloableData.getInstance().gameMainData.Headr.GHeight + ".jpg" : "res/logo/" + GloableData.getInstance().gameMainData.Headr.GWidth + "x" + GloableData.getInstance().gameMainData.Headr.GHeight + ".jpg", this.logo = new ImageComponent(t, 1, 1), this.addChild(this.logo), this.logo.alpha = 0, this.logoTween = OTween.to(this.logo, {
					alpha: 1
				}, 700, null, OHandler.create(this, this.logoShowComplete, null, !0)), this.showUI()
			}, i.prototype.getPcUrl = function() {
				return window.location.href.replace("index.html", "")
			}, i.prototype.logoShowComplete = function() {
				this.logoTween = OTween.to(this.logo, {
					alpha: 0
				}, 700, null, OHandler.create(this, function() {
					this.bg || (this.bg = new ImageComponent("Graphics/Background/" + this.titleData.titleImagle, 1, 1), this.addChild(this.bg), AppFacade.getInstance().registerMediator(new t.TitleUIMediator(this)))
				}, null, !0)), this.mouseEnabled = !0, "" !== this.titleData.bgm.FileName.name && mgr.AudioMgr.instance.play(audio.ChannelEnum.bg, "BGM/" + this.titleData.bgm.FileName.name, this.titleData.bgm.Volume)
			}, i.prototype.logoShowImage = function() {
				OTween.clearTween(this.bg), this.logoTween = OTween.to(this.logo, {
					alpha: 1
				}, 1400, null, OHandler.create(this, this.logoShowComplete, null, !0))
			}, i.prototype.showUI = function() {
				this.logo.alpha = 0, OTween.clearTween(this.logo), OTween.clearTween(this.bg), this.logoTween = OTween.to(this.logo, {
					alpha: 1
				}, 700, null, OHandler.create(this, this.logoShowImage, null, !0))
			}, i.prototype.initButton = function() {
				for (var t = 0; t < this.titleData.buttons.length; t++) {
					var e = GloableData.getInstance().gameMainData.System.Buttons[this.titleData.buttons[t].index];
					if (!e.image1.IsNil() && !e.image2.IsNil()) {
						var i = new ORGButton("Graphics/Button/" + e.image1, "Graphics/Button/" + e.image2, GameEventConstant.CLICK_TITLE_VIEW_BUTTON);
						i.postion = {
							x: this.titleData.buttons[t].x,
							y: this.titleData.buttons[t].y
						}, i.index = GloableStaticData["TITLE_BUTTON_TYPE_" + (t + 1)], this.buttons.push(i), this.addChild(i)
					}
				}
			}, i.prototype.hide = function() {
				this.visible = !1, this.logoTween && this.logoTween.clear()
			}, i.prototype.pauseTween = function() {
				this.logoTween && this.logoTween.pause()
			}, i.prototype.resumeTween = function() {
				this.logoTween && this.logoTween.resume()
			}, i.prototype.dispose = function() {
				for (EventCenter.removeEventListener(GameEventConstant.LOAD_UI_RESOURCE_COMPLETE, this, this.loadCompelte); this.buttons.length > 0;) {
					var t = this.buttons.shift();
					t.dispose()
				}
				this.logoTween && this.logoTween.clear(), e.prototype.dispose.call(this), this.removeAllChild()
			}, i
		}(BaseUI);
	t.TitleUI = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), view;
!
function(t) {
	var e = function(e) {
			function i(t) {
				return e.call(this, i.NAME, t) || this
			}
			return __extends(i, e), Object.defineProperty(i.prototype, "view", {
				get: function() {
					return this.viewComponent
				},
				enumerable: !0,
				configurable: !0
			}), i.prototype.onViewRegister = function() {
				this.view.initButton(), EventManager.addEventListener(this.view, OEvent.CLICK, this.stopEvent, this)
			}, i.prototype.onViewRemove = function() {
				EventManager.removeEventListener(this.view, OEvent.CLICK, this.stopEvent, this)
			}, i.prototype.onEventCenterRegister = function() {
				EventCenter.addEventListener(GameEventConstant.CLICK_TITLE_VIEW_BUTTON, this, this.clickButton)
			}, i.prototype.onEventCenterRemove = function() {
				EventCenter.removeEventListener(GameEventConstant.CLICK_TITLE_VIEW_BUTTON, this, this.clickButton)
			}, i.prototype.stopEvent = function(t) {
				t.stopPropagation()
			}, i.prototype.clickButton = function(e) {
				switch (e.index) {
				case GloableStaticData.TITLE_BUTTON_TYPE_1:
					UIManager.getInstance().closeView(this.name, !1), mgr.AudioMgr.instance.fadeOut(audio.ChannelEnum.bg, .24), UIManager.getInstance().orgWebFreeLayer.getFreeTime(), GloableData.getInstance().iMain.jumpStoryCallBack(GloableData.getInstance().gameMainData.System.StartStoryId);
					break;
				case GloableStaticData.TITLE_BUTTON_TYPE_2:
					UIManager.getInstance().showView(new t.SaveFileUI(!0, !1), t.SaveFileUIMediator.NAME);
					break;
				case GloableStaticData.TITLE_BUTTON_TYPE_3:
					UIManager.getInstance().showView(new t.CGUI(!0), t.CGUIMediator.NAME);
					break;
				case GloableStaticData.TITLE_BUTTON_TYPE_4:
					try {
						UIManager.getInstance().showView(new t.BGMUI(!0), t.BGMUIMediator.NAME)
					} catch (e) {
						console.error(e)
					}
					break;
				case GloableStaticData.TITLE_BUTTON_TYPE_5:
					UIManager.getInstance().showView(new t.SettingUI, t.SettingUIMediator.NAME);
					break;
				case GloableStaticData.TITLE_BUTTON_TYPE_6:
				}
			}, i.NAME = "TitleUIMediator", i
		}(Mediator);
	t.TitleUIMediator = e
}(view || (view = {}));
var __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), ADUI = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.silverVip = HttpURL.M_M_SERVER_URL + "home/pay", e.adUIend = !1, e.adImageLoadEnd = !1, e.noAd = !1, e.adLoading = !1, e.isVip = !1, e
	}
	return __extends(e, t), e.getInstance = function() {
		return null == e._instance && (e._instance = new e), e._instance
	}, e.prototype.init = function() {
		this.adUIend = !1, this.iconvip = GloableData.getInstance().serverPath + "res/adList/iconvip.png", this.gGameWidth = GloableData.getInstance().gameInfo.gGameWidth, this.gGameHeight = GloableData.getInstance().gameInfo.gGameHeight, this.screenZoom = this.getScreenZoom();
		var t = OrgWeb.getInstance().getUserInfos() || {
			vip_level: 0,
			screen_game_ad: 0
		},
			e = HttpURL.Ajax_Url.GAT_AD_List + (this.gGameWidth > this.gGameHeight ? "" : "?vertical=1");
		/*Sam* /
		if (OrgWeb.getInstance().getLoginStatus()) {
			var i = parseInt(t.vip_level.toString()) || 0,
				a = parseInt(t.screen_game_ad.toString()) || 0;
			1 != i || 1 == i && 0 == a ? (AjaxManager.getInstance().sendAjaxGet(e, this, this.getAdAjaxFn), this.adLoading = !0) : this.isVip = this.noAd = !0
		} else AjaxManager.getInstance().sendGetAjaxJSONP(e, this.getAdAjaxFn, this), this.adLoading = !0
		/*Sam*/
	}, e.prototype.getAdAjaxFn = function(t) {
		-1e4 != t && t && 1 == parseInt(t.status) ? (this.adurl = t.data.ad.adurl, this.imgurl = t.data.ad.imgurl, this.adViewShow()) : (this.adurl = "", this.adLoading = !1, this.noAd = !0, this.adEnd())
	}, e.prototype.vipViewShow = function() {
		if (this.vipView = new OSprite, this.gGameWidth < this.gGameHeight) {
			var t = GloableData.getInstance().serverPath + "res/adList/angadxssb.png";
			this.vipView.loadImage(t, 0, 0, 520 / this.screenZoom, 55 / this.screenZoom), this.vipView.width = 520 / this.screenZoom
		} else {
			var e = GloableData.getInstance().serverPath + "res/adList/angadxs.png";
			this.vipView.loadImage(e, 0, 0, 790, 55), this.vipView.width = 790
		}
		this.vipView.height = 55, this.vipView.x = (this.gGameWidth - this.vipView.width) / 2, this.vipView.y = this.gGameHeight - this.vipView.height - 20, this.vipView.addEventLisner(OEvent.CLICK, this, this.vipViewClick), this.vipViewRunTimer()
	}, e.prototype.getScreenZoom = function() {
		var t;
		return t = 540 == this.gGameWidth && 960 == this.gGameHeight ? 540 / 520 : 540 / this.gGameHeight
	}, e.prototype.adViewShow = function(t) {
		var e = this;
		void 0 === t && (t = !1), this.adView = new OSprite, this.adViewBg = new OSprite;
		var i = (GloableData.getInstance().serverPath + "res/adList/angad.png", Laya.stage.width),
			a = Laya.stage.height;
		Laya.loader.on(OEvent.ERROR, this, this.onError), this.adView.loadImage(this.imgurl, 0, 0, 0, 0, OHandler.create(this, function(t) {
			e.adImageLoadEnd = !0, e.adView.mask = new OSprite, e.adView.x = (Laya.stage.width - e.adView.width) / 2, e.adView.y = i > a ? 960 >= i ? 78 : 130 : 960 >= a ? 126 : 190, e.adView.autoSize = !0, e.adView.name = "adView";
			var n = 6,
				s = e.adView.width,
				o = e.adView.height;
			e.adView.mask.graphics.drawPath(0, 0, [
				["moveTo", n, 0],
				["lineTo", s - n, 0],
				["arcTo", s, 0, s, n, n],
				["lineTo", s, o - n],
				["arcTo", s, o, s - n, o, n],
				["lineTo", s - n, o],
				["arcTo", 0, o, 0, o - n, n],
				["lineTo", 0, n],
				["arcTo", 0, 0, n, 0, n],
				["closePath"]
			], {
				fillStyle: "#00ffff"
			}), e.adView.on(laya.events.Event.MOUSE_OVER, e, e.adBingo), e.adView.on(laya.events.Event.MOUSE_OUT, e, e.adBingo), Laya.stage.addChild(e.adView), e.adLoading = !1
		}, null, !0))
	}, e.prototype.onError = function(t) {
		this.closeAdView()
	}, e.prototype.adViewRunTimer = function() {
		var t = this;
		this.adTimer = setInterval(function() {
			t.adImageLoadEnd && (clearInterval(t.adTimer), t.adView.visible = !0)
		}, 1e3)
	}, e.prototype.vipViewRunTimer = function() {
		var t = this;
		this.adTimer = setInterval(function() {
			window.gameMain && window.gameMain.preloadEnd && (clearInterval(t.adTimer), t.AdTween = new OTween, t.adEnd(), t.AdTween.to(t.vipView, {
				y: t.gGameHeight + 20
			}, 1200, null, OHandler.create(t, function() {
				t.closeVipView(!1)
			}, null, !0), null, !1))
		}, 1e3)
	}, e.prototype.MouseOverJumpVip = function() {
		var t = OrgWeb.getInstance().getUserInfos() || {
			vip_level: 0,
			screen_game_ad: 0
		};
		1 == t.vip_level && 0 == t.screen_game_ad ? e.getInstance().outSitePath = "closeView" : e.getInstance().outSitePath = e.getInstance().silverVip
	}, e.prototype.MouseOutJumpVip = function() {
		e.getInstance().outSitePath = ""
	}, e.prototype.MouseOverAdView = function() {
		e.getInstance().outSitePath = e.getInstance().adurl
	}, e.prototype.MouseOutAdView = function() {
		e.getInstance().outSitePath = ""
	}, e.prototype.vipViewClick = function() {
		this.closeVipView()
	}, e.prototype.closeVipView = function(t) {
		void 0 === t && (t = !0), this.vipView.removeEventLisner(OEvent.CLICK, this, this.vipViewClick), this.vipView.removeSelf(), clearInterval(this.adTimer), this.adTimer = null, t && this.adEnd()
	}, e.prototype.adEnd = function() {
		this.adUIend = !0
	}, e.prototype.closeAdView = function(t) {
		void 0 === t && (t = !0), window.removeEventListener("click", BClick, !1), Laya.loader.off(OEvent.ERROR, this, this.onError), this.adView.removeAllChild(), Laya.stage.removeChild(this.adView), this.outSitePath = "", clearInterval(this.adTimer), this.adTimer = null, this.adLoading = !1, t && this.adEnd()
	}, e.prototype.adBingo = function(t) {
		t.type == laya.events.Event.MOUSE_OVER ? window.addEventListener("click", BClick, !1) : window.removeEventListener("click", BClick, !1)
	}, e
}(OSprite), __extends = this && this.__extends ||
function() {
	var t = Object.setPrototypeOf || {
		__proto__: []
	}
	instanceof Array &&
	function(t, e) {
		t.__proto__ = e
	} ||
	function(t, e) {
		for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
	};
	return function(e, i) {
		function a() {
			this.constructor = e
		}
		t(e, i), e.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a)
	}
}(), UIManager = function(t) {
	function e() {
		var e = t.call(this) || this;
		return e.currentShowView = [], e.message = [], e.textLifeLine = null, e.isShowTextStyle = -1, e.isSCUIShow = !1, e.popMsgMgr = new popmsg.PopMsgMgr, e.msgIndex = 0, e.onTouchMove = !1, e.onTouchDown = !1, e.onTouchLong = !1, e.downTime = 0, e.downLongTime = 0, e.isDispatchLong = !1, e.isStartQuick = !1, e.showQuickEvent = null, e.clickKey = 0, e.limitKey = 0, e.onTouchClick = !1, e.winMap = new Dictionary, e.backgroundLayer = new BackgroundLayer, e.chat = new ChatLayer, e.textLifeLineLayer = new TextLifeLineLayer, e.textChoiceLayer = new TextChoiceLayer, e.effectsLayer = new EffectsLayer, e.sfloatLayer = new SFloatButtonLayer, e.gameAdvanceUILayer = new GameAdvanceUILayer, e.gameSystemUILayer = new GameSystemUILayer, e.orgWebFreeLayer = new OrgWebFree, e.gameLoadLayer = new GameLoadLayer, e.popMessageLayer = new PopMessageLayer, e.maskSprite = new UIMaskSprite, e.addChild(e.backgroundLayer), e.addChild(e.chat), e.addChild(e.textLifeLineLayer), e.addChild(e.textChoiceLayer), e.addChild(e.effectsLayer), e.addChild(e.sfloatLayer), e.addChild(e.gameAdvanceUILayer), e.addChild(e.gameSystemUILayer), e.addChild(e.gameLoadLayer), e.addChild(e.orgWebFreeLayer), e.addChild(e.popMessageLayer), e.addChild(e.maskSprite), e.initListener(), e.initUIComponent(), e.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), Main.LOADCOMPLETE = !0, e
	}
	return __extends(e, t), Object.defineProperty(e.prototype, "currentTalkUI", {
		get: function() {
			return this.message[this.msgIndex]
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.initUIComponent = function() {
		this.message = new Array(3);
		for (var t = 0; t < this.message.length; t++) this.message[t] = new talk.TextMessageUI, this.message[t].visible = !1, this.textLifeLineLayer.addChild(this.message[t]);
		this.textDif = new textChoice.TextDifUI, this.textChoiceLayer.addChild(this.textDif), 1 == SFloatButtonUI.floatStatus && SFloatButtonUI.getInstance().showUI()
	}, e.prototype.showFreeUI = function() {
		this.showView(this.orgWebFreeLayer, OrgWebFree.NAME)
	}, e.prototype.createLifeLine = function(t) {
		null == this.textLifeLine ? (this.textLifeLine = new lifeline.TextLifeLineUI(t), this.textLifeLineLayer.addChild(this.textLifeLine)) : this.textLifeLine.updateViewArgv(t)
	}, e.prototype.createChatUI = function(t) {
		this.chat.getChatList(t.data.Argv[0] - 1).initChat(t)
	}, e.prototype.disposeLifeLine = function() {
		this.textLifeLine && (this.textLifeLine.dispose(), this.textLifeLine = null)
	}, e.prototype.removeUIComponent = function() {
		for (var t = 0; t < this.message.length; t++) this.message[t].dispose();
		this.message = null, this.textDif.dispose(), this.textChoiceLayer.removeChild(this.textDif), this.removeAllChild()
	}, e.prototype.hideAllTextMessage = function() {
		if (!this.message) return void(this.msgIndex = 0);
		for (var t = 0; t < this.message.length; t++) this.message[t].hide();
		this.msgIndex = 0
	}, Object.defineProperty(e.prototype, "orgDissent", {
		get: function() {
			return this._orgDissent || (this._orgDissent = new OrgDissent), this._orgDissent
		},
		enumerable: !0,
		configurable: !0
	}), e.prototype.dispose = function() {
		this.popMsgMgr.refresh(), this.popMsgMgr = null, this._orgDissent && this.orgDissent.dispose(), this.longEvent && (this.longEvent = null), this._orgDissent = null, Main.LOADCOMPLETE = !1, this.removeAllListener(), this.removeUIComponent(), this.cleanGameView(), this.textDif = null, this.gameAdvanceUILayer = null, this.gameLoadLayer = null, this.backgroundLayer = null, this.textLifeLineLayer = null, this.textChoiceLayer = null, this.gameAdvanceUILayer = null, this.gameSystemUILayer = null, this.gameLoadLayer = null, this.popMessageLayer = null, this.orgWebFreeLayer = null, this.parent.removeChild(this), clearInterval(this.clickKey), clearInterval(this.longkey), e._instance = null
	}, e.prototype.initListener = function() {
		clearTimeout(this.limitKey), this.on(Laya.Event.MOUSE_DOWN, this, this.mouseDown), this.on(Laya.Event.MOUSE_UP, this, this.mouseUp), this.on(Laya.Event.MOUSE_MOVE, this, this.mouseMove), this.on(Laya.Event.CLICK, this, this.mouseClick), this.on(Laya.Event.BLUR, this, this.mouseUp), this.on(Laya.Event.MOUSE_OUT, this, this.mouseUp)
	}, e.prototype.removeAllListener = function() {
		this.off(Laya.Event.MOUSE_DOWN, this, this.mouseDown), this.off(Laya.Event.MOUSE_UP, this, this.mouseUp), this.off(Laya.Event.MOUSE_MOVE, this, this.mouseMove), this.off(Laya.Event.CLICK, this, this.mouseClick), this.off(Laya.Event.BLUR, this, this.mouseUp), this.off(Laya.Event.MOUSE_OUT, this, this.mouseUp)
	}, e.prototype.startQuickRun = function() {
		return this.hasViewShow() || this.isSCUIShow || 1 == view.PaySendUI.showUI || 1 == ORGMenuUI.showUI || GloableData.getInstance().isPreLoad ? void this.cancleLongDown() : (this.onTouchLong = !0, void(this.isDispatchLong || (OrgWeb.getInstance().getIsPC() ? this.setQuick() : (this.showQuickEvent || (this.showQuickEvent = new GameEvent(GameEventConstant.SHOW_QUICK_ICON, {
			callback: this.setQuick.bind(this)
		})), this.isDispatchLong = !0, EventCenter.dispatchEvent(this.showQuickEvent)))))
	}, e.prototype.setQuick = function() {
		this.isStartQuick = !0, GloableData.getInstance().quickRun = !0, this.longEvent || (this.longEvent = new GameEvent(GameEventConstant.LONG_DOWN_EVENT)), this.isDispatchLong = !0, EventCenter.dispatchEvent(this.longEvent)
	}, e.prototype.mouseDown = function(t) {
		var e = this;
		return this.orgDissent.mouseDown(t), this.onTouchDown = !0, this.onTouchClick = !0, this.FFCancelled = !1, t && (this.ffX = this.onTouchX = t.stageX, this.ffY = this.onTouchY = t.stageY, this.chat.mouseDown(t)), 1 == view.PaySendUI.showUI || 1 == ORGMenuUI.showUI || this.hasViewShow() || GloableData.getInstance().isPreLoad ? void this.cancleLongDown() : void(this.isSCUIShow || (clearInterval(this.clickKey), this.isStartQuick || (clearInterval(this.longkey), this.longkey = setInterval(function() {
			e.onTouchDown && (0 == e.downTime ? e.downTime = (new Date).getTime() : (e.downLongTime += (new Date).getTime() - e.downTime, e.downTime = (new Date).getTime()), e.downLongTime > 500 && (e.backgroundLayer && e.backgroundLayer.completeTween(), e.isDispatchLong || e.startQuickRun()))
		}, 40, [this.downTime, this.downLongTime]))))
	}, e.prototype.cancleLongDown = function() {
		clearInterval(this.longkey), this.longkey = null, this.isDispatchLong = !1, GloableData.getInstance().autoPlay = GloableData.getInstance().dGameSystem.autoRun, GloableData.getInstance().quickRun = GloableData.getInstance().dGameSystem.quickRun, this.downLongTime = 0, this.downTime = 0, this.onTouchLong = !1, EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LONG_DOWN_CANCEL_BY_MOVINE_EVENT)), this.FFCancelled = !0
	}, e.prototype.clickLimit = function() {}, e.prototype.mouseUp = function(t) {
		this.orgDissent.mouseUp(t), this.isStartQuick = !1, this.onTouchClick = !1, this.onTouchDown = !1, clearInterval(this.longkey), this.longkey = null, this.isDispatchLong = !1, GloableData.getInstance().autoPlay = GloableData.getInstance().dGameSystem.autoRun, GloableData.getInstance().quickRun = GloableData.getInstance().dGameSystem.quickRun, e.getInstance().gameLoadLayer.hideFFIcon(), this.downLongTime = 0, this.downTime = 0, this.onTouchLong = !1, t && (this.onTouchX = t.stageX, this.onTouchY = t.stageY, this.chat.mouseUp(t)), this.clickLimit()
	}, e.prototype.mouseMove = function(t) {
		this.onTouchMove = !0, this.onTouchX = t.stageX, this.onTouchY = t.stageY, this.chat.getCurrentChatList().length > 0 && this.moveIsCancleQuick(t)
	}, e.prototype.moveIsCancleQuick = function(t) {
		this.onTouchLong && Math.pow(this.ffX - t.stageX, 2) + Math.pow(this.ffY - t.stageY, 2) > 225 && this.cancleLongDown()
	}, e.prototype.mouseClick = function(t) {
		this.onTouchX = t.stageX, this.onTouchY = t.stageY, this.chat.openMsg(), this.chat.clickChatView(t), this.onTouchMove = !1, this.clickLimit()
	}, e.prototype.getClick = function() {
		return this.onTouchClick
	}, e.getInstance = function() {
		return null == e._instance && (e._instance = new e), e._instance
	}, e.prototype.getIsMainView = function() {
		for (var t = 0; t < this.currentShowView.length; t++) {
			this.currentShowView[t]
		}
		return !0
	}, e.prototype.showView = function(t, i, a) {
		void 0 === a && (a = !0), this.winMap.containsKey(i) || (e.getInstance().gameSystemUILayer.setMenuVisible(!1), e.getInstance().orgWebFreeLayer.setTimeBackV(!1), this.currentShowView.push(i), this.winMap.add(i, t), i.indexOf("SCustomUI") > -1 ? this.gameAdvanceUILayer.addChild(t) : i.indexOf("SFloatButtonUI") > -1 ? this.sfloatLayer.addChild(t) : i.indexOf("MallLockView") > -1 ? this.popMessageLayer.addChild(t) : i.indexOf("SaveFileGuideMediator") > -1 ? this.popMessageLayer.addChild(t) : this.gameSystemUILayer.addChild(t), this.isSCUIShow = !0, a ? t.show() : t.hide())
	}, e.prototype.showViewByMediatorName = function(t) {
		if (this.winMap.containsKey(t)) {
			var e = this.winMap.getValue(t);
			e.show()
		}
	}, e.prototype.closeAllView = function(t) {
		for (void 0 === t && (t = !1); this.currentShowView.length > 0;) {
			var e = this.currentShowView.shift();
			"SFloatButtonUI" !== e && this.closeView(e, !1)
		}
		return t && this.currentShowView.length <= 0 ? void GloableData.getInstance().currentLine.resume() : void 0
	}, e.prototype.hasVeiw = function(t) {
		var e = this.winMap.getValue(t);
		return !!e
	}, e.prototype.getViewByName = function(t) {
		var e = this.winMap.getValue(t);
		return e ? e : null
	}, e.prototype.hideView = function(t) {
		var e = this.winMap.getValue(t);
		e && e.hide()
	}, e.prototype.hideAllView = function() {
		var t, e = this.currentShowView.length;
		for (t = 0; e > t; t++) {
			var i = this.currentShowView[t];
			this.hideView(i)
		}
	}, e.prototype.showAllView = function() {
		var t, e = this.currentShowView.length;
		for (t = 0; e > t; t++) {
			var i = this.currentShowView[t];
			this.showViewByMediatorName(i)
		}
	}, e.prototype.cleanGameView = function() {
		this.closeAllView(), this.unView && this.unView.dispose(), this.orgWebFreeLayer.dispose(), this.effectsLayer.dispose(), this.gameAdvanceUILayer.removeChildren(), this.gameLoadLayer.removeChildren(), this.backgroundLayer.dispose(), this.textLifeLineLayer.removeChildren(), this.textChoiceLayer.removeChildren(), this.gameAdvanceUILayer.removeChildren(), this.gameSystemUILayer.dispose(), this.gameLoadLayer.removeChildren(), this.popMessageLayer.removeChildren()
	}, e.prototype.closeView = function(t, i, a) {
		if (void 0 === i && (i = !0), void 0 === a && (a = !0), this.winMap.containsKey(t)) {
			var n = this.winMap.getValue(t);
			if (n.hide(), AppFacade.getInstance().delMediatorByName(t), this.winMap.remove(t), n.parent && n.parent.removeChild(n), GloableData.getInstance().isShowSysMenu) {
				var s = this.winMap.getValue(view.SysMenuUIMediator.NAME);
				s && (s.visible = !0)
			}
			var o = void 0;
			n.eventLine && n.eventLine.story && (o = n.eventLine), n.dispose(), this.hasViewShow(), i && (o && o.story ? o.resume() : this.hasViewShow() || GloableData.getInstance().currentLine.resume())
		}
		e.getInstance().orgWebFreeLayer.setTimeBackV(!0), e.getInstance().gameSystemUILayer.setMenuVisible(!0)
	}, e.prototype.hasViewShow = function() {
		for (var t in this.winMap.keys()) if ("SFloatButtonUI" !== this.winMap.keys()[t]) return this.isSCUIShow = !0, !0;
		return this.isSCUIShow = !1, !1
	}, e.prototype.pauseTween = function() {
		this.backgroundLayer && this.backgroundLayer.pauseTween();
		var t = AppFacade.getInstance().getMediatorByName(view.TitleUIMediator.NAME);
		t && t.view.pauseTween()
	}, e.prototype.resumeTween = function() {
		this.backgroundLayer && this.backgroundLayer.resumeTween();
		var t = AppFacade.getInstance().getMediatorByName(view.TitleUIMediator.NAME);
		t && t.view.resumeTween()
	}, e.prototype.updateIf = function(t) {
		this.ifEvetn = t
	}, e.prototype.saveData = function(t) {}, e.prototype.loadData = function(t) {}, e.prototype.loadLifeData = function(t) {}, e.prototype.refreshGameCompent = function() {
		e.getInstance().gameAdvanceUILayer.refreshUI(), 1 == SFloatButtonUI.floatStatus && e.getInstance().sfloatLayer.refreshUI()
	}, e.prototype.setShakeEvent = function(t) {
		this.effectsLayer && this.effectsLayer.setShakeData(t.prower, t.speed, t.loop, t.time)
	}, e.prototype.setChatUIData = function(t) {}, e.prototype.setChatUIItem = function(t) {}, e.prototype.showViewByIndex = function(t, i, a) {
		var n;
		n = a ? a : view.SCustomUI.F_Index;
		var s;
		switch (t) {
		case 10001:
			e.getInstance().closeAllView(!1), s = new view.SysMenuUI(n), this.showView(s, view.SysMenuUIMediator.NAME);
			break;
		case 10002:
			s = new view.ReplayUI(n), this.showView(s, view.ReplayUIMediator.NAME);
			break;
		case 10003:
			s = new view.CGUI(!1, n), this.showView(s, view.CGUIMediator.NAME);
			break;
		case 10004:
			s = new view.BGMUI(!1, n), this.showView(s, view.BGMUIMediator.NAME);
			break;
		case 10005:
			s = new view.SaveFileUI(!1, !0, n), this.showView(s, view.SaveFileUIMediator.NAME);
			break;
		case 10006:
			s = new view.SaveFileUI(!1, !1, n), this.showView(s, view.SaveFileUIMediator.NAME);
			break;
		case 10007:
			s = new view.SettingUI(n), this.showView(s, view.SettingUIMediator.NAME);
			break;
		case 10008:
			this.closeAllView(!0);
			break;
		case 10009:
			GloableData.getInstance().autoPlay ? GloableData.getInstance().autoPlay = !1 : GloableData.getInstance().autoPlay = !0, this.closeAllView(!0);
			break;
		case 10010:
			s = new view.GameMallUI, this.showView(s, view.GameMallMediator.NAME);
			break;
		case 10011:
			s = new view.CollectSystemUI, this.showView(s, view.CollectSystemUIMediator.NAME);
			break;
		default:
			this.closeAllView(), view.SCustomUI.getInstance().showUI(t), view.SCustomUI.getInstance().eventLine = GloableData.getInstance().currentLine
		}
	}, e._instance = null, e
}(OSprite), playerVer = "2.2.107.1220", Main = function() {
	function t() {
		this.isBlur = !1, this.isFocus = !0, this.wmodNum = 0, this.preloadEnd = !1, this.objs = []
	}
	return t.prototype.loadInitBinComplete = function() {
		EventCenter.removeEventListener(GameEventConstant.LOAD_INIT_BIN_COMPLETE, this, this.loadInitBinComplete), EventCenter.addEventListener(GameEventConstant.INIT_DMAIN_COMPLETE, this, this.onLoaded), LoadAssets.getInstance().loadGameBin()
	}, t.prototype.stageBlur = function() {
		OrgWeb.getInstance().getIsPC() || "ANDROID" == OrgWeb.getInstance().getOrgPlat() ? OrgWeb.getInstance().getIsPC() || UIManager._instance && UIManager.getInstance().mouseUp() : UIManager._instance && (EventCenter.dispatchEvent(new GameEvent(GameEventConstant.STAGE_BLUR)), UIManager.getInstance().pauseTween(), TimeManager.getInstance().pauseTime(), UIManager.getInstance().mouseUp(), this.isBlur = !0, this.isFocus = !1)
	}, t.prototype.stageFocus = function() {
		this.isFocus || OrgWeb.getInstance().getIsPC() || "ANDROID" == OrgWeb.getInstance().getOrgPlat() || UIManager._instance && (EventCenter.dispatchEvent(new GameEvent(GameEventConstant.STAGE_ONFOCUS)), UIManager.getInstance().resumeTween(), TimeManager.getInstance().resumeTime(), this.isFocus = !0, this.isBlur = !1)
	}, t.prototype.onLoaded = function() {
		try {
			var t = OrgWeb.getInstance().getUid();
			GloableData.getInstance().savekey = "save" + GloableData.getInstance().gameMainData.Headr.guid + t, EventCenter.removeEventListener(GameEventConstant.INIT_DMAIN_COMPLETE, this, this.onLoaded), GloableData.getInstance().dGameSystem.varsEx.loadExData(), GloableData.getInstance().dGameSystem.other.loadBGMData(), GloableData.getInstance().dGameSystem.other.loadCGData(), GloableData.getInstance().fontBitmapData = new data.DBitmapFontData, GloableData.getInstance().fontBitmapData.startLoad(this, this.loadFontComplete)
		} catch (e) {
			console.log(e)
		}
	}, t.prototype.loadWmodModBin = function(t, e) {
		var i = this;
		void 0 === e && (e = !1);
		var a = GetQueryString("ver"),
			n = HttpURL.WMOD_RES_SERVER_URL + "modbin/" + t + "/debug/" + a + "/" + md5(t);
		GloableData.getInstance().wmodUseType = "wmod", ORG.loader.load(n, OHandler.create(this, function(t) {
			var a = new GameByte(t);
			i.loadWmodBinComplete(a), a.clear(), e && i.startGame()
		}), OHandler.create(this, null, null, !1), OLoader.BUFFER, 0, !1)
	}, t.prototype.loadGroupBin = function(t) {
		var e = this,
			i = GetQueryString("groupver");
		GloableData.getInstance().wmodUseType = "group";
		var a = HttpURL.WMOD_RES_SERVER_URL + "groupbin/" + t + "/online/" + i + "/group.bin";
		ORG.loader.load(a, OHandler.create(this, function(t) {
			e.loadGroupBinComplete(t)
		}), OHandler.create(this, null, null, !1), OLoader.JSON, 0, !1)
	}, t.prototype.loadGroupBinComplete = function(t) {
		var e = this;
		GloableData.getInstance().wmodGroup || (GloableData.getInstance().wmodGroup = new Dictionary);
		for (var i = [], a = 0; a < t.list.length; a++) {
			var n = t.list[a].roleName;
			GloableData.getInstance().wmodGroup.add(n, t.list[a].wmodId);
			var s = HttpURL.WMOD_RES_SERVER_URL + t.list[a].modUrl;
			i.indexOf(s) > -1 || i.push(HttpURL.WMOD_RES_SERVER_URL + t.list[a].modUrl)
		}
		for (var a = 0; a < i.length; a++) ORG.loader.load(i[a], OHandler.create(this, function(t) {
			e.wmodNum++;
			var a = new GameByte(t);
			e.loadWmodBinComplete(a), e.wmodNum == i.length && e.startGame()
		}), OHandler.create(this, null, null, !1), OLoader.BUFFER, 0, !1)
	}, t.prototype.loadModBinArrComplete = function(t) {
		for (var e = 0; e < t.length; e++) {
			var i = new GameByte(ORG.loader.getRes(t[e]));
			this.loadWmodBinComplete(i), i.clear(), ORG.loader.clearRes(t[e])
		}
		this.startGame()
	}, t.prototype.loadFontComplete = function() {
		if (!GloableData.getInstance().gameInfo.isPc) {
			var t = GetQueryString("groupid"),
				e = GetQueryString("wid");
			return void(t ? (GloableData.getInstance().groupID = t, this.loadGroupBin(t)) : e ? this.loadWmodModBin(e, !0) : this.startGame())
		}
		this.startGame()
	}, t.prototype.loadWmodBinComplete = function(t) {
		var e = new data.DWmodData(t);
		GloableData.getInstance().wmodList.add(e.id, e), OrgWeb.getInstance().upTrafficFileNum(t.length, 1, GloableData.getInstance().groupID, e.id)
	}, t.prototype.startGame = function() {
		GloableData.getInstance().gameInfo.isPc ? this.enterGame() : OrgWeb.getInstance().getIsClient() ? OrgWeb.getInstance().sendReWidFlower(this.enterGame.bind(this)) : EventCenter.dispatchEvent(new GameEvent(GameEventConstant.LOADING_BAR_GB_COMPLETE))
	}, t.prototype.enterGame = function() {
		if (Laya.stage.size(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight), OrgWeb.getInstance().getPlatForm() || "WEB" != OrgWeb.getInstance().getOrgPlat() || GloableData.getInstance().gameInfo.isPc || window.parent.NewGame && window.parent.NewGame.canvasGameLoadComplete && window.parent.NewGame.canvasGameLoadComplete(), this.loadingLayer && (this.loadingLayer.dispose(), delete this.loadingLayer, ADUI.getInstance().adImageLoadEnd && ADUI.getInstance().closeAdView(), ADUI.getInstance().destroy(!0), delete ADUI._instance), Laya.stage.addChild(UIManager.getInstance()), OrgWeb.getInstance().getIsUnaudited() && (UIManager.getInstance().unView = new view.UnauditedTextView, Laya.stage.addChild(UIManager.getInstance().unView)), TimeManager.getInstance().start(), GloableData.getInstance().hasFileItem("data/mall.bin") && GloableData.getInstance().getFileItem("data/mall.bin")) {
			var t = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
			t.getUserBuyAllItem(), t.getGameFlower()
		}
		GloableData.getInstance().reSaveData(), GloableData.getInstance().gameMainData.System.SkipTitle ? (UIManager.getInstance().orgWebFreeLayer.getFreeTime(), GloableData.getInstance().iMain.jumpStoryCallBack(GloableData.getInstance().gameMainData.System.StartStoryId)) : UIManager.getInstance().showView(new view.TitleUI, view.TitleUIMediator.NAME)
	}, t.prototype.setStage = function() {
		if (Config.isAntialias = !0, OrgWeb.getInstance().getIsPC()) Laya.init(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight);
		else try {
			Laya.init(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight, Laya.WebGL)
		} catch (t) {
			Laya.init(GloableData.getInstance().gameInfo.gGameWidth, GloableData.getInstance().gameInfo.gGameHeight)
		}
		mgr.AudioMgr.instance.init(), laya.resource.ResourceManager.systemResourceManager.autoRelease = !0, OrgWeb.getInstance().getIsPC() ? laya.resource.ResourceManager.systemResourceManager.autoReleaseMaxSize = 536870912 : (Laya.stage.frameRate = "slow", laya.webgl.atlas.AtlasResourceManager.atlasLimitWidth = 128, laya.webgl.atlas.AtlasResourceManager.atlasLimitHeight = 128, laya.resource.ResourceManager.systemResourceManager.autoReleaseMaxSize = 33554432), OrgWeb.getInstance().getIsPC() || (GloableData.getInstance().gameInfo.gGameWidth > GloableData.getInstance().gameInfo.gGameHeight ? Laya.stage.screenMode = laya.display.Stage.SCREEN_HORIZONTAL : Laya.stage.screenMode = laya.display.Stage.SCREEN_VERTICAL), Laya.stage.scaleMode = Laya.Stage.SCALE_SHOWALL, Laya.stage.alignH = "center", Laya.stage.alignV = "middle", Laya.stage.bgColor = "#000000", Laya.stage.on(OEvent.BLUR, this, this.stageBlur), Laya.stage.on(OEvent.FOCUS, this, this.stageFocus), Laya.stage.on(OEvent.KEY_DOWN, this, OnKeyDown), Laya.stage.on(OEvent.KEY_UP, this, OnKeyUp), Laya.stage.on(OEvent.MOUSE_OUT, this, OnKeyUp), Laya.stage.on(OEvent.MOUSE_DOWN, this, this.stageFocus)
	}, t.prototype.stageResize = function() {
		GloableData.getInstance().gameInfo.gGameWidth < GloableData.getInstance().gameInfo.gGameHeight && (window.innerWidth > window.innerHeight ? Laya.stage.screenMode = laya.display.Stage.SCREEN_HORIZONTAL : window.innerWidth == window.innerHeight ? GloableData.getInstance().gameInfo.gGameWidth > GloableData.getInstance().gameInfo.gGameHeight || OrgWeb.getInstance().getIsPC() ? Laya.stage.screenMode = laya.display.Stage.SCREEN_HORIZONTAL : Laya.stage.screenMode = laya.display.Stage.SCREEN_VERTICAL : GloableData.getInstance().gameInfo.gGameWidth > GloableData.getInstance().gameInfo.gGameHeight ? Laya.stage.screenMode = laya.display.Stage.SCREEN_HORIZONTAL : Laya.stage.screenMode = laya.display.Stage.SCREEN_VERTICAL)
	}, t.prototype.testFun = function() {
		var t = new OImage;
		t.x = t.y = 200, t.loadImage("res/cloud/lChange1_web.png"), Laya.stage.addChild(t)
	}, t.prototype.initGameData = function(t, e, i, a, n, s, o, r, h) {
		void 0 === t && (t = ""), void 0 === e && (e = 0), void 0 === i && (i = ""), void 0 === a && (a = ""), void 0 === n && (n = 0), void 0 === s && (s = ""), void 0 === o && (o = 0), void 0 === r && (r = 0), void 0 === h && (h = ""), 31 != n && (n = 32), GloableData.getInstance().init(), i.length > 0 && i.indexOf("android") > -1 && (i = "aBox");
		window.document.location.href.toString();
		if (GloableData.getInstance().isORGnew = window.commonPlayer && "" !== window.commonPlayer.channel_id && "0" !== window.commonPlayer.channel_id, GloableData.getInstance().isORGnew) {
			var l = [1, 2, 3, 4, 7, 9];
			l.indexOf(parseInt(window.commonPlayer.platform)) > -1 && (GloableData.getInstance().isM = !0)
		} else "isFlash" !== i && (GloableData.getInstance().isM = !0);
		if (GloableData.getInstance().mark = i, AppFacade.getInstance().startUp(), OrgWeb.getInstance().webInit(this, this.webInitOk), 3 == o ? (GloableData.getInstance().gameInfo.gGameWidth = 540, GloableData.getInstance().gameInfo.gGameHeight = 960) : 0 == o ? (GloableData.getInstance().gameInfo.gGameWidth = 800, GloableData.getInstance().gameInfo.gGameHeight = 600) : 2 == o ? (GloableData.getInstance().gameInfo.gGameWidth = 1280, GloableData.getInstance().gameInfo.gGameHeight = 720) : (GloableData.getInstance().gameInfo.gGameWidth = 960, GloableData.getInstance().gameInfo.gGameHeight = 540), this.setStage(), OrgWeb.getInstance().getIsPC()) {
			var c = void 0;
			s && (c = parseInt(s.split("/")[2])), c != Math.ceil(e) && (s = "")
		} else if (window.location.href.indexOf("debug-") > -1 || window.location.href.indexOf("test-") > -1) {
			var c = void 0;
			s && (c = parseInt(s.split("/")[2])), c != Math.ceil(e) && (s = "")
		}
		this.setGameConfig(t, n, e, s, r, i), GloableData.getInstance().gameInfo.isPc || (EventCenter.addEventListener(GameEventConstant.LOADING_BAR_COMPLETE, this, this.enterGame), Laya.stage.addChild(this.loadingLayer = new LoadingLayer)), h && this.gameLogUpdate(), GloableData.getInstance().gameInfo.isPc || GloableData.getInstance().isORGnew || OrgWeb.getInstance().getLoginStatus() && HPLockProxy.getInstance().init(), "" == GloableData.getInstance().initUserName && (GloableData.getInstance().initUserName = OrgWeb.getInstance().getUserInitName()), GloableData.getInstance().initUserId || (GloableData.getInstance().initUserId = OrgWeb.getInstance().getUid()), GloableData.getInstance().reportorError.upInit()
	}, t.prototype.webInitOk = function(t) {}, t.prototype.gameLogUpdate = function() {}, t.prototype.replceNoPath = function(t) {
		return t.indexOf("//") > -1 ? (t = t.replace("//", "/"), this.replceNoPath(t)) : t.indexOf("\\\\") > -1 ? (t = t.replace("\\\\", "/"), this.replceNoPath(t)) : t
	}, t.prototype.setGameConfig = function(t, e, i, a, n, s) {
		void 0 === t && (t = ""), void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === a && (a = ""), void 0 === n && (n = 0), void 0 === s && (s = "");
		var o, r = window.document.location.href.toString(),
			h = r.split("/");
		if (o = isNaN(parseInt(h[h.length - 1].split("?")[0])) ? parseInt(h[h.length - 2].split("?")[0]) : parseInt(h[h.length - 1].split("?")[0]), GloableData.getInstance().gameInfo.game_bin_path = a, -1 !== r.indexOf("/bin/index.html") ? GloableData.getInstance().gameInfo.gIndex = n : GloableData.getInstance().gameInfo.gIndex = parseInt(o), GetQueryString("test") && -1 != GetQueryString("test").indexOf("tls") && (GloableData.getInstance().gameInfo.gIndex = parseInt(GetQueryString("g"))), GloableData.getInstance().tempData) {
			GloableData.getInstance().gameInfo.isPc = !0;
			var l = decodeURIComponent(GloableData.getInstance().tempData.ProjectPath);
			l = this.replceNoPath(l), HttpURL.LocalPath = l
		}
		if (GloableData.getInstance().gameInfo.isPc) GloableData.getInstance().gameInfo.quality = 0, GloableData.getInstance().gameInfo.guid = "", this.loadInitBinComplete();
		else {
			EventCenter.addEventListener(GameEventConstant.LOAD_INIT_BIN_COMPLETE, this, this.loadInitBinComplete);
			var c = GetQueryString("quality");
			"0" == c && (c = "32"), "31" == c || "32" == c ? GloableData.getInstance().gameInfo.quality = c : GloableData.getInstance().gameInfo.quality = e, GloableData.getInstance().gameVer = i, GloableData.getInstance().gameInfo.guid = t, GloableData.getInstance().gameInfo.game_bin_path = a, GloableData.getInstance().sceneUI = new LoadMapBin, GloableData.getInstance().sceneUI.load()
		}
	}, t.LOADCOMPLETE = !1, t
}();
window.gameMallCancelPay = function(t, e) {
	UIManager.getInstance().resumeTween(), TimeManager.getInstance().resumeTime();
	var i = AppFacade.getInstance().getProxyByName(MallProxy.NAME);
	t ? (UIManager.getInstance().maskSprite.hide(), i && clearInterval(i.timeKey), UIManager.getInstance().hasVeiw("MallLockView") && UIManager.getInstance().closeView("MallLockView", !0)) : i && (i.sendTime = 0, i.timeKey && clearTimeout(i.timeKey), i.getBuyItemInfo(e))
}, window.document.onmouseout = function(t) {
	Main.LOADCOMPLETE && UIManager.getInstance().mouseUp()
}, window.document.onmouseover = function() {
	Main.LOADCOMPLETE && window.focus()
};